<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="SHAOJIE&#039;S BOOK"><meta property="og:url" content="http://icarus.shaojiemike.top/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://icarus.shaojiemike.top/img/og_image.png"><meta property="article:author" content="Shaojie Tan"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://icarus.shaojiemike.top/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top"},"headline":"SHAOJIE'S BOOK","image":["http://icarus.shaojiemike.top/img/og_image.png"],"author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-10-16T22:59:01.000Z" title="10/16/2023, 10:59:01 PM">2023-10-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-10-22T04:05:40.446Z" title="10/22/2024, 4:05:40 AM">2024-10-22</time></span><span class="level-item"><a class="link-muted" href="/categories/Overview/">Overview</a></span><span class="level-item">20 minutes read (About 3053 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/10/16/Thinking/0-ColorfulLife/">Colorful Life (TOP)</a></p><div class="content"><article class="message is-info">
        <div class="message-header"><p><i class="fa-solid fa-clipboard mr-2"></i>导言</p>
</div>
        <div class="message-body">
            <p>每当到了人生的重要的十字路口的时候，人们总会思考想将自己的人生画成什么样子。高考完选志愿，本科毕业时是保研出国还是工作的路口时，我都觉得我对自己，对这个世界不够了解，把这个问题跳过了。但是研究生要毕业了，我总算想清楚了What i want。（虽然有点晚了，但至少我没有骗自己。</p>

        </div>
    </article></div><a class="article-more button is-small is-size-7" href="/2023/10/16/Thinking/0-ColorfulLife/#more">Read more</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-10-16T16:00:00.000Z" title="10/16/2023, 4:00:00 PM">2023-10-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-10-22T04:05:40.474Z" title="10/22/2024, 4:05:40 AM">2024-10-22</time></span><span class="level-item"><a class="link-muted" href="/categories/tips/">tips</a></span><span class="level-item">36 minutes read (About 5375 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/10/16/Work/Top/">Top</a></p><div class="content"><article class="message is-info">
        <div class="message-header"><p><i class="fa-solid fa-clipboard mr-2"></i>导言</p>
</div>
        <div class="message-body">
            <p>原本是想写些网站建设的计划(但别人关心的只是他们搜索的内容)。所以就讲讲所在的团队吧（每个人都关心自己的下一站在哪里）</p>

        </div>
    </article></div><a class="article-more button is-small is-size-7" href="/2023/10/16/Work/Top/#more">Read more</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-10-16T16:00:00.000Z" title="10/16/2023, 4:00:00 PM">2023-10-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-10-22T04:05:40.474Z" title="10/22/2024, 4:05:40 AM">2024-10-22</time></span><span class="level-item"><a class="link-muted" href="/categories/tips/">tips</a></span><span class="level-item">a minute read (About 211 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/10/16/Work/tectPeopleBlog2Follow/">Subscribe</a></p><div class="content"><article class="message is-info">
        <div class="message-header"><p><i class="fa-solid fa-clipboard mr-2"></i>导言</p>
</div>
        <div class="message-body">
            <p>Follow学术大牛， 和阅读前沿技术博客 是科研探索的乐趣所在。</p>

        </div>
    </article></div><a class="article-more button is-small is-size-7" href="/2023/10/16/Work/tectPeopleBlog2Follow/#more">Read more</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-10-16T01:54:23.000Z" title="10/16/2023, 1:54:23 AM">2023-10-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-10-22T04:05:40.478Z" title="10/22/2024, 4:05:40 AM">2024-10-22</time></span><span class="level-item"><a class="link-muted" href="/categories/ProjectRecord/">ProjectRecord</a></span><span class="level-item">a minute read (About 175 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/10/16/Work/Miscellaneous/PLAN/PTA/">[DevLog] PLAN</a></p><div class="content"><article class="message is-info">
        <div class="message-header"><p><i class="fa-solid fa-clipboard mr-2"></i>导言</p>
</div>
        <div class="message-body">
            <p>项目展望与机遇小结</p>

        </div>
    </article>

<h2 id="241016"><a href="#241016" class="headerlink" title="241016"></a>241016</h2><ul>
<li>可做的内容(NPU支持)<ul>
<li>Pytorch官方库：torchao、torchtune、torchtitan</li>
<li>Pytorch官方特性：原生支持并行能力，Dtensor</li>
<li>Pytorch三方库</li>
</ul>
</li>
<li>困境<ul>
<li>新特性&#x2F;库的代码不稳定，现在支持之后变动可能会很大</li>
<li>由于人手和机器不足，余下的三方库很多，但是支持的必要性有待验证。客户的呼声不明，没有特别急用的库(之前适配过了)。</li>
<li>提前跟进库的适配，如果跟进过多，会导致后续持续看护库的人员压力会很大。</li>
</ul>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-10-16T01:48:45.000Z" title="10/16/2023, 1:48:45 AM">2023-10-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-10-22T04:05:40.402Z" title="10/22/2024, 4:05:40 AM">2024-10-22</time></span><span class="level-item"><a class="link-muted" href="/categories/toLearn/">toLearn</a></span><span class="level-item">3 minutes read (About 391 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/10/16/OutOfWork/3-homepage/blogWebsiteBuilderOrSSG/3-mkdocs/">Mkdocs</a></p><div class="content"><article class="message is-info">
        <div class="message-header"><p><i class="fa-solid fa-clipboard mr-2"></i>导言</p>
</div>
        <div class="message-body">
            <p>mkdocs在今年支持了blog的基本功能，而且已经有探路者实践过了[^1]。也是时候升级博客生成器了。</p>

        </div>
    </article></div><a class="article-more button is-small is-size-7" href="/2023/10/16/OutOfWork/3-homepage/blogWebsiteBuilderOrSSG/3-mkdocs/#more">Read more</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-10-15T16:00:00.000Z" title="10/15/2023, 4:00:00 PM">2023-10-15</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-10-22T04:05:40.474Z" title="10/22/2024, 4:05:40 AM">2024-10-22</time></span><span class="level-item"><a class="link-muted" href="/categories/Values/">Values</a></span><span class="level-item">a minute read (About 146 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/10/15/Work/researchoutline/">Research outline</a></p><div class="content"><h2 id="李向阳讲座-研一"><a href="#李向阳讲座-研一" class="headerlink" title="李向阳讲座(研一)"></a>李向阳讲座(研一)</h2><!-- ![](https://pic.shaojiemike.top/img/IMG_20210912_153414.jpg)
![](https://pic.shaojiemike.top/img/IMG_20210912_153024.jpg) -->

<table>
<thead>
<tr>
<th>en</th>
<th>cn</th>
</tr>
</thead>
<tbody><tr>
<td>Knowledgeable</td>
<td>知己知彼 Be Skeptical</td>
</tr>
<tr>
<td>Independent</td>
<td>自己拥有研究</td>
</tr>
<tr>
<td>Smart</td>
<td>透过观象看本质</td>
</tr>
<tr>
<td>Soft</td>
<td>三人行必有我师</td>
</tr>
</tbody></table>
<p>科研，我们需要关注什么？</p>
<ol>
<li>热点\痛点\盲点</li>
<li>有用、有桃战、可为的事情</li>
</ol>
<h2 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h2><p>做项目的时候，一定要有测试程序跑，才能正向反馈。提高积极性，明确方向。</p>
<h2 id="读论文"><a href="#读论文" class="headerlink" title="读论文"></a>读论文</h2><p>读论文，要多篇，提炼overview 抓住立足点，创新点和展望</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-10-15T16:00:00.000Z" title="10/15/2023, 4:00:00 PM">2023-10-15</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-10-22T04:05:40.546Z" title="10/22/2024, 4:05:40 AM">2024-10-22</time></span><span class="level-item"><a class="link-muted" href="/categories/Algorithms/">Algorithms</a></span><span class="level-item">4 minutes read (About 587 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/10/15/Work/Algorithms/C-AMAT/">Concurrent-AMAT, C-AMAT </a></p><div class="content"><h2 id="并发式平均存储访问时间模型"><a href="#并发式平均存储访问时间模型" class="headerlink" title="并发式平均存储访问时间模型"></a>并发式平均存储访问时间模型</h2><h3 id="APC"><a href="#APC" class="headerlink" title="APC"></a>APC</h3><p>侧重于测量方法的研究， 给出了并发存储的测量方法和尺度。</p>
<p>在 APC 中， 周期是<strong>存储活动周期</strong> (memory<br>active cycle)， 不是通用的 CPU 周期，所以 APC 也叫 APMAC（ 存储活动周期平均访问数， access per<br>memory active cycle）。</p>
<p>同时 APC 采用<strong>重叠</strong> (overlapping) 的访存时间统计方法 ： 在有两个或多个存储访<br>问同时进行时， 周期只增加一次。</p></div><a class="article-more button is-small is-size-7" href="/2023/10/15/Work/Algorithms/C-AMAT/#more">Read more</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-10-15T16:00:00.000Z" title="10/15/2023, 4:00:00 PM">2023-10-15</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-10-22T04:05:40.490Z" title="10/22/2024, 4:05:40 AM">2024-10-22</time></span><span class="level-item"><a class="link-muted" href="/categories/Algorithms/">Algorithms</a></span><span class="level-item">2 minutes read (About 341 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/10/15/Work/software/benchmark/HPL_datfile/">HPL.dat file detailed explanation</a></p><div class="content"><h2 id="HPL-dat"><a href="#HPL-dat" class="headerlink" title="HPL.dat"></a>HPL.dat</h2><figure class="highlight bash"><figcaption><span>title</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">HPLinpack benchmark input file</span><br><span class="line">Innovative Computing Laboratory, University of Tennessee</span><br><span class="line">HPL.out      output file name (<span class="keyword">if</span> any) 输出文件名</span><br><span class="line">6            device out (6=stdout,7=stderr,file)</span><br><span class="line"></span><br><span class="line">1            <span class="comment"># of problems sizes (N) = sqrt((Memory Size in Gbytes * 1024 * 1024 * 1024) /8) * ratio</span></span><br><span class="line">11136         Ns 矩阵规模</span><br><span class="line"></span><br><span class="line">1            <span class="comment"># of NBs block sizes (64~512)In the [96,104,112,120,128, …, 256] range; the multiple of 64</span></span><br><span class="line">96           NBs 矩阵分块方法</span><br><span class="line"></span><br><span class="line">0            PMAP process mapping (0=Row-,1=Column-major) 选择处理器阵列是按列的排列方式还是按行的排列方式。</span><br><span class="line"></span><br><span class="line">1            <span class="comment"># of process grids (P x Q)</span></span><br><span class="line">2            Ps <span class="comment"># two-dimensional block-cyclic data distribution = amount of processes; P≤Q</span></span><br><span class="line">2            Qs 二维处理器网格（P×Q）</span><br><span class="line"></span><br><span class="line">16.0         threshold 阈值</span><br><span class="line"></span><br><span class="line">1            <span class="comment"># of panel fact # 后面是L分解的方式</span></span><br><span class="line">2            PFACTs (0=left, 1=Crout, 2=Right)</span><br><span class="line">1            <span class="comment"># of recursive stopping criterium</span></span><br><span class="line">4            NBMINs (&gt;= 1)</span><br><span class="line">1            <span class="comment"># of panels in recursion</span></span><br><span class="line">2            NDIVs</span><br><span class="line">1            <span class="comment"># of recursive panel fact.</span></span><br><span class="line">1            RFACTs (0=left, 1=Crout, 2=Right)</span><br><span class="line">1            <span class="comment"># of broadcast</span></span><br><span class="line">1            BCASTs (0=1rg,1=1rM,2=2rg,3=2rM,4=Lng,5=LnM)</span><br><span class="line">1            <span class="comment"># of lookahead depth</span></span><br><span class="line">1            DEPTHs (&gt;=0)</span><br><span class="line">2            SWAP (0=bin-exch,1=long,2=mix)</span><br><span class="line">64           swapping threshold</span><br><span class="line">0            L1 <span class="keyword">in</span> (0=transposed,1=no-transposed) form</span><br><span class="line">0            U  <span class="keyword">in</span> (0=transposed,1=no-transposed) form</span><br><span class="line">1            Equilibration (0=no,1=<span class="built_in">yes</span>)</span><br><span class="line">8            memory alignment <span class="keyword">in</span> double (&gt; 0)</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.advancedclustering.com/act_kb/tune-hpl-dat-file/">合适的参数参考</a></p></div><a class="article-more button is-small is-size-7" href="/2023/10/15/Work/software/benchmark/HPL_datfile/#more">Read more</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-10-15T16:00:00.000Z" title="10/15/2023, 4:00:00 PM">2023-10-15</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-10-22T04:05:40.486Z" title="10/22/2024, 4:05:40 AM">2024-10-22</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">15 minutes read (About 2203 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/10/15/Work/software/visualization/pythonGraph/">Python Graph &amp; Visualization</a></p><div class="content"><h2 id="数据科学"><a href="#数据科学" class="headerlink" title="数据科学"></a>数据科学</h2><h2 id="matplotlib"><a href="#matplotlib" class="headerlink" title="matplotlib"></a>matplotlib</h2><h3 id="基础语法与概念"><a href="#基础语法与概念" class="headerlink" title="基础语法与概念"></a>基础语法与概念</h3><h2 id="plotly"><a href="#plotly" class="headerlink" title="plotly"></a>plotly</h2><h2 id="matplotlib-VS-plotly"><a href="#matplotlib-VS-plotly" class="headerlink" title="matplotlib VS plotly"></a>matplotlib VS plotly</h2><ol>
<li>matplotlib can use custom color and line style</li>
<li>plotly is more easily to quickly built up.</li>
</ol>
<h2 id="基础语法与概念-1"><a href="#基础语法与概念-1" class="headerlink" title="基础语法与概念"></a>基础语法与概念</h2><h3 id="线性颜色柱的选择"><a href="#线性颜色柱的选择" class="headerlink" title="线性颜色柱的选择"></a>线性颜色柱的选择</h3><p><a target="_blank" rel="noopener" href="https://plotly.com/python/builtin-colorscales/">https://plotly.com/python/builtin-colorscales/</a></p>
<p>same in <a target="_blank" rel="noopener" href="https://matplotlib.org/stable/tutorials/colors/colormaps.html#sequential">matplotlib</a></p>
<p><img src="https://pic.shaojiemike.top/img/20230710182038.png"></p>
<h2 id="plt-show-转发图像到本地"><a href="#plt-show-转发图像到本地" class="headerlink" title="plt.show 转发图像到本地"></a>plt.show 转发图像到本地</h2><p>使用<a target="_blank" rel="noopener" href="https://dash.plotly.com/layout">Dash: A web application framework for your data.</a>, 默认部署在<code>localhost:8050</code>端口</p>
<p>本地机器打通ssh隧道</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -L 8050:127.0.0.1:8050 -vN -f -l shaojiemike 202.38.72.23</span><br></pre></td></tr></table></figure>

<h2 id="科研画图"><a href="#科研画图" class="headerlink" title="科研画图"></a>科研画图</h2><p>In scientific research plotting, it’s always bar charts instead of line charts.</p>
<p>Possible reasons:</p>
<ol>
<li>The visual footprint of point lines is relatively small compared to bar</li>
<li>Line charts are aggregated together when there is a meaningful comparison of data along the y-axis.</li>
</ol>
<h3 id="global-setting"><a href="#global-setting" class="headerlink" title="global setting"></a>global setting</h3><p>font things, Attention, global settings have higher priority to get work</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">matplotlib.rcParams.update(&#123;</span><br><span class="line">    <span class="string">&quot;pgf.texsystem&quot;</span>: <span class="string">&quot;pdflatex&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;font.family&#x27;</span>: <span class="string">&#x27;serif&#x27;</span>,</span><br><span class="line">    <span class="comment"># &#x27;text.usetex&#x27;: True, # comment to support bold font in legend, and font will be bolder</span></span><br><span class="line">    <span class="comment"># &#x27;pgf.rcfonts&#x27;: False,</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="layout"><a href="#layout" class="headerlink" title="layout"></a>layout</h3><ol>
<li>picture size</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>figure size (adjust x,y tick distance)</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mpl</span></span><br><span class="line">fig.set_size_inches(w= <span class="number">0.5</span> * x_count * (group_count+<span class="number">1.5</span>), h=<span class="number">5.75</span> * <span class="number">0.8</span>) <span class="comment">#(8, 6.5)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plotly</span></span><br><span class="line">fig.update_layout(height=<span class="number">350</span>, width=<span class="number">50</span> * graph_data.size(),</span><br><span class="line">                  margin=<span class="built_in">dict</span>(b=<span class="number">10</span>, t=<span class="number">10</span>, l=<span class="number">20</span>, r=<span class="number">5</span>),</span><br><span class="line">                  bargap=<span class="number">0.2</span> <span class="comment"># x tick distance, 1 is the normalize-distance of adjacent bars</span></span><br><span class="line">                  )</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>relative position</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mpl: Adjust the left margin to make room for the legend, left &amp; right chart vertical line position from [0,1]</span></span><br><span class="line">plt.subplots_adjust(left=<span class="number">0.1</span>, right=<span class="number">0.8</span>)</span><br></pre></td></tr></table></figure>

<h3 id="set-x-axis"><a href="#set-x-axis" class="headerlink" title="set x axis"></a>set x axis</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mpl:</span></span><br><span class="line">x = np.arange(<span class="built_in">len</span>(graph_data.x))  <span class="comment"># the label locations, [0, 1, 2, 3, 4, 5, 6, 7]</span></span><br><span class="line"><span class="comment"># set the bar move to arg1 with name arg2</span></span><br><span class="line">ax.set_xticks(x + (group_count-<span class="number">1</span>)*<span class="number">0.5</span>*width, graph_data.x)</span><br><span class="line">plt.xticks(fontsize=graph_data.fontsize+<span class="number">4</span>)</span><br><span class="line"><span class="comment"># Adjust x-axis limits to narrow the gap</span></span><br><span class="line">plt.xlim(-(<span class="number">0.5</span>+gap_count)*width, </span><br><span class="line">        x_count - <span class="number">1</span> + (group_count-<span class="number">1</span>)*width + (<span class="number">0.5</span>+gap_count)*width)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment"># plotly</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="set-y-axis"><a href="#set-y-axis" class="headerlink" title="set y axis"></a>set y axis</h3><ol>
<li>vertical grid line</li>
<li>dick size</li>
<li>and range size</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mpl</span></span><br><span class="line">ax.set_ylabel(yaxis_title, </span><br><span class="line">              fontsize=graph_data.fontsize,</span><br><span class="line">              fontweight=<span class="string">&#x27;bold&#x27;</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>, which=<span class="string">&#x27;major&#x27;</span>,axis=<span class="string">&#x27;y&#x27;</span>, zorder=-<span class="number">1.0</span>) <span class="comment"># line and bar seems need to set zorder=10 to cover it</span></span><br><span class="line">plt.yticks(np.arange(<span class="number">0</span>, max_y ,<span class="number">10</span>), fontsize=graph_data.fontsize) <span class="comment"># step 10</span></span><br><span class="line">plt.yscale(<span class="string">&#x27;log&#x27;</span>,base=<span class="number">10</span>) <span class="comment"># or plt.yscale(&#x27;linear&#x27;)</span></span><br><span class="line">ax.set_ylim(<span class="number">0.1</span>, max_y)</span><br><span class="line"><span class="comment">## highlight selected y-label: https://stackoverflow.com/questions/73597796/make-one-y-axis-label-bold-in-matplotlib</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plotly</span></span><br><span class="line">fig.update_layout(</span><br><span class="line">      yaxis_range=[<span class="number">0</span>,maxY],                   </span><br><span class="line">      yaxis=<span class="built_in">dict</span>(</span><br><span class="line">          rangemode=<span class="string">&#x27;tozero&#x27;</span>,  <span class="comment"># Set the y-axis rangemode to &#x27;tozero&#x27;</span></span><br><span class="line">          dtick=maxY/<span class="number">10</span>,</span><br><span class="line">          gridcolor=<span class="string">&#x27;rgb(196, 196, 196)&#x27;</span>, <span class="comment"># grey</span></span><br><span class="line">          gridwidth=<span class="number">1</span>,</span><br><span class="line">      ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="Bolden-Contour-Lines"><a href="#Bolden-Contour-Lines" class="headerlink" title="Bolden Contour Lines"></a>Bolden Contour Lines</h3><ol>
<li>Entire Figure</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mpl ?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plotly: Add a rectangle shape to cover the entire subplot area</span></span><br><span class="line">fig.add_shape(<span class="built_in">type</span>=<span class="string">&quot;rect&quot;</span>,</span><br><span class="line">            xref=<span class="string">&quot;paper&quot;</span>, yref=<span class="string">&quot;paper&quot;</span>,</span><br><span class="line">            x0=<span class="number">0</span>, y0=<span class="number">0</span>,</span><br><span class="line">            x1=<span class="number">1</span>, y1=<span class="number">1</span>,</span><br><span class="line">            line=<span class="built_in">dict</span>(color=<span class="string">&quot;black&quot;</span>, width=<span class="number">0.7</span>))</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>and Each Bar Within</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mpl: Create a bar chart with bold outlines</span></span><br><span class="line">plt.bar(categories, values, edgecolor=<span class="string">&#x27;black&#x27;</span>, linewidth=2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plotly: ?</span></span><br></pre></td></tr></table></figure>

<h3 id="legend-box"><a href="#legend-box" class="headerlink" title="legend box"></a>legend box</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mpl: </span></span><br><span class="line">ax.legend(loc=<span class="string">&#x27;upper left&#x27;</span>, ncols=<span class="number">3</span>, fontsize=graph_data.fontsize)</span><br><span class="line"><span class="comment"># legend out-of-figure, (1.02, 1) means anchor is upper right corner</span></span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper left&#x27;</span>, bbox_to_anchor=(<span class="number">1.02</span>, <span class="number">1</span>), borderaxespad=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Calculate the legend width based on the figure width</span></span><br><span class="line">fig_size = plt.gcf().get_size_inches()</span><br><span class="line">fig_width = fig_size[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># Move the legend to the center above the ceiling line</span></span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper center&#x27;</span>, bbox_to_anchor=(<span class="number">0.5</span>, <span class="number">1.1</span>), </span><br><span class="line">  ncol=<span class="number">2</span>,  <span class="comment"># ncol=2 to have labels in one line</span></span><br><span class="line">  frameon=<span class="literal">False</span>,  <span class="comment"># frameon=False removes the legend box outline</span></span><br><span class="line">  columnspacing=fig_width, <span class="comment"># distance between each label</span></span><br><span class="line">  handlelength=<span class="number">1.0</span>, <span class="comment"># label-box width (unit is text fontsize)</span></span><br><span class="line">  handleheight=<span class="number">1.0</span>, <span class="comment"># label-box heigh (unit is text fontsize)</span></span><br><span class="line">  prop=&#123;<span class="string">&#x27;size&#x27;</span>: <span class="number">20</span>, <span class="string">&#x27;weight&#x27;</span>: <span class="string">&#x27;bold&#x27;</span>&#125; <span class="comment"># text fontsize          </span></span><br><span class="line">) </span><br></pre></td></tr></table></figure>

<h3 id="bar"><a href="#bar" class="headerlink" title="bar"></a>bar</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mpl: white hugo hatch with black bar edge.</span></span><br><span class="line"><span class="comment"># Problem: because the bug of mpl. hatch color follow the edge color</span></span><br><span class="line"><span class="comment"># Solved: draw bar twice, first the white hugo hatch with white bar edge. Second empty figure with black bar edge.</span></span><br><span class="line"><span class="comment"># white doubel ref: https://stackoverflow.com/questions/38168948/how-to-decouple-hatch-and-edge-color-in-matplotlib</span></span><br><span class="line"><span class="comment"># ref2: https://stackoverflow.com/questions/71424924/how-to-change-the-edge-color-of-markers-patches-in-matplotlib-legend</span></span><br><span class="line">color_palette = [<span class="string">&#x27;black&#x27;</span>, (<span class="number">193</span>/<span class="number">255</span>, <span class="number">1</span>/<span class="number">255</span>, <span class="number">1</span>/<span class="number">255</span>), <span class="string">&#x27;w&#x27;</span>, (<span class="number">127</span>/<span class="number">255</span>, <span class="number">126</span>/<span class="number">255</span>, <span class="number">127</span>/<span class="number">255</span>), <span class="string">&#x27;blue&#x27;</span>]</span><br><span class="line">pattern_list = [<span class="string">&quot;&quot;</span>, <span class="string">&quot;/&quot;</span>, <span class="string">&quot;+&quot;</span>, <span class="string">&quot;\\&quot;</span>, <span class="string">&quot;x&quot;</span>]</span><br><span class="line">edgecolor_list = [<span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, (<span class="number">0</span>/<span class="number">255</span>, <span class="number">176</span>/<span class="number">255</span>, <span class="number">80</span>/<span class="number">255</span>), <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;w&#x27;</span>]</span><br><span class="line">    </span><br><span class="line">ax.bar(x + offset, measurement, width, label=species_name,</span><br><span class="line">                       color=color_palette[idx],</span><br><span class="line">                        hatch = pattern_list[idx],</span><br><span class="line">                        edgecolor=edgecolor_list[idx],</span><br><span class="line">                        linewidth=<span class="number">1</span>,</span><br><span class="line">                     )</span><br><span class="line">ax.bar(x + offset, measurement, width, label=species_name,</span><br><span class="line">            color = <span class="string">&quot;none&quot;</span>,</span><br><span class="line">            edgecolor=<span class="string">&#x27;black&#x27;</span>, linewidth=<span class="number">1</span>,</span><br><span class="line">              )</span><br><span class="line"><span class="comment"># related legend: https://stackoverflow.com/questions/71424924/how-to-change-the-edge-color-of-markers-patches-in-matplotlib-legend</span></span><br><span class="line">handles1, labels1 = ax.get_legend_handles_labels()</span><br><span class="line">plt.legend([handles1[<span class="number">2</span>*idx]+handles1[<span class="number">2</span>*idx+<span class="number">1</span>] <span class="keyword">for</span> idx <span class="keyword">in</span> <span class="built_in">range</span>(group_count)], </span><br><span class="line">            [labels1[<span class="number">2</span>*idx] <span class="keyword">for</span> idx <span class="keyword">in</span> <span class="built_in">range</span>(group_count)],  </span><br><span class="line">            loc=<span class="string">&#x27;upper center&#x27;</span>, bbox_to_anchor=(<span class="number">0.5</span>, <span class="number">1.12</span>), </span><br><span class="line">            ncol=group_count,  <span class="comment"># have labels in one line</span></span><br><span class="line">            frameon=<span class="literal">False</span>,</span><br><span class="line">            <span class="comment"># bbox_transform=plt.gcf().transFigure,</span></span><br><span class="line">            columnspacing=legend_width, </span><br><span class="line">            <span class="comment"># handlelength=1.0, </span></span><br><span class="line">            handleheight=<span class="number">1.2</span>, </span><br><span class="line">            prop=&#123;<span class="string">&#x27;size&#x27;</span>: graph_data.fontsize,</span><br><span class="line">                <span class="string">&#x27;weight&#x27;</span>: <span class="string">&#x27;heavy&#x27;</span>&#125;</span><br><span class="line">) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># plotly: find the overflow</span></span><br><span class="line">overflow_pattern = [<span class="string">&quot;/&quot;</span> <span class="keyword">if</span> y &gt; maxY  <span class="keyword">else</span> <span class="string">&quot;&quot;</span> <span class="keyword">for</span> y <span class="keyword">in</span> entry[<span class="number">1</span>]]</span><br><span class="line">fig.add_bar(x=x,y=yList, </span><br><span class="line">    name=barName, </span><br><span class="line">    marker=<span class="built_in">dict</span>(</span><br><span class="line">        color=color_list[i],</span><br><span class="line">        pattern_shape = overflow_pattern,</span><br><span class="line">        line=<span class="built_in">dict</span>(color=<span class="string">&#x27;black&#x27;</span>, width=<span class="number">2</span>)</span><br><span class="line">        ),</span><br><span class="line">    textfont=<span class="built_in">dict</span>(size=graph_data.fontsize),</span><br><span class="line">)</span><br><span class="line"><span class="comment"># legend </span></span><br><span class="line">legend_num = <span class="built_in">len</span>( barDict.items())</span><br><span class="line">fig.update_layout(barmode=<span class="string">&quot;relative&quot;</span>, </span><br><span class="line"></span><br><span class="line">        <span class="comment"># legend_title=&quot;Legend Title&quot;,</span></span><br><span class="line">        legend = <span class="built_in">dict</span>(</span><br><span class="line">          entrywidthmode=<span class="string">&#x27;fraction&#x27;</span>, <span class="comment"># https://plotly.com/python/legend/</span></span><br><span class="line">          entrywidth= <span class="number">0.2</span>,</span><br><span class="line">          x=<span class="number">0.5</span> - <span class="number">0.5</span> * legend_num * <span class="number">0.2</span>,        <span class="comment"># Set x to 0.5 for the center</span></span><br><span class="line">          y=<span class="number">1.2</span>,       <span class="comment"># Set y to a value greater than 1 to move it above the plot</span></span><br><span class="line">          orientation=<span class="string">&quot;h&quot;</span>,  <span class="comment"># Display legend items in a single line</span></span><br><span class="line">        ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="Out-box-text"><a href="#Out-box-text" class="headerlink" title="Out-box text"></a>Out-box text</h3><p>To draw symmetry chart, we need to special highlight the overflow bar number.</p>
<p>If the ancher point locate in the plot box, it’s easy to show text above the ceil line using <code>textposition=&quot;bottom&quot;</code> like option. In the opposite scenario, plotly and mathplotlib all will hide the out-box text.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># plotly</span></span><br><span class="line">fig.add_annotation(</span><br><span class="line">            x=[x[0][i],x[1][i]],  <span class="comment"># 注释的 x 坐标为 &quot;bc&quot;</span></span><br><span class="line">            y=min(maxY,entry),  <span class="comment"># 注释的 y 坐标为该列的最大值</span></span><br><span class="line">            text=f<span class="string">&quot;&#123;entry:.2f&#125;&quot;</span>,  <span class="comment"># 注释的文本内容</span></span><br><span class="line">            <span class="comment"># valign = &quot;bottom&quot;, # text position in text box(default invisible)</span></span><br><span class="line">            yanchor = <span class="string">&quot;bottom&quot;</span>, <span class="comment"># text box position relative to anchor</span></span><br><span class="line">            showarrow=False,  <span class="comment"># 显示箭头</span></span><br><span class="line">            <span class="comment"># bgcolor=&quot;rgba(255, 255, 255, 0.8)&quot;,  # 注释框背景颜色</span></span><br><span class="line">            font=dict(size=graph_data.fontsize+2)  <span class="comment"># 注释文本字体大小</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line"><span class="comment"># mathplotlib</span></span><br><span class="line"><span class="comment"># Create labels for overflowed values</span></span><br><span class="line"><span class="keyword">for</span> i, value <span class="keyword">in</span> enumerate(values):</span><br><span class="line">    <span class="keyword">if</span> value &gt; maxY:</span><br><span class="line">        ax.annotate(f<span class="string">&#x27;Overflow: &#123;value:.2f&#125;&#x27;</span>, (i, maxY), ha=<span class="string">&#x27;center&#x27;</span>, va=<span class="string">&#x27;bottom&#x27;</span>, fontsize=12)</span><br></pre></td></tr></table></figure>

<p>But mlb can write text out box.</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ax.text(<span class="number">1</span>, -<span class="number">1.6</span>, <span class="string">&#x27;Increasing&#x27;</span>, ha=<span class="string">&quot;center&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># first parameter is text, xy is the anchor point, xytext is the text, </span></span><br><span class="line"><span class="comment"># xytext 2 xy is a relative distance</span></span><br><span class="line">ax.annotate(<span class="string">&#x27;yahaha&#x27;</span>, xy=(<span class="number">0</span>, -<span class="number">0.1</span>), xycoords=<span class="string">&#x27;axes fraction&#x27;</span>, xytext=(<span class="number">1</span>, -<span class="number">0.1</span>))</span><br></pre></td></tr></table></figure>

<h3 id="out-box-line"><a href="#out-box-line" class="headerlink" title="out-box line"></a>out-box line</h3><p>mathplotlib(mpl) can achieve this using <a target="_blank" rel="noopener" href="https://www.tutorialspoint.com/how-to-draw-a-line-outside-of-an-axis-in-matplotlib">ref</a>, but there are few blogs about plotly.</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mpl: from 1*1 size full-graph (0.5,0.2) to point (1,0.8)</span></span><br><span class="line"><span class="comment"># transform=gcf().transFigure : gcf() stands for &quot;get current figure,&quot; and .transFigure indicates that the coordinates provided in [0.5, 0.5], [0, 1] are in figure-relative coordinates. This means that the line&#x27;s position is defined relative to the entire figure, not just the axes</span></span><br><span class="line"><span class="comment"># clip_on=False : This setting means that the line is not clipped at the edges of the axes. It allows the line to extend beyond the axes&#x27; boundaries.</span></span><br><span class="line"><span class="keyword">from</span> pylab <span class="keyword">import</span> *  </span><br><span class="line">plot([<span class="number">0.5</span>, <span class="number">1</span>], [<span class="number">0.2</span>, <span class="number">0.8</span>], color=<span class="string">&#x27;lightgreen&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>, lw=<span class="number">1</span> ,transform=gcf().transFigure, clip_on=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># mpl: arrow from xy 2 xytext</span></span><br><span class="line"><span class="comment"># xycoords=&#x27;figure fraction&#x27; to Add annotation to the figure (full graph)</span></span><br><span class="line">ax.annotate(<span class="string">&#x27;&#x27;</span>, xy=(<span class="number">0</span>, -<span class="number">0.1</span>), xycoords=<span class="string">&#x27;axes fraction&#x27;</span>, xytext=(<span class="number">1</span>, -<span class="number">0.1</span>),\</span><br><span class="line">arrowprops=<span class="built_in">dict</span>(arrowstyle=<span class="string">&quot;-&gt;&quot;</span>, color=<span class="string">&#x27;violet&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h3 id="in-box-line"><a href="#in-box-line" class="headerlink" title="in-box line"></a>in-box line</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mpl:</span></span><br><span class="line">ax.axhline(y=<span class="number">12</span>, color=<span class="string">&#x27;red&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>, label=<span class="string">&#x27;Horizontal Line at y=12&#x27;</span>)</span><br><span class="line">ax.axvline(x=<span class="number">3</span>, color=<span class="string">&#x27;green&#x27;</span>, linestyle=<span class="string">&#x27;-.&#x27;</span>, label=<span class="string">&#x27;Vertical Line at x=3&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plotly ref: https://plotly.com/python/horizontal-vertical-shapes/</span></span><br><span class="line">fig.add_vline(x=<span class="number">2.5</span>, line_width=<span class="number">3</span>, line_dash=<span class="string">&quot;dash&quot;</span>, line_color=<span class="string">&quot;green&quot;</span>) <span class="comment"># dot</span></span><br><span class="line">fig.add_hline(y=<span class="number">0.9</span>)</span><br></pre></td></tr></table></figure>

<h2 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h2><h3 id="气泡图"><a href="#气泡图" class="headerlink" title="气泡图"></a><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/367038620">气泡图</a></h3><p><img src="https://pic.shaojiemike.top/img/20230710182119.png"></p>
<h3 id="二维无向图"><a href="#二维无向图" class="headerlink" title="二维无向图"></a>二维无向图</h3><p><a target="_blank" rel="noopener" href="https://plotly.com/python/network-graphs/?_ga=2.8340402.1688533481.1690427514-134975445.1688699347#create-network-graph">教程</a></p>
<h3 id="3D图"><a href="#3D图" class="headerlink" title="3D图"></a>3D图</h3><p><a target="_blank" rel="noopener" href="https://dash.plotly.com/layout">dash</a> + <a target="_blank" rel="noopener" href="https://towardsdatascience.com/how-to-create-dynamic-3d-scatter-plots-with-plotly-6371adafd14">plotly</a></p>
<p>如果防火墙是关闭的，你可以直接部署在external address上。使用<a target="_blank" rel="noopener" href="https://community.plotly.com/t/how-to-run-dash-on-a-public-ip/4796">docker也是可行的办法</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.run_server(debug=<span class="literal">True</span>, host=<span class="string">&#x27;202.38.72.23&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="3D-散点图，拟合曲面与网格图"><a href="#3D-散点图，拟合曲面与网格图" class="headerlink" title="3D 散点图，拟合曲面与网格图"></a>3D 散点图，拟合曲面与网格图</h3><p><a target="_blank" rel="noopener" href="https://github.com/Kirrito-k423/sniper-pim/blob/main/src/manualTuning.py">实际案例</a></p>
<p><img src="https://pic.shaojiemike.top/img/20230710182814.png"></p>
<h3 id="折线图"><a href="#折线图" class="headerlink" title="折线图"></a>折线图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">X = [<span class="built_in">str</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> metricValue]</span><br><span class="line">Y = accuracyResult</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图片大小</span></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">10</span>, <span class="number">6</span>))  <span class="comment"># 指定宽度为10英寸，高度为6英寸</span></span><br><span class="line"></span><br><span class="line">plt.plot(X, Y, marker=<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Threshold Percentage(%)&#x27;</span>, fontsize=<span class="number">12</span>)  <span class="comment"># 设置x轴标签字体大小为12</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;Average Execution Time of Static Method&#x27;</span>, fontsize=<span class="number">12</span>)  <span class="comment"># 设置y轴标签字体大小为12</span></span><br><span class="line">plt.title(<span class="string">&#x27;Tuning load store pressure&#x27;</span>, fontsize=<span class="number">14</span>)  <span class="comment"># 设置标题字体大小为14</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(X)):</span><br><span class="line">    plt.text(X[i], Y[i], Y[i], </span><br><span class="line">        fontsize=<span class="number">10</span>, <span class="comment"># 设置文本字体大小为10</span></span><br><span class="line">        ha=<span class="string">&#x27;center&#x27;</span>, <span class="comment"># 设置水平对齐方式</span></span><br><span class="line">        va=<span class="string">&#x27;bottom&#x27;</span>)  <span class="comment"># 设置垂直对齐方式</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存图片</span></span><br><span class="line">plt.savefig(glv._get(<span class="string">&quot;resultPath&quot;</span>) + <span class="string">f&quot;tuning/<span class="subst">&#123;tuningLabel&#125;</span>/loadStorePressure.png&quot;</span>, dpi=<span class="number">300</span>)  <span class="comment"># 设置dpi为300，可调整保存图片的分辨率</span></span><br><span class="line"></span><br><span class="line">plt.show()  <span class="comment"># 显示图片</span></span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>

<h3 id="Heatmap"><a href="#Heatmap" class="headerlink" title="Heatmap"></a>Heatmap</h3><p><a target="_blank" rel="noopener" href="https://github.com/Kirrito-k423/BHive-Prediction-Compare/blob/main/src/heatmap.py">实例</a></p>
<h3 id="Stacked-Bar-grouped-compare-bar"><a href="#Stacked-Bar-grouped-compare-bar" class="headerlink" title="Stacked Bar &amp; grouped compare bar"></a>Stacked Bar &amp; grouped compare bar</h3><p><a target="_blank" rel="noopener" href="https://github.com/Kirrito-k423/sniper-pim/blob/main/src/graph.py">Example</a></p>
<p><img src="https://pic.shaojiemike.top/img/20230710182255.png"></p>
<h3 id="Error-Bars"><a href="#Error-Bars" class="headerlink" title="Error Bars"></a>Error Bars</h3><p>在柱状图中，用于表示上下浮动的元素通常被称为<a target="_blank" rel="noopener" href="https://plotly.com/python/error-bars/#bar-chart-with-error-bars">“误差条”（Error Bars）</a>。误差条是用于显示数据点或柱状图中的不确定性或误差范围的线条或线段。它们在柱状图中以垂直方向延伸，可以显示上下浮动的范围，提供了一种可视化的方式来表示数据的变化或不确定性。误差条通常通过标准差、标准误差、<a target="_blank" rel="noopener" href="https://plotly.com/python/error-bars/#asymmetric-error-bars">置信区间</a>或其他统计指标来计算和表示数据的浮动范围。</p>
<p><a target="_blank" rel="noopener" href="https://community.plotly.com/t/unilateral-error-bars-in-stacked-bar-chart/76380">Errorbars + StackedBars</a> stacked 的过程中由于向上的error线的会被后面的Bar遮盖，然后下面的error线由于<code>arrayminus=[i-j for i,j in zip(sumList,down_error)]</code>导致大部分时间说负值，也不会显示。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line"> <span class="comment"># color from https://stackoverflow.com/questions/68596628/change-colors-in-100-stacked-barchart-plotly-python</span></span><br><span class="line"> color_list = [<span class="string">&#x27;rgb(29, 105, 150)&#x27;</span>, \</span><br><span class="line">             <span class="string">&#x27;rgb(56, 166, 165)&#x27;</span>, \</span><br><span class="line">    <span class="string">&#x27;rgb(15, 133, 84)&#x27;</span>,\</span><br><span class="line">          <span class="string">&#x27;rgb(95, 70, 144)&#x27;</span>]</span><br><span class="line"> sumList = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x[<span class="number">0</span>]))]</span><br><span class="line"> <span class="keyword">for</span> i, entry <span class="keyword">in</span> <span class="built_in">enumerate</span>( barDict.items()):</span><br><span class="line">  barName=entry[<span class="number">0</span>]</span><br><span class="line">  yList = entry[<span class="number">1</span>]</span><br><span class="line">  ic(sumList,yList)</span><br><span class="line">  sumList = [x + y <span class="keyword">for</span> x, y <span class="keyword">in</span> <span class="built_in">zip</span>(yList, sumList)]</span><br><span class="line">  fig.add_bar(x=x,y=yList, </span><br><span class="line">              name=barName, </span><br><span class="line">              text =[<span class="string">f&#x27;<span class="subst">&#123;val:<span class="number">.2</span>f&#125;</span>&#x27;</span> <span class="keyword">for</span> val <span class="keyword">in</span> yList], </span><br><span class="line">              textposition=<span class="string">&#x27;inside&#x27;</span>,</span><br><span class="line">              marker=<span class="built_in">dict</span>(color=color_list[i]),</span><br><span class="line">              error_y=<span class="built_in">dict</span>(</span><br><span class="line">    <span class="built_in">type</span>=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">    symmetric=<span class="literal">False</span>,</span><br><span class="line">    color=<span class="string">&#x27;purple&#x27;</span>,</span><br><span class="line">    array=[i-j <span class="keyword">for</span> i,j <span class="keyword">in</span> <span class="built_in">zip</span>(up_error,sumList)],</span><br><span class="line">    arrayminus=[i-j <span class="keyword">for</span> i,j <span class="keyword">in</span> <span class="built_in">zip</span>(sumList,down_error)],</span><br><span class="line">       thickness=<span class="number">2</span>, width=<span class="number">10</span>),</span><br><span class="line">              textfont=<span class="built_in">dict</span>(size=<span class="number">8</span>)</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>

<h3 id="Candlestick"><a href="#Candlestick" class="headerlink" title="Candlestick"></a>Candlestick</h3><p>类似股票上下跳动的浮标被称为”Candlestick”（蜡烛图）或”OHLC”（开盘-最高-最低-收盘）图表。</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>上面回答部分<strong>来自ChatGPT-3.5</strong>，暂时没有校验其可靠性(看上去貌似说得通)。</p>
<p>[1] Saket, B., Endert, A. and Demiralp, Ç., 2018. <a target="_blank" rel="noopener" href="https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=8354901&tag=1">Task-based effectiveness of basic visualizations.IEEE transactions on visualization and computer graphics</a>,25(7), pp.2505-2512.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-10-14T16:00:00.000Z" title="10/14/2023, 4:00:00 PM">2023-10-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-10-22T04:05:40.542Z" title="10/22/2024, 4:05:40 AM">2024-10-22</time></span><span class="level-item"><a class="link-muted" href="/categories/network/">network</a></span><span class="level-item">36 minutes read (About 5351 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/10/14/Work/network/0-basic/TCPUDP/">TCP &amp; UDP</a></p><div class="content"><h2 id="TCP和UDP的区别？"><a href="#TCP和UDP的区别？" class="headerlink" title="TCP和UDP的区别？"></a>TCP和UDP的区别？</h2><p><strong>对比如下</strong>：</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">UDP</th>
<th align="left">TCP</th>
</tr>
</thead>
<tbody><tr>
<td align="left">是否连接</td>
<td align="left">无连接</td>
<td align="left">面向连接</td>
</tr>
<tr>
<td align="left">是否可靠</td>
<td align="left">不可靠传输，不使用流量控制和拥塞控制</td>
<td align="left">可靠传输，使用流量控制和拥塞控制</td>
</tr>
<tr>
<td align="left">是否有序</td>
<td align="left">无序</td>
<td align="left">有序，消息在传输过程中可能会乱序，TCP 会重新排序</td>
</tr>
<tr>
<td align="left">传输速度</td>
<td align="left">快</td>
<td align="left">慢</td>
</tr>
<tr>
<td align="left">连接对象个数</td>
<td align="left">支持一对一，一对多，多对一和多对多交互通信</td>
<td align="left">只能是一对一通信</td>
</tr>
<tr>
<td align="left">传输方式</td>
<td align="left">面向报文</td>
<td align="left">面向字节流</td>
</tr>
<tr>
<td align="left">首部开销</td>
<td align="left">首部开销小，仅8字节</td>
<td align="left">首部最小20字节，最大60字节</td>
</tr>
<tr>
<td align="left">适用场景</td>
<td align="left">适用于实时应用（IP电话、视频会议、直播等）</td>
<td align="left">适用于要求可靠传输的应用，例如文件传输</td>
</tr>
</tbody></table>
<p><strong>总结</strong>：</p>
<ul>
<li>TCP 用于在传输层有必要实现可靠传输的情况，</li>
<li>UDP 用于对高速传输和实时性有较高要求的通信。</li>
<li>TCP 和 UDP 应该根据应用目的按需使用。</li>
<li>注意虽然UDP传输时是无序的，但每个报文还是包含有报文序号，以便接收后排序</li>
</ul>
<h2 id="UDP-和-TCP-对应的应用场景是什么？"><a href="#UDP-和-TCP-对应的应用场景是什么？" class="headerlink" title="UDP 和 TCP 对应的应用场景是什么？"></a>UDP 和 TCP 对应的应用场景是什么？</h2><p> TCP 是面向连接，能保证数据的可靠性交付，因此经常用于：</p>
<ul>
<li>FTP文件传输</li>
<li>HTTP &#x2F; HTTPS</li>
</ul>
<p>UDP 面向无连接，它可以随时发送数据，再加上UDP本身的处理既简单又高效，因此经常用于：</p>
<ul>
<li>包总量较少的通信，如 DNS 、SNMP等</li>
<li>视频、音频等多媒体通信</li>
<li>广播通信</li>
</ul>
<p><img src="http://blog-img.coolsen.cn/img/image-20210519180008296.png" alt="image-20210519180008296"></p>
<h2 id="TCP协议如何保证可靠性？"><a href="#TCP协议如何保证可靠性？" class="headerlink" title="TCP协议如何保证可靠性？"></a>TCP协议如何保证可靠性？</h2><p>TCP主要提供了检验和、序列号&#x2F;确认应答、超时重传、滑动窗口、拥塞控制和 流量控制等方法实现了可靠性传输。</p>
<ul>
<li><strong>检验和</strong>：通过检验和的方式，接收端可以检测出来数据是否有差错和异常，假如有差错就会直接丢弃TCP段，重新发送。</li>
<li><strong>序列号&#x2F;确认应答</strong>：<br>  序列号的作用不仅仅是应答的作用，有了序列号能够将接收到的数据根据序列号排序，并且去掉重复序列号的数据。<br>  TCP传输的过程中，每次接收方收到数据后，都会对传输方进行确认应答。也就是发送ACK报文，这个ACK报文当中带有对应的确认序列号，告诉发送方，接收到了哪些数据，下一次的数据从哪里发。</li>
<li><strong>滑动窗口</strong>：滑动窗口既提高了报文传输的效率，也避免了发送方发送过多的数据而导致接收方无法正常处理的异常。</li>
<li><strong>超时重传</strong>：超时重传是指发送出去的数据包到接收到确认包之间的时间，如果超过了这个时间会被认为是丢包了，需要重传。最大超时时间是动态计算的。</li>
<li><strong>拥塞控制</strong>：在数据传输过程中，可能由于网络状态的问题，造成网络拥堵，此时引入拥塞控制机制，在保证TCP可靠性的同时，提高性能。</li>
<li><strong>流量控制</strong>：<ul>
<li>如果主机A 一直向主机B发送数据，不考虑主机B的接受能力，则可能导致主机B的接受缓冲区满了而无法再接受数据，从而会导致大量的数据丢包，引发重传机制。</li>
<li>而在重传的过程中，若主机B的接收缓冲区情况仍未好转，则会将大量的时间浪费在重传数据上，降低传送数据的效率。</li>
<li>所以引入流量控制机制，主机B通过告诉主机A自己接收缓冲区的大小，来使主机A控制发送的数据量。流量控制与TCP协议报头中的窗口大小有关。</li>
</ul>
</li>
</ul>
<h2 id="详细讲一下拥塞控制？"><a href="#详细讲一下拥塞控制？" class="headerlink" title="详细讲一下拥塞控制？"></a>详细讲一下拥塞控制？</h2><p>TCP 一共使用了四种算法来实现拥塞控制：</p>
<ul>
<li>**慢开始(slow-start)**：不要一开始就发送大量的数据，由小到大逐渐增加拥塞窗口的大小。</li>
<li>**拥塞避免(congestion avoidance)**：<ul>
<li>拥塞避免算法让拥塞窗口缓慢增长，即每经过一个往返时间RTT就把发送方的拥塞窗口cwnd加1而不是加倍。</li>
<li>这样拥塞窗口按线性规律缓慢增长。</li>
<li>发送方维持一个叫做拥塞窗口cwnd（congestion window）的状态变量。当cwnd ssthresh时，改用拥塞避免算法。</li>
</ul>
</li>
<li>**快重传(fast retransmit)**：<ul>
<li>我们可以剔除一些不必要的拥塞报文，提高网络吞吐量。</li>
<li>比如<strong>接收方</strong>在收到一个失序的报文段后就立即发出重复确认，而不要等到自己发送数据时捎带确认。</li>
<li>快重传规定：<strong>发送方</strong>只要一连收到三个重复确认就应当立即重传对方尚未收到的报文段，而不必继续等待设置的重传计时器时间到期。<img src="http://blog-img.coolsen.cn/img/image-20210520214123058.png" alt="快重传"></li>
</ul>
</li>
<li>**快恢复(fast recovery)**：主要是配合快重传。<ul>
<li>当发送方连续收到三个重复确认时，就执行“乘法减小”算法，把ssthresh门限减半（为了预防网络发生拥塞），但<strong>接下来并不执行慢开始算法</strong>，</li>
<li>因为如果网络出现拥塞的话就不会收到好几个重复的确认，收到三个重复确认说明网络状况还可以。</li>
</ul>
</li>
</ul>
<p><img src="http://blog-img.coolsen.cn/img/image-20210520214146324.png"></p>
<h2 id="详细介绍一下-TCP-的三次握手机制？"><a href="#详细介绍一下-TCP-的三次握手机制？" class="headerlink" title="详细介绍一下 TCP 的三次握手机制？"></a>详细介绍一下 TCP 的三次握手机制？</h2><p><img src="http://blog-img.coolsen.cn/img/image-20210520161056918.png"></p>
<blockquote>
<p>图片来自：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904005315854343">https://juejin.cn/post/6844904005315854343</a></p>
</blockquote>
<p>三次握手机制：</p>
<ul>
<li>第一次握手：<ul>
<li>客户端请求建立连接，向服务端发送一个<strong>同步报文</strong>（SYN&#x3D;1），</li>
<li>同时选择一个随机数 <code>seq = x</code> 作为<strong>初始序列号</strong>，</li>
<li>并进入SYN_SENT状态，等待服务器确认。</li>
</ul>
</li>
<li>第二次握手：：<ul>
<li>服务端收到连接请求报文后，如果同意建立连接，则向客户端发送<strong>同步确认报文</strong>（SYN&#x3D;1，ACK&#x3D;1），</li>
<li>确认号为 <code>ack = x + 1</code>，同时选择一个随机数 <code>seq = y</code> 作为初始序列号，</li>
<li>此时服务器进入SYN_RECV状态。</li>
</ul>
</li>
<li>第三次握手：<ul>
<li>客户端收到服务端的确认后，向服务端发送一个<strong>确认报文</strong>（ACK&#x3D;1），</li>
<li>确认号为 <code>ack = y + 1</code>，序列号为 <code>seq = x + 1</code>，</li>
<li>客户端和服务器进入ESTABLISHED状态，完成三次握手。</li>
</ul>
</li>
</ul>
<p>理想状态下，TCP连接一旦建立，在通信双方中的任何一方主动关闭连接之前，TCP 连接都将被一直保持下去。</p>
<h3 id="为什么需要三次握手，而不是两次？"><a href="#为什么需要三次握手，而不是两次？" class="headerlink" title="为什么需要三次握手，而不是两次？"></a>为什么需要三次握手，而不是两次？</h3><p>主要有三个原因：</p>
<ol>
<li><p>防止已过期的连接请求报文突然又传送到服务器，因而产生错误和资源浪费。</p>
<p>在双方两次握手即可建立连接的情况下，假设客户端发送 A 报文段请求建立连接，由于网络原因造成 A 暂时无法到达服务器，服务器接收不到请求报文段就不会返回确认报文段。</p>
<p>客户端在长时间得不到应答的情况下重新发送请求报文段 B，这次 B 顺利到达服务器，服务器随即返回确认报文并进入 ESTABLISHED 状态，客户端在收到 确认报文后也进入 ESTABLISHED 状态，双方建立连接并传输数据，之后正常断开连接。</p>
<p>此时姗姗来迟的 A 报文段才到达服务器，服务器随即返回确认报文并进入 ESTABLISHED 状态，但是已经进入 CLOSED 状态的客户端无法再接受确认报文段，更无法进入 ESTABLISHED 状态，这将导致服务器长时间单方面等待，造成资源浪费。</p>
</li>
<li><p>三次握手才能让双方均确认自己和对方的发送和接收能力都正常。</p>
<p>第一次握手：客户端只是发送处请求报文段，什么都无法确认，而服务器可以确认自己的接收能力和对方的发送能力正常；</p>
<p>第二次握手：客户端可以确认自己发送能力和接收能力正常，对方发送能力和接收能力正常；</p>
<p>第三次握手：服务器可以确认自己发送能力和接收能力正常，对方发送能力和接收能力正常；</p>
<p>可见三次握手才能让双方都确认自己和对方的发送和接收能力全部正常，这样就可以愉快地进行通信了。</p>
</li>
<li><p>告知对方自己的初始序号值，并确认收到对方的初始序号值。</p>
<p>TCP 实现了可靠的数据传输，原因之一就是 TCP 报文段中维护了序号字段和确认序号字段，通过这两个字段双方都可以知道在自己发出的数据中，哪些是已经被对方确认接收的。这两个字段的值会在初始序号值得基础递增，如果是两次握手，只有发起方的初始序号可以得到确认，而另一方的初始序号则得不到确认。</p>
</li>
</ol>
<h3 id="为什么要三次握手，而不是四次？"><a href="#为什么要三次握手，而不是四次？" class="headerlink" title="为什么要三次握手，而不是四次？"></a>为什么要三次握手，而不是四次？</h3><p>因为三次握手已经可以确认双方的发送接收能力正常，双方都知道彼此已经准备好，而且也可以完成对双方初始序号值得确认，也就无需再第四次握手了。</p>
<ul>
<li>第一次握手：服务端确认“自己收、客户端发”报文功能正常。</li>
<li>第二次握手：客户端确认“自己发、自己收、服务端收、客户端发”报文功能正常，客户端认为连接已建立。</li>
<li>第三次握手：服务端确认“自己发、客户端收”报文功能正常，此时双方均建立连接，可以正常通信。</li>
</ul>
<h2 id="什么是-SYN洪泛攻击？如何防范？"><a href="#什么是-SYN洪泛攻击？如何防范？" class="headerlink" title="什么是 SYN洪泛攻击？如何防范？"></a>什么是 SYN洪泛攻击？如何防范？</h2><p>SYN洪泛攻击属于 DOS 攻击的一种，它利用 TCP 协议缺陷，通过发送大量的半连接请求，耗费 CPU 和内存资源。</p>
<p>原理：</p>
<ul>
<li>在三次握手过程中，服务器发送 <code>[SYN/ACK]</code> 包（第二个包）之后、收到客户端的 <code>[ACK]</code> 包（第三个包）之前的 TCP 连接称为半连接（half-open connect），<ul>
<li>此时服务器处于 <code>SYN_RECV</code>（等待客户端响应）状态。如果接收到客户端的 <code>[ACK]</code>，则 TCP 连接成功，</li>
<li>如果未接受到，则会<strong>不断重发请求</strong>直至成功。</li>
</ul>
</li>
<li>SYN 攻击的攻击者在短时间内<strong>伪造大量不存在的 IP 地址</strong>，向服务器不断地发送 <code>[SYN]</code> 包，服务器回复 <code>[SYN/ACK]</code> 包，并等待客户的确认。由于源地址是不存在的，服务器需要不断的重发直至超时。</li>
<li>这些伪造的 <code>[SYN]</code> 包将长时间占用未连接队列，影响了正常的 SYN，导致目标系统运行缓慢、网络堵塞甚至系统瘫痪。</li>
</ul>
<p>检测：当在服务器上看到大量的半连接状态时，特别是源 IP 地址是随机的，基本上可以断定这是一次 SYN 攻击。</p>
<p>防范：</p>
<ul>
<li>通过防火墙、路由器等过滤网关防护。</li>
<li>通过加固 TCP&#x2F;IP 协议栈防范，如增加最大半连接数，缩短超时时间。</li>
<li>SYN cookies技术。SYN Cookies 是对 TCP 服务器端的三次握手做一些修改，专门用来防范 SYN 洪泛攻击的一种手段。</li>
</ul>
<h3 id="三次握手连接阶段，最后一次ACK包丢失，会发生什么？"><a href="#三次握手连接阶段，最后一次ACK包丢失，会发生什么？" class="headerlink" title="三次握手连接阶段，最后一次ACK包丢失，会发生什么？"></a>三次握手连接阶段，最后一次ACK包丢失，会发生什么？</h3><p><strong>服务端</strong>：</p>
<ul>
<li>第三次的ACK在网络中丢失，那么服务端该TCP连接的状态为SYN_RECV,并且会根据 TCP的超时重传机制，会等待3秒、6秒、12秒后重新发送SYN+ACK包，以便客户端重新发送ACK包。</li>
<li>如果重发指定次数之后，仍然未收到 客户端的ACK应答，那么一段时间后，服务端自动关闭这个连接。</li>
</ul>
<p><strong>客户端</strong>：</p>
<p>客户端认为这个连接已经建立，如果客户端向服务端发送数据，服务端将以RST包（Reset，标示复位，用于异常的关闭连接）响应。此时，客户端知道第三次握手失败。</p>
<h2 id="详细介绍一下-TCP-的四次挥手过程？"><a href="#详细介绍一下-TCP-的四次挥手过程？" class="headerlink" title="详细介绍一下 TCP 的四次挥手过程？"></a>详细介绍一下 TCP 的四次挥手过程？</h2><p><img src="http://blog-img.coolsen.cn/img/image-20210520180127547.png"></p>
<blockquote>
<p>图片来源：<a target="_blank" rel="noopener" href="https://juejin.im/post/5ddd1f30e51d4532c42c5abe">https://juejin.im/post/5ddd1f30e51d4532c42c5abe</a></p>
</blockquote>
<ul>
<li><p>第一次挥手：客户端向服务端发送连接释放报文（FIN&#x3D;1，ACK&#x3D;1），主动关闭连接，同时等待服务端的确认。</p>
<ul>
<li>序列号 seq &#x3D; u，即客户端上次发送的报文的最后一个字节的序号 + 1</li>
<li>确认号 ack &#x3D; k, 即服务端上次发送的报文的最后一个字节的序号 + 1</li>
</ul>
</li>
<li><p>第二次挥手：服务端收到连接释放报文后，立即发出<strong>确认报文</strong>（ACK&#x3D;1），序列号 seq &#x3D; k，确认号 ack &#x3D; u + 1。</p>
<p>这时 TCP 连接处于半关闭状态，即客户端到服务端的连接已经释放了，但是服务端到客户端的连接还未释放。这表示客户端已经没有数据发送了，但是服务端可能还要给客户端发送数据。</p>
</li>
<li><p>第三次挥手：服务端向客户端发送连接释放报文（FIN&#x3D;1，ACK&#x3D;1），主动关闭连接，同时等待 A 的确认。</p>
<ul>
<li>序列号 seq &#x3D; w，即服务端上次发送的报文的最后一个字节的序号 + 1。</li>
<li>确认号 ack &#x3D; u + 1，与第二次挥手相同，因为这段时间客户端没有发送数据</li>
</ul>
</li>
<li><p>第四次挥手：客户端收到服务端的连接释放报文后，立即发出<strong>确认报文</strong>（ACK&#x3D;1），序列号 seq &#x3D; u + 1，确认号为 ack &#x3D; w + 1。</p>
<p>此时，客户端就进入了 <code>TIME-WAIT</code> 状态。注意此时客户端到 TCP 连接还没有释放，必须经过 2*MSL（最长报文段寿命）的时间后，才进入 <code>CLOSED</code> 状态。而服务端只要收到客户端发出的确认，就立即进入 <code>CLOSED</code> 状态。可以看到，服务端结束 TCP 连接的时间要比客户端早一些。</p>
</li>
</ul>
<h3 id="为什么连接的时候是三次握手，关闭的时候却是四次握手？"><a href="#为什么连接的时候是三次握手，关闭的时候却是四次握手？" class="headerlink" title="为什么连接的时候是三次握手，关闭的时候却是四次握手？"></a>为什么连接的时候是三次握手，关闭的时候却是四次握手？</h3><p>服务器在收到客户端的 FIN 报文段后，可能还有一些数据要传输，所以不能马上关闭连接，但是会做出应答，返回 ACK 报文段.</p>
<p>接下来可能会继续发送数据，在数据发送完后，服务器会向客户单发送 FIN 报文，表示数据已经发送完毕，请求关闭连接。服务器的<strong>ACK和FIN一般都会分开发送</strong>，从而导致多了一次，因此一共需要四次挥手。</p>
<h3 id="为什么客户端的-TIME-WAIT-状态必须等待-2MSL-？"><a href="#为什么客户端的-TIME-WAIT-状态必须等待-2MSL-？" class="headerlink" title="为什么客户端的 TIME-WAIT 状态必须等待 2MSL ？"></a>为什么客户端的 TIME-WAIT 状态必须等待 2MSL ？</h3><p>主要有两个原因：</p>
<ol>
<li><p>确保 ACK 报文能够到达服务端，从而使服务端正常关闭连接。</p>
<p>第四次挥手时，客户端第四次挥手的 ACK 报文不一定会到达服务端。服务端会超时重传 FIN&#x2F;ACK 报文，此时如果客户端已经断开了连接，那么就无法响应服务端的二次请求，这样服务端迟迟收不到 FIN&#x2F;ACK 报文的确认，就无法正常断开连接。</p>
<p>MSL 是报文段在网络上存活的最长时间。客户端等待 2MSL 时间，即「客户端 ACK 报文 1MSL 超时 + 服务端 FIN 报文 1MSL 传输」，就能够收到服务端重传的 FIN&#x2F;ACK 报文，然后客户端重传一次 ACK 报文，并重新启动 2MSL 计时器。如此保证服务端能够正常关闭。</p>
<p>如果服务端重发的 FIN 没有成功地在 2MSL 时间里传给客户端，服务端则会继续超时重试直到断开连接。</p>
</li>
<li><p>防止已失效的连接请求报文段出现在之后的连接中。</p>
<p>TCP 要求在 2MSL 内不使用相同的序列号。客户端在发送完最后一个 ACK 报文段后，再经过时间 2MSL，就可以保证本连接持续的时间内产生的所有报文段都从网络中消失。这样就可以使下一个连接中不会出现这种旧的连接请求报文段。或者即使收到这些过时的报文，也可以不处理它。</p>
</li>
</ol>
<h3 id="如果已经建立了连接，但是客户端出现故障了怎么办？"><a href="#如果已经建立了连接，但是客户端出现故障了怎么办？" class="headerlink" title="如果已经建立了连接，但是客户端出现故障了怎么办？"></a>如果已经建立了连接，但是客户端出现故障了怎么办？</h3><p>或者说，如果三次握手阶段、四次挥手阶段的包丢失了怎么办？如“服务端重发 FIN丢失”的问题。</p>
<p>简而言之，通过<strong>定时器 + 超时重试机制</strong>，尝试获取确认，直到最后会自动断开连接。</p>
<p>具体而言，TCP 设有一个保活计时器。服务器每收到一次客户端的数据，都会重新复位这个计时器，时间通常是设置为 2 小时。若 2 小时还没有收到客户端的任何数据，服务器就开始重试：每隔 75 分钟发送一个探测报文段，若一连发送 10 个探测报文后客户端依然没有回应，那么服务器就认为连接已经断开了。</p>
<h3 id="TIME-WAIT-状态过多会产生什么后果？怎样处理？"><a href="#TIME-WAIT-状态过多会产生什么后果？怎样处理？" class="headerlink" title="TIME-WAIT 状态过多会产生什么后果？怎样处理？"></a>TIME-WAIT 状态过多会产生什么后果？怎样处理？</h3><p>从服务器来讲，短时间内关闭了大量的Client连接，就会造成服务器上出现大量的TIME_WAIT连接，严重消耗着服务器的资源，此时部分客户端就会显示连接不上。</p>
<p>从客户端来讲，客户端TIME_WAIT过多，就会导致端口资源被占用，因为端口就65536个，被占满就会导致无法创建新的连接。</p>
<p><strong>解决办法</strong>：</p>
<ul>
<li><p>服务器可以设置 SO_REUSEADDR 套接字选项来避免 TIME_WAIT状态，此套接字选项告诉内核，即使此端口正忙（处于<br>TIME_WAIT状态），也请继续并重用它。</p>
</li>
<li><p>调整系统内核参数，修改&#x2F;etc&#x2F;sysctl.conf文件，即修改<code>net.ipv4.tcp_tw_reuse 和 tcp_timestamps</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.tcp_tw_reuse = 1 表示开启重用。允许将TIME-WAIT sockets重新用于新的TCP连接，默认为0，表示关闭；</span><br><span class="line">net.ipv4.tcp_tw_recycle = 1 表示开启TCP连接中TIME-WAIT sockets的快速回收，默认为0，表示关闭。</span><br></pre></td></tr></table></figure>
</li>
<li><p>强制关闭，发送 RST 包越过TIME_WAIT状态，直接进入CLOSED状态。</p>
</li>
</ul>
<h3 id="TIME-WAIT-是服务器端的状态-还是客户端的状态"><a href="#TIME-WAIT-是服务器端的状态-还是客户端的状态" class="headerlink" title="TIME_WAIT 是服务器端的状态?还是客户端的状态?"></a>TIME_WAIT 是服务器端的状态?还是客户端的状态?</h3><p>TIME_WAIT 是主动断开连接的一方会进入的状态，一般情况下，都是客户端所处的状态;服务器端一般设置不主动关闭连接。</p>
<p>TIME_WAIT 需要等待 2MSL，在大量短连接的情况下，TIME_WAIT会太多，这也会消耗很多系统资源。对于服务器来说，在 HTTP 协议里指定 KeepAlive（浏览器重用一个 TCP 连接来处理多个 HTTP 请求），由浏览器来主动断开连接，可以一定程度上减少服务器的这个问题。</p>
<h2 id="阿里云秋招笔试题的一个选择题"><a href="#阿里云秋招笔试题的一个选择题" class="headerlink" title="阿里云秋招笔试题的一个选择题"></a>阿里云秋招笔试题的一个选择题</h2><p>现在有一个数据部分长度为8192B的数据需要通过UDP在以太网上传播，经过分片化为多个IP数据报片，这些片中的数据部分长度都有哪些?(假设按照最大长度分片)， <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42193813/article/details/105868943">计网习题</a></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/12/">Previous</a></div><div class="pagination-next"><a href="/page/14/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/12/">12</a></li><li><a class="pagination-link is-current" href="/page/13/">13</a></li><li><a class="pagination-link" href="/page/14/">14</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/43/">43</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">𝘊𝘰𝘮𝘱𝘶𝘵𝘦𝘳 𝘈𝘳𝘤𝘩𝘪𝘵𝘦𝘤𝘵𝘶𝘳𝘦 &amp; 𝘏𝘗𝘊</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">427</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">35</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">516</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">41</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/Camp/"><span class="level-start"><span class="level-item">Camp</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math/"><span class="level-start"><span class="level-item">Math</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile" href="/categories/ProjectRecord/"><span class="level-start"><span class="level-item">ProjectRecord</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Thinking/"><span class="level-start"><span class="level-item">Thinking</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">116</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/love/"><span class="level-start"><span class="level-item">love</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/programming/"><span class="level-start"><span class="level-item">programming</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">55</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-10-18T03:24:45.000Z">2024-10-18</time></p><p class="title"><a href="/2024/10/18/Work/software/perf/gperftools/">Gperftools</a></p><p class="categories"><a href="/categories/software/">software</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-10-11T03:04:55.000Z">2024-10-11</time></p><p class="title"><a href="/2024/10/11/Work/Programming/DebugProfile/DebugProfilePTA/">Debug/Profile/Devlop Tools of PTA</a></p><p class="categories"><a href="/categories/toLearn/">toLearn</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-22T09:19:48.000Z">2024-09-22</time></p><p class="title"><a href="/2024/09/22/Work/software/simulator/PC/VirtualBox/">VirtualBox</a></p><p class="categories"><a href="/categories/software/">software</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-13T07:08:55.000Z">2024-09-13</time></p><p class="title"><a href="/2024/09/13/Work/software/PC/macbook/">Macbook Config</a></p><p class="categories"><a href="/categories/software/">software</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-13T00:47:35.000Z">2024-09-13</time></p><p class="title"><a href="/2024/09/13/Work/Programming/2-languageGrammar/c/Types/">[C++ Basic] Types</a></p><p class="categories"><a href="/categories/toLearn/">toLearn</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/10/"><span class="level-start"><span class="level-item">October 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/09/"><span class="level-start"><span class="level-item">September 2024</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/08/"><span class="level-start"><span class="level-item">August 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/07/"><span class="level-start"><span class="level-item">July 2024</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/06/"><span class="level-start"><span class="level-item">June 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/05/"><span class="level-start"><span class="level-item">May 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">April 2024</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">March 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">February 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/01/"><span class="level-start"><span class="level-item">January 2024</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">December 2023</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">November 2023</span></span><span class="level-end"><span class="level-item tag">33</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">October 2023</span></span><span class="level-end"><span class="level-item tag">58</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/09/"><span class="level-start"><span class="level-item">September 2023</span></span><span class="level-end"><span class="level-item tag">37</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">August 2023</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">July 2023</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">June 2023</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">May 2023</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">April 2023</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">March 2023</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">February 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">January 2023</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">December 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/11/"><span class="level-start"><span class="level-item">November 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">October 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">September 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">August 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">July 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">May 2022</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">April 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">March 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">February 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">January 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">December 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">November 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">September 2021</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2024 Shaojie Tan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>