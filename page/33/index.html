<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="SHAOJIE&#039;S BOOK"><meta property="og:url" content="http://icarus.shaojiemike.top/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://icarus.shaojiemike.top/img/og_image.png"><meta property="article:author" content="Shaojie Tan"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://icarus.shaojiemike.top/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top"},"headline":"SHAOJIE'S BOOK","image":["http://icarus.shaojiemike.top/img/og_image.png"],"author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-12-08T16:00:00.000Z" title="12/8/2021, 4:00:00 PM">2021-12-08</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-02-26T09:12:51.814Z" title="2/26/2024, 9:12:51 AM">2024-02-26</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">8 minutes read (About 1237 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/08/Work/Programming/2.1-Assembly/assembly-arm/">Assembly Arm</a></p><div class="content"><p>关于X86 与 arm的寄存器的区别写在了arm那篇下</p>
<h2 id="arm"><a href="#arm" class="headerlink" title="arm"></a>arm</h2><p><a target="_blank" rel="noopener" href="https://developer.arm.com/documentation/dui0068/b/CIHEDHIF">https://developer.arm.com/documentation/dui0068/b/CIHEDHIF</a></p>
<h2 id="Arm-的四种寻址方式"><a href="#Arm-的四种寻址方式" class="headerlink" title="Arm 的四种寻址方式"></a>Arm 的四种寻址方式</h2><p><a target="_blank" rel="noopener" href="https://azeria-labs.com/memory-instructions-load-and-store-part-4/">ldr &amp; str</a></p>
<p><img src="https://pic.shaojiemike.top/img/20230205152911.png"><br><img src="https://pic.shaojiemike.top/img/20220719162149.png"></p>
<h2 id="Aarch64"><a href="#Aarch64" class="headerlink" title="Aarch64"></a>Aarch64</h2><p>Arm A64 Instruction Set Architecture<br><a target="_blank" rel="noopener" href="https://modexp.wordpress.com/2018/10/30/arm64-assembly/">https://modexp.wordpress.com/2018/10/30/arm64-assembly/</a></p>
<p>直接阅读文档 Arm® A64 Instruction Set Architecture<br>Armv8, for Armv8-A architecture profile最有效</p>
<h3 id="指令后缀说明"><a href="#指令后缀说明" class="headerlink" title="指令后缀说明"></a>指令后缀说明</h3><p>read from ARMv8 Instruction Set Overview 4.2  Instruction  Mnemonics</p>
<p>The container is one of:<br><img src="https://pic.shaojiemike.top/img/20211025094947.png"></p>
<p>The subtype is one of:<br><img src="https://pic.shaojiemike.top/img/20211025095427.png"></p>
<p>combine</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;name&gt;&#123;&lt;subtype&gt;&#125;      &lt;container&gt; </span><br></pre></td></tr></table></figure>

<p><img src="https://pic.shaojiemike.top/img/20211113205251.png"></p>
<p>注意后缀的作用主体<br><img src="https://pic.shaojiemike.top/img/20230205153128.png"><br><img src="https://pic.shaojiemike.top/img/20211113210709.png"></p>
<h3 id="指令速查"><a href="#指令速查" class="headerlink" title="指令速查"></a>指令速查</h3><p>官网查找指令: <a target="_blank" rel="noopener" href="https://developer.arm.com/architectures/instruction-sets/intrinsics">https://developer.arm.com/architectures/instruction-sets/intrinsics</a></p>
<p><img src="https://pic.shaojiemike.top/img/20211025100800.png"><br><img src="https://pic.shaojiemike.top/img/20211025100853.png"><br><img src="https://pic.shaojiemike.top/img/20211025100907.png"></p>
<p><a target="_blank" rel="noopener" href="https://armconverter.com/?disasm&code=0786b04e">https://armconverter.com/?disasm&amp;code=0786b04e</a></p>
<p><img src="https://pic.shaojiemike.top/img/20211113205847.png"></p>
<h3 id="SIMD-vector"><a href="#SIMD-vector" class="headerlink" title="SIMD&#x2F;vector"></a>SIMD&#x2F;vector</h3><p>几乎每个指令都可以同时作用在不同寄存器和vector或者scalar上。比如add指令，并没有像X86一样设计vadd或者addps等单独<br>的指令，如果一定要区分，只能从寄存器是不是vector下手。</p>
<p>根据这个图，确实是有做向量操作的add，FADD是float-add的意思，ADDP是将相邻的寄存器相加放入目的寄存器的意思。不影响是标量scalar还是向量vector的操作。addv是将一个向量寄存器里的每个分量归约求和的意思，确实只能用在向量指令。<br><img src="https://pic.shaojiemike.top/img/20211025112813.png"></p>
<!-- ![](https://pic.shaojiemike.top/img/20211025122202.png) -->
<p>由于需要满足64或者128位只有下面几种情况<br><img src="https://pic.shaojiemike.top/img/20221030162500.png"></p>
<p>需要额外注意的是另外一种写法，位操作指令，不在乎寄存器形状shape</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 128位and</span><br><span class="line">and %q3 %q7 -&gt; %q3</span><br><span class="line">and v3.16b, v3.16b, v7.16b</span><br></pre></td></tr></table></figure>
<p>是同一个意思，但是不支持<code>and v3.8h, v3.8h, v7.8h</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DUP <span class="comment">//Duplicate general-purpose register to vector.or Duplicate vector element to vector or scalar.</span></span><br><span class="line">addp <span class="comment">//Add Pair of elements (scalar). This instruction adds two vector elements in the source SIMD&amp;FP register and writes </span></span><br><span class="line"><span class="comment">//the scalar result into the destination SIMD&amp;FP register.</span></span><br></pre></td></tr></table></figure>

<h3 id="calculate"><a href="#calculate" class="headerlink" title="calculate"></a>calculate</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">add</span><br><span class="line">addp <span class="comment">//Add Pair of elements (scalar). This instruction adds two vector elements in the source SIMD&amp;FP register and writes the scalar result into the destination SIMD&amp;FP register.</span></span><br><span class="line">adds <span class="comment">// Add , setting ﬂags.</span></span><br><span class="line">eor <span class="comment">// Bitwise Exclusive OR</span></span><br><span class="line">orr <span class="comment">// Move (register) copies the value in a source register to the destination register. Alias of ORR.</span></span><br></pre></td></tr></table></figure>

<h3 id="Address"><a href="#Address" class="headerlink" title="Address"></a>Address</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ADRP <span class="comment">// Form PC-relative address to 4KB page.</span></span><br></pre></td></tr></table></figure>

<h3 id="Branch"><a href="#Branch" class="headerlink" title="Branch"></a>Branch</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">b.cond <span class="comment">// branch condition eg. b.ne</span></span><br><span class="line">bl <span class="comment">//Branch with Link branches to a PC-relative oﬀset, setting the register X30 to PC+4 </span></span><br><span class="line"><span class="comment">//带链接的跳转。 首先将当前指令的下一条指令地址保存在LR寄存器，然后跳转的lable。通常用于调用子程序，可通过在子程序的尾部添加mov  pc, lr 返回。</span></span><br><span class="line">blr <span class="comment">//Branch with Link to Register calls a subroutine at an address in a register, setting register X30 to PC+4.</span></span><br><span class="line">cbnz <span class="comment">//Compare and Branch on Nonzero compares the value in a register with zero, and conditionally branches to a label at a PC-relative offset if the comparison is not equal. It provides a hint that this is not a subroutine call or return. This instruction does not affect the condition flags.</span></span><br><span class="line">tbnz <span class="comment">// test and branch not zero</span></span><br><span class="line">ret <span class="comment">//Return from subroutine, branches unconditionally to an address in a register, with a hint that this is a subroutine return.</span></span><br></pre></td></tr></table></figure>

<h3 id="Load-Store"><a href="#Load-Store" class="headerlink" title="Load&#x2F;Store"></a>Load&#x2F;Store</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ldrb <span class="comment">// b是byte的意思</span></span><br><span class="line">ldar <span class="comment">// LDAR Load-Acquire(申请锁) Register </span></span><br><span class="line">STLR <span class="comment">//Store-Release(释放锁) Register </span></span><br><span class="line">ldp <span class="comment">// load pair(two) register</span></span><br><span class="line">stp <span class="comment">// store pair(two) register</span></span><br><span class="line"><span class="built_in">ldr</span>(b/h/sb/sh/sw) <span class="comment">// load register , sb/sh/sw is signed byte/half/word</span></span><br><span class="line">str <span class="comment">// store register</span></span><br><span class="line">ldur <span class="comment">// load register (unscaled) unscaled means that in the machine-code, the offset will not be encoded with a scaled offset like ldr uses. or offset is minus.</span></span><br><span class="line">prfm <span class="comment">// prefetch memory</span></span><br></pre></td></tr></table></figure>

<h3 id="Control-conditional"><a href="#Control-conditional" class="headerlink" title="Control&#x2F;conditional"></a>Control&#x2F;conditional</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ccmp <span class="comment">// comdition compare</span></span><br><span class="line">CMEQ <span class="comment">// Compare bitwise Equal (vector). This instruction compares each vector element from the frst source SIMD&amp;FP register with the corresponding vector element from the second source SIMD&amp;FP register</span></span><br><span class="line">CSEL <span class="comment">// If the condition is true, Conditional Select writes the value of the frst source register to the destination register. If the condition is false, it writes the value of the second source register to the destination register.</span></span><br><span class="line">CSINC <span class="comment">//Conditional Select Increment returns</span></span><br><span class="line">CSINV <span class="comment">//Conditional Select Invert returns</span></span><br><span class="line">CSNEG <span class="comment">//Conditional Select Negation returns</span></span><br></pre></td></tr></table></figure>

<h3 id="Logic-Move"><a href="#Logic-Move" class="headerlink" title="Logic&amp;Move"></a>Logic&amp;Move</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ASRV <span class="comment">//Arithmetic Shift Right Variable</span></span><br><span class="line">lsl <span class="comment">//logic shift left</span></span><br><span class="line">orr <span class="comment">//bitwise(逐位) or</span></span><br><span class="line">eor <span class="comment">//Bitwise Exclusive OR</span></span><br><span class="line">TST/ANDS <span class="comment">//Test bits (immediate), setting the condition flags and discarding the result. Alias of ANDS.</span></span><br><span class="line">MOVZ <span class="comment">//Move wide with zero moves an optionally-shifted 16-bit immediate value to a register</span></span><br><span class="line">UBFM <span class="comment">// Unigned Bitfield Move. This instruction is used by the aliases LSL (immediate), LSR (immediate), UBFIZ, UBFX, UXTB, and UXTH</span></span><br><span class="line">BFM <span class="comment">//Bitfield Move</span></span><br><span class="line"><span class="built_in">BIC</span> (shifted <span class="keyword">register</span>) <span class="comment">//Bitwise Bit Clear</span></span><br><span class="line">CLZ <span class="comment">// Count Leading Zeros counts the number of binary zero bits before the frst binary one bit in the value of the source register, and writes the result to the destination register.</span></span><br><span class="line">REV, REV16, REVSH, <span class="keyword">and</span> RBIT <span class="comment">// below</span></span><br><span class="line">REV <span class="comment">//Reverse byte order in a word.</span></span><br><span class="line">REV16 <span class="comment">//Reverse byte order in each halfword independently.</span></span><br><span class="line">REVSH <span class="comment">//Reverse byte order in the bottom halfword, and sign extend to 32 bits.</span></span><br><span class="line">RBIT <span class="comment">//Reverse the bit order in a 32-bit word.</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic.shaojiemike.top/img/20211209180945.png"></p>
<h3 id="Modifier"><a href="#Modifier" class="headerlink" title="Modifier"></a>Modifier</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uxtb <span class="comment">// zero extend byte 无符号（Unsigned）扩展一个字节（Byte）到 32位</span></span><br></pre></td></tr></table></figure>

<h3 id="system"><a href="#system" class="headerlink" title="system"></a>system</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dmb  //data memory barrier</span><br><span class="line">SVC //The SVC instruction causes an exception. This means that the processor mode changes to Supervisor,</span><br></pre></td></tr></table></figure>

<h3 id="ARM-no-push-pop"><a href="#ARM-no-push-pop" class="headerlink" title="ARM no push&#x2F;pop"></a>ARM no push&#x2F;pop</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PUSH &#123;r3&#125;</span><br><span class="line">POP &#123;r3&#125;</span><br></pre></td></tr></table></figure>

<p>are aliases for</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str r3, [sp, #-4]!</span><br><span class="line">ldr r3, [sp], #4</span><br></pre></td></tr></table></figure>

<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.cs.virginia.edu/~evans/cs216/guides/x86.html">https://www.cs.virginia.edu/~evans/cs216/guides/x86.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/gaojinshan/article/details/11534569">https://blog.csdn.net/gaojinshan/article/details/11534569</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-03T06:51:23.000Z" title="11/3/2021, 6:51:23 AM">2021-11-03</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-02-26T09:12:51.818Z" title="2/26/2024, 9:12:51 AM">2024-02-26</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">3 minutes read (About 449 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/03/Work/Programming/info/Intel_Intrinsics_Guide/">Intel® Intrinsics Guide</a></p><div class="content"><h2 id="符号说明"><a href="#符号说明" class="headerlink" title="符号说明"></a>符号说明</h2><p> <code>_mm_sin_ps</code> intrinsic is a packed <strong>128-bit</strong> vector of <strong>four</strong> <strong>32-bit</strong> precision floating point numbers.The intrinsic computes the sine of each of these four numbers and returns the four results in a packed 128-bit vector.</p>
<h2 id="ISA"><a href="#ISA" class="headerlink" title="ISA"></a>ISA</h2><h3 id="AVX2-AVX"><a href="#AVX2-AVX" class="headerlink" title="AVX2 &amp; AVX"></a>AVX2 &amp; AVX</h3><p>AVX2在AVX的基础上完善了256位寄存器的一些实现</p>
<h3 id="FMA"><a href="#FMA" class="headerlink" title="FMA"></a>FMA</h3><p>float-point multiply add&#x2F;sub </p>
<p>include 128&#x2F;256 bits regs</p>
<h3 id="AVX-VNNI"><a href="#AVX-VNNI" class="headerlink" title="AVX_VNNI"></a>AVX_VNNI</h3><p>AVX-VNNI is a VEX-coded variant of the AVX512-VNNI instruction set extension. It provides the same set of operations, but is limited to 256-bit vectors and does not support any additional features of EVEX encoding, such as broadcasting, opmask registers or accessing more than 16 vector registers. This extension allows to support VNNI operations even when full AVX-512 support is not implemented by the processor.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dpbusd  //_mm_dpbusd_avx_epi32</span><br><span class="line">dpwssd // b 与 w 是 byte 和dword。 us和ss是ab两数是不是signed</span><br><span class="line">dpwssds // 最后的s是 signed saturation饱和计算的意思，计算不允许越界。</span><br></pre></td></tr></table></figure>
<p><img src="https://pic.shaojiemike.top/img/1635924569974.jpg"></p>
<h3 id="AVX-512"><a href="#AVX-512" class="headerlink" title="AVX-512"></a>AVX-512</h3><p>有时间再看吧<br><img src="https://pic.shaojiemike.top/img/20211103153031.png"></p>
<h3 id="KNC"><a href="#KNC" class="headerlink" title="KNC"></a>KNC</h3><p>current generation of Intel Xeon Phi co-processors (codename “<strong>Knight’s Corner</strong>“, abbreviated KNC) supports <strong>512-bit</strong> SIMD instruction set called “Intel® Initial Many Core Instructions” (abbreviated Intel® IMCI).</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/22670205/are-there-simdsse-avx-instructions-in-the-x86-compatible-accelerators-intel">https://stackoverflow.com/questions/22670205/are-there-simdsse-avx-instructions-in-the-x86-compatible-accelerators-intel</a></p>
<h3 id="AMX"><a href="#AMX" class="headerlink" title="AMX"></a>AMX</h3><p>Intel® <strong>Advanced Matrix Extensions</strong> (Intel® AMX) is a new 64-bit programming paradigm consisting of two components:</p>
<ul>
<li>A set of 2-dimensional registers (tiles) representing sub-arrays from a larger 2-dimensional memory image</li>
<li>An accelerator that is able to operate on tiles; the first implementation of this accelerator is called TMUL (tile matrix multiply unit).<br><img src="https://pic.shaojiemike.top/img/20211103154101.png"></li>
</ul>
<p>这个不适用于特殊矩阵和稀疏矩阵，这类一般先转换化简再SIMD</p>
<h3 id="SVML"><a href="#SVML" class="headerlink" title="SVML"></a>SVML</h3><p>Short Vector Math Library Operations (SVML)</p>
<p>The Intel® oneAPI DPC++&#x2F;C++ Compiler provides short vector math library (SVML) intrinsics to compute vector math functions. These intrinsics are available for IA-32 and Intel® 64 architectures running on supported operating systems. The prototypes for the SVML intrinsics are available in the immintrin.h file.</p>
<p>Using SVML intrinsics is faster than repeatedly calling the scalar math functions. However, the intrinsics differ from the scalar functions in accuracy.</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-03T06:40:48.000Z" title="11/3/2021, 6:40:48 AM">2021-11-03</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-02-26T09:12:51.810Z" title="2/26/2024, 9:12:51 AM">2024-02-26</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">5 minutes read (About 747 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/03/Work/HPC/tricks/manualAVX256/">Manual AVX256 SIMD</a></p><div class="content"><h2 id="类型区别"><a href="#类型区别" class="headerlink" title="类型区别"></a>类型区别</h2><p>The __m256 data type can hold eight 32-bit floating-point values. </p>
<p>The __m256d data type can hold four 64-bit double precision floating-point values. </p>
<p>The __m256i data type can hold thirty-two 8-bit, sixteen 16-bit, eight 32-bit, or four 64-bit integer values</p>
<h2 id="向量预取"><a href="#向量预取" class="headerlink" title="向量预取"></a>向量预取</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_mm512_mask_prefetch_i32extgather_ps</span><br></pre></td></tr></table></figure>
<h2 id="Load-Store"><a href="#Load-Store" class="headerlink" title="Load &amp; Store"></a>Load &amp; Store</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">__m256i _mm256_loadu_epi32 (void const* mem_addr) //读入连续的256位数据，为32位int</span><br><span class="line">_mm256_lddqu_si256 //上面识别不了也可以考虑这个</span><br><span class="line">__m256d _mm256_loadu_pd (double const * mem_addr) // 读入连续4个double</span><br><span class="line">__m256d _mm256_broadcast_sd (double const * mem_addr) // 读取一个double，并复制4份</span><br><span class="line">__m256d _mm256_i64gather_pd (double const* base_addr, __m256i vindex, const int scale) // 间隔读取</span><br><span class="line">scatter // 类似间隔读取</span><br><span class="line">_mm512_mask_prefetch_i32extgather_ps // 有选择预取</span><br><span class="line">mask // 根据掩码选择不读，0等操作</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_mm256_stream_pd // 跳过cache直接写入内存，但是需要对齐</span><br><span class="line">_mm_storeu_si128 // int直接写入内存，不需要对齐</span><br></pre></td></tr></table></figure>
<h3 id="不连续读取"><a href="#不连续读取" class="headerlink" title="不连续读取"></a>不连续读取</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">long long int vindexList = [0,2,4,6];</span><br><span class="line">__m256i vindex = __mm256_loadu_epi64(vindexList);</span><br><span class="line">__m256d vj1 = __mm256_i64gather_pd(&amp;rebuiltCoord[jj*k], vindex, 1);</span><br></pre></td></tr></table></figure>

<h3 id="设置每个元素"><a href="#设置每个元素" class="headerlink" title="设置每个元素"></a>设置每个元素</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">__m256d _mm256_set_pd (double e3, double e2, double e1, double e0) // 设置为四个元素</span><br><span class="line">__m256d _mm256_set1_pd (double a) // 设置为同一个元素</span><br></pre></td></tr></table></figure>
<h2 id="Arithmetic"><a href="#Arithmetic" class="headerlink" title="Arithmetic"></a>Arithmetic</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">_mm256_hadd_epi16 // Horizontally add eg.dst[15:0] := a[31:16] + a[15:0]</span><br><span class="line">_mm256_mulhi_epi16 // Multiply the packed signed 16-bit integers in a and b, producing intermediate 32-bit integers, and store the high 16 bits of the intermediate integers in dst.</span><br><span class="line">_mm256_sign_epi16 // 根据b的值，将-a/0/a存入dst</span><br><span class="line">// 乘加，乘减，的计算组合也有</span><br></pre></td></tr></table></figure>
<h3 id="横向结果归约"><a href="#横向结果归约" class="headerlink" title="横向结果归约"></a>横向结果归约</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_mm256_reduce_add_ph // 求和</span><br></pre></td></tr></table></figure>
<h3 id="手动实现向量浮点abs绝对值"><a href="#手动实现向量浮点abs绝对值" class="headerlink" title="手动实现向量浮点abs绝对值"></a>手动实现向量浮点abs绝对值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">static const double DP_SIGN_One = 0x7fffffffffffffff;</span><br><span class="line">__m256d vDP_SIGN_Mask = _mm256_set1_pd(DP_SIGN_One);</span><br><span class="line">vj1 = _mm256_and_pd(vj1, vDP_SIGN_Mask);</span><br></pre></td></tr></table></figure>
<h2 id="Shift"><a href="#Shift" class="headerlink" title="Shift"></a>Shift</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_mm_bsrli_si128 // byte shift right </span><br><span class="line">_mm_slli_epi16 // shift left</span><br></pre></td></tr></table></figure>

<h2 id="logic"><a href="#logic" class="headerlink" title="logic"></a>logic</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_mm_test_all_zeros</span><br><span class="line">_mm_test_all_ones //判断是不是全0或1</span><br></pre></td></tr></table></figure>

<h2 id="Elementary-Math-Functions"><a href="#Elementary-Math-Functions" class="headerlink" title="Elementary Math Functions"></a>Elementary Math Functions</h2><p>向量化 取反、sqrt</p>
<h2 id="Convert"><a href="#Convert" class="headerlink" title="Convert"></a>Convert</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_mm256_cvtepi32_pd // Convert_Int32_To_FP64</span><br></pre></td></tr></table></figure>

<h2 id="Compare"><a href="#Compare" class="headerlink" title="Compare"></a>Compare</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_mm256_cmp_pd // 按照double 32 bit 比较</span><br></pre></td></tr></table></figure>

<h2 id="Swizzle（混合）"><a href="#Swizzle（混合）" class="headerlink" title="Swizzle（混合）"></a>Swizzle（混合）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_mm256_blendv_pd // 根据mask结果，从a和b里选择写入dst</span><br><span class="line">_mm_blend_epi32 // 寄存器内数据的移动</span><br><span class="line">_mm256_permute4x64_epi64 // 寄存器高位复制到低位</span><br><span class="line">VEXTRACTF128 __m128d _mm256_extractf128_pd (__m256d a, int offset); // 寄存器内数据的移动</span><br><span class="line">VUNPCKHPD __m512d _mm512_unpackhi_pd( __m512d a, __m512d b); //寄存器内数据的移动</span><br></pre></td></tr></table></figure>

<h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">__m256d _mm256_undefined_pd (void)</span><br><span class="line">__m128i low = _mm256_castsi256_si128(v);  //__m256i 变 type __m128i,源向量较低的128位不变地传递给结果。这种内在的特性不会向生成的代码引入额外的操作。</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.shaojiemike.top/img/20220729190524.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Select4(SRC, control) &#123;</span><br><span class="line">CASE (control[1:0]) OF</span><br><span class="line">    0: TMP ←SRC[31:0];</span><br><span class="line">    1: TMP ←SRC[63:32];</span><br><span class="line">    2: TMP ←SRC[95:64];</span><br><span class="line">    3: TMP ←SRC[127:96];</span><br><span class="line">ESAC;</span><br><span class="line">RETURN TMP</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">VSHUFPS (VEX.128 encoded version) ¶</span><br><span class="line">DEST[31:0]  ←Select4(SRC1[127:0], imm8[1:0]);</span><br><span class="line">DEST[63:32] ←Select4(SRC1[127:0], imm8[3:2]);</span><br><span class="line">DEST[95:64] ←Select4(SRC2[127:0], imm8[5:4]);</span><br><span class="line">DEST[127:96]←Select4(SRC2[127:0], imm8[7:6]);</span><br><span class="line">DEST[MAXVL-1:128] ←0</span><br></pre></td></tr></table></figure>
<p><img src="https://pic.shaojiemike.top/img/2a0f1af33818c9900201c5b9090b905.jpg"><br>之后float类型转换为double，再求和。</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/docs/intrinsics-guide/index.html#text=_mm256_loadu_pd&ig_expand=4317">https://www.intel.com/content/www/us/en/docs/intrinsics-guide/index.html#text=_mm256_loadu_pd&amp;ig_expand=4317</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-26T01:03:53.000Z" title="10/26/2021, 1:03:53 AM">2021-10-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-02-26T09:12:51.798Z" title="2/26/2024, 9:12:51 AM">2024-02-26</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">a few seconds read (About 57 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/26/OutOfWork/4-devices/Bios/">Bios</a></p><div class="content"><h2 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h2><p><img src="https://pic.shaojiemike.top/img/20211026090426.png"><br><img src="https://pic.shaojiemike.top/img/20211026091331.png"></p>
<h3 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h3><p><img src="https://pic.shaojiemike.top/img/20211026091601.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-26T00:49:53.000Z" title="10/26/2021, 12:49:53 AM">2021-10-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-02-26T09:12:51.802Z" title="2/26/2024, 9:12:51 AM">2024-02-26</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">a few seconds read (About 109 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/26/Work/Architecture/companySpecificDesign/AMD-Arch/">AMD Architecture on EPYC</a></p><div class="content"><h2 id="ROMA-SOC架构"><a href="#ROMA-SOC架构" class="headerlink" title="ROMA SOC架构"></a>ROMA SOC架构</h2><p><img src="https://pic.shaojiemike.top/img/20211026085159.png"></p>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>CCD<br>CCX</p>
<h3 id="ROMA与MILAN架构比较"><a href="#ROMA与MILAN架构比较" class="headerlink" title="ROMA与MILAN架构比较"></a>ROMA与MILAN架构比较</h3><p><img src="https://pic.shaojiemike.top/img/20211026085416.png"></p>
<p>Roma使用Zen2核心，MILan使用Zen3核心。而且后者缓存更大，核心通信延迟更低。</p>
<h3 id="计算CCD和CCX"><a href="#计算CCD和CCX" class="headerlink" title="计算CCD和CCX"></a>计算CCD和CCX</h3><p><img src="https://pic.shaojiemike.top/img/20211026085830.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-24T16:00:00.000Z" title="10/24/2021, 4:00:00 PM">2021-10-24</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-02-26T09:12:51.802Z" title="2/26/2024, 9:12:51 AM">2024-02-26</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">a few seconds read (About 104 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/24/Work/Architecture/SIMD/neon/">Arm - Neon</a></p><div class="content"><p><a target="_blank" rel="noopener" href="https://community.arm.com/arm-community-blogs/b/operating-systems-blog/posts/arm-neon-programming-quick-reference">https://community.arm.com/arm-community-blogs/b/operating-systems-blog/posts/arm-neon-programming-quick-reference</a></p>
<h2 id="Arm-cpu-向量化支持判断"><a href="#Arm-cpu-向量化支持判断" class="headerlink" title="Arm cpu 向量化支持判断"></a>Arm cpu 向量化支持判断</h2><h2 id="向量化指令"><a href="#向量化指令" class="headerlink" title="向量化指令"></a>向量化指令</h2><h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/heliangbin87/article/details/79581113?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link">https://blog.csdn.net/heliangbin87/article/details/79581113?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-21T16:00:00.000Z" title="10/21/2021, 4:00:00 PM">2021-10-21</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-02-26T09:12:51.810Z" title="2/26/2024, 9:12:51 AM">2024-02-26</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">a minute read (About 195 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/21/Work/Operating%20system/csapp1/">CSAPP: Machine Programming III: Procedures</a></p><div class="content"><h2 id="stack"><a href="#stack" class="headerlink" title="stack"></a>stack</h2><p><img src="https://i.loli.net/2021/10/22/9EdAqmXveSUOiGk.png"></p>
<h2 id="register-使用约定"><a href="#register-使用约定" class="headerlink" title="register 使用约定"></a>register 使用约定</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rax 返回/传出寄存器</span><br><span class="line">rdi rsi 传入寄存器</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2021/10/22/1HqRQoNk5vbOfts.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">寄存器 %rsp 存放栈顶地址 (lowest stack address) pushq %rsp-8 popq %rsp+8</span><br><span class="line">rip 存call地址</span><br></pre></td></tr></table></figure>

<p>caller 调用者 callee 被调用者<br><img src="https://i.loli.net/2021/10/22/OnzB3DUITS2VwGr.png"><br><img src="https://i.loli.net/2021/10/22/9KnENm4dxSFtb8s.png"></p>
<h2 id="calling-procedure"><a href="#calling-procedure" class="headerlink" title="calling procedure"></a>calling procedure</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">callq 调用</span><br><span class="line">retq 返回</span><br></pre></td></tr></table></figure>
<h3 id="调用控制"><a href="#调用控制" class="headerlink" title="调用控制"></a>调用控制</h3><p><a target="_blank" rel="noopener" href="https://bkfish.github.io/2018/12/21/CSAPP%E5%8F%88%E5%8F%8C%E5%8F%92%E5%8F%95%E6%9D%A5%E4%B8%80%E9%81%8D%E4%B9%8B%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%E6%A0%88%E5%B8%A7%E7%9A%84%E5%8F%98%E5%8C%96/">https://bkfish.github.io/2018/12/21/CSAPP又双叒叕来一遍之函数调用过程栈帧的变化/</a></p>
<h3 id="传参数"><a href="#传参数" class="headerlink" title="传参数"></a>传参数</h3><ol>
<li>push到栈里<ol>
<li>递归调用，把上一级的数据及时push保存</li>
</ol>
</li>
<li>保存在寄存器里</li>
</ol>
<h3 id="Managing-local-data"><a href="#Managing-local-data" class="headerlink" title="Managing local data"></a>Managing local data</h3><p><img src="https://i.loli.net/2021/10/22/VKzA6vrXSpIaq15.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-20T16:00:00.000Z" title="10/20/2021, 4:00:00 PM">2021-10-20</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-02-26T09:12:51.802Z" title="2/26/2024, 9:12:51 AM">2024-02-26</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">8 minutes read (About 1258 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/20/Work/Architecture/SIMD/SIMD/">SIMD+SSE+AVX</a></p><div class="content"><h2 id="SIMD"><a href="#SIMD" class="headerlink" title="SIMD"></a>SIMD</h2><p>SIMD全称Single Instruction Multiple Data，单指令多数据流，能够复制多个操作数，并把它们打包在大型寄存器的一组指令集。</p>
<p>通过使用矢量寄存器，指令译码后几个执行部件同时访问内存，一次性获得所有操作数进行运算。这个特点使SIMD特别适合于多媒体应用等数据密集型运算。如 AMD的3D NOW！技术</p>
<h2 id="MMX"><a href="#MMX" class="headerlink" title="MMX"></a>MMX</h2><p>MMX是由57条指令组成的SIMD多媒体指令集，MMX将64位寄存当作2个32位或8个8位寄存器来用，只能处理整形计算，这样的64位寄存器有８组，分别命名为MM0~MM7．这些寄存器不是为MMX单独设置的，而是借用的FPU的寄存器，占用浮点寄存器进行运算（64位MMX寄存器实际上就是浮点数寄存器的别名），以至于MMX指令和浮点数操作不能同时工作。为了减少在MMX和浮点数模式切换之间所消耗的时间，程序员们尽可能减少模式切换的次数，也就是说，这两种操作在应用上是互斥的。</p>
<h2 id="SSE"><a href="#SSE" class="headerlink" title="SSE"></a>SSE</h2><p>SSE为Streaming SIMD Extensions的缩写。Intel SSE指令通过128bit位宽的专用寄存器, 支持一次操作128bit数据. float是单精度浮点数, 占32bit, 那么可以使用一条SSE指令一次计算4个float数。注意这些SSE指令要求参数中的内存地址必须对齐于16字节边界。</p>
<h3 id="SSE专用矢量寄存器个数，是每个core一个吗？"><a href="#SSE专用矢量寄存器个数，是每个core一个吗？" class="headerlink" title="SSE专用矢量寄存器个数，是每个core一个吗？"></a>SSE专用矢量寄存器个数，是每个core一个吗？</h3><p>SSE有8个128位寄存器，XMM0 ~XMM7。此外SSE还提供了新的控制&#x2F;状态寄存器MXCSR。为了回答这个问题，我们需要了解CPU的架构。每个core是独占register的<br><img src="https://pic.shaojiemike.top/PicGoSKLServer.png"></p>
<h3 id="SSE-相关编译命令"><a href="#SSE-相关编译命令" class="headerlink" title="SSE 相关编译命令"></a>SSE 相关编译命令</h3><p>addps xmm0, xmm1 ; reg-reg<br>addps xmm0, [ebx] ; reg-mem<br>sse提供了两个版本的指令，其一以后缀ps结尾，这组指令对打包单精度浮点值执行类似mmx操作运算，而第二种后缀ss</p>
<h3 id="SSE-相关函数"><a href="#SSE-相关函数" class="headerlink" title="SSE 相关函数"></a>SSE 相关函数</h3><ol>
<li>load系列     eg.__m128 _mm_load_ss (float *p)</li>
<li>store系列    eg.__m128 _mm_set_ss (float w) </li>
<li>其他操作     eg.__m128 _mm_add_ss (__m128 a, __m128 b)包括加法、减法、乘法、除法、开方、最大值、最小值、近似求倒数、求开方的倒数等等浮点操作</li>
</ol>
<h3 id="SSE指令集的发展"><a href="#SSE指令集的发展" class="headerlink" title="SSE指令集的发展"></a>SSE指令集的发展</h3><p><img src="https://pic.shaojiemike.top/PicGo20210714223527.png"></p>
<ol>
<li>SSE2则进一步支持双精度浮点数，由于寄存器长度没有变长，所以只能支持２个双精度浮点计算或是４个单精度浮点计算．另外，它在这组寄存器上实现了整型计算，从而代替了MMX．</li>
<li>SSE3支持一些更加复杂的算术计算．</li>
<li>SSE4增加了更多指令，并且在数据搬移上下了一番工夫，支持不对齐的数据搬移，增加了super shuffle引擎．</li>
<li>由于2007年8月，AMD抢先宣布了SSE5指令集。之后Intel将新出的叫做AVX指令集。由于SSE5和AVX指令集功能类似，并且AVX包含更多的优秀特性，因此AMD决定支持AVX指令集</li>
</ol>
<h2 id="AVX"><a href="#AVX" class="headerlink" title="AVX"></a>AVX</h2><p> Advanced Vector Extensions。较新的Intel CPU都支持AVX指令集, 它可以一次操作256bit数据, 是SSE的2倍，可以使用一条AVX指令一次计算8个float数。AVX指令要求内存地址对齐于32字节边界。</p>
<h2 id="SSE-与-AVX的发展"><a href="#SSE-与-AVX的发展" class="headerlink" title="SSE 与 AVX的发展"></a>SSE 与 AVX的发展</h2><p><img src="https://pic.shaojiemike.top/PicGoregisters_updated.png"><br><img src="https://pic.shaojiemike.top/PicGoIntel-mmx-sse-sse2-avx-AVX-512.png"></p>
<h2 id="性能对比"><a href="#性能对比" class="headerlink" title="性能对比"></a>性能对比</h2><p>根据参考文章，其中用gcc编译AVX版代码时需要加-mavx选项.<br><img src="https://pic.shaojiemike.top/PicGo20210714222019.png"><br>开启-O3选项，一般不用将代码改成多次计算和内存对齐。</p>
<h2 id="判断是否向量化，看汇编"><a href="#判断是否向量化，看汇编" class="headerlink" title="判断是否向量化，看汇编"></a>判断是否向量化，看汇编</h2><h3 id="GNU"><a href="#GNU" class="headerlink" title="GNU"></a>GNU</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcc -march=native -c -Q --help=target # 查看支持的指令集</span><br><span class="line">g++ -O2 -ftree-vectorize -ftree-vectorizer-verbose=9 -S -c foo.cpp -o /dev/stdout | c++filt # 查看汇编</span><br><span class="line">OBJDUMP # 反汇编</span><br></pre></td></tr></table></figure>
<p>c++函数在linux系统下编译之后会变成如下样子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_ZNK4Json5ValueixEPKc</span><br></pre></td></tr></table></figure>
<p>在linux命令行使用c++filter</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ c++filt _ZNK4Json5ValueixEPKc</span><br><span class="line">Json::Value::operator[](char const*) const</span><br></pre></td></tr></table></figure>
<p>可以得到函数的原始名称， 展开后续追踪</p>
<h3 id="intel-icpc"><a href="#intel-icpc" class="headerlink" title="intel icpc"></a>intel icpc</h3><h3 id="clang"><a href="#clang" class="headerlink" title="clang"></a>clang</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-Rpass=loop-vectorize </span><br><span class="line">identifies loops that were successfully vectorized.</span><br><span class="line"></span><br><span class="line">-Rpass-missed=loop-vectorize </span><br><span class="line">identifies loops that failed vectorization and indicates if vectorization was specified.</span><br><span class="line"></span><br><span class="line">-Rpass-analysis=loop-vectorize </span><br><span class="line">identifies the statements that caused vectorization to fail.</span><br></pre></td></tr></table></figure>
<h2 id="常见汇编代码"><a href="#常见汇编代码" class="headerlink" title="常见汇编代码"></a>常见汇编代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xmm 寄存器</span><br><span class="line">movsd</span><br></pre></td></tr></table></figure>
<h3 id="MMX指令"><a href="#MMX指令" class="headerlink" title="MMX指令"></a>MMX指令</h3><p><img src="https://pic.shaojiemike.top/img/20210824191542.png"></p>
<h2 id="手动向量化"><a href="#手动向量化" class="headerlink" title="手动向量化"></a>手动向量化</h2><p><img src="https://pic.shaojiemike.top/img/20210828093838.png"><br>循环展开8次<br><img src="https://pic.shaojiemike.top/img/20210828093812.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20210829163015.png"></p>
<h3 id="例子1"><a href="#例子1" class="headerlink" title="例子1"></a>例子1</h3><h2 id="SIMD寄存器"><a href="#SIMD寄存器" class="headerlink" title="SIMD寄存器"></a>SIMD寄存器</h2><p><img src="https://pic.shaojiemike.top/img/20210829162207.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.dazhuanlan.com/2020/02/01/5e3475c89d5bd/">https://www.dazhuanlan.com/2020/02/01/5e3475c89d5bd/</a></p>
<p><a target="_blank" rel="noopener" href="https://software.intel.com/sites/landingpage/IntrinsicsGuide/">https://software.intel.com/sites/landingpage/IntrinsicsGuide/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-20T16:00:00.000Z" title="10/20/2021, 4:00:00 PM">2021-10-20</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-02-26T09:12:51.810Z" title="2/26/2024, 9:12:51 AM">2024-02-26</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">4 minutes read (About 563 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/20/Work/HPC/llvm-mca/LLVM-mca3/">LLVM Mca : huawei HiSilicon&#039;s TSV110 work</a></p><div class="content"><h2 id="几个对比图"><a href="#几个对比图" class="headerlink" title="几个对比图"></a>几个对比图</h2><p><img src="https://pic.shaojiemike.top/img/20210918160557.png"></p>
<p>x轴的含义是改变port值的意思，比如<code>tsv110alu2</code>是在<code>tsv110</code>的基础上将alu的值改成2</p>
<h2 id="相关的-git-commit"><a href="#相关的-git-commit" class="headerlink" title="相关的 git commit"></a>相关的 git commit</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">commit c9ca3a3c66a493d72cf7afc7ee975e2de399f2e5</span><br><span class="line">Author: Elvina Yakubova &lt;elvina.yakubova@huawei.com&gt;</span><br><span class="line">Date:   Sat Nov 7 01:50:43 2020 +0300</span><br><span class="line"></span><br><span class="line">    [AArch64] Add driver tests for HiSilicon&#x27;s TSV110</span><br><span class="line"></span><br><span class="line">commit 93b99728b1676d23ab5dabc606344230d25e7f4b</span><br><span class="line">Author: Elvina Yakubova &lt;elvina.yakubova@huawei.com&gt;</span><br><span class="line">Date:   Sat Nov 7 01:22:35 2020 +0300</span><br><span class="line"></span><br><span class="line">    [AArch64] Add pipeline model for HiSilicon&#x27;s TSV110</span><br><span class="line"></span><br><span class="line">    This patch adds the scheduling and cost model for TSV110.</span><br><span class="line"></span><br><span class="line">    Reviewed by: SjoerdMeijer, bryanpkc</span><br><span class="line"></span><br><span class="line">    Differential Revision: https://reviews.llvm.org/D89972</span><br><span class="line"></span><br><span class="line">commit 123553921f86ac0fad7b742740aa45e8d380be02</span><br><span class="line">Author: Bryan Chan &lt;bryan.chan@huawei.com&gt;</span><br><span class="line">Date:   Fri Nov 9 19:32:08 2018 +0000</span><br><span class="line"></span><br><span class="line">    [AArch64] Support HiSilicon&#x27;s TSV110 processor</span><br><span class="line"></span><br><span class="line">    Reviewers: t.p.northover, SjoerdMeijer, kristof.beyls</span><br><span class="line"></span><br><span class="line">    Reviewed By: kristof.beyls</span><br><span class="line"></span><br><span class="line">    Subscribers: olista01, javed.absar, kristof.beyls, kristina, llvm-commits</span><br><span class="line"></span><br><span class="line">    Differential Revision: https://reviews.llvm.org/D53908</span><br><span class="line"></span><br><span class="line">    llvm-svn: 346546	</span><br></pre></td></tr></table></figure>
<p>只有3个，感觉和2个功能很相关。</p>
<h2 id="最近-Driver-commit"><a href="#最近-Driver-commit" class="headerlink" title="最近 Driver commit"></a>最近 Driver commit</h2><p><a target="_blank" rel="noopener" href="https://shaojiemike.notion.site/Huawei-work-on-llvm-mca-recur-e338f3133a10416ebdaa596e27e5c5b7">类似的llvm check的设置</a></p>
<h2 id="复现上面的图"><a href="#复现上面的图" class="headerlink" title="复现上面的图"></a>复现上面的图</h2><h3 id="要改的地方"><a href="#要改的地方" class="headerlink" title="要改的地方"></a>要改的地方</h3><p>应该每次都要重新编译安装<br><img src="https://pic.shaojiemike.top/img/20210923203642.png"></p>
<h3 id="测试的汇编代码"><a href="#测试的汇编代码" class="headerlink" title="测试的汇编代码"></a>测试的汇编代码</h3><ol>
<li>判断<code>llvm/test/MC/AArch64</code>下的汇编能用吗?选个最大的，neon 不支持， armv8.2也并不支持。感觉有特别要求<img src="https://pic.shaojiemike.top/img/20211021152612.png"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat neon-diagnostics.s|llvm-mca -timeline -show-encoding -all-stats -all-views</span><br></pre></td></tr></table></figure></li>
<li>选择osaca的benchmark里的add.c</li>
</ol>
<h2 id="AArch64SchedTSV110-td"><a href="#AArch64SchedTSV110-td" class="headerlink" title="AArch64SchedTSV110.td"></a>AArch64SchedTSV110.td</h2><p>locate at llvm&#x2F;lib&#x2F;Target&#x2F;AArch64&#x2F;AArch64SchedTSV110.td</p>
<h3 id="td-file"><a href="#td-file" class="headerlink" title="td file"></a>td file</h3><p>tablegen(LLVM class) definitions</p>
<h3 id="部分指令解释"><a href="#部分指令解释" class="headerlink" title="部分指令解释"></a>部分指令解释</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def : InstRW&lt;[TSV110Wr_2cyc_1MDU],   (instregex <span class="string">&quot;^(AND|BIC|EON|EOR|ORN|ORR)[WX]rs$&quot;</span>)&gt;;</span><br></pre></td></tr></table></figure>
<p>BIC (bit clear) EON (Exclusive OR) ORR (OR operations on the values in Rn and Operand2)</p>
<p>InstRW的定义</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Map a set of opcodes to a list of SchedReadWrite types. This allows</span></span><br><span class="line"><span class="comment">// the subtarget to easily override specific operations.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// SchedModel ties this opcode mapping to a processor.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">InstRW</span>&lt;list&lt;SchedReadWrite&gt; rw, dag instrlist&gt; &#123;</span><br><span class="line">  list&lt;SchedReadWrite&gt; OperandReadWrites = rw;</span><br><span class="line">  dag Instrs = instrlist;</span><br><span class="line">  SchedMachineModel SchedModel = ?;</span><br><span class="line">  <span class="comment">// Allow a subtarget to mark some instructions as unsupported.</span></span><br><span class="line">  bit Unsupported = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>TSV110Wr_2cyc_1MDU的定义</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def TSV110Wr_2cyc_1MDU   : SchedWriteRes&lt;[TSV110UnitMDU]&gt;   &#123; let Latency = <span class="number">2</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SchedWriteRes</span>&lt;list&lt;ProcResourceKind&gt; resources&gt; : SchedWrite,</span><br><span class="line">  ProcWriteResources&lt;resources&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义TSV110上可用的每种处理器资源和数量，</span></span><br><span class="line"><span class="comment">//它有8条pipeline管道，每个管道都有自己的队列，微操作在那里等待</span></span><br><span class="line"><span class="comment">//它们的operands和issue将无序地发送到八个执行管道之一。</span></span><br><span class="line">def TSV110UnitMDU  : ProcResource&lt;<span class="number">1</span>&gt;; <span class="comment">// Multi-Cycle</span></span><br></pre></td></tr></table></figure>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-13T06:42:57.000Z" title="10/13/2021, 6:42:57 AM">2021-10-13</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-02-26T09:12:51.806Z" title="2/26/2024, 9:12:51 AM">2024-02-26</time></span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">a few seconds read (About 65 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/13/Work/Artificial%20Intelligence/framework/PyTorch_VS_TensorFlow/">PyTorch_VS_TensorFlow</a></p><div class="content"><h2 id="TensorFlow"><a href="#TensorFlow" class="headerlink" title="TensorFlow"></a>TensorFlow</h2><p>容易转换成TensorRT</p>
<h2 id="transformer"><a href="#transformer" class="headerlink" title="transformer"></a>transformer</h2><p>好像是属于NLP问题</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.163.com/dy/article/GAPBDHKG0511AQHO.html">https://www.163.com/dy/article/GAPBDHKG0511AQHO.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/452749603">https://www.zhihu.com/question/452749603</a></p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/32/">Previous</a></div><div class="pagination-next"><a href="/page/34/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/32/">32</a></li><li><a class="pagination-link is-current" href="/page/33/">33</a></li><li><a class="pagination-link" href="/page/34/">34</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/39/">39</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">𝘊𝘰𝘮𝘱𝘶𝘵𝘦𝘳 𝘈𝘳𝘤𝘩𝘪𝘵𝘦𝘤𝘵𝘶𝘳𝘦 &amp; 𝘏𝘗𝘊</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">389</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">31</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">487</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">39</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math/"><span class="level-start"><span class="level-item">Math</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">22</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Thinking/"><span class="level-start"><span class="level-item">Thinking</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">118</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">52</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-02-14T06:49:13.000Z">2024-02-14</time></p><p class="title"><a href="/2024/02/14/OutOfWork/2.2-japanese/japanese/">Japanese</a></p><p class="categories"><a href="/categories/toLearn/">toLearn</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-29T12:58:53.000Z">2024-01-29</time></p><p class="title"><a href="/2024/01/29/OutOfWork/5-VideoEntertainment/AnimeAutoChineseSubtitle/">Anime Auto add Chinese Subtitle</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-25T03:20:42.000Z">2024-01-25</time></p><p class="title"><a href="/2024/01/25/OutOfWork/5-VideoEntertainment/AnimeSuperResolutionFrame/">Anime Super Resolution to 4K &amp; Interpolation to 120 fps</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-13T14:32:40.000Z">2024-01-13</time></p><p class="title"><a href="/2024/01/13/Thinking/2-courage2move/SocialScience/">Social Science</a></p><p class="categories"><a href="/categories/Thinking/">Thinking</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-13T12:15:22.000Z">2024-01-13</time></p><p class="title"><a href="/2024/01/13/Work/Architecture/FPGA/">FPGA</a></p><p class="categories"><a href="/categories/toLearn/">toLearn</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/"><span class="level-start"><span class="level-item">2024</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">235</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">67</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">72</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2024 Shaojie Tan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>