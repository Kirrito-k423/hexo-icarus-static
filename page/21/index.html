<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="SHAOJIE&#039;S BOOK"><meta property="og:url" content="http://icarus.shaojiemike.top/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://icarus.shaojiemike.top/img/og_image.png"><meta property="article:author" content="Shaojie Tan"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://icarus.shaojiemike.top/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top"},"headline":"SHAOJIE'S BOOK","image":["http://icarus.shaojiemike.top/img/og_image.png"],"author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-08-20T16:00:00.000Z" title="8/20/2023, 4:00:00 PM">2023-08-20</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.479Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">22 minutes read (About 3299 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/08/20/Work/Programming/4-compile/construction%20tool/make/">Make</a></p><div class="content"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>make 和 makefile 是 Linux 系统下 C&#x2F;C++ 工程的编译工具，它们用来自动化配置实验环境，编译项目文件。makefile 文件描述了项目<strong>文件之间的依赖关系和编译规则</strong>，make 命令根据 makefile 文件的内容执行编译任务123。相对于 cmake 等其他的编译工具，make 和 makefile 有以下几个特点：</p>
<ul>
<li>make 和 makefile 是 GNU 的标准工具，可以在多种平台上使用。</li>
<li>make 和 makefile 可以根据文件时间戳自动发现更新过的文件而减少编译的工作量。</li>
<li>make 和 makefile 可以灵活地定义变量、函数和条件判断等，实现复杂的编译逻辑</li>
</ul>
<p>对于复杂的项目，能通过makefile文件将</p>
<ul>
<li>实验环境Build，(提前设置相关路径参数)<ul>
<li>wget&#x2F;git 下载相关文件到对应目录</li>
<li>apt install</li>
</ul>
</li>
<li>样例测试test，</li>
<li>整体运行&#x2F;Benchmark运行run,</li>
<li>环境清理clean 统一起来</li>
</ul>
<h2 id="Makefile-执行流程"><a href="#Makefile-执行流程" class="headerlink" title="Makefile 执行流程"></a>Makefile 执行流程</h2><ul>
<li>make的默认目标是makefile中的第一个目标，而其它目标一般是由这个目标连带出来的。</li>
</ul>
<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不实际运行，但是打印会运行的命令</span></span><br><span class="line">make -f makefile.llvm -n</span><br><span class="line"><span class="comment"># -W 假设某个文件是最新的，不需要重新编译。常见结合 -n 使用</span></span><br><span class="line">make inj -f makefile.llvm -n -W svm.inj</span><br></pre></td></tr></table></figure>

<p>打印debug信息，makefile如何选择决策</p>
<ul>
<li><code>--debug=v</code> 输出的信息包括哪个makefile被解析，不需要被重编译的依赖文件（或是依赖目标）等。</li>
<li><code>--debug=i</code> implicit，输出使用的隐含规则过程。</li>
<li><code>--debug=m</code> 输出make读取makefile，更新makefile，执行makefile的信息。</li>
</ul>
<h2 id="Makefile-隐含规则"><a href="#Makefile-隐含规则" class="headerlink" title="Makefile 隐含规则"></a>Makefile 隐含规则</h2><ul>
<li>“隐含规则”也就是一种惯例，make会按照这种“惯例”心照不喧地来运行，那怕我们的Makefile中没有书写这样的规则。<ul>
<li>例如，把[.c]文件编译成[.o]文件这一规则，你根本就不用写出来，make会自动推导出这种规则，并生成我们需要的[.o]文件。</li>
<li>将头文件变成<code>.gch</code> <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1475342/problem-with-makefile-making-gch-files-instead-of-o-files">precompiled headers</a></li>
</ul>
</li>
<li>许多的隐含规则都是使用了“后缀规则”来定义的<ul>
<li>变量<code>.SUFFIXES</code>存储了默认的依赖目标，可以修改。默认的后缀列表是：<code>.out,.a, .ln, .o, .c, .cc, .C, .p, .f, .F, .r, .y, .l, .s, .S, .mod, .sym, .def, .h, .info, .dvi, .tex, .texinfo, .texi, .txinfo, .w, .ch .web, .sh, .elc, .el</code></li>
<li>要让make知道一些特定的后缀，我们可以使用伪目标”.SUFFIXES”来定义或是删除，如：</li>
</ul>
</li>
</ul>
<ol>
<li>把后缀.hack和.win加入后缀列表中的末尾。</li>
</ol>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">SUFFIXES: .hack .win</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>先删除默认后缀，后定义自己的后缀列表。</li>
</ol>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">.SUFFIXES: # 删除默认的后缀</span></span><br><span class="line"><span class="section">.SUFFIXES: .c .o .h # 定义自己的后缀</span></span><br></pre></td></tr></table></figure>

<h3 id="模式规则"><a href="#模式规则" class="headerlink" title="模式规则"></a>模式规则</h3><ul>
<li>常见使用模式规则来定义一个隐含规则</li>
<li>至少在规则的目标定义中要包含”%”</li>
</ul>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%.o : %.c ; &lt;command ......&gt;</span><br></pre></td></tr></table></figure>

<h3 id="老式风格的”后缀规则”"><a href="#老式风格的”后缀规则”" class="headerlink" title="老式风格的”后缀规则”"></a>老式风格的”后缀规则”</h3><ul>
<li>后缀规则是一个比较老式的定义隐含规则的方法。<ul>
<li>后缀规则会被模式规则逐步地取代。因为模式规则更强更清晰。为了和老版本的Makefile兼容，GNU make同样兼容于这些东西。</li>
</ul>
</li>
<li>后缀规则有两种方式：”双后缀”和”单后缀”。<ul>
<li>双后缀规则定义了一对后缀：目标文件的后缀和依赖目标（源文件）的后缀。如”.c.o”相当于”%o : %c”。</li>
<li>单后缀规则只定义一个后缀，也就是源文件的后缀。如”.c”相当于”% : %.c”。</li>
</ul>
</li>
</ul>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">.cpp.o:</span></span><br><span class="line">  <span class="variable">$(CPPCOMPILE)</span> -c <span class="variable">$(COMPILEOPTION)</span> <span class="variable">$(INCLUDEDIR)</span> <span class="variable">$&lt;</span></span><br><span class="line"></span><br><span class="line"><span class="section">.c.o:</span></span><br><span class="line"> <span class="variable">$(CCOMPILE)</span> -c <span class="variable">$(COMPILEOPTION)</span> <span class="variable">$(INCLUDEDIR)</span> <span class="variable">$&lt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Makefile编写技巧"><a href="#Makefile编写技巧" class="headerlink" title="Makefile编写技巧"></a>Makefile编写技巧</h2><h3 id="Makefile框架"><a href="#Makefile框架" class="headerlink" title="Makefile框架"></a>Makefile框架</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SIM_ROOT ?= <span class="variable">$(<span class="built_in">shell</span> readlink -f &quot;<span class="variable">$(CURDIR)</span>&quot;)</span> <span class="comment">#当前工作目录的绝对路径。</span></span><br><span class="line">CLEAN=<span class="variable">$(<span class="built_in">findstring</span> clean,<span class="variable">$(MAKECMDGOALS)</span>)</span> <span class="comment">#？？？</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span> common/Makefile.common</span><br><span class="line"></span><br><span class="line"><span class="variable">$(STANDALONE)</span>: <span class="variable">$(LIB_CARBON)</span> <span class="variable">$(LIB_SIFT)</span> <span class="variable">$(LIB_DECODER)</span></span><br><span class="line"> @<span class="variable">$(MAKE)</span> <span class="variable">$(MAKE_QUIET)</span> -C <span class="variable">$(SIM_ROOT)</span>/standalone <span class="comment">#进入standalone目录，执行Makefile文件</span></span><br></pre></td></tr></table></figure>

<p>Makefile.common文件中的内容如下：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span> <span class="variable">$(SIM_ROOT)</span>/Makefile.config</span><br><span class="line"></span><br><span class="line">DIRECTORIES := $&#123;shell find <span class="variable">$(SIM_ROOT)</span>/common -type d -print&#125; <span class="comment">#查找common目录下的所有子目录</span></span><br><span class="line">LIBCARBON_SOURCES = <span class="variable">$(<span class="built_in">foreach</span> <span class="built_in">dir</span>,<span class="variable">$(DIRECTORIES)</span>,$(<span class="built_in">wildcard</span> <span class="variable">$(dir)</span>/*.cc)</span>) \</span><br><span class="line"> <span class="variable">$(<span class="built_in">wildcard</span> <span class="variable">$(SIM_ROOT)</span>/common/config/*.cpp)</span> <span class="comment"># 把变量DIRECTORIES中的每个目录下的所有.cc文件和$(SIM_ROOT)/common/config目录下的所有.cpp文件赋值给变量LIBCARBON_SOURCES</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># FLAGS</span></span><br><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(SNIPER_TARGET_ARCH)</span>,ia32)</span><br><span class="line">  <span class="comment"># Add -march=i686 to enable some extra instructions that allow for implementation of 64-bit atomic adds</span></span><br><span class="line">  CXXFLAGS += -m32 -march=i686 -DTARGET_IA32 <span class="comment"># Include paths</span></span><br><span class="line">  LD_FLAGS += -m32</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(SNIPER_TARGET_ARCH)</span>,intel64)</span><br><span class="line">  CXXFLAGS += -fPIC -DTARGET_INTEL64</span><br><span class="line">  LD_FLAGS +=</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Build rules for dependency generation</span></span><br><span class="line"><span class="section">%.d: %.cpp</span></span><br><span class="line"> <span class="variable">$(_MSG)</span> &#x27;[DEP   ]&#x27; <span class="variable">$(<span class="built_in">subst</span> $(<span class="built_in">shell</span> readlink -f <span class="variable">$(SIM_ROOT)</span>)</span>/,,<span class="variable">$(<span class="built_in">shell</span> readlink -f <span class="variable">$@</span>)</span>) <span class="comment">#把$@的绝对路径中的$(SIM_ROOT)的绝对路径部分替换为空字符串，便于打印</span></span><br><span class="line"> <span class="variable">$(_CMD)</span> <span class="variable">$(CXX)</span> -MM -MG <span class="variable">$(CPPFLAGS)</span> <span class="variable">$(CXXFLAGS)</span> <span class="variable">$&lt;</span> | sed -n <span class="string">&quot;H;$$ &#123;g;s@.*:\(.*\)@<span class="variable">$*</span>.o <span class="variable">$@</span>: \$$\(wildcard\1\)@;p&#125;&quot;</span> &gt;<span class="variable">$@</span></span><br><span class="line"> <span class="comment"># 用$(CXX)编译器对$&lt;文件进行依赖分析，并把结果通过sed命令进行处理，然后输出到$@文件</span></span><br></pre></td></tr></table></figure>

<p>Makefile.config 如下</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 架构判断</span></span><br><span class="line">ARCH_QUERY=<span class="variable">$(<span class="built_in">shell</span> uname -m)</span></span><br><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(ARCH_QUERY)</span>,i686)</span><br><span class="line">SNIPER_TARGET_ARCH = ia32</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(ARCH_QUERY)</span>,x86_64)</span><br><span class="line">SNIPER_TARGET_ARCH ?= intel64</span><br><span class="line"><span class="comment">#SNIPER_TARGET_ARCH = ia32</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="variable">$(<span class="built_in">error</span> Unknown target arch: <span class="variable">$(ARCH_QUERY)</span>)</span></span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 全局的路径</span></span><br><span class="line">PIN_HOME ?= xxx</span><br><span class="line">PIN_ROOT := <span class="variable">$(PIN_HOME)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译器</span></span><br><span class="line">CC ?= gcc</span><br><span class="line">CXX ?= g++</span><br><span class="line"></span><br><span class="line"><span class="comment"># DEBUG输出</span></span><br><span class="line"><span class="keyword">ifneq</span> (<span class="variable">$(DEBUG_SHOW_COMPILE)</span>,)  <span class="comment"># 如果变量DEBUG_SHOW_COMPILE不为空，如make DEBUG_SHOW_COMPILE=1 使用</span></span><br><span class="line">  SHOW_COMPILE=1</span><br><span class="line">  MAKE_QUIET=     <span class="comment"># 使用情形：$(MAKE) $(MAKE_QUIET) -C pin clean</span></span><br><span class="line">  _MSG=@echo &gt;/dev/null   <span class="comment"># 使用情形：$(_MSG) &#x27;[CLEAN ] pin&#x27;</span></span><br><span class="line">  _CMD=       <span class="comment"># 使用情形：$(_CMD) git clone --quiet xxx</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  SHOW_COMPILE=</span><br><span class="line">  MAKE_QUIET=--quiet</span><br><span class="line">  _MSG=@echo</span><br><span class="line">  _CMD=@</span><br><span class="line"><span class="keyword">endif</span></span><br></pre></td></tr></table></figure>

<p>打印make的详细信息<code>make DEBUG_SHOW_COMPILE=1 DEBUG=1 -j 16|tee make.log |my_hl</code></p>
<h3 id="打印make时每项依赖文件的情况"><a href="#打印make时每项依赖文件的情况" class="headerlink" title="打印make时每项依赖文件的情况"></a>打印make时每项依赖文件的情况</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sums up number of passes and fails</span></span><br><span class="line"><span class="comment"># cut 命令用于从文件的每一行剪切字节、字符和字段并将这些字节、字符和字段写至标准输出。其中 -d (--delimiter)参数指定分隔符(默认TAB)，-f （--fields）参数指定要显示的字段。因此，cut -d\  -f 2 的意思是以空格为分隔符，显示第二个字段。</span></span><br><span class="line"><span class="comment"># uniq -c 统计不重复词(PASS\|FAIL)的出现</span></span><br><span class="line"><span class="section">test-score: test-all</span></span><br><span class="line"> @<span class="variable">$(MAKE)</span> test-all | cut -d\  -f 2 | grep &#x27;PASS\|FAIL&#x27; | sort | uniq -c</span><br><span class="line"></span><br><span class="line"><span class="comment"># Result output strings</span></span><br><span class="line">PASS = \033[92mPASS\033[0m</span><br><span class="line">FAIL = \033[91mFAIL\033[0m</span><br><span class="line"></span><br><span class="line"><span class="comment"># Need to be able to build kernels, if this fails rest not run</span></span><br><span class="line"><span class="section">test-build: all</span></span><br><span class="line"> @echo <span class="string">&quot; <span class="variable">$(PASS)</span> Build&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="实现在Makefile里下载"><a href="#实现在Makefile里下载" class="headerlink" title="实现在Makefile里下载"></a>实现在Makefile里下载</h3><p>根据是否存在文件来执行makefile语句</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ROAD_URL = http://www.dis.uniroma1.it/challenge9/data/USA-road-d/USA-road-d.USA.gr.gz</span><br><span class="line"><span class="variable">$(RAW_GRAPH_DIR)</span>/USA-road-d.USA.gr.gz:</span><br><span class="line"> wget -P <span class="variable">$(RAW_GRAPH_DIR)</span> <span class="variable">$(ROAD_URL)</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$(RAW_GRAPH_DIR)</span>/USA-road-d.USA.gr: <span class="variable">$(RAW_GRAPH_DIR)</span>/USA-road-d.USA.gr.gz</span><br><span class="line"> cd <span class="variable">$(RAW_GRAPH_DIR)</span></span><br><span class="line"> gunzip &lt; <span class="variable">$&lt;</span> &gt; <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$(GRAPH_DIR)</span>/road.sg: <span class="variable">$(RAW_GRAPH_DIR)</span>/USA-road-d.USA.gr converter</span><br><span class="line"> ./converter -f <span class="variable">$&lt;</span> -b <span class="variable">$@</span></span><br></pre></td></tr></table></figure>

<h2 id="目录下所有源文件编译成单独的可执行文件"><a href="#目录下所有源文件编译成单独的可执行文件" class="headerlink" title="目录下所有源文件编译成单独的可执行文件"></a>目录下所有源文件编译成单独的可执行文件</h2><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#before run, mkdir build &amp;&amp; cd build</span></span><br><span class="line"> </span><br><span class="line">CFLAGS = -g -O0</span><br><span class="line"> </span><br><span class="line"><span class="comment">#source files dir</span></span><br><span class="line">SRC_DIR = ../</span><br><span class="line"><span class="comment">#Makefile dir, generally build</span></span><br><span class="line">BUILD_DIR = ./</span><br><span class="line"> </span><br><span class="line"><span class="comment">#get ../example.c 不能寻找子文件夹的文件，需要shell find</span></span><br><span class="line">SRCS = <span class="variable">$(<span class="built_in">wildcard</span> <span class="variable">$(SRC_DIR)</span>*.c)</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#delete .c, then become ../example</span></span><br><span class="line"><span class="comment"># :.c = .o的意思是C文件對應相應的.o文件</span></span><br><span class="line">FILENAME = $(SRCS:.c=)</span><br><span class="line"> </span><br><span class="line"><span class="comment">#replace src dir with dest dir, then become ./example</span></span><br><span class="line">PROGS = <span class="variable">$(<span class="built_in">addprefix</span> <span class="variable">$(BUILD_DIR)</span>,$(<span class="built_in">notdir</span> <span class="variable">$(FILENAME)</span>)</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: all</span></span><br><span class="line"><span class="section">all: <span class="variable">$(PROGS)</span></span></span><br><span class="line">    @echo <span class="string">&quot;-- build all .c files&quot;</span> <span class="comment"># makefile中命令前加一个@的作用是不让make显示出要执行的命令</span></span><br><span class="line"> @echo Building for x86 architecture <span class="comment"># echo 无需“”</span></span><br><span class="line"> </span><br><span class="line"><span class="variable">$(BUILD_DIR)</span>%: <span class="variable">$(SRC_DIR)</span>%.c</span><br><span class="line">    gcc <span class="variable">$(CFLAGS)</span> -o <span class="variable">$@</span> <span class="variable">$&lt;</span></span><br></pre></td></tr></table></figure>

<p>另一种写法</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">CC=mpicc</span><br><span class="line">CXX=mpicxx</span><br><span class="line">OPENMP=-fopenmp</span><br><span class="line">SOURCES:=<span class="variable">$(<span class="built_in">shell</span> find $(.)</span> -name &#x27;*.c&#x27;)</span><br><span class="line">SOURCESCXX:=<span class="variable">$(<span class="built_in">shell</span> find $(.)</span> -name &#x27;*.cpp&#x27;)</span><br><span class="line"><span class="comment"># SRCS := $(shell find $(SRC_DIRS) -name *.cpp -or -name *.c -or -name *.s)</span></span><br><span class="line">LIB=-lm</span><br><span class="line">OBJS=$(SOURCES:%.c=%)</span><br><span class="line">OBJS+=$(SOURCESCXX:%.cpp=%)</span><br><span class="line">DEBUG=-g</span><br><span class="line"></span><br><span class="line">SRC_DIR_1 = ./Lab1</span><br><span class="line">SRCS_1 = <span class="variable">$(<span class="built_in">shell</span> find $(.)</span> -name &#x27;*.c&#x27;)</span><br><span class="line">FILENAME_1 = $(SRCS_1:.c=)</span><br><span class="line"></span><br><span class="line"><span class="comment"># lab1 : $(FILENAME_1)</span></span><br><span class="line"><span class="comment">#  @echo $(SRCS_1)</span></span><br><span class="line"><span class="comment">#  @echo &quot;lab1编译完成&quot;</span></span><br><span class="line"><span class="comment">#  if [ ! -d &quot;build&quot; ]; then mkdir build; fi</span></span><br><span class="line"><span class="comment">#  mv $(FILENAME_1) build</span></span><br><span class="line"></span><br><span class="line">all : <span class="variable">$(OBJS)</span></span><br><span class="line"> @echo <span class="variable">$(SOURCES)</span> <span class="variable">$(SOURCESCXX)</span></span><br><span class="line"> @echo <span class="string">&quot;编译完成&quot;</span></span><br><span class="line"> @echo <span class="variable">$(OBJS)</span></span><br><span class="line"> if [ ! -d <span class="string">&quot;build&quot;</span> ]; then mkdir build; fi</span><br><span class="line"> mv <span class="variable">$(OBJS)</span> build</span><br><span class="line"></span><br><span class="line"><span class="section">%: %.c</span></span><br><span class="line"> <span class="variable">$(CC)</span> <span class="variable">$(DEBUG)</span> <span class="variable">$(OPENMP)</span> <span class="variable">$&lt;</span> <span class="variable">$(LIB)</span> -o <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line"><span class="section">%: %.cpp</span></span><br><span class="line"> <span class="variable">$(CXX)</span> <span class="variable">$(DEBUG)</span> <span class="variable">$(OPENMP)</span> <span class="variable">$&lt;</span> <span class="variable">$(LIB)</span> -o <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: clean showVariable</span></span><br><span class="line"></span><br><span class="line"><span class="section">showVariable:</span></span><br><span class="line"> @echo <span class="variable">$(SOURCES)</span></span><br><span class="line"></span><br><span class="line"><span class="section">clean: </span></span><br><span class="line"> rm -rf build</span><br></pre></td></tr></table></figure>

<h2 id="多个文件变一个可执行文件"><a href="#多个文件变一个可执行文件" class="headerlink" title="多个文件变一个可执行文件"></a>多个文件变一个可执行文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MPICC = mpicc</span><br><span class="line"></span><br><span class="line">LIB = -lm </span><br><span class="line">C_FLAGS= -O3 -mavx2 -fopenmp $(LIB)</span><br><span class="line"></span><br><span class="line">SRC_DIR = src</span><br><span class="line">BUILD_DIR = build/bin</span><br><span class="line">SRCS = $(wildcard $(SRC_DIR)/*.c)</span><br><span class="line">OBJ = $(SRCS:.c=.o)</span><br><span class="line"></span><br><span class="line">pivot: $&#123;SRCS&#125;</span><br><span class="line"> echo &quot;compiling $(SRC_DIR) $&#123;FILENAME&#125;&quot;</span><br><span class="line"> $(MPICC) $^ $(C_FLAGS) -o $(BUILD_DIR)/pivot</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ make pivot -C ..</span><br><span class="line">make: 进入目录“/home/shaojiemike/github/IPCC2022-preliminary”</span><br><span class="line">echo &quot;compiling src src/Combination src/heapSort src/SunDistance src/MPI src/pivot&quot;</span><br><span class="line">compiling src src/Combination src/heapSort src/SunDistance src/MPI src/pivot</span><br><span class="line">mpicc src/Combination.c src/heapSort.c src/SunDistance.c src/MPI.c src/pivot.c -O3 -mavx2 -fopenmp -lm  -o build/bin/pivot</span><br></pre></td></tr></table></figure>

<h3 id="更复杂"><a href="#更复杂" class="headerlink" title="更复杂"></a>更复杂</h3><p>保留.o文件，区分Flag与lib</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">CC = g++</span><br><span class="line">MPICC = mpicc</span><br><span class="line"></span><br><span class="line">C_FLAGS= -O3 -fopenmp </span><br><span class="line">LIB = -lgomp</span><br><span class="line"></span><br><span class="line">INCLUDEPATH = feGRASS</span><br><span class="line">SRC_DIR = feGRASS</span><br><span class="line">BUILD_DIR = build/bin</span><br><span class="line"></span><br><span class="line">SRCS = $(wildcard $(SRC_DIR)/*.cpp)</span><br><span class="line">OBJ = $(SRCS:.cpp=.o)</span><br><span class="line">DEBUG_OBJ = $(SRCS:.cpp=_debug.o)</span><br><span class="line">TIME_OBJ = $(SRCS:.cpp=_time.o)</span><br><span class="line">FILENAME = $(SRCS:.cpp=)</span><br><span class="line"></span><br><span class="line">.DEFAULT_GOAL := all</span><br><span class="line">all : $&#123;OBJ&#125;</span><br><span class="line"> echo &quot;compiling $(SRC_DIR) $&#123;FILENAME&#125;&quot;</span><br><span class="line"> $(CC) $^ $(LIB) -o $(BUILD_DIR)/main</span><br><span class="line"></span><br><span class="line">debugPrint: $&#123;DEBUG_OBJ&#125;</span><br><span class="line"> echo &quot;compiling $(SRC_DIR) $&#123;FILENAME&#125;&quot;</span><br><span class="line"> $(CC) $^ $(LIB) -o $(BUILD_DIR)/main</span><br><span class="line"></span><br><span class="line">timePrint: $&#123;TIME_OBJ&#125;</span><br><span class="line"> echo &quot;compiling $(SRC_DIR) $&#123;FILENAME&#125;&quot;</span><br><span class="line"> $(CC) $^ $(LIB) -o $(BUILD_DIR)/main</span><br><span class="line"></span><br><span class="line">%.o: %.cpp</span><br><span class="line"> $(CC) $(C_FLAGS) -c $&lt; -o $@ </span><br><span class="line">%_debug.o: %.cpp</span><br><span class="line"> $(CC) -DDEBUG -DTIME $(C_FLAGS) -c $&lt; -o $@ </span><br><span class="line">%_time.o: %.cpp</span><br><span class="line"> $(CC) -DTIME $(C_FLAGS) -c $&lt; -o $@ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">checkdirs: $(BUILD_DIR)</span><br><span class="line">$(BUILD_DIR):</span><br><span class="line"> @mkdir -p $@</span><br><span class="line"></span><br><span class="line">.PHONY: clean</span><br><span class="line">clean:</span><br><span class="line"> rm -rf $(BUILD_DIR)/main $&#123;SRC_DIR&#125;/*.o</span><br></pre></td></tr></table></figure>

<h3 id="将obj与src分离"><a href="#将obj与src分离" class="headerlink" title="将obj与src分离"></a>将obj与src分离</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">CC = g++</span><br><span class="line">MPICC = mpicc</span><br><span class="line"></span><br><span class="line">C_FLAGS= -O3 -fopenmp </span><br><span class="line">LIB = -lgomp</span><br><span class="line"><span class="comment"># C_FLAGS= -fopenmp $(LIB) $(debugFlag)</span></span><br><span class="line"><span class="comment"># C_FLAGS= -O3 -march=znver1 -mavx2 -fopenmp $(LIB) $(debugFlag)</span></span><br><span class="line"></span><br><span class="line">INCLUDEPATH = feGRASS</span><br><span class="line">SRC_DIR = feGRASS</span><br><span class="line">BUILD_DIR = build/bin</span><br><span class="line">OBJ_DIR = build/obj</span><br><span class="line"></span><br><span class="line">SRCS = <span class="variable">$(<span class="built_in">wildcard</span> <span class="variable">$(SRC_DIR)</span>/*.cpp)</span></span><br><span class="line">TMP = <span class="variable">$(<span class="built_in">patsubst</span> %.cpp,$&#123;OBJ_DIR&#125;/%.cpp,$(<span class="built_in">notdir</span> $&#123;SRCS&#125;)</span>)</span><br><span class="line"><span class="comment"># example： $(patsubst %.cpp,%.d,$(patsubst %.c,%.d,$(patsubst %.cc,%.d,$(LIBCARBON_SOURCES)))) </span></span><br><span class="line"><span class="comment"># 意思是把$(LIBCARBON_SOURCES)变量中的所有.cpp,.c,.cc文件名替换为.d文件名</span></span><br><span class="line">HEADERS = <span class="variable">$(<span class="built_in">wildcard</span> <span class="variable">$(SRC_DIR)</span>/*.h)</span></span><br><span class="line">OBJ = $(TMP:.cpp=.o)</span><br><span class="line">DEBUG_OBJ = $(TMP:.cpp=_debug.o)</span><br><span class="line">TIME_OBJ = $(TMP:.cpp=_time.o)</span><br><span class="line">FILENAME = $(TMP:.cpp=)</span><br><span class="line"></span><br><span class="line"><span class="variable">$(info    SRCS is: <span class="variable">$(SRCS)</span>)</span></span><br><span class="line"><span class="variable">$(info    OBJ is: <span class="variable">$(OBJ)</span>)</span></span><br><span class="line"><span class="variable">$(info    HEADERS is: <span class="variable">$(HEADERS)</span>)</span></span><br><span class="line"></span><br><span class="line">.DEFAULT_GOAL := main</span><br><span class="line">main : <span class="variable">$(OBJ)</span></span><br><span class="line"> <span class="variable">$(CC)</span> <span class="variable">$(OBJ)</span> <span class="variable">$(LIB)</span> -o <span class="variable">$(BUILD_DIR)</span>/main</span><br><span class="line"></span><br><span class="line"><span class="section">debugPrint: <span class="variable">$(DEBUG_OBJ)</span></span></span><br><span class="line"> <span class="variable">$(CC)</span> <span class="variable">$(DEBUG_OBJ)</span> <span class="variable">$(LIB)</span> -o <span class="variable">$(BUILD_DIR)</span>/main</span><br><span class="line"></span><br><span class="line"><span class="section">timePrint: <span class="variable">$(TIME_OBJ)</span></span></span><br><span class="line"> <span class="variable">$(CC)</span> <span class="variable">$(TIME_OBJ)</span> <span class="variable">$(LIB)</span> -o <span class="variable">$(BUILD_DIR)</span>/main</span><br><span class="line"></span><br><span class="line"><span class="section">mpi: <span class="variable">$(SRCS)</span></span></span><br><span class="line"> <span class="variable">$(MPICC)</span> <span class="variable">$^</span> <span class="variable">$(C_FLAGS)</span> -o <span class="variable">$(BUILD_DIR)</span>/main</span><br><span class="line"></span><br><span class="line"><span class="section">debugMpi: <span class="variable">$(SRCS)</span></span></span><br><span class="line"> <span class="variable">$(MPICC)</span> -DDEBUG -DTIME <span class="variable">$^</span> <span class="variable">$(C_FLAGS)</span> -o <span class="variable">$(BUILD_DIR)</span>/main</span><br><span class="line"></span><br><span class="line"><span class="section">timeMpi: <span class="variable">$(SRCS)</span></span></span><br><span class="line"> <span class="variable">$(MPICC)</span> -DTIME <span class="variable">$^</span> <span class="variable">$(C_FLAGS)</span> -o <span class="variable">$(BUILD_DIR)</span>/main</span><br><span class="line"></span><br><span class="line"><span class="section">$&#123;OBJ_DIR&#125;/%.o: $&#123;SRC_DIR&#125;/%.cpp <span class="variable">$(HEADERS)</span></span></span><br><span class="line"> <span class="variable">$(CC)</span> <span class="variable">$(C_FLAGS)</span> -c <span class="variable">$&lt;</span> -o <span class="variable">$@</span> </span><br><span class="line"><span class="section">$&#123;OBJ_DIR&#125;/%_debug.o: $&#123;SRC_DIR&#125;/%.cpp <span class="variable">$(HEADERS)</span></span></span><br><span class="line"> <span class="variable">$(CC)</span> -DDEBUG -DTIME <span class="variable">$(C_FLAGS)</span> -c <span class="variable">$&lt;</span> -o <span class="variable">$@</span> </span><br><span class="line"><span class="section">$&#123;OBJ_DIR&#125;/%_time.o: $&#123;SRC_DIR&#125;/%.cpp <span class="variable">$(HEADERS)</span></span></span><br><span class="line"> <span class="variable">$(CC)</span> -DTIME <span class="variable">$(C_FLAGS)</span> -c <span class="variable">$&lt;</span> -o <span class="variable">$@</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">checkdirs: <span class="variable">$(BUILD_DIR)</span></span></span><br><span class="line"><span class="variable">$(BUILD_DIR)</span>:</span><br><span class="line"> @mkdir -p <span class="variable">$(BUILD_DIR)</span></span><br><span class="line"> @mkdir -p <span class="variable">$(OBJ_DIR)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: clean</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line"> rm -rf <span class="variable">$(BUILD_DIR)</span>/main <span class="variable">$(OBJ_DIR)</span>/*.o</span><br></pre></td></tr></table></figure>

<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><ol>
<li><code>$(foreach var,list,text)</code>的语法来对list中的每个元素执行text，并用var来引用当前元素1。你也可以用</li>
<li><code>$(wildcard pattern)</code>的语法来匹配指定模式的文件，并返回其列表</li>
<li><code>$(subst from,to,text)</code>的语法来把text中的from替换为to</li>
<li><code>$(patsubst pattern,replacement,text)</code>的语法来把text中匹配pattern的部分替换为replacement</li>
<li><code>include &lt;filenames&gt;</code> ，make 在处理程序的时候，文件列表中的任意一个文件不存在的时候或者是没有规则去创建这个文件的时候，make 程序将会提示错误并保存退出；</li>
<li><code>-include &lt;filenames&gt;</code>，当包含的文件不存在或者是没有规则去创建它的时候，make 将会继续执行程序，只有真正由于不能完成终极目标重建的时候我们的程序才会提示错误保存退出；</li>
<li>addprefix的功能增加前缀，例如<code>$(addprefix -I,./Inc)</code>执行后为 <code>-I ./Inc</code><ol>
<li><code>OUTPUT_FILES = $(addsuffix .out, $(addprefix $(OUTPUT_DIR)/, $(BENCH_MAINNAME)))</code></li>
</ol>
</li>
<li>文件名处理函数 dir, notdir, suffix, basename （网站basename例子写错了）<ol>
<li><a target="_blank" rel="noopener" href="https://www.zhaixue.cc/makefile/makefile-filename-function.html">https://www.zhaixue.cc/makefile/makefile-filename-function.html</a></li>
</ol>
</li>
<li><code>.PHONY: clean</code>是为了有clean名称的文件时，防止把<code>make clean</code>理解成生成clean文件，而不是使用clean规则。</li>
<li>一个Makefile文件里通常会有多个目标，一般会选择第一个作为默认目标。所以一般第一个写<code>all</code></li>
<li>赋值符号   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">= 是最基本的赋值</span><br><span class="line">:= 是覆盖之前的值</span><br><span class="line">?= 是如果没有被赋值过就赋予等号后面的值</span><br><span class="line">+= 是添加等号后面的值</span><br></pre></td></tr></table></figure></li>
<li>makefile中命令前加一个@的作用是不让make显示出要执行的命令</li>
<li><code>$@</code> is the name of the target being generated, and<code>$&lt;</code> the first prerequisite (usually a source file). You can find a list of all these special variables in the GNU Make manual.</li>
</ol>
<p> For example, consider the following declaration:</p>
<p> <code>all: library.cpp main.cpp</code></p>
<p> In this case:</p>
<p> <code>$@</code> evaluates to all</p>
<p> <code>$&lt;</code> evaluates to library.cpp</p>
<p> <code>$^</code> evaluates to library.cpp main.cpp</p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Makefile:22: *** missing separator.  Stop.</span><br></pre></td></tr></table></figure>

<p>命令开头要用Tab，不是空格。别用vscode，用vim写</p>
<h2 id="复杂项目的例子"><a href="#复杂项目的例子" class="headerlink" title="复杂项目的例子"></a>复杂项目的例子</h2><article class="message is-dark">
        <div class="message-header"><p><i class="fa-solid fa-flask mr-2"></i>Victima模拟器（sniper拓展地址翻译的模拟器）</p>
</div>
        <div class="message-body">
            <p>分析复杂的Makefile</p>
<figure class="highlight makefile"><figcaption><span>hl_lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Victima/sniper/Makefile</span></span><br><span class="line">STANDALONE=<span class="variable">$(SIM_ROOT)</span>/lib/sniper</span><br><span class="line"><span class="variable">$(STANDALONE)</span>: <span class="variable">$(LIB_CARBON)</span> <span class="variable">$(LIB_SIFT)</span> <span class="variable">$(LIB_DECODER)</span></span><br><span class="line">    @<span class="variable">$(MAKE)</span> <span class="variable">$(MAKE_QUIET)</span> -C <span class="variable">$(SIM_ROOT)</span>/standalone</span><br><span class="line"></span><br><span class="line"><span class="comment"># vscode-remote://ssh-remote%2Bicarus3/staff/shaojiemike/test/Victima/src/Victima/sniper/standalone/Makefile</span></span><br><span class="line">LD_LIBS += -lcarbon_sim -lpthread -ldw</span><br><span class="line">SOURCES = <span class="variable">$(<span class="built_in">shell</span> ls <span class="variable">$(SIM_ROOT)</span>/standalone/*.cc)</span></span><br><span class="line">OBJECTS = <span class="variable">$(<span class="built_in">patsubst</span> %.c,%.o,$(<span class="built_in">patsubst</span> %.cc,%.o,<span class="variable">$(SOURCES)</span>)</span>)</span><br><span class="line"><span class="comment">## build rules</span></span><br><span class="line">TARGET = <span class="variable">$(SIM_ROOT)</span>/lib/sniper</span><br><span class="line"><span class="variable">$(TARGET)</span>: <span class="variable">$(SIM_ROOT)</span>/lib/libcarbon_sim.a <span class="variable">$(SIM_ROOT)</span>/sift/libsift.a <span class="variable">$(SIM_ROOT)</span>/decoder_lib/libdecoder.a</span><br><span class="line"><span class="variable">$(TARGET)</span>: <span class="variable">$(OBJECTS)</span></span><br><span class="line">    <span class="variable">$(_MSG)</span> &#x27;[LD    ]&#x27; <span class="variable">$(<span class="built_in">subst</span> $(<span class="built_in">shell</span> readlink -f <span class="variable">$(SIM_ROOT)</span>)</span>/,,<span class="variable">$(<span class="built_in">shell</span> readlink -f <span class="variable">$@</span>)</span>)</span><br><span class="line">    <span class="variable">$(_CMD)</span> <span class="variable">$(CXX)</span> <span class="variable">$(LD_FLAGS)</span> -o <span class="variable">$@</span> <span class="variable">$(OBJECTS)</span> <span class="variable">$(LD_LIBS)</span> <span class="variable">$(OPT_CFLAGS)</span> -std=c++0x</span><br></pre></td></tr></table></figure>

<p>解释</p>
<p>第一个规则:<code>$(TARGET): $(SIM_ROOT)/lib/libcarbon_sim.a $(SIM_ROOT)/sift/libsift.a $(SIM_ROOT)/decoder_lib/libdecoder.a</code><br>这行定义了 $(TARGET)（即 $(SIM_ROOT)&#x2F;lib&#x2F;sniper）依赖于三个库文件。这意味着在构建 $(TARGET) 之前，必须首先存在或构建这些库文件。</p>
<p>第二个规则:<code>$(TARGET): $(OBJECTS)</code><br>这行则说明 $(TARGET) 还依赖于由 $(OBJECTS) 定义的一系列对象文件。这是实际编译生成可执行文件所需要的对象文件。</p>

        </div>
    </article>

<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
https://blog.csdn.net/ET_Endeavoring/article/details/98989066
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-08-15T16:00:00.000Z" title="8/15/2023, 4:00:00 PM">2023-08-15</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.462Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">a minute read (About 165 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/08/15/Work/software/linux-sys/cpu-time/">Cpu Time</a></p><div class="content"><h2 id="Situation"><a href="#Situation" class="headerlink" title="Situation"></a>Situation</h2><p>It is all started with two confusing situation.</p>
<ul>
<li>I found out using <code>ps aux | grep -v process_name</code>, the process is in <code>Sl+</code> state. But the cpu usage is not zero.</li>
<li><code>watch &quot;ps aux |grep 3496617&quot;</code> always show the same cpu usage percentage, which is very confusing beacause <code>htop</code> always show up-down value. and <code>pidstat -p 3516617</code> show cpu% less than 100%.</li>
</ul></div><a class="article-more button is-small is-size-7" href="/2023/08/15/Work/software/linux-sys/cpu-time/#more">Read more</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-08-08T16:00:00.000Z" title="8/8/2023, 4:00:00 PM">2023-08-08</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.473Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/tips/">tips</a></span><span class="level-item">13 minutes read (About 1938 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/08/08/Work/software/manager/git/gitStandardization/">Git Standardization</a></p><div class="content"><h2 id="workflow"><a href="#workflow" class="headerlink" title="workflow"></a>workflow</h2><h2 id="内容模板"><a href="#内容模板" class="headerlink" title="内容模板"></a>内容模板</h2><p>隐藏文件夹 .github , 里面放两个文件：</p>
<p>ISSUE_TEMPLATE.md</p>
<p>PULL_REQUEST_TEMPLATE.md</p>
<h2 id="分支模型"><a href="#分支模型" class="headerlink" title="分支模型"></a>分支模型</h2><h3 id="Git-Flow-分支模型"><a href="#Git-Flow-分支模型" class="headerlink" title="Git Flow 分支模型"></a>Git Flow 分支模型</h3><p>仓库有两个基础分支：</p>
<pre><code>dev（默认分支）
master（用于发布）
</code></pre>
<p>通过pull request来合并新的代码：</p>
<pre><code>协作者的代码通过pr合并到dev
dev通过pr合并到master
</code></pre>
<p>注意点：</p>
<pre><code>merge 到 dev，使用squash merge
merge 到 master，使用普通的merge
永远不向master直接commit代码
</code></pre>
<p><img src="https://pic.shaojiemike.top/img/aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0RSUHJpbmNlc3MvQmxvZ0ltYWdlcy9tYXN0ZXIvcWluaXUvZjJhOGUyYmU3YjQ1MTU2NjUxMzdjYzI5NWQ2MzQ3YTUucG5n.png"></p>
<h3 id="GitHub-Flow-分支模型"><a href="#GitHub-Flow-分支模型" class="headerlink" title="GitHub Flow 分支模型"></a>GitHub Flow 分支模型</h3><p>只有一个长期分支 master ,而且 master 分支上的代码，永远是可发布状态,</p>
<h2 id="CI-Continuous-Integration-集成"><a href="#CI-Continuous-Integration-集成" class="headerlink" title="CI(Continuous Integration)集成"></a>CI(Continuous Integration)集成</h2><h3 id="netlify"><a href="#netlify" class="headerlink" title="netlify"></a>netlify</h3><p>to do</p>
<h3 id="github-action"><a href="#github-action" class="headerlink" title="github action"></a>github action</h3><p>github自带的，貌似比Travis CI好用</p>
<p>ctest 怎么写</p>
<p><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html">https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html</a></p>
<h3 id="travis-ci"><a href="#travis-ci" class="headerlink" title="travis ci"></a>travis ci</h3><p>Travis CI 提供的是持续集成服务（Continuous Integration，简称 CI）。它绑定 Github 上面的项目，只要有新的代码，就会自动抓取。然后，提供一个运行环境，执行测试，完成构建，还能部署到服务器。</p>
<p>持续集成的好处在于，每次代码的小幅变更，就能看到运行结果，从而不断累积小的变更，而不是在开发周期结束时，一下子合并一大块代码。</p>
<ol>
<li><p>使用准备</p>
<ol>
<li>登录 <a target="_blank" rel="noopener" href="https://app.travis-ci.com/">https://app.travis-ci.com/</a> ,绑定github,选择监听仓库.</li>
<li>项目里面有可运行的代码,项目还包含构建或测试脚本</li>
</ol>
</li>
<li><p><code>.travis.yml</code></p>
<ol>
<li>在项目根目录下新建 .travis.yml 文件。参考官方文档编写 <a target="_blank" rel="noopener" href="https://docs.travis-ci.com/user/languages/cpp/">https://docs.travis-ci.com/user/languages/cpp/</a></li>
</ol>
</li>
<li><p>运行流程</p>
<ol>
<li>install 阶段：安装依赖</li>
<li>script 阶段：运行脚本</li>
</ol>
</li>
<li><p>可选部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">before_install：install 阶段之前执行</span><br><span class="line">before_script：script 阶段之前执行</span><br><span class="line">after_failure：script 阶段失败时执行</span><br><span class="line">after_success：script 阶段成功时执行</span><br><span class="line">before_deploy：deploy 步骤之前执行</span><br><span class="line">after_deploy：deploy 步骤之后执行</span><br><span class="line">after_script：script 阶段之后执行</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">passed：运行成功，所有步骤的退出码都是0</span><br><span class="line">canceled：用户取消执行</span><br><span class="line">errored：before_install、install、before_script有非零退出码，运行会立即停止</span><br><span class="line">failed ：script有非零状态码 ，会继续运行</span><br></pre></td></tr></table></figure>
</li>
<li><p>可选加密环境变量</p>
</li>
</ol>
<h2 id="git-commit-规范"><a href="#git-commit-规范" class="headerlink" title="git commit 规范"></a>git commit 规范</h2><p>Angular规范</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br></pre></td></tr></table></figure>

<h3 id="type-必须"><a href="#type-必须" class="headerlink" title="type 必须"></a>type 必须</h3><table>
<thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>feat：</td>
<td>新功能（feature）。</td>
</tr>
<tr>
<td>fix&#x2F;to：</td>
<td>修复bug，可以是QA发现的BUG，也可以是研发自己发现的BUG。</td>
</tr>
<tr>
<td>fix：</td>
<td>产生diff并自动修复此问题。适合于一次提交直接修复问题</td>
</tr>
<tr>
<td>to：</td>
<td>只产生diff不自动修复此问题。适合于多次提交。最终修复问题提交时使用fix</td>
</tr>
<tr>
<td>docs：</td>
<td>文档（documentation）。</td>
</tr>
<tr>
<td>style：</td>
<td>格式（不影响代码运行的变动）。</td>
</tr>
<tr>
<td>refactor：</td>
<td>重构（即不是新增功能，也不是修改bug的代码变动）。</td>
</tr>
<tr>
<td>perf：</td>
<td>优化相关，比如提升性能、体验。</td>
</tr>
<tr>
<td>test：</td>
<td>增加测试。</td>
</tr>
<tr>
<td>chore：</td>
<td>构建过程或辅助工具的变动。</td>
</tr>
<tr>
<td>revert：</td>
<td>回滚到上一个版本。</td>
</tr>
<tr>
<td>merge：</td>
<td>代码合并。</td>
</tr>
<tr>
<td>sync：</td>
<td>同步主线或分支的Bug。</td>
</tr>
</tbody></table>
<h3 id="规范化commit-message"><a href="#规范化commit-message" class="headerlink" title="规范化commit message"></a>规范化commit message</h3><p>格式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line">&lt;BLANK LINE&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;BLANK LINE&gt;</span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>对于Revert：<br>If the commit reverts a previous commit, it should begin with <code>revert:</code>, followed by the header of the reverted commit. In the body it should say: <code>This reverts commit &lt;hash&gt;.</code>, where the hash is <strong>the SHA of the commit being reverted</strong>.</li>
<li><strong>type</strong>的类型有：</li>
</ol>
<ul>
<li>feat: A new feature</li>
<li>fix: A bug fix</li>
<li>docs: Documentation only changes</li>
<li>style: Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)空白、格式、缺少分号等</li>
<li>refactor:(重构) A code change that neither fixes a bug nor adds a feature</li>
<li>perf: A code change that improves performance</li>
<li>test: Adding missing or correcting existing tests</li>
<li>chore: (琐事)Changes to the build process or auxiliary tools（辅助工具） and libraries such as documentation generation</li>
</ul>
<ol start="3">
<li><strong>scope</strong>:<br>commit 改变的位置，如果是多处写<code>*</code></li>
<li><strong>subject</strong>:<br>简明的描述：<ol>
<li>使用祈使句，现在时态</li>
<li>不要<code>.</code>结尾</li>
<li>第一个字母不要大写</li>
</ol>
</li>
<li><strong>body</strong>:<br>包括改变的动机，并将其与以前的行为进行对比。</li>
<li><strong>footer</strong>:<br>Breaking Changes或者reference GitHub issues that this commit closes.<br>Breaking Changes should start with the word<code>BREAKING CHANGE:</code> with a space or two newlines. The rest of the commit message is then used for this.</li>
</ol>
<h2 id="自动生成Release-Notes"><a href="#自动生成Release-Notes" class="headerlink" title="自动生成Release Notes"></a>自动生成Release Notes</h2><h3 id="规范化commit"><a href="#规范化commit" class="headerlink" title="规范化commit"></a>规范化commit</h3><p>插件 vscode插件git-commit-plugin</p>
<p>命令行 husky + commitlint</p>
<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><ol>
<li><p>Standard Version</p>
<ol>
<li>实现自动化版本控制,自动创建changelog, 创建 git tags</li>
<li>安装</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">npm cache clean --force #npm指令清除npm缓存</span><br><span class="line"># 删除node_module包</span><br><span class="line">npm install -g npm # npm 更新到最新</span><br><span class="line">npm install -g n</span><br><span class="line">n latest # node 更新</span><br><span class="line">   Note: the node command changed location and the old location may be remembered in your current shell.</span><br><span class="line">            old : /usr/bin/node</span><br><span class="line">            new : /usr/local/bin/node</span><br><span class="line">   To reset the command location hash either start a new shell, or execute PATH=$PATH&quot;</span><br><span class="line">PATH=/usr/local/bin/:$PATH</span><br><span class="line">npm install -D standard-version</span><br></pre></td></tr></table></figure>

<ol>
<li>编写package.json</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">   &quot;release&quot;: &quot;standard-version&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>CHANGELOG.md 记录内容的配置</p>
<ol>
<li>创建.versionrc</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;types&quot;: [</span><br><span class="line">   &#123;&quot;type&quot;: &quot;chore&quot;, &quot;section&quot;:&quot;Others&quot;, &quot;hidden&quot;: false&#125;,</span><br><span class="line">   &#123;&quot;type&quot;: &quot;revert&quot;, &quot;section&quot;:&quot;Reverts&quot;, &quot;hidden&quot;: false&#125;,</span><br><span class="line">   &#123;&quot;type&quot;: &quot;feat&quot;, &quot;section&quot;: &quot;Features&quot;, &quot;hidden&quot;: false&#125;,</span><br><span class="line">   &#123;&quot;type&quot;: &quot;fix&quot;, &quot;section&quot;: &quot;Bug Fixes&quot;, &quot;hidden&quot;: false&#125;,</span><br><span class="line">   &#123;&quot;type&quot;: &quot;improvement&quot;, &quot;section&quot;: &quot;Feature Improvements&quot;, &quot;hidden&quot;: false&#125;,</span><br><span class="line">   &#123;&quot;type&quot;: &quot;docs&quot;, &quot;section&quot;:&quot;Docs&quot;, &quot;hidden&quot;: false&#125;,</span><br><span class="line">   &#123;&quot;type&quot;: &quot;style&quot;, &quot;section&quot;:&quot;Styling&quot;, &quot;hidden&quot;: false&#125;,</span><br><span class="line">   &#123;&quot;type&quot;: &quot;refactor&quot;, &quot;section&quot;:&quot;Code Refactoring&quot;, &quot;hidden&quot;: false&#125;,</span><br><span class="line">   &#123;&quot;type&quot;: &quot;perf&quot;, &quot;section&quot;:&quot;Performance Improvements&quot;, &quot;hidden&quot;: false&#125;,</span><br><span class="line">   &#123;&quot;type&quot;: &quot;test&quot;, &quot;section&quot;:&quot;Tests&quot;, &quot;hidden&quot;: false&#125;,</span><br><span class="line">   &#123;&quot;type&quot;: &quot;build&quot;, &quot;section&quot;:&quot;Build System&quot;, &quot;hidden&quot;: false&#125;,</span><br><span class="line">   &#123;&quot;type&quot;: &quot;ci&quot;, &quot;section&quot;:&quot;CI&quot;, &quot;hidden&quot;:false&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用Standard Version</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 初次发布版本</span><br><span class="line">npm run release --first-release</span><br><span class="line">npm run release #(自动更新版本号，自动更新 CHANGELOG.md, 自动创建 git tag)</span><br><span class="line">git push --follow-tags origin master</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><img src="https://pic.shaojiemike.top/img/20210906205719.png" alt="寄"></li>
</ol>
</li>
<li><p>Commitizen for contributors</p>
<ol>
<li>Linux下commit规范辅助，用来选择(没vscode的时候用)</li>
<li>用 git-cz 来提交文件</li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/acfdd4ca0104">https://www.jianshu.com/p/acfdd4ca0104</a></li>
</ol>
</li>
<li><p>Visual Studio Code Commitizen Support<br>vscode的插件</p>
</li>
<li><p>conventional-changelog&#x2F;commitlint<br>阻止不规范的提交</p>
</li>
</ol>
<h3 id="github-release-notes"><a href="#github-release-notes" class="headerlink" title="github-release-notes"></a>github-release-notes</h3><p>github-release-notes，以下简称 gren ，是用来一键向 github 发布 release notes 的工具。<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/99499246">https://zhuanlan.zhihu.com/p/99499246</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39586683/article/details/110643111">https://blog.csdn.net/weixin_39586683/article/details/110643111</a></p>
<h2 id="release-语义化版本-semver"><a href="#release-语义化版本-semver" class="headerlink" title="release 语义化版本 semver"></a>release 语义化版本 semver</h2><p>版本格式：主版本号.次版本号.修订号，版本号递增规则如下：</p>
<p>主版本号：当你做了不兼容的 API 修改，<br>次版本号：当你做了向下兼容的功能性新增，<br>修订号：当你做了向下兼容的问题修正。<br>先行版本号及版本编译信息可以加到“主版本号.次版本号.修订号”的后面，作为延伸。</p>
<h2 id="Git-auto-release-requirements"><a href="#Git-auto-release-requirements" class="headerlink" title="Git auto-release requirements"></a>Git auto-release requirements</h2><ol>
<li>github Actions &#x2F; travis-ci<ol>
<li>自动化测试</li>
</ol>
</li>
<li>Commitizen &#x2F; Visual Studio Code Commitizen Support<ol>
<li>规范commit message</li>
</ol>
</li>
<li>standard-version<ol>
<li>更新 package 版本并打 tag</li>
</ol>
</li>
<li>github-release-notes<ol>
<li>生成 release-log</li>
</ol>
</li>
</ol>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>写个github模板</p>
<ol>
<li>明确文件结构<ol>
<li>src&#x2F;include&#x2F;build&#x2F;Doc&#x2F;Debug&#x2F;test&#x2F;example</li>
</ol>
</li>
<li>清晰的README<ol>
<li>Intro&#x2F;Install&amp;Run&#x2F;Features&#x2F;Bugs&#x2F;Acknowledge</li>
<li>图片和标签<ol>
<li><a target="_blank" rel="noopener" href="https://shields.io/category/build">https://shields.io/category/build</a></li>
</ol>
</li>
</ol>
</li>
<li>Release的自动发布<ol>
<li>规范commit</li>
</ol>
</li>
<li>其他自动化的轮子持续整合 (Continuous Integration, CI)<ol>
<li>travis ci</li>
<li>github action<ol>
<li>ctest 怎么写？</li>
</ol>
</li>
<li>cmake.yml</li>
<li>.github&#x2F;workflow<ol>
<li><a target="_blank" rel="noopener" href="https://github.com/iBug/AWS-Lambda-webhook-py/tree/master/.github/workflows">https://github.com/iBug/AWS-Lambda-webhook-py/tree/master/.github/workflows</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Kirrito-k423/github-stats">https://github.com/Kirrito-k423/github-stats</a></li>
</ol>
</li>
<li>文档生成<ol>
<li>doxygen</li>
<li>Doxygen主要解决说明书问题，可以在我们写代码的时候讲注释转化为说明书，Graphviz主要是用于图形展示</li>
<li>有项目，文件，函数三部分的书写要求 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/silencehuan/p/11169084.html">https://www.cnblogs.com/silencehuan/p/11169084.html</a></li>
</ol>
</li>
<li>Codecov<ol>
<li>代码覆盖率，执行部分占比。因为未执行部分可能是错的</li>
</ol>
</li>
</ol>
</li>
<li>projects&#x2F; bug fixs</li>
<li>设置为 template repository</li>
<li>查看 <a target="_blank" rel="noopener" href="https://app.travis-ci.com/github/Kirrito-k423/githubTemplate">https://app.travis-ci.com/github/Kirrito-k423/githubTemplate</a></li>
</ol>
<h2 id="plus"><a href="#plus" class="headerlink" title="plus"></a>plus</h2><h3 id="将网站变成带名字的md格式参考文献的插件"><a href="#将网站变成带名字的md格式参考文献的插件" class="headerlink" title="将网站变成带名字的md格式参考文献的插件"></a>将网站变成带名字的md格式参考文献的插件</h3><h3 id="Boost-设置"><a href="#Boost-设置" class="headerlink" title="Boost 设置"></a>Boost 设置</h3><p>set(Boost_USE_STATIC_LIBS ON)</p>
<p>set(Boost_DEBUG ON)</p>
<p>Boost_INCLUDE_DIR: 含有boost头文件的目录<br>Boost_LIBRARYDIR: 偏好的含有boost库的库目录</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/3897839/how-to-link-c-program-with-boost-using-cmake">https://stackoverflow.com/questions/3897839/how-to-link-c-program-with-boost-using-cmake</a></p>
<h3 id="Boost-Install"><a href="#Boost-Install" class="headerlink" title="Boost Install"></a>Boost Install</h3><p><a target="_blank" rel="noopener" href="http://c.biancheng.net/view/7772.html">http://c.biancheng.net/view/7772.html</a> cache?</p>
<p>cmake boost install path</p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/ask/107360">https://cloud.tencent.com/developer/ask/107360</a></p>
<p>设置boost-root 查看安装位置</p>
<h3 id="Travis-CI-Install"><a href="#Travis-CI-Install" class="headerlink" title="Travis-CI Install"></a>Travis-CI Install</h3><p>Travis-CI 依赖软件包每次都要重新安装吗</p>
<h3 id="apt-get-install-in-a-GitHub-Actions-workflow"><a href="#apt-get-install-in-a-GitHub-Actions-workflow" class="headerlink" title="apt-get install in a GitHub Actions workflow"></a>apt-get install in a GitHub Actions workflow</h3><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/57982945/how-to-apt-get-install-in-a-github-actions-workflow">https://stackoverflow.com/questions/57982945/how-to-apt-get-install-in-a-github-actions-workflow</a></p>
<p>Actions may have no Boost, where</p>
<h3 id="ctest"><a href="#ctest" class="headerlink" title="ctest"></a>ctest</h3><p>Ctest add build&#x2F;bin to test</p>
<p>Ctest <a target="_blank" rel="noopener" href="https://www.cnblogs.com/hustcpp/p/12922998.html">https://www.cnblogs.com/hustcpp/p/12922998.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zcteo/article/details/117527823?utm_medium=distribute.pc_relevant.none-task-blog-2~default~OPENSEARCH~default-15.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~OPENSEARCH~default-15.no_search_link">https://blog.csdn.net/zcteo/article/details/117527823?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EOPENSEARCH%7Edefault-15.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EOPENSEARCH%7Edefault-15.no_search_link</a></p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><p>还是ipcc的github组织的太烂了，需要学习一下</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>

<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/67620599">https://zhuanlan.zhihu.com/p/67620599</a></p>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html">http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/levy9527/blog/issues/1">https://github.com/levy9527/blog/issues/1</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-08-07T16:00:00.000Z" title="8/7/2023, 4:00:00 PM">2023-08-07</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.437Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/operating-system/">operating system</a></span><span class="level-item">9 minutes read (About 1391 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/08/07/Work/Operating%20system/Executablefilerunningprocess/">Linux Executable file: Structure &amp; Running 2</a></p><div class="content"><h2 id="可执行文件的运行"><a href="#可执行文件的运行" class="headerlink" title="可执行文件的运行"></a>可执行文件的运行</h2><p>要运行可执行目标文件 prog，我们可以在 Linux shell 的命令行中输入它的名字：<br><code>linux&gt; ./prog</code><br>因为 prog 不是一个内置的 shell 命令，所以 shell 会认为 prog 是一个可执行目标文件。</p>
<h3 id="进程的启动"><a href="#进程的启动" class="headerlink" title="进程的启动"></a>进程的启动</h3><ul>
<li>Linux进程的启动是通过父进程复制一个子进程，子进程<a target="_blank" rel="noopener" href="https://hansimov.gitbook.io/csapp/part2/ch08-exceptional-control-flow/8.4-process-control#8.4.5-jia-zai-bing-yun-hang-cheng-xu">通过execve系统调用启动加载器。</a><ul>
<li>加载器（loader）删除子进程已有的虚拟存储段，</li>
<li>通过将虚拟地址空间中的页映射到可执行文件的页大小组块，</li>
<li>并创建一组新的代码、数据、堆、栈段，</li>
<li>同时新的堆和栈被初始化为零。</li>
<li>新的代码和数据段被初始化为可执行文件的内容，</li>
<li>最后将CUP指令寄存器设置成可执行文件入口，启动运行。</li>
</ul>
</li>
</ul>
<p>执行完上述操作后，其实可执行文件的真正指令和数据都没有别装入内存中。操作系统只是通过可执行文件头部的信息建立起可执行文件和进程虚拟内存之间的映射关系而已。</p>
<p><img src="https://1087580735-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-MHt_spaxGgCbp2POnfq%2F-MI8pquOBkqRu_B1qWTy%2F-MI8q_Q9zCjP43SJa6VX%2F07-15%20Linux%20x86-64%20%E8%BF%90%E8%A1%8C%E6%97%B6%E5%86%85%E5%AD%98%E6%98%A0%E5%83%8F.png?alt=media&token=9d8f7d7e-ccda-48d1-814a-8a38ccb2ff8a" alt="memory map"></p>
<p>除了一些头部信息，在加载过程中没有任何从磁盘到内存的数据复制。直到 CPU 引用一个被映射的虚拟页时才会进行复制，此时，操作系统利用它的页面调度机制自动将页面从磁盘传送到内存。</p>
<p>比如，现在程序的入口地址为 <code>0x08048000</code> ，刚好是代码段的起始地址。当CPU打算执行这个地址的指令时，发现页面 <code>0x8048000</code> ~ <code>0x08049000</code> (一个页面一般是4K)是个空页面，于是它就认为是个页错误。此时操作系统根据虚拟地址空间与可执行文件间的映射关系找到页面在可执行文件中的偏移，然后在物理内存中分配一个物理页面，并在虚拟地址页面与物理页面间建立映射，最后把EXE文件中页面拷贝到内存的物理页面，进程重新开始执行。该过程如下图所示：</p>
<p><img src="https://pic.shaojiemike.top/img/Inked20150612143758289_LI.jpg"></p>
<p>接下来，加载器跳转到程序的入口点，也就是 <code>_start</code>函数的地址。这个函数是在系统目标文件 ctrl.o 中定义的，对所有的 C 程序都是一样的。_start 函数调用系统启动函数 <code>__libc_start_main</code>，该函数定义在 <code>libc.so</code> 中。它初始化执行环境，调用用户层的 main 函数，处理 main 函数的返回值，并且在需要的时候把控制返回给内核。</p>
<h3 id="fork-和-execve-函数的差异"><a href="#fork-和-execve-函数的差异" class="headerlink" title="fork 和 execve 函数的差异"></a>fork 和 execve 函数的差异</h3><ul>
<li>fork 函数在新的子进程中运行相同的程序，新的子进程是父进程的一个复制品。</li>
<li>execve 函数在当前进程的上下文中加载并运行一个新的程序。<ul>
<li>它会覆盖当前进程的地址空间，但并没有创建一个新进程。</li>
<li>新的程序仍然有相同的 PID，并且继承了调用 execve 函数时已打开的所有文件描述符。</li>
</ul>
</li>
</ul>
<h3 id="程序运行途中修改exe程序"><a href="#程序运行途中修改exe程序" class="headerlink" title="程序运行途中修改exe程序"></a>程序运行途中修改exe程序</h3><ul>
<li>由于操作系统使用页表和虚拟内存机制来实现按需加载。按需加载意味着只有在程序执行到需要访问某个代码段时，才会将该代码段从可执行文件加载到内存中。</li>
<li>那么如果我在程序运行的途中重新编译程序，修改了代码段，那么程序会怎么样呢？<ul>
<li>Chatgpt：运行中的程序尝试执行新的代码时，会发生未定义的行为，因为操作系统不会自动将新的代码加载到正在运行的进程的内存中。</li>
<li>一个页表4KB，一个程序的代码段可能有如下100KB甚至几十MB，不可能全部加载。</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># shaojiemike @ snode6 in ~/github/sniper_PIMProf/PIMProf/gapbs on git:dev o [15:15:29]</span></span><br><span class="line">$ size /usr/lib/llvm-10/bin/llvm-mca</span><br><span class="line">   text    data     bss     dec     hex filename</span><br><span class="line"> 144530    6056    8089  158675   26bd3 /usr/lib/llvm-10/bin/llvm-mca</span><br><span class="line"></span><br><span class="line"><span class="comment"># shaojiemike @ snode6 in ~/github/sniper_PIMProf/PIMProf/gapbs on git:dev o [15:18:14]</span></span><br><span class="line">$ l /usr/lib/llvm-10/bin/llvm-mca</span><br><span class="line">-rwxr-xr-x 1 root root 153K Apr 20  2020 /usr/lib/llvm-10/bin/llvm-mca</span><br></pre></td></tr></table></figure>

<h3 id="程序运行途中修改python代码"><a href="#程序运行途中修改python代码" class="headerlink" title="程序运行途中修改python代码"></a>程序运行途中修改python代码</h3><ul>
<li>虽然修改python代码类似修改C代码，按理来说不会影响程序进行。但是python是逐行解释执行的，很难让人不思考会不会影响正在运行中的程序。</li>
<li>答案是不会，原因有二：<ul>
<li>python代码在运行时，会被编译成字节码，然后再执行字节码。修改python代码后，其对应的字节码会在下一次运行程序时，Python解释器对比文件时间戳时更新。</li>
<li>Python解释器在运行时，会将所需的文件提前加载到内存里</li>
</ul>
</li>
</ul>
<h3 id="GDB调试修改"><a href="#GDB调试修改" class="headerlink" title="GDB调试修改"></a>GDB调试修改</h3></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-08-07T16:00:00.000Z" title="8/7/2023, 4:00:00 PM">2023-08-07</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.436Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/operating-system/">operating system</a></span><span class="level-item">11 minutes read (About 1680 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/08/07/Work/Operating%20system/memalloc/">Memalloc</a></p><div class="content"><p><a href="#refer-anchor"><sup>2</sup></a></p>
<h2 id="Buddy-内存分配"><a href="#Buddy-内存分配" class="headerlink" title="Buddy 内存分配"></a>Buddy 内存分配</h2><p>是一种用于管理计算机内存的算法，旨在有效地分配和释放内存块，以防止碎片化并提高内存的使用效率。这种算法通常用于操作系统中，以管理系统内核和进程的内存分配。</p>
<p>Buddy 内存分配算法的基本思想是将物理内存划分为大小相等的块，每个块大小都是 2 的幂次方。每个块可以分配给一个正在运行的进程或内核。当内存被分配出去后，它可以被分割成更小的块，或者合并成更大的块，以适应不同大小的内存需求。</p>
<p>算法的名称 “Buddy” 来自于分配的块之间的关系，其中一个块被称为 “buddy”，它是另一个块的大小相等的邻居。这种关系使得在释放内存时，可以尝试将相邻的空闲块合并成更大的块，从而减少内存碎片。</p>
<p>Buddy 内存分配算法的工作流程大致如下：</p>
<ol>
<li><p>初始时，整个可用内存被视为一个大块，大小是 2 的幂次方。</p>
</li>
<li><p>当一个进程请求内存分配时，算法会搜索可用的块，找到大小合适的块来满足请求。如果找到的块比所需的稍大，它可以被分割成两个相等大小的 “buddy” 块，其中一个分配给请求的进程。</p>
</li>
<li><p>当一个进程释放内存时，该块会与其 “buddy” 块合并，形成一个更大的块。然后，这个更大的块可以与其它相邻的块继续合并，直到达到较大的块。</p>
</li>
</ol>
<p>Buddy 内存分配算法在一些操作系统中用于管理内核和进程的物理内存，尤其在嵌入式系统和实时操作系统中，以提高内存使用效率和避免碎片化问题。</p>
<h3 id="ucore（Micro-kernel-Operating-System-for-Education）"><a href="#ucore（Micro-kernel-Operating-System-for-Education）" class="headerlink" title="ucore（Micro-kernel Operating System for Education）"></a>ucore（Micro-kernel Operating System for Education）</h3><p>是一个用于教育目的的微内核操作系统</p>
<h2 id="linux遇到问题"><a href="#linux遇到问题" class="headerlink" title="linux遇到问题"></a>linux遇到问题</h2><p>我们可window写程序占满16G内存</p>
<p>但是linux,用了3GB就会seg fault</p>
<p>猜想是不是有单进程内存限制 <a target="_blank" rel="noopener" href="https://www.imooc.com/wenda/detail/570992">https://www.imooc.com/wenda/detail/570992</a></p>
<p><img src="https://pic.shaojiemike.top/img/20150603163431433.png"></p>
<p>而且malloc alloc的空间在堆区，我们可以明显的发现这个空间是被栈区包住的，有限的。windows是如何解决这个问题的呢？</p>
<ol>
<li>首先这个包住是虚拟地址，通过页表映射到的物理地址是分开的</li>
<li>根据第一点，可以实现高地址动态向上移动</li>
</ol>
<p>动态数据区一般就是“堆栈”。“栈 (stack)”和“堆(heap)”是两种不同的动态数据区，栈是一种线性结构，堆是一种链式结构。进程的每个线程都有私有的“栈”，所以每个线程虽然 代码一样，但本地变量的数据都是互不干扰。一个堆栈可以通过“基地址”和“栈顶”地址来描述。全局变量和静态变量分配在静态数据区，本地变量分配在动态数 据区，即堆栈中。程序通过堆栈的基地址和偏移量来访问本地变量。</p>
<p> 当进程初始化时，系统会自动为进程创建一个默认堆，这个堆默认所占内存的大小为1M。堆对象由系统进行管理，它在内存中以链式结构存在。</p>
<h2 id="Linux-单进程内存限制"><a href="#Linux-单进程内存限制" class="headerlink" title="Linux 单进程内存限制"></a>Linux 单进程内存限制</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/etc/security/limits.conf</span><br><span class="line"></span><br><span class="line"># shaojiemike @ node5 in ~ [6:35:51]</span><br><span class="line">$ ulimit -a</span><br><span class="line">-t: cpu time (seconds)              unlimited</span><br><span class="line">-f: file size (blocks)              unlimited</span><br><span class="line">-d: data seg size (kbytes)          unlimited</span><br><span class="line">-s: stack size (kbytes)             8192</span><br><span class="line">-c: core file size (blocks)         0</span><br><span class="line">-m: resident set size (kbytes)      unlimited</span><br><span class="line">-u: processes                       513967</span><br><span class="line">-n: file descriptors                1024</span><br><span class="line">-l: locked-in-memory size (kbytes)  65536</span><br><span class="line">-v: address space (kbytes)          unlimited</span><br><span class="line">-x: file locks                      unlimited</span><br><span class="line">-i: pending signals                 513967</span><br><span class="line">-q: bytes in POSIX msg queues       819200</span><br><span class="line">-e: max nice                        0</span><br><span class="line">-r: max rt priority                 0</span><br><span class="line">-N 15:                              unlimited</span><br><span class="line"></span><br><span class="line">ulimit -HSn 4096 # H指定了硬性大小，S指定了软性大小，n表示设定单个进程最大的打开文件句柄数量。硬限制是实际的限制，而软限制，是warnning限制，只会做出warning</span><br><span class="line"></span><br><span class="line">lsof</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>文件描述符</p>
<p>文件句柄数</p>
<p>这些限制一般不会限制内存。</p>
<h2 id="超算登录节点任务限制的实现"><a href="#超算登录节点任务限制的实现" class="headerlink" title="超算登录节点任务限制的实现"></a>超算登录节点任务限制的实现</h2><h2 id="GNU-malloc"><a href="#GNU-malloc" class="headerlink" title="GNU malloc()"></a>GNU malloc()</h2><p>调用malloc(size_t size)函数分配内存成功，总会<strong>分配size字节VM（再次强调不是RAM）</strong>，并返回一个指向刚才所分配内存区域的开端地址。分配的内存会为进程一直保留着，直到你显示地调用free()释放它（当然，整个进程结束，静态和动态分配的内存都会被系统回收）。</p>
<p>GNU libc库提供了二个内存分配函数,分别是malloc()和calloc()。glibc函数malloc()总是通过brk()或mmap()系统调用来满足内存分配需求。函数malloc()，根据<strong>不同大小内存</strong>要求来选择brk()，还是mmap()，阈值 MMAP_THRESHOLD&#x3D;128Kbytes是临界值。小块内存(&lt;&#x3D;128kbytes)，会调用brk()，它将<strong>数据段的最高地址往更高处推（堆从底部向上增长）</strong>。大块内存，则使用mmap()进行匿名映射(设置标志MAP_ANONYMOUS)来分配内存，<strong>与堆无关，在堆之外。</strong></p>
<p>malloc不是直接分配内存的，是第一次访问的时候才分配的？</p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/20836462">https://www.zhihu.com/question/20836462</a></p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ol>
<li>堆区和栈区是进程唯一的吗？<ol>
<li>是的，而且栈主要是为一个线程配备，小可以保证基本在cache里</li>
</ol>
</li>
<li>两个操作系统的malloc的是物理内存还是虚拟内存</li>
<li>Linux采用的是copy-on-write机制</li>
</ol>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><p><img src="https://pic.shaojiemike.top/img/20210821151824.png"><br><img src="https://pic.shaojiemike.top/img/20210821151852.png"><br>每次都是6008这里，40000*6008*3&#x2F;1024&#x2F;1024&#x3D;687MB<br><img src="https://pic.shaojiemike.top/img/20210821152053.png"><br>733448&#x2F;1024&#x3D;716MB<br><img src="https://pic.shaojiemike.top/img/20210821154550.png"><br>问了大师兄，问题竟然是malloc的传入参数错误的类型是int,导致存不下3*40*1024*40*1024。应该用size_t类型。（size_t是跨平台的非负整数安全类型）</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/shenzi/article/details/3972437?utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.base&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.base">https://blog.csdn.net/shenzi/article/details/3972437?utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.base&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.base</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/justdoithai/article/details/51174457">程序（进程）内存空间分布深入理解</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-08-07T16:00:00.000Z" title="8/7/2023, 4:00:00 PM">2023-08-07</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.498Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Network/">Network</a></span><span class="level-item">16 minutes read (About 2454 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/08/07/Work/network/0-basic/firewall/">Firewall</a></p><div class="content"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>防火墙是一种网络安全设备，主要是通过硬件和软件的作用于内部和外部网络的环境间产生一种保护的屏障，从而实现对计算机不安全网络因素的阻断。</p>
<ul>
<li>所有流入流出的所有网络通信均要经过此防火墙。</li>
<li>功能<ul>
<li>访问控制、隔离保护</li>
</ul>
</li>
<li>组成<ul>
<li>服务访问政策、验证工具、包过滤和应用网关</li>
</ul>
</li>
</ul>
<h3 id="功能作用"><a href="#功能作用" class="headerlink" title="功能作用"></a>功能作用</h3><ul>
<li>入侵检测功能<ul>
<li>主要有反端口扫描、检测拒绝服务工具、检测CGI&#x2F;IIS服务器入侵、检测木马或者网络蠕虫攻击、检测缓冲区溢出攻击等功能，</li>
<li>可以极大程度上减少网络威胁因素的入侵，有效阻挡大多数网络安全攻击。</li>
</ul>
</li>
<li>网络地址转换功能(NAT)<ul>
<li>分为源地址转换和目的地址转换，即SNAT和DNAT。可以由服务的发起者是谁来区分两者。</li>
<li>SNAT: 内部地址要访问公网上的服务时，内部地址会主动发起连接，将内部地址转换成公有ip<ul>
<li>修改源ip地址的目的一般都是为了让这个包能再回到自己这里，所以在iptables中，SNAT是在出口，也即<code>POSTROUTING</code>链发挥作用。</li>
<li>SNAT主要用于隐藏内部网络结构，避免受到来自外部网络的非法访问和恶意攻击，有效缓解地址空间的短缺问题，</li>
</ul>
</li>
<li>DNAT：当内部需要对外提供服务时，外部发起主动连接公有ip的网关，路由器或着防火墙的网关接收到这个连接，然后把连接转换到内部，此过程是由带公有ip的网关代替内部服务来接收外部的连接，然后在内部做地址转换。<ul>
<li>修改目的ip地址的原因一般就是为了改变包发送的目的地，让包走出去，而不是留下来，所以在iptables中，DNAT是在入口，也即<code>PREROUTING</code>链中发挥作用，以便让包进入FORWARD表。</li>
<li>DNAT主要用于外网主机访问内网主机，以此避免内部网络被攻击。</li>
<li>DNAT与端口转发的区别在哪里？</li>
</ul>
</li>
</ul>
</li>
<li>网络操作的审计监控功能<ul>
<li>对系统管理的所有操作以及安全信息进行记录，提供有关网络使用情况的统计数据，方便计算机网络管理以进行信息追踪。</li>
</ul>
</li>
<li>强化网络安全服务(类似GFW)<ul>
<li>集中化的安全管理，将安全系统装配在防火墙上，在信息访问的途径中就可以实现对网络信息安全的监管。</li>
</ul>
</li>
</ul>
<h2 id="Linux实现原理"><a href="#Linux实现原理" class="headerlink" title="Linux实现原理"></a>Linux实现原理</h2><p><img src="https://pic.shaojiemike.top/img/20230409182640.png"></p>
<ul>
<li>Linux系统内核中的安全框架Netfilter，为其他内核模块提供数据包过滤、网络地址转换（NAT）和负载均衡的功能。</li>
<li>常用的iptables和firewalld服务都依赖于Netfilter来过滤数据包，两者自身并不具备防火墙的功能，只是创建并维护规则。<ul>
<li>不同之处在于iptables基于“过滤规则链”，firewalld基于zone区域。</li>
<li>iptables无守护进程，不能算作真正的服务，firewalld存在守护进程</li>
</ul>
</li>
</ul>
<h3 id="三表五链-三表-应用规则"><a href="#三表五链-三表-应用规则" class="headerlink" title="三表五链 - 三表(应用规则)"></a>三表五链 - 三表(应用规则)</h3><ul>
<li>filter 	用于过滤，防火墙，过滤数据包</li>
<li>nat 	 用于网络地址转换、端口转发</li>
<li>mangle 	用于拆解报文，作出修改，封装报文</li>
<li>raw表， 关闭nat表上启用的连接追踪机制，以提高性能。<ul>
<li>表规则应用优先级：raw&gt;mangle&gt;nat&gt;filter</li>
<li>每个表中能存在的链如下<br><img src="https://pic.shaojiemike.top/img/20230409183027.png"></li>
</ul>
</li>
</ul>
<h3 id="三表五链-五链-数据包状态-过滤规则链"><a href="#三表五链-五链-数据包状态-过滤规则链" class="headerlink" title="三表五链 - 五链(数据包状态&#x2F; 过滤规则链)"></a>三表五链 - 五链(数据包状态&#x2F; 过滤规则链)</h3><ul>
<li>PREROUTING 	进入路由之前的数据包</li>
<li>INPUT 	目的地址为本机的输入数据包</li>
<li>FORWARD 	目的地址不为本机的包，可以实现转发(需要开启)</li>
<li>OUTPUT 	源地址为本机的输出数据包</li>
<li>POSTROUTING  发送到网卡之前的数据包 	<br><img src="https://pic.shaojiemike.top/img/20230409212933.png"></li>
</ul>
<h2 id="Nftables"><a href="#Nftables" class="headerlink" title="Nftables"></a>Nftables</h2><ul>
<li>Allows configuration of tables, chains and rules provided by the Linux kernel firewall.</li>
<li><strong>Nftables replaces iptables.</strong><ul>
<li>解决的iptables的不足<ul>
<li>不同协议实现的代码重复</li>
<li>Nftables通过增强的通用集和映射基础结构，可以<strong>更快</strong>地进行数据包分类。</li>
<li>解决语法不一致的问题，并提供更好，更紧凑的语法。</li>
</ul>
</li>
</ul>
</li>
<li>OpenWRT和ubuntu都使用Nftables</li>
</ul>
<h3 id="表"><a href="#表" class="headerlink" title="表"></a>表</h3><p>与iptables表的对应关系</p>
<table>
<thead>
<tr>
<th>nftables簇</th>
<th>iptables实用程序</th>
</tr>
</thead>
<tbody><tr>
<td>ip</td>
<td>iptables</td>
</tr>
<tr>
<td>ip6</td>
<td>ip6tables</td>
</tr>
<tr>
<td>inet</td>
<td>iptables和ip6tables</td>
</tr>
<tr>
<td>arp</td>
<td>arptables</td>
</tr>
<tr>
<td>bridge</td>
<td>ebtables</td>
</tr>
</tbody></table>
<ul>
<li><code>ip</code>（即IPv4）是默认簇，如果未指定簇，则使用该簇。</li>
<li>创建同时适用于IPv4和IPv6的规则，请使用<code>inet</code>。inet允许统一ip和ip6簇，以便更容易地定义规则。</li>
</ul>
<h3 id="输出解释"><a href="#输出解释" class="headerlink" title="输出解释"></a>输出解释</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">table inet warp <span class="punctuation">&#123;</span></span><br><span class="line">        chain warp-in <span class="punctuation">&#123;</span></span><br><span class="line">                type filter hook input priority mangle; policy accept;</span><br><span class="line">                ip6 saddr <span class="number">2606</span><span class="punctuation">:</span><span class="number">4700</span><span class="punctuation">:</span>d0<span class="punctuation">:</span><span class="punctuation">:</span>a29f<span class="punctuation">:</span>c001 udp sport <span class="number">1701</span> @th<span class="punctuation">,</span><span class="number">72</span><span class="punctuation">,</span><span class="number">24</span> set <span class="number">0x0</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">        chain warp-out <span class="punctuation">&#123;</span></span><br><span class="line">                type filter hook output priority mangle; policy accept;</span><br><span class="line">                ip6 daddr <span class="number">2606</span><span class="punctuation">:</span><span class="number">4700</span><span class="punctuation">:</span>d0<span class="punctuation">:</span><span class="punctuation">:</span>a29f<span class="punctuation">:</span>c001 udp dport <span class="number">1701</span> @th<span class="punctuation">,</span><span class="number">72</span><span class="punctuation">,</span><span class="number">24</span> set <span class="number">0x46c997</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>type</code> 可以是<code>filter</code>、<code>route</code>或者<code>nat</code>。</li>
<li><code>hook</code> 在IPv4&#x2F;IPv6&#x2F;Inet地址簇中，可以是<code>prerouting</code>、<code>input</code>、<code>forward</code>、<code>output</code>或者<code>postrouting</code>。其他地址簇中的钩子列表请参见nft(8)。</li>
</ul>
<h2 id="iptables命令"><a href="#iptables命令" class="headerlink" title="iptables命令"></a>iptables命令</h2><h3 id="查看默认表filter的规则"><a href="#查看默认表filter的规则" class="headerlink" title="查看默认表filter的规则"></a>查看默认表filter的规则</h3><p>对于每条链，内核会按照顺序依次检查 iptables 防火墙规则，如果发现有匹配的规则目录，则立刻执行相关动作，停止继续向下查找规则目录；如果所有的防火墙规则都未能匹配成功，则按照默认策略处理。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> iptables -vnL </span><br><span class="line">Chain INPUT (policy ACCEPT 2211K packets, 855M bytes)</span><br><span class="line"> pkts bytes target     prot opt <span class="keyword">in</span>     out     <span class="built_in">source</span>               destination</span><br><span class="line">    0     0 ACCEPT     all  --  tun0   *       0.0.0.0/0            0.0.0.0/0</span><br></pre></td></tr></table></figure>

<ul>
<li>命令<ul>
<li>默认 <code>-t filter</code> </li>
<li><code>-v</code> 显示详细信息，<code>-n</code>显示具体ip和端口数值</li>
</ul>
</li>
<li>输出<ul>
<li><code>policy ACCEPT</code> 当前链的默认策略 <code>ACCEPT</code></li>
<li><code>pkts</code>：对应规则匹配到的报文的个数。</li>
<li>bytes：对应匹配到的报文包的大小总和。</li>
<li>target：规则对应的target，往往表示规则对应的”动作”，即规则匹配成功后需要采取的措施。</li>
<li>prot：表示规则对应的协议，是否只针对某些协议应用此规则。</li>
<li>opt：表示规则对应的选项。</li>
<li>in：表示数据包由哪个接口(网卡)流入，我们可以设置通过哪块网卡流入的报文需要匹配当前规则。</li>
<li>out：表示数据包由哪个接口(网卡)流出，我们可以设置通过哪块网卡流出的报文需要匹配当前规则。</li>
<li>source：表示规则对应的源头地址，可以是一个IP，也可以是一个网段。</li>
<li>destination：表示规则对应的目标地址。可以是一个IP，也可以是一个网段。</li>
</ul>
</li>
</ul>
<h3 id="添加的动作"><a href="#添加的动作" class="headerlink" title="添加的动作"></a>添加的动作</h3><p>命令部分：<code>-j</code> + 如下动作</p>
<ul>
<li>ACCEPT：允许数据包通过。</li>
<li>DROP：直接丢弃数据包，不给任何回应信息，这时候客户端会感觉自己的请求泥牛入海了，过了超时时间才会有反应。</li>
<li>REJECT：拒绝数据包通过，必要时会给数据发送端一个响应的信息，客户端刚请求就会收到拒绝的信息。</li>
<li>SNAT：源地址转换，解决内网用户用同一个公网地址上网的问题。</li>
<li><code>MASQUERADE</code>：是SNAT的一种特殊形式，适用于动态的、临时会变的ip上。</li>
<li>DNAT：目标地址转换。</li>
<li>REDIRECT：在本机做端口映射。</li>
<li>LOG：在&#x2F;var&#x2F;log&#x2F;messages文件中记录日志信息，然后将数据包传递给下一条规则，也就是说除了记录以外不对数据包做任何其他操作，仍然让下一条规则去匹配。</li>
</ul>
<h3 id="iptables管理命令"><a href="#iptables管理命令" class="headerlink" title="iptables管理命令"></a>iptables管理命令</h3><ul>
<li>选择表<ul>
<li>-t指定表</li>
</ul>
</li>
<li>添加新规则<ul>
<li>-A在链的最后追加一条规则 </li>
<li>-I在链的开头或指定序号插入一条规则 </li>
<li>-x显示精确值，不做单位换算</li>
</ul>
</li>
<li>替换规则<ul>
<li>-R替换一条指定的规则</li>
</ul>
</li>
<li>查看规则<ul>
<li>-L列出所有规则 </li>
<li>-n以数据形式显示地址与端口信息 </li>
<li>-v以更加详细的方式显示 </li>
<li>–line-numbers查看规则时，显示规则序号</li>
</ul>
</li>
<li>删除或清空规则<ul>
<li>-D删除指定序号的一条规则 </li>
<li>-F清空指定表中的所有规则</li>
</ul>
</li>
<li>设置默认策略<ul>
<li>-P为指定的链设置默认规则</li>
</ul>
</li>
<li>新建规则链<ul>
<li>-N新建自定义链</li>
</ul>
</li>
<li>重命名链<ul>
<li>-E重命名自定义链</li>
</ul>
</li>
<li>删除链<ul>
<li>-X删除自定义空链 </li>
<li>-Z计数器清零</li>
</ul>
</li>
</ul>
<h3 id="常见实例"><a href="#常见实例" class="headerlink" title="常见实例"></a>常见实例</h3><p>Add a NAT rule to translate all traffic from the <code>192.168.0.0/24</code> subnet to the host’s public IP:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sudo</span> iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -j MASQUERADE</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">sudo</span> iptables -t nat -vnL --line-numbers</span><br><span class="line">Chain POSTROUTING (policy ACCEPT 19 packets, 1551 bytes)</span><br><span class="line">num   pkts bytes target     prot opt <span class="keyword">in</span>     out     <span class="built_in">source</span>               destination</span><br><span class="line">6        0     0 MASQUERADE  all  --  *      *       192.168.0.0/24       0.0.0.0/0</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">sudo</span> iptables -t nat -D POSTROUTING 6 <span class="comment">#delete</span></span><br></pre></td></tr></table></figure>
<h3 id="有待学习"><a href="#有待学习" class="headerlink" title="有待学习"></a>有待学习</h3><ul>
<li>docker相关的iptables的输出</li>
<li>OpenWRT上iptables完全是空的，是显示错误还是防火墙用了firewalld</li>
<li>node5上的warp的mangle在哪里？</li>
</ul>
<h2 id="Ubuntu配置"><a href="#Ubuntu配置" class="headerlink" title="Ubuntu配置"></a>Ubuntu配置</h2><h2 id="Windows配置"><a href="#Windows配置" class="headerlink" title="Windows配置"></a>Windows配置</h2><ul>
<li>入站规则</li>
<li>出站规则</li>
<li></li>
</ul>
<h2 id="OpenWRT配置"><a href="#OpenWRT配置" class="headerlink" title="OpenWRT配置"></a>OpenWRT配置</h2><p>to finished</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45649763/article/details/103338747">https://blog.csdn.net/weixin_45649763/article/details/103338747</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7108726951304495135">https://juejin.cn/post/7108726951304495135</a></p>
<p><a target="_blank" rel="noopener" href="https://icloudnative.io/posts/using-nftables/">https://icloudnative.io/posts/using-nftables/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-08-05T16:00:00.000Z" title="8/5/2023, 4:00:00 PM">2023-08-05</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.485Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/toLearn/">toLearn</a></span><span class="level-item">6 minutes read (About 837 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/08/05/Work/Programming/2-languageGrammar/jupyter-ai/">Jupyter AI</a></p><div class="content"><h2 id="Jupyter-简介"><a href="#Jupyter-简介" class="headerlink" title="Jupyter 简介"></a>Jupyter 简介</h2><p>Jupyter是一个开源的、交互式的计算环境，可以让用户创建和共享包含实时代码、可视化和文本的文档。</p>
<ul>
<li>它的名字来源于三个主要的编程语言：Julia、Python和R，这三种语言的开头字母构成了“Jupyter”。</li>
<li>Jupyter最初是IPython项目的一部分，旨在提供Python的交互式计算环境。随着时间的推移，它不仅支持Python，还扩展到其他编程语言，包括R、Julia、Scala等。Jupyter的灵感来自于IPython的交互式shell，但在其基础上增加了更多功能和可扩展性。</li>
</ul>
<p>Jupyter最显著的特点：用户可以<strong>通过Web浏览器</strong>打开Jupyter笔记本，然后在其中编写代码、运行代码并直接查看代码的输出结果。笔记本中的代码和文本可以交叉编排，使得写作、数据分析和可视化变得非常直观和便捷。</p>
<p>主要的Jupyter组件包括：</p>
<ol>
<li>Jupyter Notebook：这是最常见的Jupyter界面，以.ipynb后缀的文件保存。它支持多种编程语言的代码运行，交互式地执行和编辑代码块，并支持在代码块中插入Markdown格式的文本以及图像、链接等内容。</li>
<li>Jupyter Lab：这是Jupyter Notebook的下一代界面，提供了更加现代化和灵活的界面。Jupyter Lab将各种组件整合到一个集成的界面中，使得多个笔记本、终端和文件浏览器可以在一个窗口中同时运行。</li>
<li>Jupyter Kernel：Jupyter支持多种编程语言的内核，通过内核，Jupyter可以与特定编程语言进行交互。例如，使用Python内核可以在笔记本中运行和编写Python代码，同样，使用R内核可以运行和编写R代码。</li>
</ol>
<p>Jupyter在教育、数据科学、机器学习、数据分析等领域得到广泛应用。它提供了一个方便、实用的平台，帮助用户探索数据、实验算法、展示结果，并通过共享笔记本方便地与其他人交流和合作。</p>
<h3 id="Jupyter-vs-python"><a href="#Jupyter-vs-python" class="headerlink" title="Jupyter vs python"></a>Jupyter vs python</h3><p>Jupyter 的<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/37490497">核心</a>在于 数据分析的 计算-分析-可视化 的快速迭代。</p>
<p>如果不是数据科学，就不太需要Jupyter</p>
<h2 id="Installation-in-Linux"><a href="#Installation-in-Linux" class="headerlink" title="Installation in Linux"></a>Installation in Linux</h2><p>安装<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/166425946">Jupyter Lab</a></p>
<h2 id="web-forward-to-local-machine"><a href="#web-forward-to-local-machine" class="headerlink" title="web-forward to local machine"></a>web-forward to local machine</h2><p>远程访问服务器</p>
<h2 id="Jupyter-AI"><a href="#Jupyter-AI" class="headerlink" title="Jupyter-AI"></a>Jupyter-AI</h2><ol>
<li>Installation</li>
<li>test</li>
</ol>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><ol>
<li>python 一大特点就是容易可视化，既然这样，我为什么不用jupyter呢？</li>
<li>chatgpt 类的工具都是基于付费API，有两大问题<ol>
<li>国内难以付费</li>
<li>国内ip一旦访问是很容易封号的。</li>
</ol>
</li>
<li>一种解决办法是使用有免费API的工具，并且在全流量走cloudflare的wg的服务器上配置服务。</li>
</ol>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>上面回答部分<strong>来自ChatGPT-3.5</strong>，没有进行正确性的交叉校验。</p>
<p><a target="_blank" rel="noopener" href="https://jupyter-ai.readthedocs.io/en/latest/users/index.html#installation">https://jupyter-ai.readthedocs.io/en/latest/users/index.html#installation</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-08-02T16:00:00.000Z" title="8/2/2023, 4:00:00 PM">2023-08-02</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.474Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/toLearn/">toLearn</a></span><span class="level-item">3 minutes read (About 464 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/08/02/Work/Algorithms/parallel_sort/">Parallel_sort</a></p><div class="content"><h2 id="并行排序算法"><a href="#并行排序算法" class="headerlink" title="并行排序算法"></a>并行排序算法</h2><p>to learn</p>
<h2 id="PSRS算法"><a href="#PSRS算法" class="headerlink" title="PSRS算法"></a>PSRS算法</h2><p>并行正则采样排序算法</p>
<p><img src="https://pic2.zhimg.com/80/v2-28a103ab8e3911ae13feaa3f9f663d51_1440w.webp" alt="PSRS"></p>
<h3 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><p>简单地讨论一下 PSRS 算法的复杂度。</p>
<ul>
<li>在第一部分的快速排序中，时间复杂度为O(klogk)，k&#x3D;n&#x2F;p</li>
<li>然后，各处理器选择 p-1 个代表元素，代价为O(p)</li>
<li>再由 Proc#0 对所有送来的代表元素进行排序，然后选出主元，这里若使用快速排序，代价为O(p^2 logp^2)<ul>
<li>而若使用归并排序，则所需代价为O(p^2)</li>
</ul>
</li>
<li>每个处理器接收到主元后，再对有序数组进行划分，代价为O(k+p)</li>
<li>最后，各个处理器全局交换，并行归并排序，<ul>
<li>每个处理器是串行的<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000009723817">多路归并问题</a>，时间复杂度为<code>O(k*logp)</code></li>
</ul>
</li>
</ul>
<p>考虑到实际应用中，需要排序的数据长度 n 一定远远多于现有的处理器 p，此时可以视 p 为一个小常数，那么 PSRS 排序算法的时间复杂度，就可以简化为 <code>O(klogk+k*logp)~O(klogk)</code></p>
<p>从消息复杂度的角度看，</p>
<ul>
<li>播送主元的复杂度为 O(p^2+p)</li>
<li>分区合并（全局交换）部分的消息复杂度与具体算法实现相关，但其最大值不会超过 O(n)</li>
</ul>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><!-- 字节的面试官抓着这点问，我确实没仔细研究比较过。 -->

<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>上面回答部分<strong>来自ChatGPT-3.5</strong>，没有进行正确性的交叉校验。</p>
<p><a target="_blank" rel="noopener" href="https://dingfen.github.io/mpi&openmp/2021/01/23/psrs_sort.html">https://dingfen.github.io/mpi&amp;openmp/2021/01/23/psrs_sort.html</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-08-02T16:00:00.000Z" title="8/2/2023, 4:00:00 PM">2023-08-02</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.504Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Databases/">Databases</a></span><span class="level-item">25 minutes read (About 3788 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/08/02/Work/Database/Databasebasics/">Database basics</a></p><div class="content"><article class="message is-info">
        <div class="message-header"><p><i class="fa-solid fa-clipboard mr-2"></i>导言</p>
</div>
        <div class="message-body">
            <p>数据库相关的常用名词和相关概念基础，商业化公司了解</p>

        </div>
    </article></div><a class="article-more button is-small is-size-7" href="/2023/08/02/Work/Database/Databasebasics/#more">Read more</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-08-02T16:00:00.000Z" title="8/2/2023, 4:00:00 PM">2023-08-02</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.446Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">26 minutes read (About 3962 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/08/02/Work/HPC/0-overview/parallelIntroduction/">ParallelIntroduction</a></p><div class="content"><h2 id="战略层"><a href="#战略层" class="headerlink" title="战略层"></a>战略层</h2><p>并行算法设计(详细见陈国良教材)</p>
<h3 id="PCAM"><a href="#PCAM" class="headerlink" title="PCAM"></a>PCAM</h3><p>设计并发程序的四个阶段（PCAM设计方法学）：</p>
<ol>
<li>划分（Partitioning）:分解成小的任务，开拓并发性</li>
<li>通讯（Communication）：确定诸任务间的数据交换，监测划分的合理性；</li>
<li>组合（Agglomeration）：依据任务的局部性，组合成更大的任务；</li>
<li>映射（Mapping）：将每个任务分配到处理器上，提高算法的性能。</li>
</ol>
<h3 id="三种基本方法"><a href="#三种基本方法" class="headerlink" title="三种基本方法"></a>三种基本方法</h3><h4 id="串改并：现有串行算法改成并行"><a href="#串改并：现有串行算法改成并行" class="headerlink" title="串改并：现有串行算法改成并行"></a>串改并：现有串行算法改成并行</h4><ol start="2">
<li>从问题开始全新设计并行算法<ol>
<li>前缀和改成线性方程组的问题来并行</li>
<li>有向环的k-着色并行算法<ol>
<li>将coreId作为颜色，进行二进制处理来颜色压缩。压缩到0-5之后再单独消除颜色</li>
</ol>
</li>
</ol>
</li>
</ol>
<h4 id="借用法：借用已有算法"><a href="#借用法：借用已有算法" class="headerlink" title="借用法：借用已有算法"></a>借用法：借用已有算法</h4><ol>
<li>最短路径动态规划转换成矩阵乘法</li>
</ol>
<h4 id="其他基础方法"><a href="#其他基础方法" class="headerlink" title="其他基础方法"></a>其他基础方法</h4><ol>
<li>平衡树<ol>
<li>求n个最大值，先串行求部分最大，再用树，成本（处理器个数*时间）最低</li>
<li>访问存储次数&#x2F;成本也不是最低的</li>
</ol>
</li>
<li>倍增技术，指针跳跃</li>
<li>分治策略</li>
<li>划分原理（以两个有序数列到归并排序为例）<ol>
<li>均匀划分</li>
<li>对数划分</li>
<li>方根划分</li>
<li>功能划分：基于硬件的Batcher实现，奇偶归并排序，双调序列的实现可以简化网络</li>
</ol>
</li>
<li>流水线技术<ol>
<li>脉动阵列</li>
</ol>
</li>
<li>加速级联策略<ol>
<li>先采用最快的方法将问题规模先减小到一个阈值，然后用其余最优的算法求出原问题的解。</li>
<li>思想其实类似机器学习里的变学习率。例子有平衡树的</li>
</ol>
</li>
<li>破对称技术<ol>
<li>打破数据的对称，便于分类</li>
</ol>
</li>
</ol>
<h2 id="指令级并行-ILP"><a href="#指令级并行-ILP" class="headerlink" title="指令级并行 ILP"></a>指令级并行 ILP</h2><p>编译器和硬件级别的，一般不会引起程序员的注意。[^1]</p>
<h3 id="挑战：-数据相关"><a href="#挑战：-数据相关" class="headerlink" title="挑战： 数据相关"></a>挑战： 数据相关</h3><ul>
<li>真数据相关</li>
<li>名称相关：两条指令使用了相同的寄存器或者存储器位置，但实际并没有数据流动。寄存器重命名处理</li>
<li>控制相关：主要指指令的执行与分支指令存在先后关系。</li>
</ul>
<h3 id="解决方案-CPI-to-1-：“硬件推测”（Hardware-Speculation）"><a href="#解决方案-CPI-to-1-：“硬件推测”（Hardware-Speculation）" class="headerlink" title="解决方案(CPI to 1)：“硬件推测”（Hardware Speculation）"></a>解决方案(CPI to 1)：“硬件推测”（Hardware Speculation）</h3><p>硬件推测是一种技术，通过它，处理器可以在不完全确定某些操作结果的情况下，提前执行后续指令。这种技术主要用于提高处理器的性能和执行效率。以下是硬件推测的几个关键方面：</p>
<ol>
<li><strong>分支预测（Branch Prediction）</strong>：处理器使用分支预测来猜测条件跳转指令的结果（即跳转或不跳转）。如果预测正确，提前执行的指令就可以直接使用，从而避免等待分支决策的延迟。</li>
<li><strong>数据依赖性推测（Data Dependency Speculation）</strong>：处理器可能会提前执行依赖于尚未计算完成的数据的指令。例如，即使前一条指令的结果尚未确定，它也会继续执行依赖于该结果的后续指令。</li>
<li><strong>乱序执行（Out-of-Order Execution）</strong>：这是硬件推测的另一种形式。在这里，处理器根据资源的可用性而不是指令在程序中的顺序来调度指令的执行。</li>
<li><strong>内存访问推测（Memory Access Speculation）</strong>：处理器可能会在所有必要的内存访问权限检查完成之前开始执行依赖于特定内存操作的指令。</li>
</ol>
<p>这些推测性技术的共同目标是减少因等待数据依赖、分支决策或其他延迟而导致的空闲处理器周期。如果推测正确，这可以显著提高执行速度。然而，如果推测错误，处理器必须“倒回”并重新执行正确的指令路径，这可能导致性能损失。因此，现代处理器设计的一个关键方面是优化这些推测机制以最大限度地减少错误预测的影响。</p>
<h4 id="编译器技术：基本流水线与循环展开"><a href="#编译器技术：基本流水线与循环展开" class="headerlink" title="编译器技术：基本流水线与循环展开"></a>编译器技术：基本流水线与循环展开</h4><h4 id="分支预测器"><a href="#分支预测器" class="headerlink" title="分支预测器"></a>分支预测器</h4><h4 id="动态调度-乱序执行-out-of-order-execution"><a href="#动态调度-乱序执行-out-of-order-execution" class="headerlink" title="动态调度&#x2F;乱序执行(out-of-order execution)"></a>动态调度&#x2F;乱序执行(out-of-order execution)</h4><ul>
<li><p>有多个功能单元和流水化单元。使得流水线能同时执行多个指令</p>
</li>
<li><p>乱序执行, 循序提交： 记分板 -&gt; Tomasulo算法</p>
</li>
<li><p>重排缓存区ROB：保存已经执行完成，但是还没有提交的指令结果。是乱序执行处理器的核心组件之一。</p>
</li>
<li><p>三点作用：</p>
<ol>
<li><strong>指令顺序的维护</strong>：尽管指令被乱序执行（以利用处理器资源并提高性能），但最终的结果需要按照程序的原始顺序提交。ROB跟踪每条指令的执行状态，并确保它们在最终提交时是按顺序的。</li>
<li><strong>分支与异常的支持处理</strong>： 区分已提交指令，保证分支预测失败时正常回退，和异常和中断时程序的一致性。</li>
<li><strong>资源管理</strong>：ROB还参与动态地管理处理器资源，如识别哪些指令可以并行执行，以及在资源有限时优先执行哪些指令。</li>
</ol>
</li>
</ul>
<h3 id="升级方案-CPI-lower-1-：多发射架构（Multiple-Issue）"><a href="#升级方案-CPI-lower-1-：多发射架构（Multiple-Issue）" class="headerlink" title="升级方案(CPI lower 1)：多发射架构（Multiple Issue）"></a>升级方案(CPI lower 1)：多发射架构（Multiple Issue）</h3><article class="message is-success">
        <div class="message-header"><p><i class="fa-brands fa-gripfire mr-2"></i>与前面的区分</p>
</div>
        <div class="message-body">
            <p>前面的技术是为了消除数据与控制停顿，使得CPI达到理想值1，如果我们想CPI小于一，每个时钟周期就需要发射多条指令。</p>

        </div>
    </article>

<p>多发射是一个更广泛的术语，指的是在一个时钟周期内发射（开始执行）多条指令的能力。</p>
<p>主要有三类：</p>
<ol>
<li>In order superscalar processor</li>
<li>out-of-order superscalar processor</li>
<li>VLIW</li>
</ol>
<h4 id="超标量架构（Superscalar）"><a href="#超标量架构（Superscalar）" class="headerlink" title="超标量架构（Superscalar）"></a>超标量架构（Superscalar）</h4><p>超标量处理器通常具有多个执行单元，如多个整数、浮点和其他专用执行单元，以及复杂的调度和分支预测机制来支持同时处理多条指令。</p>
<h4 id="VLIW"><a href="#VLIW" class="headerlink" title="VLIW"></a>VLIW</h4><p>VLIW（Very Long Instruction Word）是一种处理器架构设计，其特点是使用非常长的指令字来编码多个操作，这些操作可以在单个处理器周期内并行执行。VLIW架构的关键特征如下：</p>
<ol>
<li><strong>长指令字</strong>：VLIW架构的指令字长度远超常规处理器。这些长指令字包含了多个操作（如算术、逻辑操作），这些操作在一个时钟周期内同时执行。</li>
<li><strong>编译器优化</strong>：在VLIW架构中，指令的并行性是在编译时确定的，而不是在运行时。这意味着编译器负责识别可以并行执行的操作，并将它们组合成单个长指令字。</li>
<li><strong>硬件简化</strong>：由于指令级并行性是在编译时处理的，VLIW处理器的硬件可以相对简化，因为它们不需要复杂的运行时指令调度和分支预测机制。这使得VLIW处理器在设计上更简单，功耗更低。</li>
<li><strong>应用依赖</strong>：VLIW架构的效率高度依赖于编译器的优化能力和应用程序代码的特性。在指令流中并行性高的应用中，VLIW架构可以实现很高的性能。</li>
</ol>
<p>VLIW架构在某些特定的应用场景（如数字信号处理DSP）中效果显著，但在通用计算领域的适用性受到限制，主要是因为编译器在处理普通程序时面临更大的挑战来有效地利用指令级并行性。</p>
<h3 id="实例-超标量处理器能在一个时钟周期内同时发射和执行多条指令来实现指令级并行性。"><a href="#实例-超标量处理器能在一个时钟周期内同时发射和执行多条指令来实现指令级并行性。" class="headerlink" title="实例(超标量处理器能在一个时钟周期内同时发射和执行多条指令来实现指令级并行性。)"></a>实例(超标量处理器能在一个时钟周期内同时发射和执行多条指令来实现指令级并行性。)</h3><ul>
<li>ARM Cortex-A8 Core 双发射、静态调度(In-order)超标量处理器 <img src="https://pic.shaojiemike.top/img/20230606182819.png"></li>
<li>Intel Core i7 四发射、动态调度(out-of-order execution)超标量处理器<ul>
<li>微指令融合。性能更强，但是能耗比显著降低。</li>
</ul>
</li>
</ul>
<h2 id="数据级并行-DLP"><a href="#数据级并行-DLP" class="headerlink" title="数据级并行 DLP"></a>数据级并行 DLP</h2><ul>
<li>向量张量、SIMD、以及GPU的结构<ul>
<li>区别和MLP 概念的不同：MLP（访存并行）是一种通过同时处理多个内存访问来实现并行性的概念。MLP的目标是提高对存储器系统的效率，减少内存访问的延迟时间。它可以通过预取、缓存和内存操作的重叠等技术来实现。</li>
</ul>
</li>
</ul>
<h2 id="线程级并行-TLP"><a href="#线程级并行-TLP" class="headerlink" title="线程级并行 TLP"></a>线程级并行 TLP</h2><ul>
<li>单机多核系统<ul>
<li>运行一组紧密耦合的线程，协同完成任务</li>
</ul>
</li>
<li>缓存一致性协议</li>
</ul>
<h2 id="超算或者仓库级计算机-WSC-Warehouse-Scale-Computers-请求级并行-RLP"><a href="#超算或者仓库级计算机-WSC-Warehouse-Scale-Computers-请求级并行-RLP" class="headerlink" title="超算或者仓库级计算机(WSC Warehouse-Scale Computers) 请求级并行 RLP"></a>超算或者仓库级计算机(WSC Warehouse-Scale Computers) 请求级并行 RLP</h2><ul>
<li>请求级并行：由一个或者多个用户发起的多个相对独立的进程</li>
<li>环境： 云计算。</li>
<li>关注成本与收益</li>
</ul>
<h2 id="并行分类"><a href="#并行分类" class="headerlink" title="并行分类"></a>并行分类</h2><!-- ![](https://pic.shaojiemike.top/PicGo20210714225801.png) -->
<p><img src="https://pic.shaojiemike.top/img/PicGo20210714225801.png"></p>
<h3 id="微处理器器中的并行"><a href="#微处理器器中的并行" class="headerlink" title="微处理器器中的并行"></a>微处理器器中的并行</h3><p>ILP 指令级并行</p>
<p>TLP 线程级并行</p>
<p>SMT 同步多线程（Simultaneous Multi-Threading，SMT）是一种在一个CPU 的时钟周期内能够执行来自多个线程的指令的硬件多线程技术。</p>
<p>CMP 单芯片多处理器（Chip multiprocessors）</p>
<h3 id="常用的四种并行模式-这样分感觉不是很对"><a href="#常用的四种并行模式-这样分感觉不是很对" class="headerlink" title="常用的四种并行模式(这样分感觉不是很对)"></a>常用的四种并行模式(这样分感觉不是很对)</h3><ol>
<li>共享内存模式（The shared memory model）</li>
<li>多线程模式（The multithread model）</li>
<li>分布式内存&#x2F;消息传递模式（The distributed memory&#x2F;message passing model）</li>
<li>数据并行模式（The data parallel model）</li>
</ol>
<h2 id="实际的经验"><a href="#实际的经验" class="headerlink" title="实际的经验"></a>实际的经验</h2><ol>
<li>IPCC Preliminary SLIC Optimization 4: EnforceLabelConnectivity</li>
</ol>
<h2 id="并行常见名词"><a href="#并行常见名词" class="headerlink" title="并行常见名词"></a>并行常见名词</h2><p>SM : shared Memory</p>
<p>LM : Local Memory</p>
<p>DM ：distribute memory</p>
<h2 id="并行计算模型"><a href="#并行计算模型" class="headerlink" title="并行计算模型"></a>并行计算模型</h2><p><img src="https://pic.shaojiemike.top/img/20220317105950.png"></p>
<h3 id="并行计算访存模型（强调时间）"><a href="#并行计算访存模型（强调时间）" class="headerlink" title="并行计算访存模型（强调时间）"></a>并行计算访存模型（强调时间）</h3><p>均匀访存模型（UMA）、非均匀访存模型（NUMA）、全高速缓存访存模型（COMA）、一致性高速缓存非均匀存储访问模型（CC-NUMA）和非远程存储访问模型（NORMA）。</p>
<p>UMA（Uniform Memory Access）均匀存储訪问：物理存储器被全部处理器均匀共享，全部处理器对全部SM訪存时间相同，每台处理器可带有快速私有缓存，外围设备共享。</p>
<p>NUMA非均匀存储訪问：共享的SM是由物理分布式的LM逻辑构成，处理器訪存时间不一样，訪问LM或CSM（群内共享存储器）内存储器比訪问GSM（群间共享存储器）快</p>
<p>COMA（Cache-Only MA）全快速缓存存储訪问：NUMA的特例、全快速缓存实现</p>
<p>CC-NUMA（Coherent-Cache NUMA）快速缓存一致性NUMA：NUMA＋快速缓存一致性协议。实际是分布共享的DSM机器</p>
<p>NORMA（No-Remote MA）非远程存储訪问：无SM，全部LM私有。通过消息传递通信</p>
<h3 id="NUMA"><a href="#NUMA" class="headerlink" title="NUMA"></a>NUMA</h3><p>NUMA : NUMA (non-uniform memory access) is a method of configuring a cluster of microprocessor in a <strong>multiprocessing</strong> system so that they can <strong>share memory locally</strong>, improving performance and the ability of the system to be expanded. NUMA is used in a <strong>symmetric multiprocessing</strong> ( SMP ) system.</p>
<p>在NUMA下，處理器存取它自己的本地記憶體的速度比非本地記憶體快一些。 非統一記憶體存取架構的特點是：被共享的記憶體物理上是分散式的，所有這些記憶體的集合就是全域位址空間。</p>
<h3 id="RDMA"><a href="#RDMA" class="headerlink" title="RDMA"></a>RDMA</h3><p>Remote Direct Memory Access (<strong>RDMA</strong>) is an extension of the Direct Memory Access (<strong>DMA</strong>) technology, which is the ability to access host memory directly without CPU intervention. RDMA allows for accessing memory data from one host to another.</p>
<p>远程直接内存访问（英语：Remote Direct Memory Access，RDMA）是一种从一台计算机的内存到另一台计算机的内存的直接内存访问，而不涉及任何一台计算机的操作系统。这允许高吞吐量、低延迟联网，这在大规模并行计算机集群中特别有用。</p>
<p>重点是zero-copy， 不再需要机器缓存，然后拷贝传递信息。 InfiniBand网络默认支持，另一种就是RoCE</p>
<h3 id="relationship-between-RDMA-and-NUMA"><a href="#relationship-between-RDMA-and-NUMA" class="headerlink" title="relationship between RDMA and NUMA"></a>relationship between RDMA and NUMA</h3><p>Most high performance computing clusters are nowadays composed of large multicore machines that expose Non-Uniform Memory Access (NUMA), and they are interconnected using modern communication paradigms, such as Remote Direct Memory Access (RDMA).</p>
<h3 id="结构类型"><a href="#结构类型" class="headerlink" title="结构类型"></a>结构类型</h3><p><img src="https://pic.shaojiemike.top/img/20220308103947.png"></p>
<li>SISD：单指令流单数据流计算机（冯诺依曼机）</li>
<li>SIMD：单指令流多数据流计算机</li>
<li>MISD：多指令流单数据流计算机， 实际不存在</li>
<li>MIMD：多指令流多数据流计算机</li>

<h3 id="SIMD-SM"><a href="#SIMD-SM" class="headerlink" title="SIMD-SM"></a>SIMD-SM</h3><p>PRAM（Parallel Random Access Machine）模型是单指令流多数据流（SIMD）并行机中的一种具有共享存储的模型。</p>
<p>它假设有对其容量大小没有限制的一个共享存储器，并且有多个功能相同的处理器，在任意时刻处理器可以访问共享存储单元。根据是否可以同时读写，它又分为以下三类：<strong>PRAM-EREW，PRAM-CREW，PRAM-CRCW</strong>（其中C代表Concurrent，意为允许并发操作，E-代表Exclusive，意味排斥并发操作）。在PRAM中有一个同步时钟，所有的操作都是同步进行的。</p>
<p>具有局部存储器的PRAM模型称作<strong>LPRAM</strong>模型，具有异步时钟的PRAM模型称作<strong>APRAM</strong>模型。</p>
<p>在《并行算法的设计和分析》的第二十章-并行计算理论有额外的定义：</p>
<ul>
<li>允许任意处理器自由读写的 SIMD-SM。简记为 APRAM-CRCW</li>
<li>只允许所有处理器并发写同一数的SIMD-SM。简记为CPRAM-CRCW</li>
<li>只允许最小号码处理器优先写的SIMD-SM。称作优先PRAM-CRCW。简记为PPRAM-CRCW</li>
<li>一个具有p个处理器的优先PRAM-CRCW模型。称作p-处理器的PPRAM-CRCW。</li>
</ul>
<h3 id="几种MIMD"><a href="#几种MIMD" class="headerlink" title="几种MIMD"></a>几种MIMD</h3><li>PVP并行向量处理机：多VP（向量处理器）通过交叉开关和多个SM（共享内存）相连</li>
<li>SMP对称多处理机：多P/C（商品微处理器）通过交叉开关/总线和多个SM（共享内存）相连</li>
<li>MPP大规模并行处理机：处理节点有商品微处理器+LM（分布式本地内存）。节点间通过高带宽低延迟定制网络互联，异步MIMD，多个进程有自己的地址空间，通过消息传递机制通信</li>
<li>COW工作站机群：节点是完整操作系统的工作站，且有磁盘</li>
<li>DSM分布共享存储处理机：快速缓存文件夹DIR确保缓存一致性。将物理分布式LM组成逻辑共享SM从而提供统一地址的编程空间</li>

<p><img src="https://pic.shaojiemike.top/img/20220312155427.png"><br><img src="https://pic.shaojiemike.top/img/20220312150632.png"><br><img src="https://pic.shaojiemike.top/img/20220312150725.png"><br><img src="https://pic.shaojiemike.top/img/20220312150745.png"><br><img src="https://pic.shaojiemike.top/img/20220312150801.png"><br><img src="https://pic.shaojiemike.top/img/20220312150916.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>[^1]: 计算机体系结构 - 量化研究方法第5 版</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/20/">Previous</a></div><div class="pagination-next"><a href="/page/22/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/20/">20</a></li><li><a class="pagination-link is-current" href="/page/21/">21</a></li><li><a class="pagination-link" href="/page/22/">22</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/43/">43</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">𝘊𝘰𝘮𝘱𝘶𝘵𝘦𝘳 𝘈𝘳𝘤𝘩𝘪𝘵𝘦𝘤𝘵𝘶𝘳𝘦 &amp; 𝘏𝘗𝘊</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">423</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">35</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">512</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">41</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/Camp/"><span class="level-start"><span class="level-item">Camp</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math/"><span class="level-start"><span class="level-item">Math</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile" href="/categories/ProjectRecord/"><span class="level-start"><span class="level-item">ProjectRecord</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Thinking/"><span class="level-start"><span class="level-item">Thinking</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">116</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/love/"><span class="level-start"><span class="level-item">love</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/programming/"><span class="level-start"><span class="level-item">programming</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">54</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-23T01:54:23.000Z">2024-09-23</time></p><p class="title"><a href="/2024/09/23/Work/Miscellaneous/ProjectRecord/24Q3-1-OptimizePTAWithThreadAffinity/">[DevLog]24Q3P1 - Optimize PTA With Thread Affinity</a></p><p class="categories"><a href="/categories/ProjectRecord/">ProjectRecord</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-22T09:19:48.000Z">2024-09-22</time></p><p class="title"><a href="/2024/09/22/Work/software/simulator/PC/VirtualBox/">VirtualBox</a></p><p class="categories"><a href="/categories/software/">software</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-13T07:08:55.000Z">2024-09-13</time></p><p class="title"><a href="/2024/09/13/Work/software/PC/macbook/">Macbook Config</a></p><p class="categories"><a href="/categories/software/">software</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-13T00:47:35.000Z">2024-09-13</time></p><p class="title"><a href="/2024/09/13/Work/Programming/2-languageGrammar/c/Types/">[C++ Basic] Types</a></p><p class="categories"><a href="/categories/toLearn/">toLearn</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-12T14:41:50.000Z">2024-09-12</time></p><p class="title"><a href="/2024/09/12/Work/Programming/2-languageGrammar/c/Class/">[C++ Basic] User-Defined Types: Class</a></p><p class="categories"><a href="/categories/Programming/">Programming</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/09/"><span class="level-start"><span class="level-item">September 2024</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/08/"><span class="level-start"><span class="level-item">August 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/07/"><span class="level-start"><span class="level-item">July 2024</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/06/"><span class="level-start"><span class="level-item">June 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/05/"><span class="level-start"><span class="level-item">May 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">April 2024</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">March 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">February 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/01/"><span class="level-start"><span class="level-item">January 2024</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">December 2023</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">November 2023</span></span><span class="level-end"><span class="level-item tag">33</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">October 2023</span></span><span class="level-end"><span class="level-item tag">56</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/09/"><span class="level-start"><span class="level-item">September 2023</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">August 2023</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">July 2023</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">June 2023</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">May 2023</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">April 2023</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">March 2023</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">February 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">January 2023</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">December 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/11/"><span class="level-start"><span class="level-item">November 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">October 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">September 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">August 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">July 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">May 2022</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">April 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">March 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">February 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">January 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">December 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">November 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">September 2021</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2024 Shaojie Tan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>