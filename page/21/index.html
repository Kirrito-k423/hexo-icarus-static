<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="SHAOJIE&#039;S BOOK"><meta property="og:url" content="http://icarus.shaojiemike.top/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://icarus.shaojiemike.top/img/og_image.png"><meta property="article:author" content="Shaojie Tan"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://icarus.shaojiemike.top/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top"},"headline":"SHAOJIE'S BOOK","image":["http://icarus.shaojiemike.top/img/og_image.png"],"author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.0.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-02-11T22:08:24.000Z" title="2/11/2023, 10:08:24 PM">2023-02-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-18T14:55:02.922Z" title="11/18/2023, 2:55:02 PM">2023-11-18</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">7 minutes read (About 1010 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/02/11/OutOfWork/4-devices/4-keepass/">Keepass</a></p><div class="content"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>KeePass是一个轻量级、易用且安全性极高的密码管理器，其源码完全开源（OSI certified），获得了世界多国的安全认证和评级。</p>
<p>只需要<strong>一个主密码+一个数据库文件</strong>即可安全的保存所有的密码。</p>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ol>
<li>密码数据库自己掌握，与1Password和LastPass相比不存在平台泄露的可能。</li>
<li>所以在云存储、多终端同步上不如商业产品1Password和LastPass便捷，需要自己配置。<ol>
<li>跨平台（有大量开源的第三方的客户端）。</li>
<li>支持WebDAV，配合网盘可实现跨平台、多终端同步。</li>
<li>Windows下可配置浏览器自动输入（Mac据说也可以）。</li>
</ol>
</li>
</ol>
<h3 id="密码安全"><a href="#密码安全" class="headerlink" title="密码安全"></a>密码安全</h3><p>普通用户面临的问题：</p>
<ul>
<li>重要的密码会泄露在非重要的地方：每个人心中都有一个常用的密码，这个密码在注册各类账户时都会拿出来用，甚至银行卡的6位数密码也包含其中<ul>
<li>小网站的“脱裤”会导致你的常用密码被泄露</li>
</ul>
</li>
<li>不同的网站对密码的复杂度要求不同，我们也会临时“演变”导致“找回密码”成了登录前的基本操作</li>
</ul>
<h2 id="美观兼容版"><a href="#美观兼容版" class="headerlink" title="美观兼容版"></a>美观兼容版</h2><ul>
<li>KeePassXC：KeePassX的分支，功能齐全，<ul>
<li>跨平台（Windows、macOS和Linux），</li>
<li>界面更加美观、扁平化，</li>
<li>但不支持WebDAV。</li>
<li>支持KDBX 3.1和4.0。</li>
</ul>
</li>
<li>KeeWeb：后起之秀，与KeePass兼容，功能齐全，<ul>
<li>跨平台（Windows、macOS和Linux），</li>
<li>另有自动备份等功能，</li>
<li>界面美观；</li>
<li>支持在线安装插件；支持离线Web应用；</li>
<li>笔者认为是Mac OS的首选；使用坚果云webdav时报错：“No Last-Modified header”。</li>
</ul>
</li>
</ul>
<h2 id="Windows-KeeWeb使用"><a href="#Windows-KeeWeb使用" class="headerlink" title="Windows KeeWeb使用"></a>Windows KeeWeb使用</h2><ol>
<li>中文插件 <a target="_blank" rel="noopener" href="https://plugins.keeweb.info/translations/zh-CN">https://plugins.keeweb.info/translations/zh-CN</a></li>
<li>设置里方便激活浏览器拓展</li>
</ol>
<h2 id="多平台"><a href="#多平台" class="headerlink" title="多平台"></a>多平台</h2><ul>
<li>Windows：KeePass、KeeWeb</li>
<li>Android：KeePass2Android<ul>
<li>读取群晖Drive下的文件即可</li>
<li>支持自动填充功能，和生物识别</li>
</ul>
</li>
<li>Mac OS：KeeWeb</li>
<li>IOS、 ipad OS:<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/keeweb/keeweb/wiki/iOS">https://github.com/keeweb/keeweb/wiki/iOS</a></li>
<li>Strongbox 就还行</li>
</ul>
</li>
<li>iPhone：keepass touch</li>
</ul>
<h2 id="同步实现"><a href="#同步实现" class="headerlink" title="同步实现"></a>同步实现</h2><h3 id="坚果云"><a href="#坚果云" class="headerlink" title="坚果云"></a>坚果云</h3><p>坚果云更像Dropbox，</p>
<ul>
<li>支持WebDAV、</li>
<li>增量同步和历史版本等功能。</li>
</ul>
<p>坚果云免费版虽不如Dropbox，但也还算厚道：</p>
<ul>
<li>上传流量1G&#x2F;月，下载流量3G&#x2F;月，</li>
<li>支持1个月的历史版本，用来使用KeePass、云笔记等足矣。</li>
</ul>
<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><ol>
<li>添加“应用密钥”<ol>
<li>在《账户信息》-《安全选项》</li>
</ol>
</li>
<li>keeweb 添加 即可<ol>
<li>注意坚果云用户是 邮箱， 不是昵称</li>
</ol>
</li>
</ol>
<p>参考<a target="_blank" rel="noopener" href="https://blog.uliian.com/2018/01/22/how-to-keepass/">教程</a></p>
<p>但是keeweb无法同步，会报错</p>
<h2 id="其他第三方密码管理器"><a href="#其他第三方密码管理器" class="headerlink" title="其他第三方密码管理器"></a>其他第三方密码管理器</h2><p>LastPass、1Password、 秘迹 app</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><p>原本我是懒得用的，edge自带的密码管理器不好吗？</p>
<ol>
<li>一方面，<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/32657812">自动填写带来的安全性问题</a>。<ol>
<li>目前大多数第三方密码管理器，如LastPass和1Password都不容易受到这种攻击的影响，因为它们避免了自动填入不可见的登录表单，并且需要进行用户交互。</li>
<li>可以直接导出所有信息的<a target="_blank" rel="noopener" href="https://github.com/moonD4rk/HackBrowserData">黑客程序HackBrowserdata</a></li>
<li>还有<a target="_blank" rel="noopener" href="https://github.com/gentilkiwi/mimikatz/">windows管理员密码获取</a>程序。（如果要玩，记得先把火绒等杀毒软件关了</li>
</ol>
</li>
<li>另一方面，假如你电脑被攻击了，浏览器根本无法保护你的密码</li>
</ol>
<h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><ol>
<li>多端同步的（Windows，macbook，ipad，Android）</li>
<li>浏览器有保存插件的（Safari，edge，chrome）</li>
</ol>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.rmnof.com/article/keepass-password-manager/">https://www.rmnof.com/article/keepass-password-manager/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-31T16:00:00.000Z" title="1/31/2023, 4:00:00 PM">2023-01-31</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-18T14:55:02.946Z" title="11/18/2023, 2:55:02 PM">2023-11-18</time></span><span class="level-item"><a class="link-muted" href="/categories/Network/">Network</a></span><span class="level-item">6 minutes read (About 898 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/31/Work/network/homeNetwork/">Home Network</a></p><div class="content"><h2 id="ping、arp、tracert、route命令"><a href="#ping、arp、tracert、route命令" class="headerlink" title="ping、arp、tracert、route命令"></a>ping、arp、tracert、route命令</h2><h3 id="tracert"><a href="#tracert" class="headerlink" title="tracert"></a>tracert</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/504688650">https://zhuanlan.zhihu.com/p/504688650</a></p>
<h2 id="ipv6"><a href="#ipv6" class="headerlink" title="ipv6"></a>ipv6</h2><h3 id="查看是否有ipv6"><a href="#查看是否有ipv6" class="headerlink" title="查看是否有ipv6"></a>查看是否有ipv6</h3><p>ipw.cn 查看是否有ipv6(手机热点是ipv6优先的)</p>
<p><img src="https://pic.shaojiemike.top/img/20220928210623.png"></p>
<p>如图，由于不支持，所以ping不了ipv6</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">D:\PowerShell\github\hugoMinos [main ≡ +1 ~4 -0 !]&gt; ping 2001:da8:d800:112::23</span><br><span class="line"></span><br><span class="line">Pinging 2001:da8:d800:112::23 with 32 bytes of data:</span><br><span class="line">PING: transmit failed. General failure.</span><br><span class="line">PING: transmit failed. General failure.</span><br><span class="line">PING: transmit failed. General failure.</span><br><span class="line"></span><br><span class="line">2001:da8:d800:112::23 的 Ping 统计信息:</span><br><span class="line">    数据包: 已发送 = 3，已接收 = 0，丢失 = 3 (100% 丢失)，</span><br></pre></td></tr></table></figure>

<h3 id="光猫，路由器修改ipv6"><a href="#光猫，路由器修改ipv6" class="headerlink" title="光猫，路由器修改ipv6"></a>光猫，路由器修改ipv6</h3><p>光猫背后账号，密码，和移动的网址<a target="_blank" rel="noopener" href="http://192.168.1.1/">http://192.168.1.1/</a>	</p>
<p>参考:<a target="_blank" rel="noopener" href="https://www.luyouwang.net/8778.html">https://www.luyouwang.net/8778.html</a></p>
<p>这网络界面根本改不了，G</p>
<p><img src="https://pic.shaojiemike.top/img/20220928212544.png"></p>
<p>这是普通用户账号密码，查询移动给的吉比特智能网关GM220-S的超级管理员</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">账号：CMCCAdmin</span><br><span class="line">密码：aDm8H%MdA</span><br></pre></td></tr></table></figure>
<p>感觉应该开启了ipv6的样子，难道是子路由没开？<br><img src="https://pic.shaojiemike.top/img/20220928223104.png"></p>
<p>原因是子路由普联TL-WR886N不支持ipv6</p>
<p><img src="https://pic.shaojiemike.top/img/20220928230635.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220928222740.png"></p>
<p>LAN1的T568B水晶头还只有4根： 网线8根线1236重要。</p>
<p>网线8根线一般只使用1、2、3、6编号的芯线传递数据，即1、2用于发送，3、6用于接收。</p>
<p>4578属于备用线路，1236有故障时自动切换4578，如果4578没有接好，导致的结果就是1236中的某一根出现问题时，因没有备用线路而断网。</p>
<h3 id="NAT6"><a href="#NAT6" class="headerlink" title="NAT6"></a>NAT6</h3><p>解决办法：</p>
<ol>
<li>首先换成小米的WIFI6的路由器</li>
<li>打开ipv6的功能，由于家里暂时没有外网访问家庭设备的需求<ol>
<li>没有<a target="_blank" rel="noopener" href="https://ipw.cn/doc/ipv6/user/enable_ipv6.html#_3-1-%E7%BD%91%E9%A1%B5%E8%AE%BF%E9%97%AE%E9%AA%8C%E8%AF%81">设置桥接</a></li>
<li>采用了简单的NAT6来实现家庭ipv6上网</li>
<li>虽然<a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-8217538-1-1.html">恩山的论坛说很慢，因ipv6地址更长，所以效率更低，速度更慢。</a>，但是NAT6百兆还是能跑满的</li>
</ol>
</li>
</ol>
<h3 id="获取pppoe-账号密码"><a href="#获取pppoe-账号密码" class="headerlink" title="获取pppoe 账号密码"></a>获取pppoe 账号密码</h3><p><img src="https://pic.shaojiemike.top/img/20230118192110.png"></p>
<p>备份<code>config.bin</code>后，用routerpassview工具打开，查找用户名，结果发现密码就是123456。我真是无语了<del>（小潮🦅</del>）</p>
<h2 id="意外之喜，我家竟然是“千兆网”"><a href="#意外之喜，我家竟然是“千兆网”" class="headerlink" title="意外之喜，我家竟然是“千兆网”"></a>意外之喜，我家竟然是“千兆网”</h2><p>原本以为我家是爸爸法院送的移动网不会怎么样，结果直接插GM220-S的千兆口，竟然是非对等带宽的千兆网</p>
<p><img src="https://pic.shaojiemike.top/img/2a75bf6437e3ef930f7643d30294efc.png"></p>
<p>但是弱电箱就埋了两根线，一根是到客厅的iptv的线，另一根是到主卧室的（但是水晶头里的线被剪断一半的，导致实际测速只有百兆的线。</p>
<p>临时处理：暂时用iptv的线当拉出来的网线。能达到300Mbps的WIFI-6</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li>学校的服务器全部ping不通</li>
</ol>
<p>没有登录网络的肯定ping不通</p>
<p>登录了ping不通的原因是，脚本默认是8号端口，改成0号教育网端口就行了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">D:\PowerShell&gt; ping -r 9 -w 10000 222.195.72.114</span><br><span class="line"></span><br><span class="line">Pinging 222.195.72.114 with 32 bytes of data:</span><br><span class="line">Reply from 222.195.72.114: bytes=32 time=60ms TTL=60</span><br><span class="line">    Route: 172.17.0.3 -&gt; (局域网)</span><br><span class="line">           202.38.73.217 -&gt; (node5)</span><br><span class="line">           202.38.96.189 -&gt; (北京教育网)</span><br><span class="line">           210.45.112.254 -&gt; (合肥教育网)</span><br><span class="line">           222.195.72.114 -&gt; (snode2)</span><br><span class="line">           222.195.72.114 -&gt; </span><br><span class="line">           202.38.96.188 -&gt;(北京教育网)</span><br><span class="line">           202.38.73.254 -&gt;(合肥教育网)</span><br><span class="line">           172.17.0.1</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ipv6不知道是不是因为变化了，也连接不上</li>
</ol>
<p>家里路由器不支持ipv6，所以连接不上</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/ac6a9a5e47b4222b653eac95.html">https://jingyan.baidu.com/article/ac6a9a5e47b4222b653eac95.html</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-31T16:00:00.000Z" title="1/31/2023, 4:00:00 PM">2023-01-31</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-18T14:55:02.942Z" title="11/18/2023, 2:55:02 PM">2023-11-18</time></span><span class="level-item"><a class="link-muted" href="/categories/toLearn/">toLearn</a></span><span class="level-item">20 minutes read (About 2955 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/31/Work/network/0-basic/ipv6/">ipv6</a></p><div class="content"><h2 id="拥抱ipv6"><a href="#拥抱ipv6" class="headerlink" title="拥抱ipv6"></a>拥抱ipv6</h2><p>ipv6 原本是为了解决ipv4不足而提出的：</p>
<ul>
<li>IPv4的地址范围是0.0.0.0~255.255.255.255，其地址总量约43亿个（2的32次方），这其中还要刨去私有网段、网络ID、广播ID、保留网段、本地环回、组播地址等特殊地址段，最终的实际可用地址约为25.68亿个，全球互联网设备数是远超这个的。所以一方面设计了私有地址来上网</li>
<li>另一方面就是ipv6。IPv6的地址长度为128位，虽然地址长度仅仅是IPv4的4倍（IPv4是32位的），但IPv6的地址总量却达到了惊人的$2^{128}$。换一种更通俗的说法：地球上每一平方米，都可以分到10^26次方个IPv6地址，夸张一点来说，可以给每一粒尘埃都分配到一个地址。</li>
</ul>
<p>实际运用的困难：</p>
<ol>
<li>大多数设备默认没有开启<ol>
<li>光猫 和 路由器都需要开启</li>
</ol>
</li>
<li>需要自己check。访问 <ol>
<li>ipw.cn </li>
<li><a target="_blank" rel="noopener" href="http://www.test-ipv6.com/">http://www.test-ipv6.com/</a><ol>
<li>test-ipv6.com是主站点，有时会抽风，结果不准确。可以选择镜像站点测试，镜像网站列表为<a target="_blank" rel="noopener" href="https://test-ipv6.com/mirrors.html%EF%BC%8C%E6%89%93%E5%BC%80%E5%90%8E%E8%AE%BF%E9%97%AE%E5%85%B6%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AA%E9%95%9C%E5%83%8F%E7%AB%99%E7%82%B9%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95%E3%80%82">https://test-ipv6.com/mirrors.html，打开后访问其中的一个镜像站点进行测试。</a></li>
</ol>
</li>
<li>查看是否支持ipv6</li>
</ol>
</li>
</ol>
<h2 id="IPV6公网地址段分配"><a href="#IPV6公网地址段分配" class="headerlink" title="IPV6公网地址段分配"></a>IPV6公网地址段分配</h2><p>首先公网ipv6，也就是可聚合全球单播地址Aggregate global unicast address。是由IANA分配的可在全球路由的公网IP地址：</p>
<ul>
<li>目前已分配的前缀：<code>2000::/3</code> 占用了12.5%的IPV6地址空间</li>
<li><code>2000:0000:0000:0000:0000:0000:0000:0000</code>–<code>3FFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF</code></li>
</ul>
<h3 id="国内的ipv6地址段分配"><a href="#国内的ipv6地址段分配" class="headerlink" title="国内的ipv6地址段分配"></a>国内的ipv6地址段分配</h3><ul>
<li>三大运营商的IPv6地址分配情况：<ul>
<li>电信是240e开头的（<code>240e::/20</code>）、</li>
<li>移动是2409开头的（<code>2409:8000::/20</code>）、<ul>
<li>我家移动宽带：<code>2409:8a50:ece:c110:ccf5:d43:c845:ece6</code></li>
</ul>
</li>
<li>联通是2408开头的（<code>2408:8000::/20</code>）</li>
<li>教育网 <code>2001:da8::/32</code> <ul>
<li>学校的教育网地址：<code>2001:da8:d800:611:989d:fca0:ca20:f288</code></li>
<li><a target="_blank" rel="noopener" href="https://wenku.baidu.com/view/2ad5bd1352d380eb62946dc4%EF%BC%8C%E9%94%99%E8%AF%AF%E7%9A%84%E7%A7%91%E6%99%AE%E4%B8%8D%E5%A6%82%E4%B8%8D%E7%A7%91%E6%99%AE%E3%80%82?_wkts_=1674043198208">各大高校ipv6地址段</a></li>
</ul>
</li>
</ul>
</li>
<li>两种隧道技术获得的地址也是公网 IPv6 地址<ul>
<li>2002: 开头的是 6to4 地址，由用户端设备自动建立</li>
<li>6in4并没有固定的地址段，而是由服务商自行分配。常见的由HE.net提供的隧道和Windows自动建立的Teredo隧道都恰好以2001开头而已。</li>
<li>以上两种不是由运营商提供的，而是用户端设备把 IPv6 数据包封装到 IPv4 的数据包中，再通过第三方 Broker 服务器中转来访问 IPv6 互联网，速度通常比较慢。</li>
</ul>
</li>
</ul>
<p>其他一些说明：</p>
<ul>
<li><code>2001:250::/32</code> CERNET IPv6 Backbone 主干网<ul>
<li>2000年，CERNET获得由亚太地区网络信息中心(APNIC)分配的正式IPv6 sTLA地址<code>2001:250::/32</code>。</li>
<li>自 1995 年以来，CERNET 在北京设立唯一的国际出口，与美国、欧洲、亚太地区的学术网实现互联。目前，CERNET 网络国际和港澳地区带宽达到 10G 以上，CERNET 国内与其它互联网单位互联带宽达到 59G 以上。</li>
</ul>
</li>
<li><code>2001:da8::/32</code> China Next Generation Internet CERNET2<ul>
<li>中国下一代互联网(CNGI)示范工程核心网建设项目CERNET2</li>
<li>CERNET2项目由中国工程院协调负责。由清华大学等25所大学联合承担的“CNGI-CERNET2主干网和CNGI-6IX”是该项目的重要组成部分。</li>
<li>2003年，为完成CERNET2建设项目，CERNET网络中心从亚太地区网络信息中心申请获得IPv6地址<code>2001:0da8::/32</code>。</li>
<li>2004年底建成了以2.5～10 Gb&#x2F;s速率连接分布在20个城市的核心节点的CERNET2主干网，并以45 Mb&#x2F;s速率与北美、欧洲、亚太等地的国际下一代互联网实现了互连。CERNET2可为全国100余所著名高校提供IPv6高速接入，为CNGI 6个主干网之间的高速互连打下了基础。</li>
<li>具有以下几个主要特点：主干网采用纯IPv6协议，而不是IPv4&#x2F;IPv6双协议栈技术，是世界上规模最大的纯IPv6网络；</li>
</ul>
</li>
<li><code>2001:252::/32</code> CNGI International Gateway Network (CNGIIGN)<ul>
<li>所有教育网出国流量都要经过它</li>
</ul>
</li>
<li><code>2001:7fa:5::/48</code> RIPE Network Coordination Center<ul>
<li>欧洲IP网络资源协调中心（Réseaux IP Européens Network Coordination Centre，缩写作 RIPE NCC），全球五大区域性互联网注册管理机构之一， 是负责管理欧洲、西亚、前苏联地区Internet资源的区域互联网注册管理机构。总部设在荷兰阿姆斯特丹，并有一个在杜拜的分支机构。</li>
</ul>
</li>
</ul>
<h2 id="非公网地址段"><a href="#非公网地址段" class="headerlink" title="非公网地址段"></a>非公网地址段</h2><ul>
<li><code>::1</code>代表 loopback 地址，表示本机，等价于 IPv4 中的<code>127.0.0.1</code>。</li>
<li><code>fe80::/10</code>地址是所谓的 link local 地址段<ul>
<li>当DHCP分配失败时由机器自动生成，只在同一链路上有效，不能跨网段通信，使用链路本地址的数据包的TTL值一般被设置为1，不会被路由器转发</li>
<li>类似于 IPv4 下的<code>169.254.0.0/16</code>。</li>
</ul>
</li>
<li><code>fd00::/8</code>这个段就是通常意义上的<strong>内网地址段</strong>了，等价于 IPv4 的<code>10.0.0.0/8</code>, <code>172.16.0.0/12</code>以及<code>192.168.0.0/16</code>这三个段。如果你要组建 IPv6 内网，通常是在这个大段里随机挑选一个 &#x2F;64、&#x2F;56、或者 &#x2F;48 的子网来用。比如可以挑选 <code>fd12:3456:789a:bcde::/64</code>作为你家或者你公司的局域网 IP 段。<ul>
<li>IPv6 规范中鼓励你随机挑选地址段，避免和别人家的地址段重复，以免并网时的麻烦。</li>
</ul>
</li>
<li><code>fec0::/10</code>曾经是ipv6的内网地址段，但是为了支持 Unique Local Addressing，已在2004年9月的RFC3879中舍弃，并且新系统不应该支持这类型的地址。</li>
<li><code>fc00::/8</code>也是一个保留的巨大内网地址段，具体怎么用现在还没有规范。</li>
</ul>
<h2 id="手机的ipv6问题"><a href="#手机的ipv6问题" class="headerlink" title="手机的ipv6问题"></a>手机的ipv6问题</h2><ul>
<li>问题一：手机并不会默认分配ipv6，需要访问需要ipv6的网站来激活ipv6地址<ul>
<li>查看手机ipv6：<ul>
<li>华为鸿蒙系统：设置→ 关于手机→状态信息→网络</li>
<li>网站：<code>ipw.cn</code></li>
</ul>
</li>
<li>激活ipv6：访问<code>test6.ustc.edu.cn</code>，如果能访问，说明ipv6已经激活</li>
</ul>
</li>
<li>问题二: 手机流量ipv6的DNS解析极烂，而且无法配置DNS服务器<ul>
<li>实际情形：自己Cloudflare注册的<code>jellyfin6.shaojiemike.top</code>无法解析</li>
<li>解决方法一：Clash配置里勾选ipv6和DNS解析代理，所有DNS请求会走代理.(手机的日志文件可以看出ipv6流量走了clash的路由管理)</li>
<li>解决方法二：如果只是为了wireguard连接能ping通wg服务端<code>6.shaojiemike.top</code>域名，只需在wg配置文件里添加DNS服务器为<code>8.8.8.8</code></li>
</ul>
</li>
</ul>
<h2 id="ipv6地址的分配"><a href="#ipv6地址的分配" class="headerlink" title="ipv6地址的分配"></a>ipv6地址的分配</h2><p>目前 IPv6 的动态地址分配方式可以分成有状态（stateful）和无状态（stateless）两种，<br>动态的常见有DHCPv6，而高校中比较常见的也即其中的无状态地址自动配置（SLAAC）。</p>
<p>SLAAC 协议主要过程如下：</p>
<ol>
<li>在客户端会向多播地址 <code>ff02::2</code> 广播 RS（Router Solicitation）信息；</li>
<li>路由节点在收到 RS 后即会单播回复 RA（Router Advertisement）来告知客户端路由前缀（如 <code>2001:da8:abc:def::/64</code> ）；</li>
<li>客户端收到 RA 获取其所在子网的前缀，并配合 DAD 协议自动生成该前缀下唯一的全局路由地址。</li>
</ol>
<p>多数高校中配置的 IPv6 环境会通过上述过程让客户端获取一个 &#x2F;64 的地址段（如 <code>2001:da8:abc:def:aa:bb:cc:dd/64</code> ）</p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="ipv6偶发性断网的原因"><a href="#ipv6偶发性断网的原因" class="headerlink" title="ipv6偶发性断网的原因"></a>ipv6偶发性断网的原因</h3><p>不像校园网，ipv6分配好静态就不会变。运营商会固定周期更新ip。这种情况下，固定间隔时间点到的时候，光猫的IP地址会改变，但是下级设备无法自动跟随上游更新IP地址，导致地址冲突，所以会出现断网。所以需要重启光猫，重新分配有效ipv6。</p>
<p>解决办法：</p>
<ol>
<li>打客服电话要求运营商将自动重播时间改为7天或者30天</li>
<li>光猫内设置定时<strong>重启</strong>，然后路由器<strong>重启</strong>获取光猫最新的IP地址</li>
</ol>
<h2 id="OpenWRT-给内网设备分配ipv6"><a href="#OpenWRT-给内网设备分配ipv6" class="headerlink" title="OpenWRT 给内网设备分配ipv6"></a>OpenWRT 给内网设备分配ipv6</h2><p>默认openwrt的ipv6是关闭的，需要手动开启，然后设置dhcpv6，这样才能获取ipv6地址。</p>
<p>图形化界面修改如下：<br><img src="https://pic.shaojiemike.top/img/20230119153957.png"></p>
<p>或者参考<a target="_blank" rel="noopener" href="https://github.com/TheRainstorm/my-openwrt-config/blob/master/router-basic/router-basic.sh">yfy的教程</a>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># === ipv6 ===</span><br><span class="line">if [ $IS_PPPOE -eq 0 ]; then</span><br><span class="line">    # === ipv6/dhcp ===</span><br><span class="line">    echo &quot;[INFO] set ipv6/dhcp&quot;</span><br><span class="line">    uci set dhcp.lan.ra=&#x27;relay&#x27;</span><br><span class="line">    uci set dhcp.lan.dhcpv6=&#x27;relay&#x27;</span><br><span class="line">    uci set dhcp.lan.ndp=&#x27;relay&#x27;</span><br><span class="line">    uci set dhcp.lan.ra_flags=&#x27;none&#x27;</span><br><span class="line">    if ! uci -q show dhcp.wan6</span><br><span class="line">    then</span><br><span class="line">        uci set dhcp.wan6=dhcp      #add named section, name=wan6</span><br><span class="line">    fi</span><br><span class="line">    uci set dhcp.wan6.interface=&#x27;wan6&#x27;</span><br><span class="line">    uci set dhcp.wan6.dhcpv6=&#x27;relay&#x27;</span><br><span class="line">    uci set dhcp.wan6.ra=&#x27;relay&#x27;</span><br><span class="line">    uci set dhcp.wan6.ndp=&#x27;relay&#x27;</span><br><span class="line">    uci set dhcp.wan6.master=&#x27;1&#x27;</span><br><span class="line">    uci commit dhcp</span><br><span class="line">else</span><br><span class="line">    # === ipv6/pppoe ===</span><br><span class="line">    # 设置wan.ipv6=&#x27;auto&#x27;就可以正常ipv6上网了</span><br><span class="line">    # 另外设置lan.ip6class=&#x27;wan_6&#x27;可以避免LAN获得ULA地址（私有ipv6地址）</span><br><span class="line">    echo &quot;[INFO] set ipv6/pppoe&quot;</span><br><span class="line">    uci delete network.wan6     #pppoe会自动生成wan_6，不需要wan6</span><br><span class="line">    uci set network.wan.ipv6=&#x27;auto&#x27;</span><br><span class="line">    uci del_list network.lan.ip6class</span><br><span class="line">    uci add_list network.lan.ip6class=&#x27;wan_6&#x27;</span><br><span class="line">    uci commit network</span><br><span class="line"></span><br><span class="line">    uci set dhcp.lan.dhcpv6=&#x27;server&#x27;</span><br><span class="line">    uci set dhcp.lan.ra=&#x27;server&#x27;</span><br><span class="line">    uci commit dhcp</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h3 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h3><ul>
<li>relay 模式, 中继模式<ul>
<li>注意： 有时候客户端能获取地址却 ping 不通公网，但 ping 一下路由器的 wan口 IPv6 地址后就可以上网了。OpenWRT会更新自己的IPV6路由表，重新发现客户端。</li>
<li>wan口的中继模式配置的意思是可以让这个wan口继承上一级路由的ipv6地址分配功能，从来进一步往lan口分发这种能力。</li>
</ul>
</li>
<li>RA 也就是：Router Advertisement（路由器通告报文）是一种 ICMPv6 报文，ICMP 也就是我们日常 Ping 命令使用的报文。在 IPv6 点环境中路由发出的 RA 会携带一系列的信息告知设备如何配置自己的 IP 地址。</li>
<li>DHCPv6是一个用来配置工作在IPv6网络上的IPv6主机所需的IP地址、IP前缀和&#x2F;或其他配置的网络协议。 IPv6主机可以使用無狀態地址自动配置（SLAAC）或DHCPv6来获得IP地址。</li>
<li>NDP（neighbor Discovery protocol）是ICMPv6的子协议是IPV6协议体系中一个重要的基础协议，邻居发现协议替代了IPV4的ARP(MAC ip对应表)，ICMP路由器发现(RA)。 它定义了使用ICMPv6报文实现地址解析，跟踪邻居状态，重复地址检测，路由器发现，以及重定向等功能。</li>
<li>PD(prefix delegation) 就是地址委派，来分配IPV6地址。</li>
</ul>
<h2 id="命令行查看ip所属实际地址"><a href="#命令行查看ip所属实际地址" class="headerlink" title="命令行查看ip所属实际地址"></a>命令行查看ip所属实际地址</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ curl ipinfo.io/202.38.64.58</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;ip&quot;</span>: <span class="string">&quot;202.38.64.58&quot;</span>,</span><br><span class="line">  <span class="string">&quot;city&quot;</span>: <span class="string">&quot;Shanghai&quot;</span>,</span><br><span class="line">  <span class="string">&quot;region&quot;</span>: <span class="string">&quot;Shanghai&quot;</span>,</span><br><span class="line">  <span class="string">&quot;country&quot;</span>: <span class="string">&quot;CN&quot;</span>,</span><br><span class="line">  <span class="string">&quot;loc&quot;</span>: <span class="string">&quot;31.2222,121.4581&quot;</span>,</span><br><span class="line">  <span class="string">&quot;org&quot;</span>: <span class="string">&quot;AS24362 CERNET2 IX at University of Science and Technology of China&quot;</span>,</span><br><span class="line">  <span class="string">&quot;timezone&quot;</span>: <span class="string">&quot;Asia/Shanghai&quot;</span>,</span><br><span class="line">  <span class="string">&quot;readme&quot;</span>: <span class="string">&quot;https://ipinfo.io/missingauth&quot;</span></span><br><span class="line">&#125;%</span><br></pre></td></tr></table></figure>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://3g.163.com/dy/article_cambrian/EKMFF7TF0537828W.html">https://3g.163.com/dy/article_cambrian/EKMFF7TF0537828W.html</a></p>
<p><a target="_blank" rel="noopener" href="https://bgp.he.net/AS23911#_prefixes6">https://bgp.he.net/AS23911#_prefixes6</a></p>
<p><a target="_blank" rel="noopener" href="https://bgp.he.net/AS23910#_prefixes6">https://bgp.he.net/AS23910#_prefixes6</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.icpz.dev/articles/notes/odhcpd-relay-mode-discuss/">https://blog.icpz.dev/articles/notes/odhcpd-relay-mode-discuss/</a></p>
<p><a target="_blank" rel="noopener" href="https://l2dy.sourceforge.io/2021/05/11/openwrt-ipv6-relay.html">https://l2dy.sourceforge.io/2021/05/11/openwrt-ipv6-relay.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.lategege.com/?p=676">https://www.lategege.com/?p=676</a></p>
<p>ipv6偶发性断网的原因: <a target="_blank" rel="noopener" href="https://jaylinwu.wordpress.com/2022/03/24/optical-network-terminals-enable-ipv6/">https://jaylinwu.wordpress.com/2022/03/24/optical-network-terminals-enable-ipv6/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-31T16:00:00.000Z" title="1/31/2023, 4:00:00 PM">2023-01-31</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-18T14:55:02.946Z" title="11/18/2023, 2:55:02 PM">2023-11-18</time></span><span class="level-item"><a class="link-muted" href="/categories/network/">network</a></span><span class="level-item">11 minutes read (About 1621 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/31/Work/network/vpn/OpenVPNforDocker/">OpenVPN for Docker</a></p><div class="content"><h2 id="OpenVPN-Image"><a href="#OpenVPN-Image" class="headerlink" title="OpenVPN Image"></a>OpenVPN Image</h2><h3 id="ARM"><a href="#ARM" class="headerlink" title="ARM"></a>ARM</h3><p>我們使用 kylemanna&#x2F;docker-openvpn 來實作，因為 dockerhub 上只有 x86 image，如果是 arm 平台則需要自己 build（x86 可跳過）</p>
<p>clone repo 後，直接 build</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/kylemanna/docker-openvpn</span><br><span class="line">$ cd docker-openvpn</span><br><span class="line">$ docker build -t kylemanna/openvpn -f Dockerfile.aarch64 .</span><br></pre></td></tr></table></figure>
<p>如果發生找不到 <code>aarch64/alpine:3.5</code> 的錯誤，修改 Dockerfile 中的 base image 為</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FROM alpine:3.15.4</span><br></pre></td></tr></table></figure>
<p>或更新的 alpine 版本即可</p>
<h3 id="相关的中文教程"><a href="#相关的中文教程" class="headerlink" title="相关的中文教程"></a>相关的中文教程</h3><p><a target="_blank" rel="noopener" href="http://blog.gdb.wiki/2020/03/19/Docker-OpenVPN%E9%95%9C%E5%83%8F%E9%85%8D%E7%BD%AE/#kylemanna-openvpn%E8%BF%99%E4%B8%AA%E9%95%9C%E5%83%8F%E5%B0%86%E5%A4%A7%E9%83%A8%E5%88%86%E7%9A%84%E4%B8%80%E9%94%AE%E5%8C%96%E8%87%AA%E5%8A%A8%E8%84%9A%E6%9C%AC%E8%BF%9B%E8%A1%8C%E6%95%B4%E5%90%88%EF%BC%8C%E9%80%9A%E8%BF%87docker-run%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%BF%9B%E8%A1%8C%E9%85%8D%E7%BD%AE">http://blog.gdb.wiki/2020/03/19/Docker-OpenVPN%E9%95%9C%E5%83%8F%E9%85%8D%E7%BD%AE/#kylemanna-openvpn%E8%BF%99%E4%B8%AA%E9%95%9C%E5%83%8F%E5%B0%86%E5%A4%A7%E9%83%A8%E5%88%86%E7%9A%84%E4%B8%80%E9%94%AE%E5%8C%96%E8%87%AA%E5%8A%A8%E8%84%9A%E6%9C%AC%E8%BF%9B%E8%A1%8C%E6%95%B4%E5%90%88%EF%BC%8C%E9%80%9A%E8%BF%87docker-run%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%BF%9B%E8%A1%8C%E9%85%8D%E7%BD%AE</a></p>
<p><a target="_blank" rel="noopener" href="https://koding.work/10-minutes-build-open-vpn-server/">https://koding.work/10-minutes-build-open-vpn-server/</a></p>
<p><a target="_blank" rel="noopener" href="https://taichunmin.idv.tw/blog/2018-05-23-docker-openvpn.html">https://taichunmin.idv.tw/blog/2018-05-23-docker-openvpn.html</a></p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><p>以README为主</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># shaojiemike @ node5 in ~ [23:53:42] C:125</span></span><br><span class="line">$ <span class="built_in">export</span> OVPN_DATA=<span class="string">&quot;ovpn-data-tsj&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shaojiemike @ node5 in ~ [23:54:10]</span></span><br><span class="line">$ docker volume create --name <span class="variable">$OVPN_DATA</span></span><br><span class="line">ovpn-data-example</span><br><span class="line"></span><br><span class="line"><span class="comment"># shaojiemike @ node5 in ~ [23:54:11]</span></span><br><span class="line">$ docker run -v <span class="variable">$OVPN_DATA</span>:/etc/openvpn --<span class="built_in">rm</span> kylemanna/openvpn ovpn_genconfig -u udp://node5.xydustc.me</span><br><span class="line">Unable to find image <span class="string">&#x27;kylemanna/openvpn:latest&#x27;</span> locally</span><br><span class="line">latest: Pulling from kylemanna/openvpn</span><br><span class="line">188c0c94c7c5: Pull complete</span><br><span class="line">e470f824352c: Pull complete</span><br><span class="line">d6ed0c7c142e: Pull complete</span><br><span class="line">74586f3c5cd4: Pull complete</span><br><span class="line">cb26244a2b2a: Pull complete</span><br><span class="line">Digest: sha256:643531abb010a088f1e23a1c99d44f0bd417a3dbb483f809caf4396b5c9829a0</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> kylemanna/openvpn:latest</span><br><span class="line">Processing PUSH Config: <span class="string">&#x27;block-outside-dns&#x27;</span></span><br><span class="line">Processing Route Config: <span class="string">&#x27;192.168.254.0/24&#x27;</span></span><br><span class="line">Processing PUSH Config: <span class="string">&#x27;dhcp-option DNS 8.8.8.8&#x27;</span></span><br><span class="line">Processing PUSH Config: <span class="string">&#x27;dhcp-option DNS 8.8.4.4&#x27;</span></span><br><span class="line">Processing PUSH Config: <span class="string">&#x27;comp-lzo no&#x27;</span></span><br><span class="line">Successfully generated config</span><br><span class="line">Cleaning up before Exit ...</span><br></pre></td></tr></table></figure>
<p>CA(certificate authority.)的私钥密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># shaojiemike @ node5 in ~ [23:55:47]</span></span><br><span class="line">$ docker run -v <span class="variable">$OVPN_DATA</span>:/etc/openvpn --<span class="built_in">rm</span> -it kylemanna/openvpn ovpn_initpki</span><br><span class="line"></span><br><span class="line">init-pki complete; you may now create a CA or requests.</span><br><span class="line">Your newly created PKI <span class="built_in">dir</span> is: /etc/openvpn/pki</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Using SSL: openssl OpenSSL 1.1.1g  21 Apr 2020</span><br><span class="line"></span><br><span class="line">Enter New CA Key Passphrase:</span><br><span class="line">Re-Enter New CA Key Passphrase:</span><br><span class="line">Generating RSA private key, 2048 bit long modulus (2 primes)</span><br><span class="line">.........+++++</span><br><span class="line">...................+++++</span><br><span class="line">e is 65537 (0x010001)</span><br><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a default value,</span><br><span class="line">If you enter <span class="string">&#x27;.&#x27;</span>, the field will be left blank.</span><br><span class="line">-----</span><br><span class="line">Common Name (eg: your user, host, or server name) [Easy-RSA CA]:tsj-node5</span><br><span class="line"></span><br><span class="line">CA creation complete and you may now import and sign cert requests.</span><br><span class="line">Your new CA certificate file <span class="keyword">for</span> publishing is at:</span><br><span class="line">/etc/openvpn/pki/ca.crt</span><br><span class="line"></span><br><span class="line">Using SSL: openssl OpenSSL 1.1.1g  21 Apr 2020</span><br><span class="line">Generating DH parameters, 2048 bit long safe prime, generator 2</span><br><span class="line">This is going to take a long time</span><br><span class="line">......................+.......................+..........................................................+........................................................................................................+........................................+...................................................................................................................................+.....................................................................................................................+......................................................................................................................................................................................................................................+......++*++*++*++*</span><br><span class="line"></span><br><span class="line">DH parameters of size 2048 created at /etc/openvpn/pki/dh.pem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Using SSL: openssl OpenSSL 1.1.1g  21 Apr 2020</span><br><span class="line">Generating a RSA private key</span><br><span class="line">.......................................+++++</span><br><span class="line">.........................................+++++</span><br><span class="line">writing new private key to <span class="string">&#x27;/etc/openvpn/pki/easy-rsa-73.EeNnaB/tmp.jhHaaF&#x27;</span></span><br><span class="line">-----</span><br><span class="line">Using configuration from /etc/openvpn/pki/easy-rsa-73.EeNnaB/tmp.LGnDjB</span><br><span class="line">Enter pass phrase <span class="keyword">for</span> /etc/openvpn/pki/private/ca.key:</span><br><span class="line">Check that the request matches the signature</span><br><span class="line">Signature ok</span><br><span class="line">The Subject<span class="string">&#x27;s Distinguished Name is as follows</span></span><br><span class="line"><span class="string">commonName            :ASN.1 12:&#x27;</span>node5.xydustc.me<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Certificate is to be certified until Jan  1 15:58:37 2025 GMT (825 days)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Write out database with 1 new entries</span></span><br><span class="line"><span class="string">Data Base Updated</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Using SSL: openssl OpenSSL 1.1.1g  21 Apr 2020</span></span><br><span class="line"><span class="string">Using configuration from /etc/openvpn/pki/easy-rsa-148.CDCEmf/tmp.iJCIGL</span></span><br><span class="line"><span class="string">Enter pass phrase for /etc/openvpn/pki/private/ca.key:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">An updated CRL has been created.</span></span><br></pre></td></tr></table></figure>

<p>1194貌似有人用了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># shaojiemike @ node5 in ~ [0:02:06]</span></span><br><span class="line">$ sudo lsof -i UDP:1194</span><br><span class="line">COMMAND  PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">openvpn 1834 nobody    6u  IPv4  56802      0t0  UDP node5:openvpn</span><br><span class="line"></span><br><span class="line"> /usr/sbin/openvpn --status /run/openvpn-server/status-server.log --status-version 2 --suppress-timestamps --config server.conf</span><br><span class="line"></span><br><span class="line">  sudo vim /etc/openvpn/server/server.conf</span><br><span class="line"></span><br><span class="line">  改成7194等端口</span><br><span class="line"></span><br><span class="line"><span class="comment"># shaojiemike @ node5 in ~ [0:02:10]</span></span><br><span class="line">$ sudo service openvpn status</span><br><span class="line">● openvpn.service - OpenVPN service</span><br><span class="line">     Loaded: loaded (/lib/systemd/system/openvpn.service; enabled; vendor preset: enabled)</span><br><span class="line">     Active: active (exited) since Tue 2022-04-19 18:42:24 CST; 5 months 11 days ago</span><br><span class="line">   Main PID: 1715 (code=exited, status=0/SUCCESS)</span><br><span class="line">      Tasks: 0 (<span class="built_in">limit</span>: 154181)</span><br><span class="line">     Memory: 0B</span><br><span class="line">     CGroup: /system.slice/openvpn.service</span><br><span class="line"></span><br><span class="line">Apr 19 18:42:24 node5 systemd[1]: Starting OpenVPN service...</span><br><span class="line">Apr 19 18:42:24 node5 systemd[1]: Finished OpenVPN service.</span><br><span class="line"></span><br><span class="line"><span class="comment"># shaojiemike @ node5 in ~ [0:15:49] C:125</span></span><br><span class="line">$ sudo service openvpn stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># shaojiemike @ node5 in ~ [0:16:30]</span></span><br><span class="line">$ sudo <span class="built_in">kill</span> -9 1834</span><br></pre></td></tr></table></figure>

<p>在1195启动服务失败，还是1194</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># shaojiemike @ node5 in ~ [0:16:46]</span></span><br><span class="line">$ docker run -v <span class="variable">$OVPN_DATA</span>:/etc/openvpn -d -p 1194:1194/udp --cap-add=NET_ADMIN kylemanna/openvpn</span><br><span class="line">cb0f7e78f389f112c3c3b230d20d2b50818f6cf59eea2edfaa076c7e8fad7128</span><br><span class="line"></span><br><span class="line"><span class="comment"># shaojiemike @ node5 in ~ [0:06:01]</span></span><br><span class="line">$ docker container list</span><br><span class="line">CONTAINER ID   IMAGE                   COMMAND                  CREATED          STATUS                  PORTS                                                 NAMES</span><br><span class="line">6c716b27b3f1   kylemanna/openvpn       <span class="string">&quot;ovpn_run&quot;</span>               49 seconds ago   Up 48 seconds           1194/udp, 0.0.0.0:1195-&gt;1195/udp, :::1195-&gt;1195/udp   charming_zhukovsky</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上面是错误的</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shaojiemike @ node5 in ~ [0:16:50]</span></span><br><span class="line">$ docker ps</span><br><span class="line">CONTAINER ID   IMAGE                   COMMAND                  CREATED              STATUS                  PORTS                                                 NAMES</span><br><span class="line">cb0f7e78f389   kylemanna/openvpn       <span class="string">&quot;ovpn_run&quot;</span>               About a minute ago   Up About a minute       0.0.0.0:1194-&gt;1194/udp, :::1194-&gt;1194/udp             pedantic_euler</span><br></pre></td></tr></table></figure>
<p>产生客户端证书,和ovpn文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># shaojiemike @ node5 in ~ [0:07:27] C:2</span></span><br><span class="line">$ docker run -v <span class="variable">$OVPN_DATA</span>:/etc/openvpn --<span class="built_in">rm</span> -it kylemanna/openvpn easyrsa build-client-full tsj-node5-client nopass</span><br><span class="line">Using SSL: openssl OpenSSL 1.1.1g  21 Apr 2020</span><br><span class="line">Generating a RSA private key</span><br><span class="line">...............+++++</span><br><span class="line">...............................+++++</span><br><span class="line">writing new private key to <span class="string">&#x27;/etc/openvpn/pki/easy-rsa-1.olaINa/tmp.MfohAO&#x27;</span></span><br><span class="line">-----</span><br><span class="line">Using configuration from /etc/openvpn/pki/easy-rsa-1.olaINa/tmp.EMkEHF</span><br><span class="line">Enter pass phrase <span class="keyword">for</span> /etc/openvpn/pki/private/ca.key:</span><br><span class="line">139775495048520:error:28078065:UI routines:UI_set_result_ex:result too small:crypto/ui/ui_lib.c:905:You must <span class="built_in">type</span> <span class="keyword">in</span> 4 to 1023 characters</span><br><span class="line">Enter pass phrase <span class="keyword">for</span> /etc/openvpn/pki/private/ca.key:</span><br><span class="line">Check that the request matches the signature</span><br><span class="line">Signature ok</span><br><span class="line">The Subject<span class="string">&#x27;s Distinguished Name is as follows</span></span><br><span class="line"><span class="string">commonName            :ASN.1 12:&#x27;</span>tsj-node5-client<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Certificate is to be certified until Jan  1 16:08:23 2025 GMT (825 days)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Write out database with 1 new entries</span></span><br><span class="line"><span class="string">Data Base Updated</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># shaojiemike @ node5 in ~ [0:08:24]</span></span><br><span class="line"><span class="string">$ docker run -v $OVPN_DATA:/etc/openvpn --rm kylemanna/openvpn ovpn_getclient tsj-node5-client &gt; tsj-node5-client.ovpn</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># shaojiemike @ node5 in ~ [0:09:20]</span></span><br><span class="line"><span class="string">$ ls tsj-node5-client.ovpn</span></span><br><span class="line"><span class="string">tsj-node5-client.ovpn</span></span><br></pre></td></tr></table></figure>

<p>还是不行，奇怪</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>ping不通的原因是，脚本默认是8号端口，改成0号教育网端口就行了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">D:\PowerShell&gt; ping -r 9 -w 10000 222.195.72.114</span><br><span class="line"></span><br><span class="line">Pinging 222.195.72.114 with 32 bytes of data:</span><br><span class="line">Reply from 222.195.72.114: bytes=32 time=60ms TTL=60</span><br><span class="line">    Route: 172.17.0.3 -&gt; (局域网)</span><br><span class="line">           202.38.73.217 -&gt; (node5)</span><br><span class="line">           202.38.96.189 -&gt; (北京教育网)</span><br><span class="line">           210.45.112.254 -&gt; (合肥教育网)</span><br><span class="line">           222.195.72.114 -&gt; (snode2)</span><br><span class="line">           222.195.72.114 -&gt; </span><br><span class="line">           202.38.96.188 -&gt;(北京教育网)</span><br><span class="line">           202.38.73.254 -&gt;(合肥教育网)</span><br><span class="line">           172.17.0.1</span><br></pre></td></tr></table></figure>

<h2 id="OpenVPN-3-linux-client"><a href="#OpenVPN-3-linux-client" class="headerlink" title="OpenVPN 3 linux client"></a>OpenVPN 3 linux client</h2><h3 id="apt-install"><a href="#apt-install" class="headerlink" title="apt install"></a>apt install</h3><p>First ensure that your apt supports the https transport:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># apt install apt-transport-https</span><br></pre></td></tr></table></figure>
<p>Install the OpenVPN repository key used by the OpenVPN 3 Linux packages</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># curl -x http://$proxy_addr:$proxy_http_port -fsSL https://swupdate.openvpn.net/repos/openvpn-repo-pkg-key.pub | gpg --dearmor &gt; /etc/apt/trusted.gpg.d/openvpn-repo-pkg-keyring.gpg</span><br></pre></td></tr></table></figure>
<p>Then you need to install the proper repository. Replace $DISTRO with the release name depending on your Debian&#x2F;Ubuntu distribution.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># curl -x http://$proxy_addr:$proxy_http_port -fsSL https://swupdate.openvpn.net/community/openvpn3/repos/openvpn3-$DISTRO.list &gt;/etc/apt/sources.list.d/openvpn3.list</span><br><span class="line"># apt update</span><br></pre></td></tr></table></figure>
<p>Supported distributions:</p>
<table>
<thead>
<tr>
<th>Distribution</th>
<th>Release</th>
<th>Release name ($DISTRO)</th>
<th>Architecture</th>
<th>DCO support</th>
</tr>
</thead>
<tbody><tr>
<td>Ubuntu</td>
<td>20.04</td>
<td>focal</td>
<td>amd64, arm64*</td>
<td>yes*</td>
</tr>
<tr>
<td>Ubuntu</td>
<td>21.10</td>
<td>impish</td>
<td>amd64, arm64*</td>
<td>yes*</td>
</tr>
<tr>
<td>Ubuntu</td>
<td>22.04</td>
<td>jammy</td>
<td>amd64, arm64*</td>
<td>yes*</td>
</tr>
</tbody></table>
<p>And finally the openvpn3 package can be installed</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># apt install openvpn3</span><br></pre></td></tr></table></figure>
<p>apt需要代理看 apt-get install proxy</p>
<h3 id="openvpn3使用"><a href="#openvpn3使用" class="headerlink" title="openvpn3使用"></a>openvpn3使用</h3><p>要提前保留ipv6, 没有设置“流量走当前机器”ssh会断联</p>
<p>Once you’ve moved the file to your Linux system, you can import it.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openvpn3 config-import --config $&#123;client.ovpn&#125;</span><br><span class="line">Configuration imported.  Configuration path: /net/openvpn/v3/configuration/1f475d5cx8d2fx4ef5x8feex25f2871f2642</span><br></pre></td></tr></table></figure>
<p>You can start a new VPN session:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openvpn3 session-start --config $&#123;client.ovpn&#125;</span><br><span class="line">Configuration imported.  Configuration path: /net/openvpn/v3/configuration/1f475d5cx8d2fx4ef5x8feex25f2871f2642</span><br></pre></td></tr></table></figure>
<p>You can manage a running VPN session:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">openvpn3 sessions-list</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">        Path: /net/openvpn/v3/sessions/f83c75e4sd56cs4b27s85bcsc5c6e3ce074e</span><br><span class="line">     Created: Thu Oct  6 20:37:29 2022                  PID: 1034954</span><br><span class="line">       Owner: shaojiemike                            Device: tun1</span><br><span class="line"> Config name: node5-client.ovpn</span><br><span class="line">Session name: snode6.swangeese.fun</span><br><span class="line">      Status: Connection, Client connected</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">$ openvpn3 session-manage</span><br><span class="line">session-manage: ** ERROR ** One of --pause, --resume, --restart, --disconnect, --cleanup or --log-level must be present</span><br><span class="line"></span><br><span class="line">$ openvpn3 session-manage --pause -c node5-client.ovpn</span><br><span class="line">Initiated session pause: /net/openvpn/v3/sessions/f83c75e4sd56cs4b27s85bcsc5c6e3ce074e</span><br></pre></td></tr></table></figure>


<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>netplan 的 rule from to table</p>
<p>ip route</p>
<p>ip rule指令学习</p>
<p>iptables</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>基于kylemanna&#x2F;docker-openvpn</p>
<p><a target="_blank" rel="noopener" href="https://openvpn.net/vpn-server-resources/connecting-to-access-server-with-linux/">https://openvpn.net/vpn-server-resources/connecting-to-access-server-with-linux/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-11T04:26:24.000Z" title="1/11/2023, 4:26:24 AM">2023-01-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-18T14:55:02.926Z" title="11/18/2023, 2:55:02 PM">2023-11-18</time></span><span class="level-item"><a class="link-muted" href="/categories/toLearn/">toLearn</a></span><span class="level-item">a few seconds read (About 49 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/11/OutOfWork/5-VideoEntertainment/audio/">Audio</a></p><div class="content"><p><img src="https://pic.shaojiemike.top/img/20230111122645.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20230111124116.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-01T16:00:00.000Z" title="1/1/2023, 4:00:00 PM">2023-01-01</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-18T14:55:02.942Z" title="11/18/2023, 2:55:02 PM">2023-11-18</time></span><span class="level-item"><a class="link-muted" href="/categories/Overview/">Overview</a></span><span class="level-item">7 minutes read (About 1124 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/01/Work/info/image/">Image</a></p><div class="content"><h2 id="GIF"><a href="#GIF" class="headerlink" title="GIF"></a>GIF</h2><p>全称Graphics Interchange Format，原义是“图像互换格式”。</p>
<ul>
<li>优点：<ul>
<li>文件小</li>
<li>支持动画</li>
<li>支持LZW (Lempel-Ziv-Welch)无损压缩算法<ul>
<li>又叫“串表压缩算法”就是通过建立一个字符串表，用较短的代码来表示较长的字符串来实现压缩。</li>
</ul>
</li>
</ul>
</li>
<li>缺点<ul>
<li>只支持8bit颜色</li>
</ul>
</li>
</ul>
<h2 id="ICO"><a href="#ICO" class="headerlink" title="ICO"></a>ICO</h2><p>图标文件</p>
<p>一般像素为 16*16</p>
<h2 id="BMP-类似的位点图-TGA-TIF"><a href="#BMP-类似的位点图-TGA-TIF" class="headerlink" title="BMP (类似的位点图 TGA TIF)"></a>BMP (类似的位点图 TGA TIF)</h2><ul>
<li>bitmap</li>
<li>TIF(Tag Image File Format)</li>
<li>优点<ul>
<li>图像信息丰富</li>
</ul>
</li>
<li>缺点<ul>
<li>几乎不进行压缩，占用空间大</li>
</ul>
</li>
</ul>
<h2 id="JPG-JPEG"><a href="#JPG-JPEG" class="headerlink" title="JPG (JPEG)"></a>JPG (JPEG)</h2><p>JPG即JPEG（Joint Photographic Experts Group）。 </p>
<ul>
<li>此格式不适合用来绘制线条、文字或图标，因为<strong>JPEG支持极高的压缩率</strong>通常会导致图片质量严重受损，不太适用于高清晰的图像应用场景。</li>
<li>对比之下PNG、GIF更适合做绘制线条、文字或图标的首选，不过GIF只支持8bit的颜色，不适合颜色丰富的图片。</li>
</ul>
<h3 id="JPEG图片压缩原理"><a href="#JPEG图片压缩原理" class="headerlink" title="JPEG图片压缩原理"></a>JPEG图片压缩原理</h3><p>JPEG的压缩方式主要有四种，其中一种是基于空间DPCM的无损压缩，另外三种是基于DCT的有损压缩。</p>
<ol>
<li>基于DCT的顺序编码：<ol>
<li>基于DCT变换原理，按照从上之下，从左至右的顺序对图像数据进行编码压缩。当接收端收到数据后，再按照这个顺序进行解码，在此过程中存在图像丢失，因此是有损压缩；</li>
</ol>
</li>
<li>基于DCT的累进编码：<ol>
<li>也是基于DCT变换原理，不过是对图像进行多次扫描，从而对图像进行进一步的数据压缩。所以图像还原时，看到的图像时粗略图，而后逐步细化，直到结束；</li>
</ol>
</li>
<li>基于DCT的分层编码：<ol>
<li>以图像分辨率为基准进行编码，从低分辨率开始，逐渐提高分辨率，直到于原图像的分辨率一致。图像的解码也是这样的步骤；</li>
</ol>
</li>
<li>基于空间DPCM的无损压缩：<ol>
<li>采用预测法和哈夫曼编码（或算术编码）以保证重建图像与原图像完全相同（设均方误差为零）；</li>
</ol>
</li>
</ol>
<h2 id="JFIF"><a href="#JFIF" class="headerlink" title="JFIF"></a>JFIF</h2><p>JPEG文件交换格式（英语：JPEG File Interchange Format，简称JFIF）是一个图像文件格式标准。它是一种交换符合JPEG交换格式（JIF）标准的JPEG编码文件的格式。它解决了JIF在简单JPEG编码文件交换方面的一些限制。与所有符合JIF的文件一样，JFIF文件中的图像数据使用JPEG标准的技术压缩，因此JFIF有时被称为“JPEG&#x2F;JFIF”。</p>
<h2 id="Webp"><a href="#Webp" class="headerlink" title="Webp"></a>Webp</h2><p>2010年，谷歌为了让网络上的图片更小，让网站加载速度更快，提出了同画质下，比JPEG格式图像小40%的Webp格式。</p>
<ul>
<li>主要是面向网页图片，截至2021年5月，已有94%的浏览器支持此格式</li>
<li>Webp也支持无损压缩的选项。</li>
</ul>
<h3 id="PNG"><a href="#PNG" class="headerlink" title="PNG"></a>PNG</h3><p>是Portable Network Graphic的缩写，是一种光栅图像格式，是为了克服GIF格式的局限性并取代GIF格式而产生的。 PNG是一种无损的数据压缩和开放格式文件，没有版权限制。</p>
<ul>
<li>采用了基于LZ77的无损的派生算法，能够在在保证图片清晰、逼真的前提下，达到更高的压缩比。</li>
<li>PNG支持对原图像定义256个透明层次，使得图像的边缘能与任何背景平滑融合，这种功能是GIF和JPEG没有的。</li>
<li>PNG图片可以分为三个类型，分别为 PNG 8&#x2F; PNG 24 &#x2F; PNG 32：<ul>
<li>PNG 8：8即指8bit，2^8 &#x3D; 256种颜色;</li>
<li>PNG 24：24指的是24位，分为3个，即RGB，各占8bit，可以包含2^24种颜色;</li>
<li>PNG 32：32表示有32bit,除了RGB占了24bit，还有8 bit可以表示透明度，0-255表示透明程度;</li>
</ul>
</li>
</ul>
<h2 id="压缩效果对比"><a href="#压缩效果对比" class="headerlink" title="压缩效果对比"></a>压缩效果对比</h2><p>同分辨率的图片(1491*1265), 使用格式工厂默认设置</p>
<table>
<thead>
<tr>
<th>ico(16*16)</th>
<th>gif(170*144)</th>
<th>webp</th>
<th>jpg</th>
<th>jfif</th>
<th>png</th>
<th>TIF</th>
<th>bmp(tga)</th>
</tr>
</thead>
<tbody><tr>
<td>1k</td>
<td>13k</td>
<td>159k</td>
<td>218K</td>
<td>248K</td>
<td>1.6M</td>
<td>1.62M</td>
<td>5.4M</td>
</tr>
</tbody></table>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/156639005">https://zhuanlan.zhihu.com/p/156639005</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-01T16:00:00.000Z" title="1/1/2023, 4:00:00 PM">2023-01-01</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-18T14:55:02.942Z" title="11/18/2023, 2:55:02 PM">2023-11-18</time></span><span class="level-item"><a class="link-muted" href="/categories/toLearn/">toLearn</a></span><span class="level-item">19 minutes read (About 2775 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/01/Work/info/video/">Video</a></p><div class="content"><h2 id="视频信息软件Mediainfo"><a href="#视频信息软件Mediainfo" class="headerlink" title="视频信息软件Mediainfo"></a>视频信息软件Mediainfo</h2><p>同样是1080P 25帧，码率不同，大小差异很大。<br><img src="https://pic.shaojiemike.top/img/20221116083218.png"></p>
<p>或者(有时候会失效，eg 720P)</p>
<p><img src="https://pic.shaojiemike.top/img/20221116083643.png"></p>
<h2 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h2><h3 id="CRF"><a href="#CRF" class="headerlink" title="CRF"></a>CRF</h3><p>CRF(英文：constant ratefactor 意思：压缩质量)是动态码率，要看你拍摄的视频画面抖动切换的程度，如果比较安静就20，动的厉害就25。</p>
<p>crf18就接近无损，字幕组惯用20-22，crf23是默认值。 CRF的值越小，视频将会越清晰 当然视频质量就会更大。</p>
<p><img src="https://pic.shaojiemike.top/img/20230102162838.png"></p>
<h3 id="2-pass"><a href="#2-pass" class="headerlink" title="2-pass"></a>2-pass</h3><p>2-pass通过两次编码，第一次编码是先对整个文件进行扫描，记录一些统计信息，第二次编码时根据前面记录的统计信息再进行编码。这么做虽然转换时间会漫长，但压出的片子会有更好的画质，画面细节更好，而且体积会更小。</p>
<p>常用于非实时转码的情景。</p>
<h2 id="视频压缩实践"><a href="#视频压缩实践" class="headerlink" title="视频压缩实践"></a>视频压缩实践</h2><p>疫情线上参会邮件投递Presentation视频，邮件大小限制100MB。PPT生成的过大</p>
<h3 id="格式工厂-Format-Factory-压缩"><a href="#格式工厂-Format-Factory-压缩" class="headerlink" title="格式工厂(Format Factory)压缩"></a>格式工厂(Format Factory)压缩</h3><p>直接自定义导入导出，默认设置就行（确定分辨率不变的情况下，大小无法限制）。视频部分就只有原来五分之一(中间)，而且完全看不出损失。<br><img src="https://pic.shaojiemike.top/img/20230102102531.png"></p>
<p>如果要最小大小，选择“转mp4”，然后“输出设置”选择“低质量和大小”，最后在分辨率选回原来的分辨率。</p>
<p>如果不熟悉H.265的参数设置，压缩后不一定比H.264小。</p>
<p>PS: H.264中熵编码有两种方法：</p>
<ol>
<li>一种是对所有的待编码的符号采用统一的VLC（UVLC ：Universal VLC），</li>
<li>另一种是采用内容自适应的二进制算术编码（CABAC：Context-Adaptive Binary Arithmetic Coding）。CABAC是<strong>可选项</strong>。</li>
</ol>
<p>CABAC动态的根据内容的码率能在效能与压缩效率上取得相当大的改善空间，但是顺序处理造成资料依存性（Data Dependency）偏高。</p>
<h3 id="FFmpeg命令行"><a href="#FFmpeg命令行" class="headerlink" title="FFmpeg命令行"></a>FFmpeg命令行</h3><p>已知大小需求来计算需要压缩的码率。直接设置压缩后的平均码率就行，常见软件有：小丸工具箱，HandBrake, 剪映</p>
<p>首先需要知道<strong>如何计算码率</strong></p>
<p><img src="https://pic.shaojiemike.top/img/20230102112312.png"><br><img src="https://pic.shaojiemike.top/img/20230111121547.png"></p>
<p>ffmpeg是一个自由软件，可以运行音频、视频多种格式的录影、转换、流功能，包含</p>
<ul>
<li>libavcodec–这是一个用于多个项目中的音频、视频的解码器库，</li>
<li>libavformat–一个音频和视频格式转换库。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 视频流码率 500k, 音频流码率 50k</span><br><span class="line">ffmpeg -i huawei_report_English_video.mp4 -c:v libx264 -b:v 500k -b:a 50k out_500k.mp4    </span><br><span class="line"># 或者设置最大最小</span><br><span class="line">ffmpeg -i huawei_report_English_video.mp4 -minrate 100K -maxrate 500K -bufsize 2000K out.mp4</span><br></pre></td></tr></table></figure>
<p>结果如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ ls</span><br><span class="line">-rw-r--r--  1 shaojiemike staff 119M Jan  2 16:59 huawei_report_English_video.mp4</span><br><span class="line">-rw-r--r--  1 shaojiemike staff  50M Jan  2 17:23 out_500k.mp4</span><br><span class="line">-rw-r--r--  1 shaojiemike staff  24M Jan  2 17:14 out.mp4</span><br><span class="line"></span><br><span class="line">$ ffmpeg -i out_500k.mp4 -hide_banner</span><br><span class="line">  Duration: 00:12:25.68, start: 0.000000, bitrate: 553 kb/s</span><br><span class="line">    Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 493 kb/s, 30.30 fps, 30.30 tbr, 30303 tbn, 60.61 tbc (default)</span><br><span class="line">    Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 50 kb/s (default)</span><br><span class="line"></span><br><span class="line"># shaojiemike @ snode6 in ~/test/ffmpeg [17:14:42] C:1</span><br><span class="line">$ ffmpeg -i out.mp4 -hide_banner</span><br><span class="line">  Duration: 00:12:25.68, start: 0.000000, bitrate: 269 kb/s</span><br><span class="line">    Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 125 kb/s, 30.30 fps, 30.30 tbr, 30303 tbn, 60.61 tbc (default)</span><br><span class="line">    Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 134 kb/s (default)</span><br><span class="line"></span><br><span class="line"># shaojiemike @ snode6 in ~/test/ffmpeg [17:15:29] C:1</span><br><span class="line">$ ffmpeg -i huawei_report_English_video.mp4 -hide_banner</span><br><span class="line">  Duration: 00:12:25.66, start: 0.000000, bitrate: 1330 kb/s</span><br><span class="line">    Stream #0:0(und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 1151 kb/s, 30.30 fps, 30.30 tbr, 30303 tbn, 60 tbc (default)</span><br></pre></td></tr></table></figure>
<h2 id="视频码率（视频比特率）"><a href="#视频码率（视频比特率）" class="headerlink" title="视频码率（视频比特率）"></a>视频码率（视频比特率）</h2><p>同样分辨率下，视频文件的码率越大，压缩比就越小，画面质量就越高。码率越高，精度就越高，处理出来的文件就越接近原始文件，图像质量越好，画质越清晰，要求播放设备的解码能力也越高。体积越大，说明压缩比小，越接近原文件。</p>
<p><strong>帧率与码率的关系：帧率多，则每秒图片数目多；码率越高，每张图片质量越清晰。</strong></p>
<h3 id="码率的甜品点"><a href="#码率的甜品点" class="headerlink" title="码率的甜品点"></a>码率的甜品点</h3><p><a target="_blank" rel="noopener" href="https://github.com/Netflix/vmaf">VMAF - Video Multi-Method Assessment Fusion</a> 视频多方法评估</p>
<p><img src="https://pic.shaojiemike.top/img/20230111122141.png"></p>
<p>3Mbps是1080p的甜品点。</p>
<p>其他标准</p>
<p><img src="https://pic.shaojiemike.top/img/20230111122313.png"></p>
<h2 id="视频压缩编码"><a href="#视频压缩编码" class="headerlink" title="视频压缩编码"></a>视频压缩编码</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV19Y4113788/?spm_id_from=333.337.search-card.all.click&vd_source=5bbdecb1838c6f684e0b823d0d4f6db3">视频压缩原理</a>看差评君的就懂了，讲的真好。</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1nW4y1V7kR/?spm_id_from=333.851.b_62696c695f7265706f72745f6b6e6f776c65646765.44&vd_source=5bbdecb1838c6f684e0b823d0d4f6db3">柴知道也行</a></p>
<p>为什么有这么多标准：</p>
<p>H26x的视频的编解码“贵”：</p>
<ul>
<li>视频编码由视频作者解决</li>
<li>使用H26x标准解码价格不菲</li>
</ul>
<h2 id="视频编码"><a href="#视频编码" class="headerlink" title="视频编码"></a>视频编码</h2><p>　　我们知道，其实视频就是一帧一帧的图片。计算一下，一部25帧每秒，90分钟，分辨率为1024*768，24位真彩色的视频，没有经过压缩，大小为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1Byte（字节） = 8bit（位）</span><br><span class="line">一帧大小 = 1024 * 768 * 24 = 18874368（bit） = 2359296（Byte）</span><br><span class="line">总帧数 = 90 * 60 * 25 = 135000</span><br><span class="line">总大小 = 一帧大小 * 总帧数 = 2359296 * 135000 = 318504960000（Byte）= 303750（MB）≈ 296（GB）</span><br></pre></td></tr></table></figure>
<p>　　从上面的计算可以看出，我们储存一部90分钟没压缩的电影需要296GB的，2部电影便可占满我们电脑整个硬盘。所以我们需要对视频进行压缩，这种视频压缩技术就是我们所说的编码。<br>　　视频编码方式：H.26X（H.261、H.262、…、H.264（目前最常用）、H.265）<br>　　音频编码方式：MP3、AAC等<br>　　通过视频压缩算法，减少了视频文件的大小。压缩比越大，解压缩还原后播放的视频越失真，这是因为压缩的同时不可避免的丢失了视频中原来图像的数据信息。</p>
<p>一般ITU(国际电信联盟)和ISO(国际标准化组织)来制定</p>
<ol>
<li>ISO主导的MPEG系列： MPEG-1 用于 VCD， MPEG-2用于DVD<img src="https://pic.shaojiemike.top/img/20230111121411.png"></li>
<li>h.26x由ITU主导，比如 H.261到H.263</li>
<li>两者联合制定了 H.264-H.265 <ol>
<li>各自别称 MPEG-4&#x2F;AVC(Advanced Video Coding)和 MPEG-4&#x2F;HEVC(High Efficiency Video Coding)<br><img src="https://pic.shaojiemike.top/img/20221225193754.png"></li>
</ol>
</li>
</ol>
<p>B站新支持的AOM联盟的AV1标准，免费而且没有潜在的版权问题。<br><img src="https://pic.shaojiemike.top/img/20221225195340.png"></p>
<p>画质不变时，编码标准越先进，码率越低.<br><img src="https://pic.shaojiemike.top/img/20221225200508.png"><br><img src="https://pic.shaojiemike.top/img/20221225201027.png"></p>
<p><del>相对于优酷等最高大约4000的码率，虽然B站码率低，但是以普通的动画素材为主的视频而言，因为动画以简单的单色大色块居多，一般来说1500左右的码率就足够了。</del></p>
<p>目前 AVC 依然是使用最广泛的编码标准，<strong>无论新老设备都可以播放 AVC 视频</strong>，因此保留 AVC 编码可以保证广泛的兼容性。</p>
<p>但是 AVC 在编码超高清视频时，<strong>输出码率较高，无法保证良好的观看体验</strong>；同时很多 AVC 解码器也不支持 HDR 和 8K 视频的解码。而 HEVC 和 AV1 对于超高清视频的压缩能力明显提升，对于 HDR 和 8K 视频的支持显著改善，因此 B 站使用更先进的编码标准为用户提供服务。</p>
<h2 id="H-261的关键两原理"><a href="#H-261的关键两原理" class="headerlink" title="H.261的关键两原理"></a>H.261的关键两原理</h2><h3 id="DCT变换"><a href="#DCT变换" class="headerlink" title="DCT变换"></a>DCT变换</h3><p>低频率部分是最重要的信息。<br><img src="https://pic.shaojiemike.top/img/20221225192611.png"></p>
<h3 id="视频帧分类-初版"><a href="#视频帧分类-初版" class="headerlink" title="视频帧分类(初版)"></a>视频帧分类(初版)</h3><p>先将视频分块，</p>
<ol>
<li>重用不变的色块</li>
<li>对于平移的色块只记录移动矢量</li>
</ol>
<p><img src="https://pic.shaojiemike.top/img/20221225192912.png"></p>
<p>帧间预测 &amp; 帧内预测<br><img src="https://pic.shaojiemike.top/img/20230111121011.png"><br><img src="https://pic.shaojiemike.top/img/20230111121048.png"><br>关键帧I帧 与 预测帧P帧<br><img src="https://pic.shaojiemike.top/img/20230101121209.png"></p>
<h2 id="MPEG-1"><a href="#MPEG-1" class="headerlink" title="MPEG-1"></a>MPEG-1</h2><p>在 H.261 的基础上加入</p>
<ol>
<li>双向预测帧B帧<ol>
<li>更省空间，但是视频编码解码需要算力更大</li>
</ol>
</li>
<li>帧序列的概念</li>
</ol>
<h2 id="BT文件命名概述"><a href="#BT文件命名概述" class="headerlink" title="BT文件命名概述"></a>BT文件命名概述</h2><p><img src="https://pic.shaojiemike.top/img/20230111122645.png"></p>
<ul>
<li>标 AVC &#x2F; H264 &#x2F; H.264 &#x2F; x264 的可以一律看作H264</li>
<li>标 HEVC &#x2F; HVC1 &#x2F; H265 &#x2F; H.265 &#x2F; x265 的可以一律看作H265</li>
<li>GB &#x2F; CHS &#x2F; SC &#x2F; zh-Hans 指简中</li>
<li>BIG5 &#x2F; CHT &#x2F; TC &#x2F; zh-Hant 指繁中</li>
<li>远离闲杂播放器，拥抱 Potplayer &#x2F; IINA &#x2F; VLC &#x2F; MPC-BE &#x2F; MPV</li>
<li>容器<ul>
<li>mkv，mp4</li>
<li>rmvb<ul>
<li>RealMedia可变比特率（RMVB）。在网速缓慢的时代，边下载边看是巨大优势</li>
<li>缺点：rm&#x2F;rmvb格式编解码都是要收费。压缩比和速度都远逊于H264</li>
</ul>
</li>
<li>avi<ul>
<li>AVI是英语Audio Video Interleave（“音频视频交织”或译为“音频视频交错”）的首字母缩写，由微软在1992年11月推出的一种多媒体文件格式，用于对抗苹果Quicktime的技术。 现在所说的AVI多是指一种封装格式。</li>
<li>图像数据和声音数据是交互存放的。从尾部的索引可以索引跳到自己想放的位置。</li>
<li>AVI與MP4本身只有聲音與影像沒有字幕</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="文字编码"><a href="#文字编码" class="headerlink" title="文字编码"></a>文字编码</h2><p><img src="https://pic.shaojiemike.top/img/20230111125846.png"></p>
<ul>
<li>ANSI 编码<ul>
<li>美国国家标准学会(American National Standards Institute)的缩写</li>
<li>ANSI并不是某一种特定的字符编码，而是在不同的系统中，ANSI表示不同的编码</li>
<li>在简体中文系统下，ANSI 编码代表 GB2312 编码，在日文操作系统下，ANSI 编码代表 JIS 编码。</li>
</ul>
</li>
<li>GB2312<ul>
<li>国家推出的常见6000汉字</li>
</ul>
</li>
<li>GBK <ul>
<li>微软拓展了繁体汉字的普通技术规范，所以windows上基本都是默认GBK</li>
<li><img src="https://pic.shaojiemike.top/img/20230111125204.png"></li>
</ul>
</li>
<li>UNICODE<ul>
<li>Universal Multiple-Octet Coded Character Set 统一码，初始就25种文字</li>
<li><img src="https://pic.shaojiemike.top/img/20230111125413.png"></li>
<li>采用了书写编码，导致会有长得像，但是完全不同的文字。导致很多钓鱼网站</li>
</ul>
</li>
<li>UTF-8编码<ul>
<li>UTF-8全称：8bit Unicode Transformation Format，8比特Unicode通用转换格式，是一种变长的编码方式。</li>
<li>其编码中的第一个字节仍然与ASCII兼容。</li>
</ul>
</li>
</ul>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://bravoing.github.io/2020/02/14/%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E5%99%A8%E5%8E%9F%E7%90%86%E3%80%81%E5%88%86%E8%BE%A8%E7%8E%87%E3%80%81%E5%B8%A7%E7%8E%87%E3%80%81%E7%A0%81%E7%8E%87/">https://bravoing.github.io/2020/02/14/%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E5%99%A8%E5%8E%9F%E7%90%86%E3%80%81%E5%88%86%E8%BE%A8%E7%8E%87%E3%80%81%E5%B8%A7%E7%8E%87%E3%80%81%E7%A0%81%E7%8E%87/</a></p>
<p>作者：哔哩哔哩技术 <a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv16198183">https://www.bilibili.com/read/cv16198183</a> 出处：bilibili</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=0LSHhatwTxM">https://www.youtube.com/watch?v=0LSHhatwTxM</a>  </p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1nW4y1V7kR/?spm_id_from=333.851.b_62696c695f7265706f72745f6b6e6f776c65646765.44&vd_source=5bbdecb1838c6f684e0b823d0d4f6db3">柴知道也行</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c23f3ea5443d">https://www.jianshu.com/p/c23f3ea5443d</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-12-31T00:54:56.000Z" title="12/31/2022, 12:54:56 AM">2022-12-31</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-18T14:55:02.946Z" title="11/18/2023, 2:55:02 PM">2023-11-18</time></span><span class="level-item"><a class="link-muted" href="/categories/toLearn/">toLearn</a></span><span class="level-item">13 minutes read (About 1989 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/31/Work/network/Protocol/streamProtocolCoding/">Streaming Protocol &amp; Streaming Coding</a></p><div class="content"><h2 id="流式传输-协议"><a href="#流式传输-协议" class="headerlink" title="流式传输 协议"></a>流式传输 协议</h2><p>常用的流媒体协议主要有两类：</p>
<ul>
<li>HTTP渐进下载</li>
<li>基于RTSP&#x2F;RTP的实时流媒体协议。</li>
</ul>
<p>在流式传输的实现方案中，一般采用</p>
<ol>
<li>HTTP&#x2F;TCP来传输控制信息，</li>
<li>用RTP&#x2F;UDP来传输实时多媒体数据。</li>
</ol>
<h3 id="RTP-、-RTCP-Real-time-Transport-Control-Protocol"><a href="#RTP-、-RTCP-Real-time-Transport-Control-Protocol" class="headerlink" title="RTP 、 RTCP (Real-time Transport Control Protocol)"></a>RTP 、 RTCP (Real-time Transport <del>Control</del> Protocol)</h3><ul>
<li>由IETF的多媒体传输工作小组1996年在RFC 1889中公布。</li>
<li>RTCP是RTP的一个姐妹协议</li>
<li>RTP协议的特点<ul>
<li>RTP协议是建立在UDP协议上的。</li>
<li>RTP并不保证传送或防止无序传送，也不确定底层网络的可靠性。</li>
<li>RTP实行有序传送，RTP中的序列号允许接收方重组发送方的包序列。</li>
<li>RTP不像http和ftp可完整的下載整個影視檔，它是以固定的資料率在網路上發送資料，用戶端也是按照這種速度觀看影視檔，<strong>當影視畫面播放過後，就不可以再重複播放，除非重新向伺服器端要求資料。</strong></li>
</ul>
</li>
<li>RTCP特点<ul>
<li>RTCP的主要功能是为RTP所提供的服务质量<strong>提供反馈来试图提高服务质量</strong>。RTCP收集相关媒体连接的统计信息，例如：传输字节数，传输分组数，丢失分组数，时延抖动，单向和双向网络延迟等等。来判断是否限制信息流量或改用压缩比较小的编解码器。</li>
<li>RTCP本身不提供数据加密或身份认证，其伴生协议<strong>SRTCP安全实时传输控制协议</strong>则可用于此类用途。</li>
</ul>
</li>
</ul>
<p><img src="https://pic.shaojiemike.top/img/20221231094108.png"></p>
<h3 id="SRTP-SRTCP（Secure-Real-time-Transport-Protocol）"><a href="#SRTP-SRTCP（Secure-Real-time-Transport-Protocol）" class="headerlink" title="SRTP &amp; SRTCP（Secure Real-time Transport Protocol）"></a>SRTP &amp; SRTCP（Secure Real-time Transport Protocol）</h3><ul>
<li>最早由IETF於2004年3月作為RFC3711發佈，提供加密、消息認證、完整性保證和重放保護。</li>
</ul>
<h3 id="RTSP-Realtime-Streaming-Protocol"><a href="#RTSP-Realtime-Streaming-Protocol" class="headerlink" title="RTSP(Realtime Streaming Protocol)"></a>RTSP(Realtime Streaming Protocol)</h3><ul>
<li>于1998年发布为RFC 2326。RTSP 2.0 于2016年发布为RFC 7826，作为RTSP 1.0的替代品。</li>
<li>专为娱乐和通信系统的使用，以<strong>控制</strong>流媒体服务器。<ul>
<li>媒体服务器的客户端发布VCR命令，例如播放，录制和暂停，以便于实时控制从服务器到客户端（视频点播）或从客户端到服务器（语音录音）的媒体流。</li>
</ul>
</li>
<li><strong>流数据本身的传输不是RTSP的任务</strong>。大多数RTSP服务器使用实时传输协议（RTP）和实时传输控制协议（RTCP）结合媒体流传输。</li>
<li>与RTP最大的区别在于：<ul>
<li>RTSP是一种双向实时数据传输协议，它<strong>允许客户端向服务器端发送请求</strong>，如回放、快进、倒退等操作</li>
<li>当然RTSP可基于RTP来传送数据，还可以选择TCP、UDP、组播UDP等通道来发送数据，具有很好的扩展性。</li>
<li>它是一种类似于HTTP协议的网络应用协议。</li>
</ul>
</li>
</ul>
<h3 id="RTMP-Real-Time-Messaging-Protocol"><a href="#RTMP-Real-Time-Messaging-Protocol" class="headerlink" title="RTMP(Real Time Messaging Protocol)"></a>RTMP(Real Time Messaging Protocol)</h3><ul>
<li>Adobe于2012年12月21日发布了该协议1.0版本的规范。</li>
<li>是 Adobe Systems 公司为 Flash 播放器和服务器之间音频、视频和数据传输开发的开放协议。</li>
<li>协议基于 TCP，是一个协议族，包括 RTMP 基本协议及 RTMPT&#x2F;RTMPS&#x2F;RTMPE 等多种变种。<ul>
<li>RTMPT封装在HTTP请求之中，可穿越防火墙；</li>
<li>RTMPS类似RTMPT，但使用的是HTTPS连接。</li>
<li>RTMPE，使用Adobe自有安全機制加密的RTMP。雖然實現上的細節是專有的，但該機制使用行業標準的密碼學加密演算法。</li>
</ul>
</li>
<li>RTMP 是<strong>目前主流</strong>的流媒体传输协议，广泛用于直播领域。</li>
<li>默认通信端口1935。RTMP URL格式：<code>rtmp://ip:[port]/appName/streamName</code></li>
<li>特点<ul>
<li>RTMP协议是采用实时的流式传输，所以不会缓存文件到客户端，这种特性说明用户想下载RTMP协议下的视频是比较难的；</li>
<li><strong>视频流可以随便拖动</strong>，既可以从任意时间点向服务器发送请求进行播放，并不需要视频有关键帧。相比而言，HTTP协议下视频需要有关键帧才可以随意拖动。</li>
<li>RTMP协议支持点播&#x2F;回放（通俗点将就是支持把flv,f4v,mp4文件放在RTMP服务器，客户端可以直接播放），直播（边录制视频边播放）。</li>
</ul>
</li>
</ul>
<h3 id="MMS（Microsoft-Media-Server-Protocol）"><a href="#MMS（Microsoft-Media-Server-Protocol）" class="headerlink" title="MMS（Microsoft Media Server Protocol）"></a>MMS（Microsoft Media Server Protocol）</h3><ul>
<li>访问并流式接收Window Media服务器中.asf文件的一种协议。</li>
<li>可以用Windows自带的Windows Media Player来观看</li>
</ul>
<h3 id="Web-RTC（Web-Real-Time-Communications）"><a href="#Web-RTC（Web-Real-Time-Communications）" class="headerlink" title="Web RTC（Web Real-Time Communications）"></a>Web RTC（Web Real-Time Communications）</h3><ul>
<li>于2011年6月1日开源并在Google、Mozilla、Opera支持下被纳入万维网联盟的W3C推荐标准。</li>
<li>是一个支持网页浏览器进行实时语音对话或视频对话的API。</li>
<li>目前主要应用于<strong>视频会议和连麦</strong>中。</li>
</ul>
<h3 id="HLS-Http-Live-Streaming-明显是基于HTTP"><a href="#HLS-Http-Live-Streaming-明显是基于HTTP" class="headerlink" title="HLS(Http Live Streaming, 明显是基于HTTP)"></a>HLS(Http Live Streaming, 明显是基于HTTP)</h3><ul>
<li>是由苹果提出基于HTTP的流媒体传输协议。</li>
<li>原理<ul>
<li>直播客户端获取到的并不是一个完整的数据流，HLS协议在服务器端将直播数据流存储为连续的、很短时长的媒体文件（MPEG-TS格式）（<strong>MPEG-2</strong> Transport Stream；又称MPEG-TS、MTS、TS），而客户端则不断的下载并播放这些小文件，因为服务器总是会将最新的直播数据生成新的小文件，这样客户端只要不停的按顺序播放从服务器获取到的文件，就实现了直播。</li>
</ul>
</li>
<li>特点<ul>
<li><strong>优点</strong>就是HTML5可以直接打开播放；分段文件的时长很短，客户端可以很快的选择和切换码率，以适应不同带宽条件下的播放。</li>
<li><strong>缺点</strong>就是延迟高。</li>
</ul>
</li>
</ul>
<h3 id="HTTP-FLV（明显是基于HTTP"><a href="#HTTP-FLV（明显是基于HTTP" class="headerlink" title="HTTP-FLV（明显是基于HTTP)"></a>HTTP-FLV（明显是基于HTTP)</h3><ul>
<li>将直播流模拟成FLV文件，通过HTTP协议进行下载的模式来实现流媒体传输的协议。</li>
</ul>
<h2 id="各种软件使用的流式协议"><a href="#各种软件使用的流式协议" class="headerlink" title="各种软件使用的流式协议"></a>各种软件使用的流式协议</h2><h3 id="moonlight"><a href="#moonlight" class="headerlink" title="moonlight"></a>moonlight</h3><p>官网写着</p>
<blockquote>
<p>Moonlight (formerly Limelight) is an open source implementation of NVIDIA’s GameStream protocol.</p>
</blockquote>
<p>那么 NVIDIA’s GameStream protocol是什么呢？</p>
<blockquote>
<p>NVIDIA uses high speed, low latency video encoders built into GeForce GTX or RTX GPUs along with an efficient streaming software protocol integrated into GeForce Experience.</p>
</blockquote>
<p>我只能说看上去像自研的~但是马上也要没了</p>
<blockquote>
<p>Nvidia isn’t just ending support for GameStream, it’s planning to fully remove the feature from existing Shield hardware in February 2023.<br>Nvidia is recommending that Shield users switch to Steam Link, which is a similar way of streaming PC games to a Shield device.</p>
</blockquote>
<h3 id="Steam-Link"><a href="#Steam-Link" class="headerlink" title="Steam Link"></a>Steam Link</h3><p>有<a target="_blank" rel="noopener" href="https://github.com/mariotaku/steamlink.py/tree/master/session">github老哥分析了</a>。但我只能说肯定不是上面常见的类型。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">  Client -&gt;&gt; Host: Discovery/Connect</span><br><span class="line">  Note over Client: Send client connection ID</span><br><span class="line">  Host -&gt;&gt; Client: Discovery/Connect ACK</span><br><span class="line">  Note over Client: Got host connection ID, start client handshake</span><br><span class="line">  Client -&gt;&gt; Host: Reliable/Control:ClientHandshake</span><br><span class="line">  par Discovery Channel</span><br><span class="line">    loop While True</span><br><span class="line">      Host -&gt;&gt; Client: Unconnected/Discovery:PingRequest</span><br><span class="line">      Client -&gt;&gt; Host: Unconnected/Discovery:PingResponse</span><br><span class="line">    end</span><br><span class="line">  end</span><br><span class="line">  Host -&gt;&gt; Client: Reliable/Control:ServerHandshake</span><br><span class="line">  Note over Client: Got mtu, start authentication</span><br><span class="line">  Client -&gt;&gt; Host: Reliable/Control:AuthenticationRequest</span><br><span class="line">  Host -&gt;&gt; Client: Reliable/Control:AuthenticationResponse</span><br><span class="line">  Host -&gt;&gt; Client: Reliable/Control:NegotiationInit</span><br><span class="line">  Note over Client: Got host supported audio/video codecs</span><br><span class="line">  Client -&gt;&gt; Host: Reliable/Control:NegotiationSetConfig</span><br><span class="line">  Note over Client: Send selected codecs and config</span><br><span class="line">  Host -&gt;&gt; Client: Reliable/Control:NegotiationSetConfig</span><br><span class="line">  Note over Client: Got final config, respond with complete</span><br><span class="line">  Client -&gt;&gt; Host: Reliable/Control:NegotiationComplete</span><br><span class="line">  par Audio Data Channel</span><br><span class="line">    Host -&gt;&gt; Client: Reliable/Control:StartAudioData</span><br><span class="line">    loop Not StopAudioData</span><br><span class="line">      Host -&gt;&gt; Client: Unreliable/Data:Packet </span><br><span class="line">    end</span><br><span class="line">  and Video Data Channel</span><br><span class="line">    Host -&gt;&gt; Client: Reliable/Control:StartVideoData</span><br><span class="line">    loop Not StopVideoData</span><br><span class="line">      Host -&gt;&gt; Client: Unreliable/Data:Packet </span><br><span class="line">    end</span><br><span class="line">  end</span><br><span class="line">  Client -&gt;&gt; Host: Discovery/Disconnect</span><br></pre></td></tr></table></figure>

<h2 id="流式传输-视频压缩编码"><a href="#流式传输-视频压缩编码" class="headerlink" title="流式传输 视频压缩编码"></a>流式传输 视频压缩编码</h2><p>主流还是 H.264 或者 HEVC。 流式传输时为了保证帧率可能会牺牲画面。<br><img src="https://pic.shaojiemike.top/img/20221231094108.png"></p>
<p>Steam Link 的相关设置</p>
<p><img src="https://pic.shaojiemike.top/img/20221231100529.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>山东布谷科技 <a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv9502267?from=search&amp;spm_id_from=333.337.0.0">https://www.bilibili.com/read/cv9502267?from=search&amp;spm_id_from=333.337.0.0</a> 出处：bilibili</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-12-24T16:00:00.000Z" title="12/24/2022, 4:00:00 PM">2022-12-24</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-18T14:55:02.926Z" title="11/18/2023, 2:55:02 PM">2023-11-18</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">3 minutes read (About 384 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/24/OutOfWork/5-VideoEntertainment/5-uTorrent/">uTorrent</a></p><div class="content"><h2 id="缓存设置"><a href="#缓存设置" class="headerlink" title="缓存设置"></a>缓存设置</h2><p>tjupt的默认设置就不错。红框是建议勾选的。<br><img src="https://pic.shaojiemike.top/img/20221225172727.png"></p>
<p>??? note “错误：内存不足，无法完成请求”</p>
<pre><code>This is because the cache size is too big, lower to `512MB` or `1GB` to fix this.[^1]
But the size bigger the faster, `1.4GB` is the biggest available value which ut can support.
</code></pre>
<p>突然没速度了，可能是缓存卡住了。一般也没什么解决办法。但是稳定下载的时候会均衡。</p>
<p><img src="https://pic.shaojiemike.top/img/20221225173002.png"></p>
<h2 id="下载如何修改文件名和位置"><a href="#下载如何修改文件名和位置" class="headerlink" title="下载如何修改文件名和位置"></a>下载如何修改文件名和位置</h2><p>首先<strong>不要</strong>勾选”立即下载”，通过如下更改位置即可再开始下载即可。还可以<strong>多选来批量移动</strong>文件到文件夹。（对于PT需要下载100%文件才能做种的，但是不需要的文件会影响刮削。可以通过批量移动到其他位置来解决）<br><img src="https://pic.shaojiemike.top/img/20221225173340.png"></p>
<h2 id="北洋园tjupt红种问题"><a href="#北洋园tjupt红种问题" class="headerlink" title="北洋园tjupt红种问题"></a>北洋园tjupt红种问题</h2><p>!!! note “Essential Reason: tjupt.org’s network traffic is brokered”</p>
<pre><code>configure the router policy to DIRECT to fix this.
</code></pre>
<p>??? example “其余方法:实际测试重置网络解决”</p>
<pre><code>1. [无法与服务器建立连接](https://blog.csdn.net/qq_45721725/article/details/122781489). utorrent种子暂停然后开始/更新tracker即可
2. 键盘按“Win + R”组合快捷键，输入“inetcpl.cpl”，点击“确定”进入“Internet选项”，在“高级”选项卡中选择“重置 IE 设置”
</code></pre>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="http://pgpchs.blogspot.com/2011/03/utorrent-antigfwalloutwallbloggercom.html">http://pgpchs.blogspot.com/2011/03/utorrent-antigfwalloutwallbloggercom.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Gerald_Jones/article/details/78848426">https://blog.csdn.net/Gerald_Jones/article/details/78848426</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-11-26T07:10:32.000Z" title="11/26/2022, 7:10:32 AM">2022-11-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-18T14:55:02.926Z" title="11/18/2023, 2:55:02 PM">2023-11-18</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">15 minutes read (About 2259 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/11/26/OutOfWork/5-VideoEntertainment/5-Jellyfin/">Jellyfin</a></p><div class="content"><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="docker-compose-in-Portainer"><a href="#docker-compose-in-Portainer" class="headerlink" title="docker-compose in Portainer"></a>docker-compose in Portainer</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&quot;3&quot;</span></span><br><span class="line">services:</span><br><span class="line">  jellyfin:</span><br><span class="line">    image: jellyfin/jellyfin</span><br><span class="line">    container_name: jellyfin</span><br><span class="line">    stdin_open: <span class="literal">true</span></span><br><span class="line">    <span class="built_in">tty</span>: <span class="literal">true</span></span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - 9004:8096</span><br><span class="line">    volumes:</span><br><span class="line">      - /addDisk/DiskNo4/jellyfinConfig:/config</span><br><span class="line">      - /addDisk/DiskNo4/bt:/nas</span><br><span class="line">    privileged: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>WebUI <code>http://222.195.72.218:9004</code>访问</p>
<h3 id="Windows-server"><a href="#Windows-server" class="headerlink" title="Windows server"></a>Windows server</h3><p>尝试 安装官网<a target="_blank" rel="noopener" href="https://repo.jellyfin.org/releases/server/windows/stable/installer/jellyfin_10.8.7_windows-x64.exe">windows版本</a>。</p>
<p>用了管理员权限也会报错<code>Could not start the jellyfin server service</code>。取消勾选<code>server</code>来暂时避免这个问题。</p>
<h2 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h2><p>启动程序后，会在<code>http://SERVER_IP:8096</code>进行一些<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/586191658">初始配置</a>，</p>
<ul>
<li>设置电影的文件夹，</li>
<li>类别选择电影，</li>
<li>路径为<code>/data/电影</code>，建议一开始选小一点的</li>
<li>首选语言为Chinese,</li>
<li>国家和地区选择People’s Republic of China,</li>
<li>其他全部默认即可</li>
</ul>
<h2 id="开启硬解："><a href="#开启硬解：" class="headerlink" title="开启硬解："></a>开启硬解：</h2><p>Jellyfin硬解转码主要依赖于ffmpeg，在windows平台下，Intel核显可以使用intel quick sync（qsv），N卡用NVENC和A卡用AMF进行硬解转码</p>
<p>在【控制台】—【播放】—【硬件加速】栏选择<code>Nvidia</code></p>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><h3 id="jellyfin-plugin-anidb"><a href="#jellyfin-plugin-anidb" class="headerlink" title="jellyfin-plugin-anidb"></a>jellyfin-plugin-anidb</h3><p>为了支持<del>里番</del></p>
<p>Place the dll-file in the <code>plugins/anidb</code> folder (you might need to create the folders) of your JF install</p>
<p>或者直接设置里安装(AniSearch 也同理)</p>
<p>但是收获的信息也太少了吧。可以手动下载图片(<a target="_blank" rel="noopener" href="http://www.getchu.com/all/month_title.html?aurl=http://www.getchu.com/all/month_title.html?genre=anime_dvd&gage=adult&year=2022&month=03&genre=anime_dvd&gc=gc">2022年03月発売タイトル - Getchu.com</a>)，改文件名显示。基本满足需求。</p>
<p>后续可以考虑EverAver和Movie_Data_Capture</p>
<h3 id="里番下载"><a href="#里番下载" class="headerlink" title="里番下载"></a>里番下载</h3><p>首选去<a target="_blank" rel="noopener" href="https://www.hacg.mom/wp/94317.html">琉璃神社 ★ HACG.me</a>搜索日语和月份合集找文中的BT识别码。或者去这个网站找<a target="_blank" rel="noopener" href="https://sukebei.nyaa.si/?f=0&c=0_0&q=Hajimete+no+Hitozuma">桜都字幕组的合集</a></p>
<h2 id="配套刮削软件"><a href="#配套刮削软件" class="headerlink" title="配套刮削软件"></a>配套刮削软件</h2><h3 id="综合刮削"><a href="#综合刮削" class="headerlink" title="综合刮削"></a>综合刮削</h3><p>本地电影元数据 抓取工具 | 刮削器：<a target="_blank" rel="noopener" href="https://github.com/yoshiko2/Movie_Data_Capture/wiki">Movie_Data_Capture</a> 需要把程序放置到和电影的同一目录下</p>
<h3 id="里番刮削"><a href="#里番刮削" class="headerlink" title="里番刮削"></a>里番刮削</h3><ul>
<li>里番只能用EverAver一部一部手动刮。</li>
<li>里番或者可以jellyfin默认的anidb 识别，但是是英文</li>
</ul>
<h3 id="AV刮削"><a href="#AV刮削" class="headerlink" title="AV刮削"></a>AV刮削</h3><ul>
<li>EverAver</li>
<li>javsdt</li>
<li>av data capture</li>
<li><a target="_blank" rel="noopener" href="https://github.com/moyy996/AVDC">AVDC</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/JavScraper/Emby.Plugins.JavScraper">javscraper Emby插件</a><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/JavScraper/Emby.Plugins.JavScraper/issues/307">jellyfin额外项目兼容</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/metatube-community/jellyfin-plugin-metatube">jellyfin-plugin-metatube jellyfin插件</a><ul>
<li>插件是需要有前端设置和<a target="_blank" rel="noopener" href="https://github.com/metatube-community/metatube-sdk-go">后端</a>设置的</li>
<li>自己搭建后端<a target="_blank" rel="noopener" href="https://api.javtube.internal/">https://api.javtube.internal</a></li>
</ul>
</li>
</ul>
<p>AV偶像头像单独<a target="_blank" rel="noopener" href="https://github.com/xinxin8816/gfriends">下载</a></p>
<h3 id="Renamer"><a href="#Renamer" class="headerlink" title="Renamer"></a>Renamer</h3><ul>
<li>字幕改名：<a target="_blank" rel="noopener" href="https://github.com/qwqcode/SubRenamer">https://github.com/qwqcode/SubRenamer</a></li>
<li>批量视频重命名：<a target="_blank" rel="noopener" href="http://www.den4b.com/download/renamer/installer">http://www.den4b.com/download/renamer/installer</a></li>
</ul>
<h2 id="风格与标签"><a href="#风格与标签" class="headerlink" title="风格与标签"></a>风格与标签</h2><p>虽然标签更适合给同类视频标注，但是jellyfin 的风格才能实际实现分类查找的这个功能。</p>
<h2 id="视频分级"><a href="#视频分级" class="headerlink" title="视频分级"></a>视频分级</h2><p><img src="https://pic.shaojiemike.top/img/20221127164057.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20221127164743.png"></p>
<h3 id="电视分级"><a href="#电视分级" class="headerlink" title="电视分级"></a>电视分级</h3><table>
<thead>
<tr>
<th>符号简写</th>
<th>一般年龄(内容说明)</th>
<th>具体说明</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>TV-Y</td>
<td>2至6岁</td>
<td>适合所有年龄的儿童观看。此分级节目中表现的主题性元素是特别为了低年龄观众而设计</td>
<td></td>
</tr>
<tr>
<td>TV-Y7</td>
<td>为了7岁以上的儿童设计</td>
<td>“可能更适合已有能分辨虚构和现实发展性技巧的儿童。”[10]此分级节目中表现的主题性元素可能包含“喜剧性的暴力”，或不适合低于7岁儿童的内容。</td>
<td></td>
</tr>
<tr>
<td>TV-Y7-FV</td>
<td>包含了较多的“虚构暴力”</td>
<td>比起TV-Y7分级的其他节目有更多刺激性或打斗性的内容。</td>
<td></td>
</tr>
<tr>
<td>TV-G</td>
<td>普遍的适合所有年龄观众收看</td>
<td>此分级不表示该节目是特别为了儿童设计，大多数的家长可让较年幼的儿童独自观看该节目。</td>
<td></td>
</tr>
<tr>
<td>TV-PG</td>
<td>不适合8岁以下儿童观看</td>
<td>有轻度惊吓，轻度暴力，或轻度性暗示，但大部分内容适合儿童观看</td>
<td></td>
</tr>
<tr>
<td>TV-14</td>
<td>不适合年龄低于14岁儿童</td>
<td></td>
<td></td>
</tr>
<tr>
<td>TV-MA</td>
<td>为了成年观众而制作</td>
<td>强烈和频繁的性色情内容、激烈暴力，或两者皆有。</td>
<td></td>
</tr>
</tbody></table>
<h3 id="电影分级"><a href="#电影分级" class="headerlink" title="电影分级"></a>电影分级</h3><table>
<thead>
<tr>
<th>符号简写</th>
<th>一般年龄(内容说明)</th>
<th>具体说明</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>G（General Audiences，大众级）</td>
<td>大众级电影</td>
<td>电影中不含有任何的裸露、性场面，也极少存在暴力以及吸食不健康的“东西”的场面，G级电影就算是孩子也可以自己独自观看，无需家长陪同。</td>
<td>《疯狂原始人》</td>
</tr>
<tr>
<td>PG（Parental Guidance Suggested，建议家长指导）</td>
<td>普通级别的电影</td>
<td>电影中基本不存在裸露、性场面，在暴力和吸食不健康的东西方面也不会超过尺度，如果孩子观看的话，需要家长陪同最佳。</td>
<td>《少年派的奇幻漂流》</td>
</tr>
<tr>
<td>PG-13（Parents Strongly Cautioned，家长特别留意）</td>
<td>对13岁以下的孩子进行限制观看，对于13-17岁的孩子需要在家长的陪同下观看</td>
<td>有少量暴力镜头，粗鲁的暴力镜头则几乎没有，电影内容中可能出现部分裸露和脏话。</td>
<td>《泰塔尼克号》、《哈利波特》系列。</td>
</tr>
<tr>
<td>R（Restricted，限制级）</td>
<td>对于17岁以下的孩子必须由家长陪同</td>
<td>较多性场合、暴力以及吸食不健康东西并且还会混杂大量的脏话，对于17岁以下的孩子会造成误导，因此需要家长陪同观看。</td>
<td>《肖申克的救赎》、《逃离拉斯维加斯》</td>
</tr>
<tr>
<td>NC-17（Adults Only，只准成人观看）</td>
<td>17岁以下的孩子禁止观看</td>
<td>NC-17级电影中会有大量性场合镜头，也会有吸食不健康东西的镜头，以及出现大量暴力镜头和大量的脏话镜头，对于17岁以下的儿童应避免其观看。</td>
<td>《色戒》、《羞耻》</td>
</tr>
</tbody></table>
<p>特殊说明</p>
<ul>
<li>AO级（AdultsOnly，仅限成人）</li>
<li>RP,尚未评级,“可能含有不适合儿童的内容”。</li>
<li>NR是属于未经定级的电影(不是一个美国电影协会的官方评级。它通常用于限制发行和没有提交到美国电影协会做评级的独立电影或国外电影。)</li>
<li>UR, 属于未经定级,U是针对1968年以前的电影定的级。</li>
</ul>
<h2 id="远程访问"><a href="#远程访问" class="headerlink" title="远程访问"></a>远程访问</h2><p>映射到外网端口？？？现在只能开wireguard访问本地IP</p>
<p>To do</p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p><img src="https://pic.shaojiemike.top/img/20221126154621.png"></p>
<h3 id="该客户端与媒体不兼容，服务器未发送兼容的媒体格式。"><a href="#该客户端与媒体不兼容，服务器未发送兼容的媒体格式。" class="headerlink" title="该客户端与媒体不兼容，服务器未发送兼容的媒体格式。"></a>该客户端与媒体不兼容，服务器未发送兼容的媒体格式。</h3><p>Jellyfin mp4格式的文件。 启用硬件加速导致。</p>
<h3 id="mkv的ass字幕卡顿问题"><a href="#mkv的ass字幕卡顿问题" class="headerlink" title="mkv的ass字幕卡顿问题"></a>mkv的ass字幕卡顿问题</h3><p>每次服务器端转码烧录ASS字幕，都会疯狂读取视频文件，好像是全部读取才能获取ASS文件一样，有的长达几十秒客户端才开始播放（想想一部4K高码电影可有几十个G），我一度以为jellyfin挂了。我测试了好多视频文件，都是如此。</p>
<ul>
<li>建议将字幕封装成PGS格式</li>
<li>不用web，使用jerryfin客户端来解码？</li>
<li>或者是MP4格式，直接有字幕</li>
<li>或者手动挂载字幕文件，注意格式<img src="https://pic.shaojiemike.top/img/20221127222345.png"></li>
</ul>
<h3 id="字幕乱码问题"><a href="#字幕乱码问题" class="headerlink" title="字幕乱码问题"></a>字幕乱码问题</h3><ul>
<li>下载字体文件<a target="_blank" rel="noopener" href="https://echo.solo90.com/usr/uploads/msyh.woff2">微软雅黑</a><br><a target="_blank" rel="noopener" href="https://post.smzdm.com/p/a859320l/">https://post.smzdm.com/p/a859320l/</a></li>
<li>填写字体文件夹<img src="https://pic.shaojiemike.top/img/20221127225813.png"></li>
</ul>
<h3 id="视频和字幕改名"><a href="#视频和字幕改名" class="headerlink" title="视频和字幕改名"></a>视频和字幕改名</h3><p><a target="_blank" rel="noopener" href="https://github.com/qwqcode/SubRenamer">https://github.com/qwqcode/SubRenamer</a> 超级好用</p>
<h3 id="多集电影"><a href="#多集电影" class="headerlink" title="多集电影"></a>多集电影</h3><p>“可以把多集电影按照集数后缀命名为类似ssni-xxx-cd1.mp4m,ssni-xxx-cd2.mp4，abp-xxx-CD1.mp4的规则，只要含有-CDn.&#x2F;-cdn.类似命名规则，即可使用分集功能”</p>
<p>但是现在貌似更新完了需要“-cd1”格式了。</p>
<h2 id="常见影视库管理工具对比"><a href="#常见影视库管理工具对比" class="headerlink" title="常见影视库管理工具对比"></a>常见影视库管理工具对比</h2><p><a target="_blank" rel="noopener" href="https://post.smzdm.com/p/awk8zn62/">EMBY PLEX JELLYFIN</a></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><ul>
<li>自动识别、扫描、分类我的影视资源（有的最新剧集，是一周一周更新的，需要自动归档合并功能）</li>
<li>对我们的影视资源的封面进行刮削，生成海报强（有点小小的强迫症，完整的海报墙，就觉得很酷）</li>
<li>可以对我下载的影视的生成简介，方便看最新的简介</li>
<li>播放器的播放能力要强，可以支持硬解码，播放h.265的片源和杜比音效</li>
</ul>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://post.smzdm.com/p/awk8zn62/">https://post.smzdm.com/p/awk8zn62/</a></p>
<p>链接：<a target="_blank" rel="noopener" href="https://blog.scio.icu/index.php/archives/15/">https://blog.scio.icu/index.php/archives/15/</a></p>
<p><a target="_blank" rel="noopener" href="https://pockies.github.io/2020/01/09/av-data-capture-jellyfin-kodi/">https://pockies.github.io/2020/01/09/av-data-capture-jellyfin-kodi/</a></p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/20/">Previous</a></div><div class="pagination-next"><a href="/page/22/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/20/">20</a></li><li><a class="pagination-link is-current" href="/page/21/">21</a></li><li><a class="pagination-link" href="/page/22/">22</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/35/">35</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">𝘊𝘰𝘮𝘱𝘶𝘵𝘦𝘳 𝘈𝘳𝘤𝘩𝘪𝘵𝘦𝘤𝘵𝘶𝘳𝘦 &amp; 𝘏𝘗𝘊</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">346</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">27</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">471</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">118</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-18T02:42:03.000Z">2023-11-18</time></p><p class="title"><a href="/2023/11/18/OutOfWork/4-devices/nas/DockerOnNas/">Docker On Nas</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-18T02:05:50.000Z">2023-11-18</time></p><p class="title"><a href="/2023/11/18/OutOfWork/4-devices/nas/migrateFromSynology2UgreenDX4600/">Migrate From Synology DS220J to UGREEN DX4600</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-17T08:03:41.000Z">2023-11-17</time></p><p class="title"><a href="/2023/11/17/OutOfWork/5-Music/PianoPiecePlayingPractice/">Piano Piece Playing Practice</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-16T10:49:12.000Z">2023-11-16</time></p><p class="title"><a href="/2023/11/16/Work/software/perf/IntelAdvisor/">Intel Advisor</a></p><p class="categories"><a href="/categories/Software/">Software</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-15T01:11:04.000Z">2023-11-15</time></p><p class="title"><a href="/2023/11/15/Work/Algorithms/datastructure/dataStructureSummary/">Data Structure Summary</a></p><p class="categories"><a href="/categories/Algorithms/">Algorithms</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">207</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">67</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">72</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2023 Shaojie Tan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>