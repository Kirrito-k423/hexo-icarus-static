<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="SHAOJIE&#039;S BOOK"><meta property="og:url" content="http://icarus.shaojiemike.top/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://icarus.shaojiemike.top/img/og_image.png"><meta property="article:author" content="Shaojie Tan"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://icarus.shaojiemike.top/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top"},"headline":"SHAOJIE'S BOOK","image":["http://icarus.shaojiemike.top/img/og_image.png"],"author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-24T16:00:00.000Z" title="10/24/2021, 4:00:00 PM">2021-10-24</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-04-14T04:38:20.807Z" title="4/14/2024, 4:38:20 AM">2024-04-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">a few seconds read (About 104 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/24/Work/Architecture/SIMD/neon/">Arm - Neon</a></p><div class="content"><p><a target="_blank" rel="noopener" href="https://community.arm.com/arm-community-blogs/b/operating-systems-blog/posts/arm-neon-programming-quick-reference">https://community.arm.com/arm-community-blogs/b/operating-systems-blog/posts/arm-neon-programming-quick-reference</a></p>
<h2 id="Arm-cpu-向量化支持判断"><a href="#Arm-cpu-向量化支持判断" class="headerlink" title="Arm cpu 向量化支持判断"></a>Arm cpu 向量化支持判断</h2><h2 id="向量化指令"><a href="#向量化指令" class="headerlink" title="向量化指令"></a>向量化指令</h2><h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/heliangbin87/article/details/79581113?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link">https://blog.csdn.net/heliangbin87/article/details/79581113?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-21T16:00:00.000Z" title="10/21/2021, 4:00:00 PM">2021-10-21</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-04-14T04:38:20.815Z" title="4/14/2024, 4:38:20 AM">2024-04-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">a minute read (About 195 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/21/Work/Operating%20system/csapp1/">CSAPP: Machine Programming III: Procedures</a></p><div class="content"><h2 id="stack"><a href="#stack" class="headerlink" title="stack"></a>stack</h2><p><img src="https://i.loli.net/2021/10/22/9EdAqmXveSUOiGk.png"></p>
<h2 id="register-使用约定"><a href="#register-使用约定" class="headerlink" title="register 使用约定"></a>register 使用约定</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rax 返回/传出寄存器</span><br><span class="line">rdi rsi 传入寄存器</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2021/10/22/1HqRQoNk5vbOfts.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">寄存器 %rsp 存放栈顶地址 (lowest stack address) pushq %rsp-8 popq %rsp+8</span><br><span class="line">rip 存call地址</span><br></pre></td></tr></table></figure>

<p>caller 调用者 callee 被调用者<br><img src="https://i.loli.net/2021/10/22/OnzB3DUITS2VwGr.png"><br><img src="https://i.loli.net/2021/10/22/9KnENm4dxSFtb8s.png"></p>
<h2 id="calling-procedure"><a href="#calling-procedure" class="headerlink" title="calling procedure"></a>calling procedure</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">callq 调用</span><br><span class="line">retq 返回</span><br></pre></td></tr></table></figure>
<h3 id="调用控制"><a href="#调用控制" class="headerlink" title="调用控制"></a>调用控制</h3><p><a target="_blank" rel="noopener" href="https://bkfish.github.io/2018/12/21/CSAPP%E5%8F%88%E5%8F%8C%E5%8F%92%E5%8F%95%E6%9D%A5%E4%B8%80%E9%81%8D%E4%B9%8B%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%E6%A0%88%E5%B8%A7%E7%9A%84%E5%8F%98%E5%8C%96/">https://bkfish.github.io/2018/12/21/CSAPP又双叒叕来一遍之函数调用过程栈帧的变化/</a></p>
<h3 id="传参数"><a href="#传参数" class="headerlink" title="传参数"></a>传参数</h3><ol>
<li>push到栈里<ol>
<li>递归调用，把上一级的数据及时push保存</li>
</ol>
</li>
<li>保存在寄存器里</li>
</ol>
<h3 id="Managing-local-data"><a href="#Managing-local-data" class="headerlink" title="Managing local data"></a>Managing local data</h3><p><img src="https://i.loli.net/2021/10/22/VKzA6vrXSpIaq15.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-20T16:00:00.000Z" title="10/20/2021, 4:00:00 PM">2021-10-20</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-04-14T04:38:20.807Z" title="4/14/2024, 4:38:20 AM">2024-04-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">8 minutes read (About 1258 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/20/Work/Architecture/SIMD/SIMD/">SIMD+SSE+AVX</a></p><div class="content"><h2 id="SIMD"><a href="#SIMD" class="headerlink" title="SIMD"></a>SIMD</h2><p>SIMD全称Single Instruction Multiple Data，单指令多数据流，能够复制多个操作数，并把它们打包在大型寄存器的一组指令集。</p>
<p>通过使用矢量寄存器，指令译码后几个执行部件同时访问内存，一次性获得所有操作数进行运算。这个特点使SIMD特别适合于多媒体应用等数据密集型运算。如 AMD的3D NOW！技术</p>
<h2 id="MMX"><a href="#MMX" class="headerlink" title="MMX"></a>MMX</h2><p>MMX是由57条指令组成的SIMD多媒体指令集，MMX将64位寄存当作2个32位或8个8位寄存器来用，只能处理整形计算，这样的64位寄存器有８组，分别命名为MM0~MM7．这些寄存器不是为MMX单独设置的，而是借用的FPU的寄存器，占用浮点寄存器进行运算（64位MMX寄存器实际上就是浮点数寄存器的别名），以至于MMX指令和浮点数操作不能同时工作。为了减少在MMX和浮点数模式切换之间所消耗的时间，程序员们尽可能减少模式切换的次数，也就是说，这两种操作在应用上是互斥的。</p>
<h2 id="SSE"><a href="#SSE" class="headerlink" title="SSE"></a>SSE</h2><p>SSE为Streaming SIMD Extensions的缩写。Intel SSE指令通过128bit位宽的专用寄存器, 支持一次操作128bit数据. float是单精度浮点数, 占32bit, 那么可以使用一条SSE指令一次计算4个float数。注意这些SSE指令要求参数中的内存地址必须对齐于16字节边界。</p>
<h3 id="SSE专用矢量寄存器个数，是每个core一个吗？"><a href="#SSE专用矢量寄存器个数，是每个core一个吗？" class="headerlink" title="SSE专用矢量寄存器个数，是每个core一个吗？"></a>SSE专用矢量寄存器个数，是每个core一个吗？</h3><p>SSE有8个128位寄存器，XMM0 ~XMM7。此外SSE还提供了新的控制&#x2F;状态寄存器MXCSR。为了回答这个问题，我们需要了解CPU的架构。每个core是独占register的<br><img src="https://pic.shaojiemike.top/PicGoSKLServer.png"></p>
<h3 id="SSE-相关编译命令"><a href="#SSE-相关编译命令" class="headerlink" title="SSE 相关编译命令"></a>SSE 相关编译命令</h3><p>addps xmm0, xmm1 ; reg-reg<br>addps xmm0, [ebx] ; reg-mem<br>sse提供了两个版本的指令，其一以后缀ps结尾，这组指令对打包单精度浮点值执行类似mmx操作运算，而第二种后缀ss</p>
<h3 id="SSE-相关函数"><a href="#SSE-相关函数" class="headerlink" title="SSE 相关函数"></a>SSE 相关函数</h3><ol>
<li>load系列     eg.__m128 _mm_load_ss (float *p)</li>
<li>store系列    eg.__m128 _mm_set_ss (float w) </li>
<li>其他操作     eg.__m128 _mm_add_ss (__m128 a, __m128 b)包括加法、减法、乘法、除法、开方、最大值、最小值、近似求倒数、求开方的倒数等等浮点操作</li>
</ol>
<h3 id="SSE指令集的发展"><a href="#SSE指令集的发展" class="headerlink" title="SSE指令集的发展"></a>SSE指令集的发展</h3><p><img src="https://pic.shaojiemike.top/PicGo20210714223527.png"></p>
<ol>
<li>SSE2则进一步支持双精度浮点数，由于寄存器长度没有变长，所以只能支持２个双精度浮点计算或是４个单精度浮点计算．另外，它在这组寄存器上实现了整型计算，从而代替了MMX．</li>
<li>SSE3支持一些更加复杂的算术计算．</li>
<li>SSE4增加了更多指令，并且在数据搬移上下了一番工夫，支持不对齐的数据搬移，增加了super shuffle引擎．</li>
<li>由于2007年8月，AMD抢先宣布了SSE5指令集。之后Intel将新出的叫做AVX指令集。由于SSE5和AVX指令集功能类似，并且AVX包含更多的优秀特性，因此AMD决定支持AVX指令集</li>
</ol>
<h2 id="AVX"><a href="#AVX" class="headerlink" title="AVX"></a>AVX</h2><p> Advanced Vector Extensions。较新的Intel CPU都支持AVX指令集, 它可以一次操作256bit数据, 是SSE的2倍，可以使用一条AVX指令一次计算8个float数。AVX指令要求内存地址对齐于32字节边界。</p>
<h2 id="SSE-与-AVX的发展"><a href="#SSE-与-AVX的发展" class="headerlink" title="SSE 与 AVX的发展"></a>SSE 与 AVX的发展</h2><p><img src="https://pic.shaojiemike.top/PicGoregisters_updated.png"><br><img src="https://pic.shaojiemike.top/PicGoIntel-mmx-sse-sse2-avx-AVX-512.png"></p>
<h2 id="性能对比"><a href="#性能对比" class="headerlink" title="性能对比"></a>性能对比</h2><p>根据参考文章，其中用gcc编译AVX版代码时需要加-mavx选项.<br><img src="https://pic.shaojiemike.top/PicGo20210714222019.png"><br>开启-O3选项，一般不用将代码改成多次计算和内存对齐。</p>
<h2 id="判断是否向量化，看汇编"><a href="#判断是否向量化，看汇编" class="headerlink" title="判断是否向量化，看汇编"></a>判断是否向量化，看汇编</h2><h3 id="GNU"><a href="#GNU" class="headerlink" title="GNU"></a>GNU</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcc -march=native -c -Q --help=target # 查看支持的指令集</span><br><span class="line">g++ -O2 -ftree-vectorize -ftree-vectorizer-verbose=9 -S -c foo.cpp -o /dev/stdout | c++filt # 查看汇编</span><br><span class="line">OBJDUMP # 反汇编</span><br></pre></td></tr></table></figure>
<p>c++函数在linux系统下编译之后会变成如下样子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_ZNK4Json5ValueixEPKc</span><br></pre></td></tr></table></figure>
<p>在linux命令行使用c++filter</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ c++filt _ZNK4Json5ValueixEPKc</span><br><span class="line">Json::Value::operator[](char const*) const</span><br></pre></td></tr></table></figure>
<p>可以得到函数的原始名称， 展开后续追踪</p>
<h3 id="intel-icpc"><a href="#intel-icpc" class="headerlink" title="intel icpc"></a>intel icpc</h3><h3 id="clang"><a href="#clang" class="headerlink" title="clang"></a>clang</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-Rpass=loop-vectorize </span><br><span class="line">identifies loops that were successfully vectorized.</span><br><span class="line"></span><br><span class="line">-Rpass-missed=loop-vectorize </span><br><span class="line">identifies loops that failed vectorization and indicates if vectorization was specified.</span><br><span class="line"></span><br><span class="line">-Rpass-analysis=loop-vectorize </span><br><span class="line">identifies the statements that caused vectorization to fail.</span><br></pre></td></tr></table></figure>
<h2 id="常见汇编代码"><a href="#常见汇编代码" class="headerlink" title="常见汇编代码"></a>常见汇编代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xmm 寄存器</span><br><span class="line">movsd</span><br></pre></td></tr></table></figure>
<h3 id="MMX指令"><a href="#MMX指令" class="headerlink" title="MMX指令"></a>MMX指令</h3><p><img src="https://pic.shaojiemike.top/img/20210824191542.png"></p>
<h2 id="手动向量化"><a href="#手动向量化" class="headerlink" title="手动向量化"></a>手动向量化</h2><p><img src="https://pic.shaojiemike.top/img/20210828093838.png"><br>循环展开8次<br><img src="https://pic.shaojiemike.top/img/20210828093812.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20210829163015.png"></p>
<h3 id="例子1"><a href="#例子1" class="headerlink" title="例子1"></a>例子1</h3><h2 id="SIMD寄存器"><a href="#SIMD寄存器" class="headerlink" title="SIMD寄存器"></a>SIMD寄存器</h2><p><img src="https://pic.shaojiemike.top/img/20210829162207.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.dazhuanlan.com/2020/02/01/5e3475c89d5bd/">https://www.dazhuanlan.com/2020/02/01/5e3475c89d5bd/</a></p>
<p><a target="_blank" rel="noopener" href="https://software.intel.com/sites/landingpage/IntrinsicsGuide/">https://software.intel.com/sites/landingpage/IntrinsicsGuide/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-20T16:00:00.000Z" title="10/20/2021, 4:00:00 PM">2021-10-20</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-04-14T04:38:20.815Z" title="4/14/2024, 4:38:20 AM">2024-04-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">4 minutes read (About 563 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/20/Work/HPC/llvm-mca/LLVM-mca3/">LLVM Mca : huawei HiSilicon&#039;s TSV110 work</a></p><div class="content"><h2 id="几个对比图"><a href="#几个对比图" class="headerlink" title="几个对比图"></a>几个对比图</h2><p><img src="https://pic.shaojiemike.top/img/20210918160557.png"></p>
<p>x轴的含义是改变port值的意思，比如<code>tsv110alu2</code>是在<code>tsv110</code>的基础上将alu的值改成2</p>
<h2 id="相关的-git-commit"><a href="#相关的-git-commit" class="headerlink" title="相关的 git commit"></a>相关的 git commit</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">commit c9ca3a3c66a493d72cf7afc7ee975e2de399f2e5</span><br><span class="line">Author: Elvina Yakubova &lt;elvina.yakubova@huawei.com&gt;</span><br><span class="line">Date:   Sat Nov 7 01:50:43 2020 +0300</span><br><span class="line"></span><br><span class="line">    [AArch64] Add driver tests for HiSilicon&#x27;s TSV110</span><br><span class="line"></span><br><span class="line">commit 93b99728b1676d23ab5dabc606344230d25e7f4b</span><br><span class="line">Author: Elvina Yakubova &lt;elvina.yakubova@huawei.com&gt;</span><br><span class="line">Date:   Sat Nov 7 01:22:35 2020 +0300</span><br><span class="line"></span><br><span class="line">    [AArch64] Add pipeline model for HiSilicon&#x27;s TSV110</span><br><span class="line"></span><br><span class="line">    This patch adds the scheduling and cost model for TSV110.</span><br><span class="line"></span><br><span class="line">    Reviewed by: SjoerdMeijer, bryanpkc</span><br><span class="line"></span><br><span class="line">    Differential Revision: https://reviews.llvm.org/D89972</span><br><span class="line"></span><br><span class="line">commit 123553921f86ac0fad7b742740aa45e8d380be02</span><br><span class="line">Author: Bryan Chan &lt;bryan.chan@huawei.com&gt;</span><br><span class="line">Date:   Fri Nov 9 19:32:08 2018 +0000</span><br><span class="line"></span><br><span class="line">    [AArch64] Support HiSilicon&#x27;s TSV110 processor</span><br><span class="line"></span><br><span class="line">    Reviewers: t.p.northover, SjoerdMeijer, kristof.beyls</span><br><span class="line"></span><br><span class="line">    Reviewed By: kristof.beyls</span><br><span class="line"></span><br><span class="line">    Subscribers: olista01, javed.absar, kristof.beyls, kristina, llvm-commits</span><br><span class="line"></span><br><span class="line">    Differential Revision: https://reviews.llvm.org/D53908</span><br><span class="line"></span><br><span class="line">    llvm-svn: 346546	</span><br></pre></td></tr></table></figure>
<p>只有3个，感觉和2个功能很相关。</p>
<h2 id="最近-Driver-commit"><a href="#最近-Driver-commit" class="headerlink" title="最近 Driver commit"></a>最近 Driver commit</h2><p><a target="_blank" rel="noopener" href="https://shaojiemike.notion.site/Huawei-work-on-llvm-mca-recur-e338f3133a10416ebdaa596e27e5c5b7">类似的llvm check的设置</a></p>
<h2 id="复现上面的图"><a href="#复现上面的图" class="headerlink" title="复现上面的图"></a>复现上面的图</h2><h3 id="要改的地方"><a href="#要改的地方" class="headerlink" title="要改的地方"></a>要改的地方</h3><p>应该每次都要重新编译安装<br><img src="https://pic.shaojiemike.top/img/20210923203642.png"></p>
<h3 id="测试的汇编代码"><a href="#测试的汇编代码" class="headerlink" title="测试的汇编代码"></a>测试的汇编代码</h3><ol>
<li>判断<code>llvm/test/MC/AArch64</code>下的汇编能用吗?选个最大的，neon 不支持， armv8.2也并不支持。感觉有特别要求<img src="https://pic.shaojiemike.top/img/20211021152612.png"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat neon-diagnostics.s|llvm-mca -timeline -show-encoding -all-stats -all-views</span><br></pre></td></tr></table></figure></li>
<li>选择osaca的benchmark里的add.c</li>
</ol>
<h2 id="AArch64SchedTSV110-td"><a href="#AArch64SchedTSV110-td" class="headerlink" title="AArch64SchedTSV110.td"></a>AArch64SchedTSV110.td</h2><p>locate at llvm&#x2F;lib&#x2F;Target&#x2F;AArch64&#x2F;AArch64SchedTSV110.td</p>
<h3 id="td-file"><a href="#td-file" class="headerlink" title="td file"></a>td file</h3><p>tablegen(LLVM class) definitions</p>
<h3 id="部分指令解释"><a href="#部分指令解释" class="headerlink" title="部分指令解释"></a>部分指令解释</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def : InstRW&lt;[TSV110Wr_2cyc_1MDU],   (instregex <span class="string">&quot;^(AND|BIC|EON|EOR|ORN|ORR)[WX]rs$&quot;</span>)&gt;;</span><br></pre></td></tr></table></figure>
<p>BIC (bit clear) EON (Exclusive OR) ORR (OR operations on the values in Rn and Operand2)</p>
<p>InstRW的定义</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Map a set of opcodes to a list of SchedReadWrite types. This allows</span></span><br><span class="line"><span class="comment">// the subtarget to easily override specific operations.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// SchedModel ties this opcode mapping to a processor.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">InstRW</span>&lt;list&lt;SchedReadWrite&gt; rw, dag instrlist&gt; &#123;</span><br><span class="line">  list&lt;SchedReadWrite&gt; OperandReadWrites = rw;</span><br><span class="line">  dag Instrs = instrlist;</span><br><span class="line">  SchedMachineModel SchedModel = ?;</span><br><span class="line">  <span class="comment">// Allow a subtarget to mark some instructions as unsupported.</span></span><br><span class="line">  bit Unsupported = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>TSV110Wr_2cyc_1MDU的定义</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def TSV110Wr_2cyc_1MDU   : SchedWriteRes&lt;[TSV110UnitMDU]&gt;   &#123; let Latency = <span class="number">2</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SchedWriteRes</span>&lt;list&lt;ProcResourceKind&gt; resources&gt; : SchedWrite,</span><br><span class="line">  ProcWriteResources&lt;resources&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义TSV110上可用的每种处理器资源和数量，</span></span><br><span class="line"><span class="comment">//它有8条pipeline管道，每个管道都有自己的队列，微操作在那里等待</span></span><br><span class="line"><span class="comment">//它们的operands和issue将无序地发送到八个执行管道之一。</span></span><br><span class="line">def TSV110UnitMDU  : ProcResource&lt;<span class="number">1</span>&gt;; <span class="comment">// Multi-Cycle</span></span><br></pre></td></tr></table></figure>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-13T06:42:57.000Z" title="10/13/2021, 6:42:57 AM">2021-10-13</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-04-14T04:38:20.811Z" title="4/14/2024, 4:38:20 AM">2024-04-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">a few seconds read (About 65 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/13/Work/Artificial%20Intelligence/framework/PyTorch_VS_TensorFlow/">PyTorch_VS_TensorFlow</a></p><div class="content"><h2 id="TensorFlow"><a href="#TensorFlow" class="headerlink" title="TensorFlow"></a>TensorFlow</h2><p>容易转换成TensorRT</p>
<h2 id="transformer"><a href="#transformer" class="headerlink" title="transformer"></a>transformer</h2><p>好像是属于NLP问题</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.163.com/dy/article/GAPBDHKG0511AQHO.html">https://www.163.com/dy/article/GAPBDHKG0511AQHO.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/452749603">https://www.zhihu.com/question/452749603</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-10T13:51:07.000Z" title="10/10/2021, 1:51:07 PM">2021-10-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-04-14T04:38:20.811Z" title="4/14/2024, 4:38:20 AM">2024-04-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Artificial-Intelligence/">Artificial Intelligence</a></span><span class="level-item">3 minutes read (About 499 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/10/Work/Artificial%20Intelligence/Model/Latent_Dirichlet_Allocation/">Latent Dirichlet Allocation (2003)</a></p><div class="content"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>该篇论文于2003年发表在“Journal of Machine Learning Research”期刊上，迄今引用次数已超过15000次，可见该论文对后来相关研究工作的影响之大。</p>
<p>首次正式将主题以隐变量的形式引入，形成一个三层贝叶斯模型，并且相比于之前和它最接近的pLSI文本模型，LDA的主题选取不再受训练集文本内容的束缚，是一个完全非监督且依据多个主题进行聚类的机器学习、数据挖掘领域的算法。</p>
<h3 id="现实意义"><a href="#现实意义" class="headerlink" title="现实意义"></a>现实意义</h3><p>在推荐系统的研究中，利用<strong>评论文本信息</strong>来提升推荐性能是近3-4年的一个热门研究领域，LDA及其改良的文本模型则是用来挖掘评论文本的主要方式。</p>
<h2 id="早期文本模型"><a href="#早期文本模型" class="headerlink" title="早期文本模型"></a>早期文本模型</h2><ol>
<li>TF-IDF文本模型(矩阵表示)</li>
<li>LSI文本模型<img src="https://pic.shaojiemike.top/img/20211011201316.png"><ol>
<li>第一个子矩阵代表了词与主题的关系，第二个子矩阵代表了主题本身，第三个子矩阵代表了主题与文档之间的关系。</li>
</ol>
</li>
<li></li>
</ol>
<h2 id="LDA的建模介绍"><a href="#LDA的建模介绍" class="headerlink" title="LDA的建模介绍"></a>LDA的建模介绍</h2><ol>
<li>用来训练文档的是基本块</li>
<li>每条指令说word</li>
<li>柏松分布</li>
</ol>
<h2 id="用变分推理求解LDA模型的参数"><a href="#用变分推理求解LDA模型的参数" class="headerlink" title="用变分推理求解LDA模型的参数"></a>用变分推理求解LDA模型的参数</h2><p>最重要的是LDA模型的两个参数，确定了后能在未知的文本里提取主题</p>
<h2 id="Gensim简介、LDA编程实现、LDA主题提取效果图展示"><a href="#Gensim简介、LDA编程实现、LDA主题提取效果图展示" class="headerlink" title="Gensim简介、LDA编程实现、LDA主题提取效果图展示"></a>Gensim简介、LDA编程实现、LDA主题提取效果图展示</h2><ol>
<li>统计词语出现的频率</li>
<li>为什么例子里的没有迭代次数呢？</li>
<li>调研为什么要pytorch tenceflow</li>
</ol>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/28777266">https://zhuanlan.zhihu.com/p/28777266</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/fish0058/article/details/25075591">https://blog.csdn.net/fish0058/article/details/25075591</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/anqiu4023/article/details/102275607">https://blog.csdn.net/anqiu4023/article/details/102275607</a></p>
<p><a target="_blank" rel="noopener" href="https://pypi.python.org/pypi/lda">https://pypi.python.org/pypi/lda</a></p>
<p><a target="_blank" rel="noopener" href="http://scikit-learn.org/dev/modules/generated/sklearn.decomposition.LatentDirichletAllocation.html#sklearn.decomposition.LatentDirichletAllocation">http://scikit-learn.org/dev/modules/generated/sklearn.decomposition.LatentDirichletAllocation.html#sklearn.decomposition.LatentDirichletAllocation</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-10T11:56:03.000Z" title="10/10/2021, 11:56:03 AM">2021-10-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-04-14T04:38:20.815Z" title="4/14/2024, 4:38:20 AM">2024-04-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">3 minutes read (About 404 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/10/Work/HPC/llvm-mca/LLVM-mca6/">uops.info: Characterizing Latency, Throughput, and Port Usage of Instructions on Intel Microarchitectures (2019)</a></p><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>现代计算机微架构是最复杂的几个人造系统。在上面预测，解释和优化软件是困难的。我们需要其运行行为的可信模型，但是事实是稀缺的。</p>
<p>本文设计和实现了一种构建X86指令的延迟，吞吐量和端口使用的可信模型。并仔细探究了这三个指标的定义。尤其是latency的值在不同的操作数情况时是如何确定的。</p>
<p>同时其结果也是机器可读的。并且对已有的所有Intel架构都进行了测试。</p>
<p>官网有结果 <a target="_blank" rel="noopener" href="http://www.uops.info/">http://www.uops.info</a> </p>
<p>We also plan to release <strong>the source code of our tool</strong> as open source</p>
<h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1 简介"></a>1 简介</h2><h2 id="2-相关工作"><a href="#2-相关工作" class="headerlink" title="2 相关工作"></a>2 相关工作</h2><h3 id="Information-provided-by-Intel"><a href="#Information-provided-by-Intel" class="headerlink" title="Information provided by Intel"></a>Information provided by Intel</h3><h3 id="Measurement-based-Approaches"><a href="#Measurement-based-Approaches" class="headerlink" title="Measurement-based Approaches"></a>Measurement-based Approaches</h3><h2 id="3-Background"><a href="#3-Background" class="headerlink" title="3 Background"></a>3 Background</h2><h3 id="Pipeline-of-Intel-Core-CPUs"><a href="#Pipeline-of-Intel-Core-CPUs" class="headerlink" title="Pipeline of Intel Core CPUs"></a>Pipeline of Intel Core CPUs</h3><h3 id="Assembler-Instructions"><a href="#Assembler-Instructions" class="headerlink" title="Assembler Instructions"></a>Assembler Instructions</h3><h3 id="Hardware-Performance-Counters"><a href="#Hardware-Performance-Counters" class="headerlink" title="Hardware Performance Counters"></a>Hardware Performance Counters</h3><h2 id="4-Definitions"><a href="#4-Definitions" class="headerlink" title="4 Definitions"></a>4 Definitions</h2><h3 id="Latency"><a href="#Latency" class="headerlink" title="Latency"></a>Latency</h3><h3 id="Throughput"><a href="#Throughput" class="headerlink" title="Throughput"></a>Throughput</h3><h3 id="Port-Usage"><a href="#Port-Usage" class="headerlink" title="Port Usage"></a>Port Usage</h3><h2 id="5-Algorithms"><a href="#5-Algorithms" class="headerlink" title="5 Algorithms"></a>5 Algorithms</h2><h3 id="Port-Usage-1"><a href="#Port-Usage-1" class="headerlink" title="Port Usage"></a>Port Usage</h3><ol>
<li>Finding Blocking Instructions</li>
<li>Port Usage Algorithm</li>
<li></li>
</ol>
<h3 id="Latency-1"><a href="#Latency-1" class="headerlink" title="Latency"></a>Latency</h3><ol>
<li>Register -&gt; Register<ol>
<li>Both registers are general-purpose registers </li>
<li>Both registers are SIMD registers</li>
<li>The registers have different types</li>
</ol>
</li>
<li>Memory → Register</li>
<li>Status Flags → Register</li>
<li>Register → Memory</li>
<li>Divisions</li>
</ol>
<h3 id="Throughtput"><a href="#Throughtput" class="headerlink" title="Throughtput"></a>Throughtput</h3><ol>
<li>Measuring Throughput</li>
<li>Computing Throughput from Port Usage</li>
</ol>
<h2 id="Computing-Throughput-from-Port-Usage"><a href="#Computing-Throughput-from-Port-Usage" class="headerlink" title="Computing Throughput from Port Usage"></a>Computing Throughput from Port Usage</h2><h3 id="Details-of-the-x86-Instruction-Set"><a href="#Details-of-the-x86-Instruction-Set" class="headerlink" title="Details of the x86 Instruction Set"></a>Details of the x86 Instruction Set</h3><h3 id="Measurements-on-the-Hardware"><a href="#Measurements-on-the-Hardware" class="headerlink" title="Measurements on the Hardware"></a>Measurements on the Hardware</h3><h3 id="Analysis-Using-Intel-IACA"><a href="#Analysis-Using-Intel-IACA" class="headerlink" title="Analysis Using Intel IACA"></a>Analysis Using Intel IACA</h3><h3 id="Machine-readable-Output"><a href="#Machine-readable-Output" class="headerlink" title="Machine-readable Output"></a>Machine-readable Output</h3><h2 id="7-Evaluation"><a href="#7-Evaluation" class="headerlink" title="7 Evaluation"></a>7 Evaluation</h2><p>balabala~</p>
<h2 id="8-Limitations"><a href="#8-Limitations" class="headerlink" title="8 Limitations"></a>8 Limitations</h2><h2 id="9-Conclusions-and-Future-Work"><a href="#9-Conclusions-and-Future-Work" class="headerlink" title="9 Conclusions and Future Work"></a>9 Conclusions and Future Work</h2><p>我们的工具可以用来优化llvm-mca等软件。</p>
<p>Future work includes adapting our algorithms to AMD x86 CPUs. 官网已经实现了。</p>
<p>We would also like to extend our approach tocharacterize other undocumented performance-relevant aspects of the pipeline, e.g., regarding micro and macro-fusion, or whether instructions use the simple decoder, the complex decoder, or the Microcode-ROM.</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-09T16:00:00.000Z" title="10/9/2021, 4:00:00 PM">2021-10-09</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-04-14T04:38:20.815Z" title="4/14/2024, 4:38:20 AM">2024-04-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">28 minutes read (About 4164 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/09/Work/HPC/llvm-mca/LLVM-mca4/">LLVM Mca ：with BHive (2019)</a></p><div class="content"><h2 id="BHive"><a href="#BHive" class="headerlink" title="BHive"></a>BHive</h2><p>一种新的profiler，可以profile没有用户干预的内存访问的基本块。</p>
<p>基于这种profiler创建了BHive,来验证llvm-mca等模型。</p>
<p>BHive是用来评价llvm-mca这些模型的，实验基于各种收集来的<strong>一个基本块</strong>各种评价</p>
<h2 id="I-INTRODUCTION"><a href="#I-INTRODUCTION" class="headerlink" title="I. INTRODUCTION"></a>I. INTRODUCTION</h2><h3 id="Automatically-Profiling-Basic-Blocks"><a href="#Automatically-Profiling-Basic-Blocks" class="headerlink" title="Automatically Profiling Basic Blocks"></a>Automatically Profiling Basic Blocks</h3><p>困难在于现有的 没有考虑 memory crash ??? .默认命中L1 cache</p>
<p>A <strong>key technical challenge</strong> with collecting a large basic block dataset is that there is no existing approach to profile an arbitrary basic block that has been removed from its program<br>context.</p>
<p>(没懂？那为什么要removed from its program<br>context) 因为要把常用的应用拆成小例子来评判，这些模型的准确性。</p>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>运用隐含狄利克雷分布LDA,基于cpu资源的利用率，来cluster benchmark suite里的基本块</p>
<p>通过对各种类型最基本的代码块来进行profile，从而形成针对各种performance model的数据库。</p>
<p>现在已经有超过30万的基本块分析，来源于各种方向的应用，包括数值计算OpenBLAS,数据库SQLite,机器学习TensorFlow，密码学OpenSSL。</p>
<p>这么多的数据产生了一个用于评估performance model的新benchmark。</p>
<p>作者说<strong>performance modeling 研究的未来在于与其他先进技术的大规模定量比较</strong></p>
<h3 id="内存访问的处理"><a href="#内存访问的处理" class="headerlink" title="内存访问的处理"></a>内存访问的处理</h3><p>通过把虚拟页面映射到<strong>单个</strong>物理页面，来合法内存访问同时避免cache miss</p>
<h2 id="II-背景"><a href="#II-背景" class="headerlink" title="II. 背景"></a>II. 背景</h2><h3 id="Existing-Performance-Models"><a href="#Existing-Performance-Models" class="headerlink" title="Existing Performance Models"></a>Existing Performance Models</h3><p>有两种model</p>
<ol>
<li>产生可以详细描述指令何时发射和退休的可解释执行路径的微架构模拟器，附带吞吐量预测。</li>
<li>每条指令都有延迟、吞吐量查找表，相当于一个被寄存器分配器使用的额外开销估计器</li>
</ol>
<p>各种model, 写到另一篇里了</p>
<ol>
<li>IACA</li>
<li>llvm-mca</li>
<li>OSACA</li>
<li>Ithemal</li>
</ol>
<h3 id="Machine-Code-Profilers"><a href="#Machine-Code-Profilers" class="headerlink" title="Machine Code Profilers"></a>Machine Code Profilers</h3><ol>
<li>通过 Agner Fog’s script 测量真实的，有周期，cache miss 等等。<a target="_blank" rel="noopener" href="https://www.agner.org/optimize/testp.zip">https://www.agner.org/optimize/testp.zip</a></li>
<li>nanoBench也是。<a target="_blank" rel="noopener" href="https://github.com/andreas-abel/nanoBench">https://github.com/andreas-abel/nanoBench</a> 可以指定processor?和 kernel模式。</li>
<li><strong>Unrolling</strong><ol>
<li>测量吞吐量的基本方法就是展开一个基本块的代码多次，然后测重复多次的代码。把展开的基本块latency除以<code>unroll factor</code>(典型值是100)</li>
<li>目的：<ol>
<li>边缘化前几次warm up的latency值的影响。</li>
<li>减少收起数据的开销影响</li>
</ol>
</li>
<li><code>unroll factor</code>就是循环展开次数。</li>
</ol>
</li>
<li><strong>局限性</strong>是，必须人工给代码块，不能自动profile一堆任意的基本块来系统性验证。???</li>
</ol>
<h2 id="III-PROFILING-ARBITRARY-BASIC-BLOCKS"><a href="#III-PROFILING-ARBITRARY-BASIC-BLOCKS" class="headerlink" title="III.  PROFILING ARBITRARY BASIC BLOCKS"></a>III.  PROFILING ARBITRARY BASIC BLOCKS</h2><p>目标是在<strong>不需要手动干预</strong>的情况下分析任意基本块，以便测量的<strong>吞吐量</strong>与性能模型通常假定的<strong>定义和不变量</strong>相对应。关键的挑战是使这些基本块能够在不崩溃的情况下<strong>访问任意内存地址</strong>。</p>
<p>由于基本块只是正常程序的一部分，导致根本不能单独正常运行。BHive做的事情就是，让他正常运行。</p>
<h3 id="Handling-Arbitrary-Memory-Accesses"><a href="#Handling-Arbitrary-Memory-Accesses" class="headerlink" title="Handling Arbitrary Memory Accesses"></a>Handling Arbitrary Memory Accesses</h3><p><img src="https://pic.shaojiemike.top/img/20211007210352.png"><br>这个代码块只有执行代码分配在<code>0x4110a</code>时，才能正常运行</p>
<ol>
<li>Remapping Virtual Pages.<ol>
<li>一个基本块的所有虚拟内存页重新映射到一个物理页上，所以全部数据访问都命中L1。这样就可以执行97%的基本块。</li>
<li>步骤<ol>
<li>把原本虚拟页全部unmap<ol>
<li>这会导致除了包含基本块指令的页之外的全部的连续的内存访问出问题？？？</li>
<li>在子进程里运行展开的基本块指令。<ol>
<li>这时对每个unmap的虚拟页的访问都会出错，但是主进程一种监视着。一旦中断就重新映射出错地址，然后重新开始跑。</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>Memory Initialization<ol>
<li>初始化一个中等大小0x12345600的物理页，允许都虚拟页都映射</li>
</ol>
</li>
<li>Virtual page aliasing<ol>
<li>因为不同的虚拟页映射在同一个物理页的同一项导致memory dependences，要等待</li>
<li><strong>剔除</strong>6.28%的基本块</li>
<li>可以通过增大物理页，来减小发生的概率。</li>
</ol>
</li>
</ol>
<h3 id="Overall-Profiling-Workflow"><a href="#Overall-Profiling-Workflow" class="headerlink" title="Overall Profiling Workflow"></a>Overall Profiling Workflow</h3><p>通过重复运行基本块来计算吞吐量</p>
<ol>
<li>Raw Measurement<ol>
<li>先从基本块里，产生不会memory crash的可执行部分。</li>
<li>unroll factor的选取。It uses 100 and 200 as the unroll factors for basic blocks <strong>smaller than 100 bytes</strong>; 50 and 100 for basic blocks <strong>between 100 bytes and 200 bytes</strong>; and finally 16 and 32 for basic blocks <strong>larger than 200 bytes</strong></li>
</ol>
</li>
<li>Filtering<ol>
<li>筛选执行代码满足理想化模型的执行结果，比如命中L1cache</li>
<li>L1 Cache Misses<ol>
<li>工具可以用硬件计数器监控指令和数据cache misses。拒绝所有cache miss的情况。</li>
</ol>
</li>
<li>Unaligned Loads<ol>
<li>不连续的访存会很慢，解决方法就是去除所有有不连续的访存的。大约删除了0.18%的基本块</li>
</ol>
</li>
<li>Subnormal Floating Point<ol>
<li>一些特殊的浮点数计算会比正常的浮点数计算慢20倍，去除了与MXCSR寄存器有关的0.1%的基本块。</li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/8341395/what-is-a-subnormal-floating-point-number">https://stackoverflow.com/questions/8341395/what-is-a-subnormal-floating-point-number</a></li>
</ol>
</li>
<li>Context Switches<ol>
<li>上下文切换(英语：context switch)，又称环境切换，电脑术语，是一个存储和重建CPU的状态 (内文)，因此令多个进程(process)可以分享单一CPU资源的计算过程。要切换CPU上的进程时，必需先行存储目前进程的状态，再将欲运行的进程之状态读回CPU中。</li>
</ol>
</li>
<li>可接受的评估公式 10%的误差？？？</li>
</ol>
</li>
<li>Throughput Calculation<ol>
<li>如果通过了基本块的筛选，用有记录的最小延迟计算吞吐量<img src="https://pic.shaojiemike.top/img/20210920154432.png"></li>
</ol>
</li>
<li>Environment Variance<ol>
<li>由于环境的影响，导致结果有个稳定的偏移。至少执行5次，展开16次的基本块。取最小的5次作为结果。</li>
</ol>
</li>
</ol>
<h3 id="Portability-to-Other-Architectures"><a href="#Portability-to-Other-Architectures" class="headerlink" title="Portability to Other Architectures"></a>Portability to Other Architectures</h3><p>只要架构满足以下几点要求</p>
<ol>
<li>有将多个虚拟页面映射到几个物理页面的API。map<br>multiple virtual pages to a few physical pages <ol>
<li><strong>without</strong> incurring a performance <strong>penalty</strong> due to unnecessary cache invalidation. We therefore require that the target processor has a **physically tagged data cache(VIPT)**？？？</li>
<li>we additionally require that the page size is small enough so the indexing bits are<br>not affected by address translation.</li>
</ol>
</li>
<li>detecting cache misses, </li>
<li>and detecting or disabling floating-point underflow.</li>
</ol>
<h2 id="IV-BASIC-BLOCK-DATASET"><a href="#IV-BASIC-BLOCK-DATASET" class="headerlink" title="IV. BASIC BLOCK DATASET"></a>IV. BASIC BLOCK DATASET</h2><p><img src="https://pic.shaojiemike.top/img/20210921190750.png"></p>
<p>应用的选择</p>
<ol>
<li>尽可能还原现实生活的各个方面，</li>
<li>而且是用户的典型用法。</li>
<li>Clang&#x2F;LLVM (compiler), Redis (inmemory database), SQLite (database), and Gzip 是用高级语言C或者C++编写的，算法和数据结构有复杂的设计。</li>
<li>OpenSSL (cryptography), OpenBLAS , Eigen (scientific computing),TensorFlow (machine learning) 代表的是核心循环是手动汇编优化过的高性能库。<ol>
<li>其中Embree是 用Intel ispc (a data-parallel language)编写的。</li>
</ol>
</li>
</ol>
<p>We compiled all applications with the <strong>highest optimization</strong> settings defined by their build systems. 如果可以用上了AVX2。</p>
<p>使用DynamoRIO动态分析来提炼基本块。可以实现在运行时记录每个运行的基本块。我们采用动态分析，而不是静态反汇编。因为静态反汇编无法区别padding bytes from instructions。???</p>
<p>应用的例子除了FFmpeg and Gzip都是选择的官方的benchmark。<br>Eigen 采用的是 two sparse linear algebra workloads: sparse matrix-matrix multiplication (SpMM) and sparse matrix-vector multiplication (SpMV).</p>
<h2 id="V-BASIC-BLOCK-CLUSTERING"><a href="#V-BASIC-BLOCK-CLUSTERING" class="headerlink" title="V. BASIC BLOCK CLUSTERING"></a>V. BASIC BLOCK CLUSTERING</h2><p>一些基本块比其他的更难建模，???(建什么模，VI-B说明了什么)有内存依赖的基本块预测错误率更高。</p>
<p>采用了一种技术???(是应用在提取上) 基于处理器的使用聚类基本块。<br>这个技术有助于性能模型的设计和使用者<strong>更细粒度了解</strong>performance model,让他们能集中以后新添加的资源在有困难的那一类基本块。</p>
<ol>
<li>Methodology<ol>
<li>具体方法<ol>
<li>找到每个基本块的硬件使用率的表示 port-mapping representation</li>
<li>根据其聚类</li>
</ol>
</li>
<li>对每条指令结合port使用<ol>
<li>运用 Abel and Reineke A. Abel and J. Reineke, “uops.info: Characterizing latency, throughput, and port usage of instructions on intel microarchitectures,” in ASPLOS, 2019的结果 ???</li>
<li>例如???<ol>
<li><code>xor %rax, %rbx</code> in Haswell is <code>&#123;p0156 → 1&#125;</code></li>
</ol>
</li>
</ol>
</li>
<li>使用<strong>Latent Dirichlet Allocation</strong> (LDA)来构建topic model 模型(python 训练模型)<ol>
<li>在语言处理上的应用是基于统计词频</li>
<li>在实际运用的时候，微指令操作会根据使用的port而有小不同。<ol>
<li>topics是分类的类别,6类</li>
<li>documents是基本块</li>
<li>α &#x3D; 1&#x2F;6 and β &#x3D; 1&#x2F;13.</li>
</ol>
</li>
<li>为了推断每个微指令操作所属的类别，我们使用了SciKit Learn transform对于LDA的随机变化推断的默认实现</li>
<li>计算每个基本块的最有可能的类别作为其分类结果</li>
</ol>
</li>
</ol>
</li>
<li>Results<ol>
<li>LDA将结果聚类后，根据基本块的内容，手动进行注名以及说明<img src="https://pic.shaojiemike.top/img/20211009165208.png"></li>
<li>example<img src="https://pic.shaojiemike.top/img/20211009165630.png"></li>
<li>根据运行时频率确定其权重， 基于sample-based profiler??? (A portable sampling-based profiler for java virtual machines,)确定。</li>
<li>高性能的库如预期一样，向量化的基本块占比较多。</li>
<li>其余的无向量化的较多。OpenSSL and Gzip有许多位操作的。</li>
</ol>
</li>
<li>Case Study on Data-Center Applications<ol>
<li>目的：作为测试例子，看这个聚类方法能不能找得到隐藏的热点、工作负载</li>
<li>Methodology<ol>
<li>第一步：首先将其基本块分成之前的几类，还是使用LDA</li>
<li>第二步：分类结果标注</li>
<li>第三步：比较聚类结果的perplexity值???</li>
<li>？？？有没有结合google的应用<img src="https://pic.shaojiemike.top/img/20211009173926.png"></li>
</ol>
</li>
<li>Results<ol>
<li>添加新应用后，该值只是略微增长。说明模型的代表性好。???</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="VI-PERFORMANCE-MODEL-EVALUATION"><a href="#VI-PERFORMANCE-MODEL-EVALUATION" class="headerlink" title="VI. PERFORMANCE MODEL EVALUATION"></a>VI. PERFORMANCE MODEL EVALUATION</h2><p>在3种Intel架构上验证4种已有的性能模型</p>
<ol>
<li>Methodology<ol>
<li>说明各个测试软件的版本。</li>
<li>Dataset<ol>
<li>basic block dataset discussed in Section IV</li>
</ol>
</li>
<li>Platform<ol>
<li>balabala 3种架构的 Intel cpus</li>
</ol>
</li>
<li>Evaluation Metrics<ol>
<li>测量吞吐量t和预测吞吐量t’$$err(t,t’)&#x3D;|\frac{t-t’}{t}|$$</li>
<li>不以预测精度，而是以预测结果的相对关系为评分标准。</li>
</ol>
</li>
<li>额外能评估每个模型如何保持基本块吞吐量的顺序。使用Kendall’s tau系数(越大效果越好)，而不是相对误差。测量的原因是使用者可能关心的不是绝对的数值精度，而是相对关系的准确率。比如优化软件的时候关心的不是具体耗时，而是哪个优化策略耗时更短。</li>
</ol>
</li>
<li>Results<ol>
<li><img src="https://pic.shaojiemike.top/img/20211010154102.png"></li>
<li><strong>IACA</strong> 第二好的，在向量化类模拟的最好</li>
<li><strong>llvm-mca</strong> 最差的，尤其是和loads有关时。</li>
<li><strong>Ithemal</strong>  除了向量基本块都是最好的。在memory dependence (Ld&#x2F;St)尤其好，但是向量基本块不好，可能与训练集没有向量基本块有关。</li>
<li><strong>OSACA</strong> 第三。由于还在开发中，使用还遇到5个bug。在遇到一些不认识的指令的时候，会直接按照nops空指令处理。</li>
</ol>
</li>
<li>Examples of Modeling Bugs<img src="https://pic.shaojiemike.top/img/20211010155758.png"><ol>
<li>最后一个例子是由于模型<strong>错误调度微指令</strong>导致的</li>
<li>Modeling bug due to unsigned division<ol>
<li>例子是 a 64-bit by 32-bit unsigned division.<img src="https://pic.shaojiemike.top/img/20211010162409.png"><img src="https://pic.shaojiemike.top/img/20211010163913.png"><img src="https://pic.shaojiemike.top/img/20211010164039.png"><img src="https://pic.shaojiemike.top/img/20211010164455.png"></li>
<li>???<img src="https://pic.shaojiemike.top/img/20211010164745.png"></li>
</ol>
</li>
<li>Modeling bug due to zero-idioms<ol>
<li><img src="https://pic.shaojiemike.top/img/20211010165301.png"></li>
<li>对这种结果固定的特殊指令的快速处理。</li>
</ol>
</li>
<li>Modeling bug due to mis-scheduling<ol>
<li>对于数据依赖，上下指令的寄存器有写后读。</li>
<li>Ithemal’s and OSACA忽略了该依赖</li>
<li><img src="https://pic.shaojiemike.top/img/20211010170051.png"></li>
<li>llvm-mca 没有注意到(%rcx)是memory，没有依赖可以提前发射。</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="CONCLUSION"><a href="#CONCLUSION" class="headerlink" title="CONCLUSION"></a>CONCLUSION</h2><p>现有的静态分析器对<strong>内存依赖</strong>和<strong>向量化块</strong>的建模还有困难。</p>
<h2 id="github代码说明"><a href="#github代码说明" class="headerlink" title="github代码说明"></a>github代码说明</h2><ol>
<li><code>benchmark/sources</code>下是各种软件的各个部分的16进制基本代码块和其出现概率，用csv格式(逗号分隔值 (Comma-separated values))存储</li>
<li><code>benchmark/throughput</code>是在各种架构下的各基本块的测量吞吐量，单位cycles per hundred-iterations.<br><img src="https://pic.shaojiemike.top/img/20210920151028.png"><img src="https://pic.shaojiemike.top/img/20210920154432.png"></li>
<li><code>benchmark/disasm</code>可以把16进制代码通过<code>nasm</code>变成汇编，<img src="https://pic.shaojiemike.top/img/20210920151258.png"></li>
<li><code>timing-harness</code><img src="https://pic.shaojiemike.top/img/20210920153113.png"><br><img src="https://pic.shaojiemike.top/img/20210921143255.png"><br>吞吐量的计算(猜的)Skylake microarchitecture$$\frac{6632-1030}{2333-100}*100&#x3D;250.8 (cyc&#x2F;hundred\ iters)$$</li>
</ol>
<h2 id="BHive-被质疑的局限性"><a href="#BHive-被质疑的局限性" class="headerlink" title="BHive 被质疑的局限性"></a>BHive 被质疑的局限性</h2><p>uops 的文章， Accurate Throughput Prediction of Basic Blocks on Recent Intel Microarchitectures</p>
<p>4.2 Extending BHive</p>
<h2 id="BHive-运行逻辑"><a href="#BHive-运行逻辑" class="headerlink" title="BHive 运行逻辑"></a>BHive 运行逻辑</h2><ol>
<li>读入16进制代码和循环次数</li>
<li><code>hhex2bin</code>转换为二进制</li>
<li><code>create_shm_fd</code><img src="https://pic.shaojiemike.top/img/20210922150852.png"><img src="https://pic.shaojiemike.top/img/20210922151143.png"><ol>
<li><p><code>shm_open, shm_unlink</code>creates and opens a new, or opens or unlink an existing, POSIX shared memory object. <code>O_RDWR</code> Open the object for read-write access.<code>O_CREAT</code>  the shared memory object if it does not exist. <code>777</code>是类似文件读写执行组权限的东西 On success, shm_open() <code>returns</code> a file descriptor (a nonnegative integer)</p>
</li>
<li><p><code>POSIX</code>可移植操作系统接口The Portable Operating System Interface 是IEEE为要在各种UNIX操作系统上运行软件，而定义API的一系列互相关联的标准的总称。</p>
</li>
<li><p><code>ftruncate</code> — truncate截短 a file to a specified length</p>
</li>
<li><p>#define SIZE_OF_HARNESS_MEM (4096 * 3)</p>
</li>
</ol>
</li>
<li><code>measure</code>开始测量<ol>
<li>int fds[2] ???</li>
<li><code>pipe</code>用于创建pipe,用来<strong>进程间</strong>通信的<strong>单向</strong>数据通路，传入变量用来返回引用自pipe末端的文件描述符file descriptors。<strong>第一个</strong>指向the read end of the pipe，<strong>第二个</strong>指向the write end of the pipe</li>
<li><code>mmap(void *addr, size_t length, int prot, int flags,int fd, off_t offset); munmap(void *addr, size_t length);</code>- map or unmap files or devices into memory 在调用进程的虚拟地址空间里create a new mapping.</li>
<li>fork()产生子进程<ol>
<li>fork()原理详解<ol>
<li>复制之前的一模一样。</li>
<li>fork() returns a zero to the newly created child process.</li>
<li>fork() returns a positive value, the process ID of the child process, to the parent.</li>
</ol>
</li>
<li>父进程<ol>
<li>#define OFFSET_TO_COUNTERS 32</li>
<li>为什么声明一个偏移地址指针???<ol>
<li>struct pmc_counters 由5个uint64_t组成。 uint64 will always take 8 bytes。一个结构体40bytes</li>
</ol>
</li>
<li><code>attach_to_child(pid, fds[1]);</code> pid是子进程pid<ol>
<li><code>ptrace(enum __ptrace_request request, pid_t pid,void *addr, void *data)</code> - process trace 提供一种进程tracer跟踪控制另一个进程tracee的方法，可以修改被控制者的memory and registers.<ol>
<li><code>PTRACE_SEIZE</code> Attach to the process specified in pid, making it a tracee of the calling process.  Unlike PTRACE_ATTACH, PTRACE_SEIZE does <strong>not</strong> stop the process</li>
</ol>
</li>
<li>子进程从fds[0]里读到x里，父进程把x的值写入 fds[1] ???</li>
</ol>
</li>
<li>check Performance Monitoring Counters (PMCs) supports<ol>
<li><code>rdpmc_open_attr</code> initialize a raw ring 3 ReaDable PerforMance Counter</li>
</ol>
</li>
<li>last_failing_inst 和 mapping_done</li>
<li>To kill child<ol>
<li>#define MAX_FAULTS 1024 # 子进程产生的错误需要解决？</li>
<li><code>wait</code>挂起当前线程，直到有一个children结束，返回其PID</li>
<li><code>WIFEXITED</code>Wait_IF_EXITED 判断是否正常结束<img src="https://pic.shaojiemike.top/img/20210922185030.png"></li>
<li>如果错误打印出错信号(eg.11)指令指针寄存器RIP,指针寄存器RSP<img src="https://pic.shaojiemike.top/img/20210922190632.png"><img src="https://pic.shaojiemike.top/img/20210922191039.png"><img src="https://pic.shaojiemike.top/img/20210922191252.png"></li>
<li>函数是用汇编写的就离谱<img src="https://pic.shaojiemike.top/img/20210922191507.png"><img src="https://pic.shaojiemike.top/img/20210922193149.png"><img src="https://pic.shaojiemike.top/img/20210922192559.png"><img src="https://pic.shaojiemike.top/img/20210922191801.png"><img src="https://pic.shaojiemike.top/img/20210922191931.png">what is aux mem?</li>
<li>修改出错地方的寄存器，重新运行<code>PTRACE_CONT</code> Restart the stopped tracee process</li>
<li>最多执行MAX_FAULTS次</li>
</ol>
</li>
<li>最后父进程杀死子进程</li>
</ol>
</li>
<li>子进程<ol>
<li>父进程测试是否支持PMCs,子进程使用<img src="https://pic.shaojiemike.top/img/20210922194738.png"><img src="https://pic.shaojiemike.top/img/20210922195030.png"></li>
<li>harness.c ：277</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/from-zero/p/13750852.html">https://www.cnblogs.com/from-zero/p/13750852.html</a></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li>time 怎么算的the latency of the basic block？为什么打印15个呢？</li>
<li>还有中间的错误是怎么回事?</li>
<li>论文里的误差怎么算的？<ol>
<li>BHive整合了几个软件（整合了什么呢），应该是真实测量了得出真实吞吐量？还是也是模拟的？</li>
<li>和uops比怎么样</li>
</ol>
</li>
<li>哪个数据是准确的，是BHive模拟的，还是真实测量的。<ol>
<li>通过 Agner Fog’s script 测量真实的，有周期，cache miss 等等。<a target="_blank" rel="noopener" href="https://www.agner.org/optimize/testp.zip">https://www.agner.org/optimize/testp.zip</a></li>
<li>nanoBench也是。<a target="_blank" rel="noopener" href="https://github.com/andreas-abel/nanoBench">https://github.com/andreas-abel/nanoBench</a> 可以指定processor?和 kernel模式。</li>
<li>局限性是，必须人工给代码块，不能自动profile一堆任意的基本块来系统性验证。???</li>
</ol>
</li>
<li>BHvie的代码实现，移植到鲲鹏，然后根据PMU调准。</li>
</ol>
<p>问题是x86的二进制或者汇编不能变成aarm64的二进制或者汇编。</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://github.com/ithemal/bhive">https://github.com/ithemal/bhive</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-06T16:00:00.000Z" title="10/6/2021, 4:00:00 PM">2021-10-06</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-04-14T04:38:20.823Z" title="4/14/2024, 4:38:20 AM">2024-04-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Tips/">Tips</a></span><span class="level-item">6 minutes read (About 916 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/06/Work/hardware/HDMI_DP/">HDMI</a></p><div class="content"><h2 id="HDMI"><a href="#HDMI" class="headerlink" title="HDMI"></a>HDMI</h2><p>高清多媒体界面（英语：<strong>High Definition Multimedia Interface</strong>，缩写：HDMI）是一种全数字化影像和声音发送接口，可以发送<strong>未压缩</strong>的音频及视频信号。HDMI可以同时发送<strong>音频和视频</strong>信号，由于音频和视频信号采用同一条线材，大大简化系统线路的安装难度。</p>
<h3 id="与DP的区别"><a href="#与DP的区别" class="headerlink" title="与DP的区别"></a>与DP的区别</h3><p>HDMI是被设计来取代较旧的<strong>模拟信号</strong>影音发送接口。HDMI继承DVI的核心技术“传输最小化差分信号”TMDS，从本质上来说仍然是DVI的扩展。画面是以逐行的方式被发送，并在每一行与每祯画面发送完毕后加入一个特定的空白时间（类似模拟扫描线），并没有将数据“Micro-Packet Architecture（微数据包架构）”化，也不会只更新前后两帧画面改变的部分。每张画面在该更新时都会被完整的重新发送。</p>
<p>而DisplayPort一开始则面向液晶显示器开发，采用“Micro-Packet Architecture(微数据包架构)”传输架构，视频内容以数据包方式传送，这一点同DVI、HDMI等视频传输技术有着明显区别。</p>
<p><img src="https://pic.shaojiemike.top/img/20211005232118.png"></p>
<p>更多先进特性对比： <a target="_blank" rel="noopener" href="https://www.cnbeta.com/articles/tech/1034975.htm">https://www.cnbeta.com/articles/tech/1034975.htm</a></p>
<h2 id="历史"><a href="#历史" class="headerlink" title="历史"></a>历史</h2><h3 id="HDMI-1-4"><a href="#HDMI-1-4" class="headerlink" title="HDMI 1.4"></a>HDMI 1.4</h3><p>2009年5月28日提出，最高支持4K×2K（3840×2160p@24 Hz&#x2F;25 Hz&#x2F;30 Hz或4096×2160p@24 Hz）</p>
<h3 id="HDMI-2-0"><a href="#HDMI-2-0" class="headerlink" title="HDMI 2.0"></a>HDMI 2.0</h3><p>2013年9月4日提出</p>
<ol>
<li>新增2160p@50 YCbCr 4:2:0、2160p@60 YCbCr 4:2:0（4K分辨率）</li>
<li>传输带宽18Gbit&#x2F;s  支持4096*2160*60Hz</li>
</ol>
<h3 id="HDMI-2-1"><a href="#HDMI-2-1" class="headerlink" title="HDMI 2.1"></a>HDMI 2.1</h3><p>2017年1月4日提出</p>
<ol>
<li>支持的最大分辨率为 10K&#x2F;120 Hz</li>
</ol>
<p><img src="https://pic.shaojiemike.top/img/20211006183005.png"><br><img src="https://pic.shaojiemike.top/img/20211005223209.png"><br><img src="https://pic.shaojiemike.top/img/20211005223236.png"></p>
<h2 id="比特率编码"><a href="#比特率编码" class="headerlink" title="比特率编码"></a>比特率编码</h2><p>在早期的DP和HDMI标注中，数字信号大多使用8b&#x2F;10b的比特率编码进行传输。在8b&#x2F;10b编码模式下，意味着每8位数据在实际传输中需要10位的传输带宽，而这些多出来的冗余用来确保信号的完整性，这意味着他们只有80%的理论带宽可以用来传输数据。</p>
<p>而在最新的协议下，DP 2.0采用128b&#x2F;132b进行传输，编码效率效率提升到97%，而HDMI 2.1则采用16b&#x2F;18b进行传输，编码效率为88.9%。</p>
<p>加上同代的DP接口一般都拥有更高的传输速率，所以最新一代DP接口相对HDMI的拥有更高的数据速率。</p>
<h2 id="数据表示"><a href="#数据表示" class="headerlink" title="数据表示"></a>数据表示</h2><p>每个像素都拥有<strong>红色，绿色和蓝色</strong>（RGB）这三个数据点，或者使用<strong>亮度，蓝色色度差和红色色度差</strong>（YCbCr &#x2F; YPbPr）三个数据点</p>
<h2 id="各种接口速率"><a href="#各种接口速率" class="headerlink" title="各种接口速率"></a>各种接口速率</h2><h3 id="查看电脑USB接口"><a href="#查看电脑USB接口" class="headerlink" title="查看电脑USB接口"></a>查看电脑USB接口</h3><p><img src="https://pic.shaojiemike.top/img/20211005202948.png"></p>
<h2 id="接口驱动更新"><a href="#接口驱动更新" class="headerlink" title="接口驱动更新"></a>接口驱动更新</h2><p>？？？</p>
<h2 id="软件的帧率"><a href="#软件的帧率" class="headerlink" title="软件的帧率"></a>软件的帧率</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><h3 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h3><h2 id="实际应用"><a href="#实际应用" class="headerlink" title="实际应用"></a>实际应用</h2><h3 id="联想2020R7000"><a href="#联想2020R7000" class="headerlink" title="联想2020R7000"></a>联想2020R7000</h3><p>type c，同时支持dp1.2的视频输出 21.6Gbps</p>
<p>HDMI2.0 18Gbps</p>
<h3 id="怎么算"><a href="#怎么算" class="headerlink" title="怎么算"></a>怎么算</h3><p><img src="https://pic.shaojiemike.top/img/20211005231854.png"></p>
<p>小米的显示器是DP1.4的接口 10bits</p>
<p>但是实际是8bits 下需要的带宽为为3*8*3440*1440*100Hz&#x3D;11888640000bps 3种颜色每个8位。</p>
<p>11888640000bps &#x2F; 0.8 &#x3D; 14860800000bps 也不对，哪里有问题</p>
<h3 id="实际"><a href="#实际" class="headerlink" title="实际"></a>实际</h3><p>买了根DP1.4的线，但是只有DP1.2的口<br><img src="https://pic.shaojiemike.top/img/20211014171944.png"><br>但是144Hz带不动，会花屏，或者闪烁。</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/USB#%E6%A0%87%E5%87%86USB%E6%8E%A5%E5%8F%A3">https://zh.wikipedia.org/wiki/USB#%E6%A0%87%E5%87%86USB%E6%8E%A5%E5%8F%A3</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnbeta.com/articles/tech/1034975.htm">https://www.cnbeta.com/articles/tech/1034975.htm</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-05T13:19:41.000Z" title="10/5/2021, 1:19:41 PM">2021-10-05</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-04-14T04:38:20.823Z" title="4/14/2024, 4:38:20 AM">2024-04-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Tips/">Tips</a></span><span class="level-item">6 minutes read (About 952 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/05/Work/hardware/DP/">DP</a></p><div class="content"><h2 id="DP"><a href="#DP" class="headerlink" title="DP"></a>DP</h2><p>DisplayPort（简称DP）是一个由PC及芯片制造商联盟开发，视频电子标准协会（VESA）标准化的<strong>数字式视频接口标准</strong>。该接口免认证、免授权金，主要用于视频源与显示器等设备的连接，并也支持音频、USB和其他形式的资料。</p>
<p>用于取代传统的VGA、DVI。 DisplayPort是第一个依赖<strong>数据包化</strong>资料传输技术的显示连接端口。</p>
<h2 id="历史"><a href="#历史" class="headerlink" title="历史"></a>历史</h2><h3 id="1-0"><a href="#1-0" class="headerlink" title="1.0"></a>1.0</h3><p>2006年5月发布。带宽10.8Gbps。DisplayPort 1.0的最大传输速度是8.64Gbit&#x2F;s，长度是2米。已经废弃。</p>
<h3 id="1-2"><a href="#1-2" class="headerlink" title="1.2"></a>1.2</h3><p>于2009年12月22日发布。它最大的改变是传输速度增加两倍到21.6Gbit&#x2F;s（High Bit Rate 2（HBR2）mode），支持4K（4096X2160）60Hz，因此支授更高的分辨率、帧速率及色深。苹果公司设计的Mini DisplayPort亦兼容此标准。支持3D、支持多流（multi-streaming）。目前此版本是主流。</p>
<p><img src="https://pic.shaojiemike.top/img/20211005212825.png"></p>
<h3 id="1-3"><a href="#1-3" class="headerlink" title="1.3"></a>1.3</h3><p>2014年9月15日，视频电子标准协会发布DisplayPort 1.3，带宽速度最高32.4 Gbps（HBR3），编码后有效带宽为25.92 Gbps，可支持4K（3840X2160）120hz、5K（5120X2880）60hz、8K（7680X4320）30hz。</p>
<h3 id="1-4"><a href="#1-4" class="headerlink" title="1.4"></a>1.4</h3><p>2016年2月份最终版的DP 1.4连接端口规范，新标准基于2014年9月的DP 1.3规范，带宽不变但加入了显示压缩流(Display Stream Compression)技术、前向错误更正(Forward Error Correction)、高动态范围数据包（HDR meta transport），声道也提升到32声道1536 KHz采样率，一般情况下，DP1.4可提供4K 120Hz 8bit输出，若搭配DSC技术，可提供4K 144Hz 10bit输出。</p>
<p>DP1.4目前有严重BUG，无法进入bios或屏幕休眠后无法唤醒，20和30系显卡NVIDIA官方尚未放出修复更新，必须要显卡厂商自行修复，建议改用HDMI2.1</p>
<h3 id="2-0"><a href="#2-0" class="headerlink" title="2.0"></a>2.0</h3><ol>
<li>三倍数据带宽性能<br>之前版本的DisplayPort v1.4a提供了32.4 Gbps的最大链路带宽，四个通道中的每一个都以8.1 Gbps &#x2F; lane的链路速率运行。使用8b &#x2F; 10b信道编码，相当于25.92 Gbps的最大有效载荷。</li>
</ol>
<p>DP 2.0将最大链路速率提高到20 Gbps &#x2F; lane，并具有更高效的128b &#x2F; 132b信道编码，最大有效载荷为77.37 Gbps - 与DP 1.4a相比，增加了三倍。</p>
<p>这意味着DP 2.0是第一个以60 Hz刷新率支持8K分辨率（7680 x 4320）的标准，全彩色4：4：4分辨率，包括每像素30位（bpp），支持HDR-10。</p>
<ol start="2">
<li><p>单显示分辨率???<br> 一个16K（15360×8640）显示器@ 60Hz和30 bpp 4：4：4 HDR（带DSC） </p>
<p> 一个10K（10240×4320）显示器@ 60Hz和24 bpp 4：4：4（无压缩） 双显示分辨率</p>
<p> 两个8K（7680×4320）显示器@ 120Hz和30 bpp 4：4：4 HDR（带DSC） </p>
<p> 两个4K（3840×2160）显示@ 144Hz和24 bpp 4：4：4（无压缩） 三重显示分辨率</p>
<p> 三个10K（10240×4320）显示器@ 60Hz和30 bpp 4：4：4 HDR（带DSC） </p>
<p> 三个4K（3840×2160）显示@ 90Hz和30 bpp 4：4：4 HDR（无压缩）</p>
</li>
</ol>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ol>
<li>完全兼容现有HDMI1.4a标准和旧的HDMI标准。</li>
<li>支持USB Type-C。</li>
<li>支持144Hz刷新率</li>
<li>支持6、8、10、12与16位色深。</li>
<li>1080p的有效传输带宽保证长度为5米。</li>
<li>多屏幕输出<br> DisplayPort 1.2支持MST（Multi-Stream Transport），单个DP可连接到多个显示器。要使用这项功能，显示器需要支持DP 1.2菊花链（Daisy-chaining），或使用MST Hub把DP一个拆成三个。</li>
</ol>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/33/">Previous</a></div><div class="pagination-next"><a href="/page/35/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/33/">33</a></li><li><a class="pagination-link is-current" href="/page/34/">34</a></li><li><a class="pagination-link" href="/page/35/">35</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/40/">40</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">𝘊𝘰𝘮𝘱𝘶𝘵𝘦𝘳 𝘈𝘳𝘤𝘩𝘪𝘵𝘦𝘤𝘵𝘶𝘳𝘦 &amp; 𝘏𝘗𝘊</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">394</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">33</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">493</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">39</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/Camp/"><span class="level-start"><span class="level-item">Camp</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math/"><span class="level-start"><span class="level-item">Math</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Thinking/"><span class="level-start"><span class="level-item">Thinking</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">118</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/love/"><span class="level-start"><span class="level-item">love</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">52</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-14T03:33:25.000Z">2024-04-14</time></p><p class="title"><a href="/2024/04/14/Work/Training/HuaweiTrainingCamp/">Huawei Training Camp</a></p><p class="categories"><a href="/categories/Camp/">Camp</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-14T03:32:51.000Z">2024-04-14</time></p><p class="title"><a href="/2024/04/14/OutOfWork/0-love/wonyoung/">Jang Wonyoung</a></p><p class="categories"><a href="/categories/love/">love</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-03-24T01:54:10.000Z">2024-03-24</time></p><p class="title"><a href="/2024/03/24/Work/software/linux/OverleafOnUbuntu/">Overleaf On Ubuntu</a></p><p class="categories"><a href="/categories/software/">software</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-03-12T02:02:22.000Z">2024-03-12</time></p><p class="title"><a href="/2024/03/12/OutOfWork/4-devices/VR/">Virtual reality (VR)</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-03-08T10:23:34.000Z">2024-03-08</time></p><p class="title"><a href="/2024/03/08/OutOfWork/0-health/scientificallyConcoctingGlasses/">Scientifically Concocting Glasses</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">April 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">March 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">February 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/01/"><span class="level-start"><span class="level-item">January 2024</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">December 2023</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">November 2023</span></span><span class="level-end"><span class="level-item tag">33</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">October 2023</span></span><span class="level-end"><span class="level-item tag">56</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/09/"><span class="level-start"><span class="level-item">September 2023</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">August 2023</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">July 2023</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">June 2023</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">May 2023</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">April 2023</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">March 2023</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">February 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">January 2023</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">December 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/11/"><span class="level-start"><span class="level-item">November 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">October 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">September 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">August 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">July 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">May 2022</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">April 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">March 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">February 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">January 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">December 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">November 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">September 2021</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2024 Shaojie Tan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>