<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>VtuneOptimize - SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="vtuneçš„å®‰è£…å’Œprofileä½¿ç”¨ç”±äºsnode0æœ‰sudo 12source &amp;#x2F;opt&amp;#x2F;intel&amp;#x2F;oneapi&amp;#x2F;setvars.shsudo vtune-gui  sudoåå›¾å½¢åŒ–ç•Œé¢ MobaXtermæ‰“ä¸å¼€çš„åŸå› å‚è€ƒè¿™ä¸ª Step1 : Performance Snapshot å‚æ•°è¯´æ˜ä»¥IPCC2022 åˆèµ› æ”¯æ’‘ç‚¹è®¡ç®—çš„baselineä¸ºä¾‹ Logical Core Utilizat"><meta property="og:type" content="blog"><meta property="og:title" content="VtuneOptimize"><meta property="og:url" content="http://icarus.shaojiemike.top/2023/07/14/Work/software/perf/vtuneOptimize/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:description" content="vtuneçš„å®‰è£…å’Œprofileä½¿ç”¨ç”±äºsnode0æœ‰sudo 12source &amp;#x2F;opt&amp;#x2F;intel&amp;#x2F;oneapi&amp;#x2F;setvars.shsudo vtune-gui  sudoåå›¾å½¢åŒ–ç•Œé¢ MobaXtermæ‰“ä¸å¼€çš„åŸå› å‚è€ƒè¿™ä¸ª Step1 : Performance Snapshot å‚æ•°è¯´æ˜ä»¥IPCC2022 åˆèµ› æ”¯æ’‘ç‚¹è®¡ç®—çš„baselineä¸ºä¾‹ Logical Core Utilizat"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220724194827.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220724201411.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220726222036.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220728204538.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220724202614.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220724204414.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20221202184317.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20221202184438.png"><meta property="article:published_time" content="2023-07-14T16:00:00.000Z"><meta property="article:modified_time" content="2023-12-05T01:53:26.346Z"><meta property="article:author" content="Shaojie Tan"><meta property="article:tag" content="ipcc"><meta property="article:tag" content="vtune"><meta property="article:tag" content="HPL-PL"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://pic.shaojiemike.top/img/20220724194827.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top/2023/07/14/Work/software/perf/vtuneOptimize/"},"headline":"VtuneOptimize","image":["https://pic.shaojiemike.top/img/20220724194827.png","https://pic.shaojiemike.top/img/20220724201411.png","https://pic.shaojiemike.top/img/20220726222036.png","https://pic.shaojiemike.top/img/20220728204538.png","https://pic.shaojiemike.top/img/20220724202614.png","https://pic.shaojiemike.top/img/20220724204414.png","https://pic.shaojiemike.top/img/20221202184317.png","https://pic.shaojiemike.top/img/20221202184438.png"],"datePublished":"2023-07-14T16:00:00.000Z","dateModified":"2023-12-05T01:53:26.346Z","author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":"vtuneçš„å®‰è£…å’Œprofileä½¿ç”¨ç”±äºsnode0æœ‰sudo 12source &#x2F;opt&#x2F;intel&#x2F;oneapi&#x2F;setvars.shsudo vtune-gui  sudoåå›¾å½¢åŒ–ç•Œé¢ MobaXtermæ‰“ä¸å¼€çš„åŸå› å‚è€ƒè¿™ä¸ª Step1 : Performance Snapshot å‚æ•°è¯´æ˜ä»¥IPCC2022 åˆèµ› æ”¯æ’‘ç‚¹è®¡ç®—çš„baselineä¸ºä¾‹ Logical Core Utilizat"}</script><link rel="canonical" href="http://icarus.shaojiemike.top/2023/07/14/Work/software/perf/vtuneOptimize/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.0.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-07-14T16:00:00.000Z" title="7/14/2023, 4:00:00 PM">2023-07-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-12-05T01:53:26.346Z" title="12/5/2023, 1:53:26 AM">2023-12-05</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">20 minutes read (About 3059 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">VtuneOptimize</h1><div class="content"><h2 id="vtuneçš„å®‰è£…å’Œprofile"><a href="#vtuneçš„å®‰è£…å’Œprofile" class="headerlink" title="vtuneçš„å®‰è£…å’Œprofile"></a>vtuneçš„å®‰è£…å’Œprofile</h2><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>ç”±äºsnode0æœ‰sudo</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source /opt/intel/oneapi/setvars.sh</span><br><span class="line">sudo vtune-gui</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://home.ustc.edu.cn/~shaojiemike/posts/nvidiansight/#sudo-ncu-ui-%E4%B8%8D%E8%83%BD%E8%BF%9C%E7%A8%8B%E6%89%93%E5%BC%80">sudoåå›¾å½¢åŒ–ç•Œé¢ MobaXtermæ‰“ä¸å¼€çš„åŸå› å‚è€ƒè¿™ä¸ª</a></p>
<h2 id="Step1-Performance-Snapshot-å‚æ•°è¯´æ˜"><a href="#Step1-Performance-Snapshot-å‚æ•°è¯´æ˜" class="headerlink" title="Step1 : Performance Snapshot å‚æ•°è¯´æ˜"></a>Step1 : Performance Snapshot å‚æ•°è¯´æ˜</h2><p>ä»¥IPCC2022 åˆèµ› æ”¯æ’‘ç‚¹è®¡ç®—çš„baselineä¸ºä¾‹</p>
<h2 id="Logical-Core-Utilization"><a href="#Logical-Core-Utilization" class="headerlink" title="Logical Core Utilization"></a>Logical Core Utilization</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Effective Logical Core Utilization: 3.8% (2.436 out of 64)</span><br><span class="line">    Effective Physical Core Utilization: 6.4% (2.053 out of 32)</span><br></pre></td></tr></table></figure>

<p>CPUåˆ©ç”¨ç‡ä¸»è¦æ˜¯æŒ‡è®¡ç®—æœ‰æ•ˆå æ¯”ã€‚ä¸º100%æ„å‘³ç€æ‰€æœ‰é€»è¾‘CPUéƒ½æ˜¯ç”±åº”ç”¨ç¨‹åºçš„è®¡ç®—å ç”¨ã€‚</p>
<h2 id="Microarchitecture-Usage"><a href="#Microarchitecture-Usage" class="headerlink" title="Microarchitecture Usage"></a>Microarchitecture Usage</h2><p>å¾®æ¶æ„ä½¿ç”¨æŒ‡æ ‡æ˜¯ä¸€ä¸ªå…³é”®æŒ‡æ ‡ï¼Œå¯ä»¥å¸®åŠ©è¯„ä¼°(ä»¥%ä¸ºå•ä½)ä½ çš„ä»£ç åœ¨å½“å‰å¾®æ¶æ„ä¸Šè¿è¡Œçš„æ•ˆç‡ã€‚</p>
<p>å¾®æ¶æ„çš„ä½¿ç”¨å¯èƒ½ä¼šå—åˆ°</p>
<ol>
<li>long-latency memoryé•¿å»¶è¿Ÿè®¿å­˜ã€</li>
<li>floating-point, or SIMD operationsæµ®ç‚¹æˆ–SIMDæ“ä½œçš„å½±å“;</li>
<li>non-retired instructions due to branch mispredictions;ç”±äºåˆ†æ”¯é”™è¯¯é¢„æµ‹å¯¼è‡´çš„æœªé€€å½¹æŒ‡ä»¤;</li>
<li>instruction starvation in the front-end.å‰ç«¯æŒ‡ä»¤ä¸è¶³ã€‚</li>
</ol>
<h3 id="vtuneçš„å»ºè®®"><a href="#vtuneçš„å»ºè®®" class="headerlink" title="vtuneçš„å»ºè®®"></a>vtuneçš„å»ºè®®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Microarchitecture Usage: 37.7% of Pipeline Slots</span><br><span class="line">    Retiring: 37.7%</span><br><span class="line">    Front-End Bound: 16.9%</span><br><span class="line">    Back-End Bound: 23.8%</span><br><span class="line">    Memory Bound: 11.9%</span><br><span class="line">    Core Bound: 11.9%</span><br><span class="line">    Bad Speculation: 21.5%</span><br></pre></td></tr></table></figure>

<p>é’ˆå¯¹<code>Back-End Bound: 23.8%</code>çš„å»ºè®®å¦‚ä¸‹ï¼š</p>
<p>A significant portion of pipeline slots are remaining empty.<br>(??? ä»–æ˜¯æŒ‡æœ‰23.8% emptyè¿˜æ˜¯è¢«ä½¿ç”¨äº†å‘¢)</p>
<p>When operations take <strong>too long</strong> in the back-end, they introduce <strong>bubbles</strong> in the pipeline that ultimately cause fewer pipeline slots containing useful work to be retired per cycle than the machine is capable to support.</p>
<p>This opportunity cost results in slower execution.</p>
<ol>
<li><strong>Long-latency operation</strong>s like <strong>divides</strong> and <strong>memory operations</strong> can cause this,</li>
<li>as can <strong>too many operations</strong> being directed to a single execution port (for example, more <strong>multiply</strong> operations arriving in the back-end per cycle than the execution unit can support).</li>
</ol>
<p>é’ˆå¯¹<code>Bad Speculation: 21.5%</code>çš„å»ºè®®å¦‚ä¸‹ï¼š</p>
<p>A significant proportion of pipeline slots containing <strong>21.5% useful work are being cancelled</strong>.</p>
<p>This can be caused by <strong>mispredicting branches</strong> or by <strong>machine clears</strong>. Note that this metric value may be highlighted due to Branch Resteers issue.</p>
<h3 id="Retiring-metric"><a href="#Retiring-metric" class="headerlink" title="Retiring metric"></a>Retiring metric</h3><p>Retiring metric represents a Pipeline Slots fraction utilized by useful work, meaning the issued uOps that eventually get retired.<br>Retiring metric è¡¨ç¤º<strong>æœ‰ç”¨å·¥ä½œ</strong>æ‰€ä½¿ç”¨çš„Pipeline slotæµæ°´çº¿ç®¡é“çš„æ¯”ä¾‹ï¼Œæ‰€æœ‰å‘å°„çš„uOpsæœ€ç»ˆéƒ½ä¼šretiredã€‚</p>
<p>Ideally, all Pipeline Slots would be attributed to the Retiring category.<br>ç†æƒ³æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„ç®¡é“æ§½éƒ½åº”è¯¥å½’äºé€€ä¼‘ç±»åˆ«ã€‚</p>
<p>Retiring of 100% would indicate the maximum possible number of uOps retired per cycle has been achieved. 100%çš„é€€å½¹è¡¨æ˜æ¯ä¸ªå‘¨æœŸå†…é€€å½¹çš„uopæ•°é‡è¾¾åˆ°äº†å¯èƒ½çš„æœ€å¤§å€¼ã€‚</p>
<p>Maximizing Retiring typically increases the Instruction-Per-Cycle metric.<br>æœ€å¤§åŒ–Retiringé€šå¸¸ä¼šå¢åŠ IPCã€‚</p>
<p>Note that a high Retiring value <strong>does not necessary mean no more room</strong> for performance improvement.<br>For example, <strong>Microcode assists</strong> are categorized under Retiring. They hurt performance and can often be avoided.</p>
<p>Microcode assistsæ ¹æ®Intelçš„è§£é‡Šæ˜¯</p>
<p>å½“é‡åˆ°ç‰¹æ®Šçš„è®¡ç®—(æ¯”å¦‚å¤„ç†éå¸¸å°çš„æµ®ç‚¹å€¼(æ‰€è°“çš„é€†æ³•çº¿)æ—¶ï¼‰ï¼Œæµ®ç‚¹å•å…ƒå¹¶æ²¡æœ‰è¢«è®¾ç½®ä¸ºæœ¬æœºæ‰§è¡Œè¿™äº›æ“ä½œã€‚ä¸ºæ­¤éœ€è¦åœ¨æŒ‡ä»¤æµä¸­æ’å…¥å¯èƒ½æœ‰æ•°ç™¾ä¸ªæŒ‡ä»¤é•¿çš„å°ç¨‹åºï¼Œå¯¹æ€§èƒ½ä¼šé€ æˆå¾ˆå¤§çš„å½±å“ã€‚</p>
<h3 id="Front-End-Bound"><a href="#Front-End-Bound" class="headerlink" title="Front-End Bound"></a>Front-End Bound</h3><p>Front-End Bound metric represents a slots fraction where the processorâ€™s Front-End undersupplies its Back-End. è¯¥æŒ‡æ ‡è¡¨ç¤ºå‰ç«¯äº§ç”Ÿçš„æŒ‡ä»¤æ˜¯å¦è¶³ä»¥æ”¯æŒåç«¯å¤„ç†ã€‚</p>
<p>Front-End denotes the first part of the processor core responsible for fetching operations that are executed later on by the Back-End part. å‰ç«¯å°†æŒ‡ä»¤åˆ†è§£æˆuopsä¾›åç«¯å¤„ç†ã€‚</p>
<p>Within the Front-End, a branch predictor predicts the next address to fetch, cache-lines are fetched from the memory subsystem, parsed into instructions, and lastly decoded into micro-ops (uOps). åœ¨å‰ç«¯ä¸­ï¼Œåˆ†æ”¯é¢„æµ‹å™¨é¢„æµ‹ä¸‹ä¸€ä¸ªè¦è·å–çš„åœ°å€ï¼Œç¼“å­˜è¡Œä»å†…å­˜å­ç³»ç»Ÿä¸­è·å–ï¼Œè§£æä¸ºæŒ‡ä»¤ï¼Œæœ€åè§£ç ä¸ºå¾®æ“ä½œ(uOps)ã€‚</p>
<p>Front-End Bound metric denotes unutilized <strong>issue-slots</strong> when there is <strong>no Back-End stall</strong> (bubbles where Front-End delivered no uOps while Back-End could have accepted them). For example, stalls due to <strong>instruction-cache misses</strong> would be categorized as Front-End Bound</p>
<p>Front-End BoundæŒ‡æ ‡è¡¨ç¤ºå½“åç«¯æ²¡æœ‰åœé¡¿æ—¶æœªä½¿ç”¨çš„<strong>å‘å°„æ§½</strong>(bubbles: å‰ç«¯æ²¡æœ‰äº¤ä»˜uOpsï¼Œè€Œå‘å°„ç»™åç«¯çš„)ã€‚ä¾‹å¦‚ï¼Œç”±äºæŒ‡ä»¤ç¼“å­˜æœªå‘½ä¸­è€Œå¯¼è‡´çš„æš‚åœå°†è¢«å½’ç±»ä¸ºFront-End Bound</p>
<h3 id="Back-End-Bound"><a href="#Back-End-Bound" class="headerlink" title="Back-End Bound"></a>Back-End Bound</h3><p>metric represents a Pipeline Slots fraction where no uOps are being delivered due to a lack of required resources for accepting new uOps in the Back-End. è¯¥æŒ‡æ ‡è¡¨ç¤ºåç«¯uopsæ˜¯å¦å‡ºç°äº†å› ä¸ºç¡¬ä»¶èµ„æºç´§å¼ è€Œæ— æ³•å¤„ç†çš„é—®é¢˜ã€‚</p>
<p>Back-End is the portion of the processor core where an out-of-order scheduler dispatches ready uOps into their respective execution units, and, once completed, these uOps get retired according to the program order. åç«¯çš„ä¹±åºæ‰§è¡Œï¼Œé¡ºåºReireæ¨¡å‹ã€‚</p>
<p>For example, stalls due to <strong>data-cache misses</strong> or stalls due to the <strong>divider unit(é™¤æ³•å™¨ï¼Ÿ) being overloaded</strong> are both categorized as Back-End Bound. Back-End Bound is further divided into two main categories: Memory Bound and Core Bound.</p>
<h3 id="Memory-Bound"><a href="#Memory-Bound" class="headerlink" title="Memory Bound"></a>Memory Bound</h3><p>This metric shows how memory subsystem issues affect the performance. Memory Bound measures a fraction of slots where pipeline could be stalled due to demand load or store instructions. This accounts mainly for incomplete in-flight memory demand loads that coincide with execution starvation in addition to less common cases where stores could imply back-pressure on the pipeline.</p>
<h3 id="Core-Bound"><a href="#Core-Bound" class="headerlink" title="Core Bound"></a>Core Bound</h3><p>This metric represents how much Core non-memory issues were of a bottleneck. è¡¨æ˜æ ¸å¿ƒçš„éå†…å­˜åŸå› æˆä¸ºäº†ç“¶é¢ˆ</p>
<ol>
<li>Shortage in hardware compute resources, ç¡¬ä»¶èµ„æºçš„çŸ­ç¼º</li>
<li>or dependencies softwareâ€™s instructions are both categorized under Core Bound. æŒ‡ä»¤é—´çš„ä¾èµ–</li>
</ol>
<p>Hence it may indicate</p>
<ol>
<li>the machine ran out of an OOO resources,</li>
<li>certain execution units are overloaded</li>
<li>or dependencies in programâ€™s data- or instruction- flow are limiting the performance (e.g. <strong>FP-chained long-latency arithmetic operations</strong>).</li>
</ol>
<h3 id="Bad-Speculation-åˆ†æ”¯é¢„æµ‹é”™è¯¯"><a href="#Bad-Speculation-åˆ†æ”¯é¢„æµ‹é”™è¯¯" class="headerlink" title="Bad Speculation(åˆ†æ”¯é¢„æµ‹é”™è¯¯)"></a>Bad Speculation(åˆ†æ”¯é¢„æµ‹é”™è¯¯)</h3><p>represents a Pipeline Slots fraction wasted due to incorrect speculations.</p>
<p>This includes slots used to issue uOps that do not eventually get retired and slots for which the issue-pipeline was blocked due to <strong>recovery</strong> from an earlier incorrect speculation.</p>
<p>For example, wasted work due to <strong>mispredicted branches</strong> is categorized as a Bad Speculation category. Incorrect data speculation followed by Memory Ordering Nukes is another example.</p>
<p>è¿™é‡Œçš„Nukes, çŒœæµ‹æ˜¯æ•°æ®é¢„å–é¢„æµ‹é”™è¯¯ï¼Œå¸¦æ¥çš„è®¿å­˜å½±å“åƒæ ¸çˆ†ä¸€æ ·å¤§å§.</p>
<h2 id="Memory-Bound-1"><a href="#Memory-Bound-1" class="headerlink" title="Memory Bound"></a>Memory Bound</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Memory Bound: 11.9% of Pipeline Slots</span><br><span class="line">    L1 Bound: 7.9%</span><br><span class="line">    L2 Bound: 0.2%</span><br><span class="line">    L3 Bound: 2.5%</span><br><span class="line">    DRAM Bound: 2.0%</span><br><span class="line">    Store Bound: 0.3%</span><br><span class="line">    NUMA: % of Remote Accesses: 13.2%</span><br></pre></td></tr></table></figure>

<p>This metric shows how memory subsystem issues affect the performance. Memory Bound measures a fraction of slots where pipeline could be stalled due to demand load or store instructions. è¯¥é¡¹è¡¨æ˜äº†æœ‰å¤šå°‘æµæ°´çº¿çš„slotså› ä¸ºloadæˆ–è€…storeæŒ‡ä»¤çš„éœ€æ±‚è€Œè¢«è¿«ç­‰å¾…</p>
<p>This accounts mainly for <strong>incomplete in-flight memory demand loads</strong> that coincide with execution starvation<br>è¿™æ˜¯æŒ‡ä¸è¿ç»­è®¿å­˜å—ï¼Ÿ</p>
<p>in addition to less common cases where stores could imply back-pressure on the pipeline.</p>
<h3 id="L1-Bound"><a href="#L1-Bound" class="headerlink" title="L1 Bound"></a>L1 Bound</h3><p>This metric shows how often machine was stalled without missing the L1 data cache.<br>åœ¨ä¸å‘ç”ŸL1 missçš„æƒ…å†µä¸‹ï¼ŒæŒ‡ä»¤stallçš„é¢‘ç‡ã€‚(å› ä¸ºå…¶ä»–åŸå› å¯¼è‡´stallï¼Ÿ)</p>
<p>The L1 cache typically has the shortest latency. However, in certain cases like loads blocked on older stores, a load might suffer a high latency even though it is being satisfied by the L1. å‡è®¾loadäº†ä¸€ä¸ªåˆšstoreçš„å€¼ï¼ŒloadæŒ‡ä»¤ä¹Ÿä¼šé‡åˆ°å¾ˆå¤§çš„å»¶è¿Ÿã€‚</p>
<h3 id="L2-Bound"><a href="#L2-Bound" class="headerlink" title="L2 Bound"></a>L2 Bound</h3><p>This metric shows how often machine was stalled on L2 cache. Avoiding cache misses (L1 misses&#x2F;L2 hits) will improve the latency and increase performance.</p>
<h3 id="L3-Bound"><a href="#L3-Bound" class="headerlink" title="L3 Bound"></a>L3 Bound</h3><p>This metric shows how often CPU was stalled on L3 cache, or contended with a sibling Core(ä¸å…„å¼Ÿå§å¦¹æ ¸ç«äº‰). Avoiding cache misses (L2 misses&#x2F;L3 hits) improves the latency and increases performance.</p>
<h3 id="DRAM-Bound"><a href="#DRAM-Bound" class="headerlink" title="DRAM Bound"></a>DRAM Bound</h3><p>This metric shows how often CPU was stalled on the main memory (DRAM). Caching typically improves the latency and increases performance.</p>
<h3 id="DRAM-Bandwidth-Bound"><a href="#DRAM-Bandwidth-Bound" class="headerlink" title="DRAM Bandwidth Bound"></a>DRAM Bandwidth Bound</h3><p>This metric represents percentage of elapsed time the system spent with high DRAM bandwidth utilization. Since this metric relies on the accurate peak system DRAM bandwidth measurement, explore the Bandwidth Utilization Histogram and make sure the Low&#x2F;Medium&#x2F;High utilization thresholds are correct for your system. You can manually adjust them, if required.</p>
<h3 id="Store-Bound"><a href="#Store-Bound" class="headerlink" title="Store Bound"></a>Store Bound</h3><p>This metric shows how often CPU was stalled on store operations. Even though memory store accesses do not typically stall out-of-order CPUs; there are few cases where stores can lead to actual stalls.</p>
<h3 id="NUMA-of-Remote-Accesses"><a href="#NUMA-of-Remote-Accesses" class="headerlink" title="NUMA: % of Remote Accesses"></a>NUMA: % of Remote Accesses</h3><p>In NUMA (non-uniform memory architecture) machines, memory requests missing LLC may be serviced either by local or remote DRAM. Memory requests to remote DRAM incur much greater latencies than those to local DRAM. It is recommended to keep as much frequently accessed data local as possible. This metric shows <strong>percent of remote accesses, the lower the better.</strong></p>
<p>å¯ä»¥ç”¨ä¹‹å‰çš„<br><img src="https://pic.shaojiemike.top/img/20220724194827.png"></p>
<h2 id="Vectorization"><a href="#Vectorization" class="headerlink" title="Vectorization"></a>Vectorization</h2><p>This metric represents the percentage of <strong>packed (vectorized) floating point operations</strong>. 0% means that the code is fully scalar. The metric does not take into account the actual vector length that was used by the code for vector instructions. So if the code is fully vectorized and uses a legacy instruction set that loaded only half a vector length, the Vectorization metric shows 100%.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Vectorization: 23.7% of Packed FP Operations</span><br><span class="line">    Instruction Mix: </span><br><span class="line">    SP FLOPs: 0.9%</span><br><span class="line">    Packed: 99.9%</span><br><span class="line">    128-bit: 0.1%</span><br><span class="line">    256-bit: 99.8%</span><br><span class="line">    512-bit: 0.0%</span><br><span class="line">    Scalar: 0.1%</span><br><span class="line">    DP FLOPs: 2.9%</span><br><span class="line">    Packed: 0.0%</span><br><span class="line">    Scalar: 100.0%</span><br><span class="line">    x87 FLOPs: 0.0%</span><br><span class="line">    Non-FP: 96.2%</span><br><span class="line">    FP Arith/Mem Rd Instr. Ratio: 0.091</span><br><span class="line">    FP Arith/Mem Wr Instr. Ratio: 0.308</span><br></pre></td></tr></table></figure>

<p>é’ˆå¯¹<code>Vectorization: 23.7%</code>çš„å»ºè®®</p>
<p>A significant fraction of floating point arithmetic instructions are scalar. Use <strong>Intel Advisor</strong> to see possible reasons why the code was not vectorized.</p>
<h3 id="SP-FLOPs"><a href="#SP-FLOPs" class="headerlink" title="SP FLOPs"></a>SP FLOPs</h3><p>The metric represents the percentage of single precision floating point operations from all operations executed by the applications. Use the metric for rough estimation of a SP FLOP fraction. If <strong>FMA vector instructions</strong> are used the metric may overcount.</p>
<h3 id="X87-FLOPs"><a href="#X87-FLOPs" class="headerlink" title="X87 FLOPs"></a>X87 FLOPs</h3><p>The metric represents the percentage of x87 floating point operations from all operations executed by the applications. Use the metric for rough estimation of an x87 fraction. If FMA vector instructions are used the metric may overcount.</p>
<p>X87æ˜¯X86ä½“ç³»ç»“æ„æŒ‡ä»¤é›†çš„<strong>æµ®ç‚¹ç›¸å…³å­é›†</strong>ã€‚ å®ƒèµ·æºäº8086æŒ‡ä»¤çš„æ‰©å±•ï¼Œä»¥å¯é€‰çš„æµ®ç‚¹åå¤„ç†å™¨çš„å½¢å¼ä¸ç›¸åº”çš„x86 cpusé…åˆä½¿ç”¨ã€‚ è¿™äº›å¾®èŠ¯ç‰‡çš„åç§°åœ¨â€œ 87â€ä¸­ç»“å°¾ã€‚</p>
<h3 id="FP-Arith-Mem-Rd-Instr-Ratio"><a href="#FP-Arith-Mem-Rd-Instr-Ratio" class="headerlink" title="FP Arith&#x2F;Mem Rd Instr. Ratio"></a>FP Arith&#x2F;Mem Rd Instr. Ratio</h3><p>This metric represents the ratio between arithmetic floating point instructions and memory write instructions. A value less than 0.5 indicates unaligned data access for vector operations, which can negatively impact the performance of vector instruction execution.</p>
<p>å°äº0.5çš„å€¼è¡¨ç¤ºå‘é‡æ“ä½œçš„æœªå¯¹é½æ•°æ®è®¿é—®ï¼Œè¿™å¯èƒ½ä¼šå¯¹çŸ¢é‡æŒ‡ä»¤æ‰§è¡Œçš„æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚</p>
<h2 id="Step2-Hotspots"><a href="#Step2-Hotspots" class="headerlink" title="Step2 : Hotspots"></a>Step2 : Hotspots</h2><p>User-Mode Samplingåªèƒ½é‡‡é›†å•æ ¸çš„æ•°æ®ï¼Œæ¥åˆ†æç®—æ³•çš„ä¼˜åŒ–ã€‚</p>
<p>Hardware Event-Based Samplingç¡¬ä»¶æ—¶é—´é‡‡é›†èƒ½é‡‡é›†å…¨éƒ¨æ ¸å¿ƒï¼Œä½†æ˜¯è¦å°‘äºå‡ ç§’é’Ÿï¼Ÿ</p>
<p>è¿™ä¸ªç¡¬ä»¶é‡‡é›†æ…¢ï¼Œè€Œä¸”åˆ°ä¸€åŠæŠ¥é”™äº†ï¼Œå‘ç”Ÿä»€ä¹ˆäº‹äº†ï¼Ÿ<img src="https://pic.shaojiemike.top/img/20220724201411.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220726222036.png"></p>
<p>ç½‘ä¸Šè¯´æ˜¯rootæƒé™çš„åŸå› ,ä½†æ˜¯æˆ‘æ˜¯ç”¨rootè¿è¡Œçš„</p>
<p>åè€Œç”¨æ™®é€šç”¨æˆ·èƒ½æ­£å¸¸è·‘Hardware Event-Based Samplingå’Œå¾®æ¶æ„åˆ†æ<br><img src="https://pic.shaojiemike.top/img/20220728204538.png"></p>
<h2 id="example"><a href="#example" class="headerlink" title="example"></a>example</h2><p><img src="https://pic.shaojiemike.top/img/20220724202614.png"><br><img src="https://pic.shaojiemike.top/img/20220724204414.png"></p>
<p>æ‰‹åŠ¨å‘é‡åŒ–è¯¥åŒºåŸŸã€‚</p>
<p>æ ¸å¿ƒæ—¶é—´æ˜¯ $k*n^2$ æ¬¡ç»å¯¹å€¼å’Œï¼Œå–æœ€å¤§å€¼</p>
<p>ä¼˜åŒ–æ€è·¯ï¼š</p>
<ol>
<li><p>æ‰‹åŠ¨å‘é‡åŒ–ï¼ˆå‡è®¾ä¸€æ¬¡å¤„ç†pä¸ªï¼‰</p>
<p> ç¬¬ä¸€ä¸ªnå±‚å–å‡º kä¸ª <code>rebuilt[i*k+ki]</code> é‡å¤è¯»å–åˆ°å‘é‡å¯„å­˜å™¨é‡Œï¼Œ</p>
<p> ç¬¬äºŒä¸ªnå±‚å–å‡ºk ä¸ª è¿ç»­çš„pä¸ªï¼Œåˆ°å‘é‡å¯„å­˜å™¨é‡Œã€‚æœ€åä¸è¶³è¡¥0ç‰¹æ®Šå¤„ç†ï¼Œä½†æ˜¯ä¸€èˆ¬néƒ½æ˜¯4çš„å€æ•°ï¼Œå¯èƒ½å¯ä»¥ä¸å¤„ç†ã€‚8å°±è¦å¤„ç†äº†ã€‚</p>
<p> åšå‘é‡fabsçš„ç»“æœç¼“å­˜åœ¨kä¸ªå‘é‡å¯„å­˜å™¨é‡Œã€‚</p>
<p> å†å¯¹è¿™ä¸ªkä¸ªå‘é‡å¯„å­˜å™¨åšæ¨ªå‘çš„å‘é‡æœ€å¤§å€¼æ“ä½œåˆ°ä¸€ä¸ªå‘é‡å¯„å­˜å™¨ã€‚ä¸è¶³çš„è¡¥0(å–æœ€å¤§å€¼ä¸å½±å“)</p>
<p> æœ€åè¿™ä¸€ä¸ªå‘é‡å¯„å­˜å™¨åšå¯„å­˜å™¨å†…æ±‚å’Œï¼Œå†åŠ åˆ° <code>chebyshevSum</code> é‡Œ.</p>
<p> è¿™æ ·å°±å®ç°äº†pä¸ªå…ƒç´ çš„å‘é‡æ“ä½œã€‚è¿™æ ·ä¸€è¶Ÿå…±éœ€è¦3*kä¸ªå‘é‡å¯„å­˜å™¨ã€‚</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/dongzhiquan/p/3694858.html">æ‰‹åŠ¨æ•°æ®é¢„å–</a></p>
<ol>
<li><code>__builtin_prefetch()</code></li>
</ol>
</li>
<li><p>æ‰‹åŠ¨å¾ªç¯å±•å¼€å½¢æˆè®¡ç®—è®¿å­˜æµæ°´</p>
<ol>
<li>æ€ä¹ˆæ ¹æ®è¾“å…¥æ¥è§„æ¨¡æ¥å±•å¼€ï¼Ÿ</li>
</ol>
</li>
<li><p>åˆ†å—</p>
</li>
</ol>
<h3 id="è®¿å­˜åˆ†æ"><a href="#è®¿å­˜åˆ†æ" class="headerlink" title="è®¿å­˜åˆ†æ"></a>è®¿å­˜åˆ†æ</h3><h2 id="githubå¯¹åº”é¡¹ç›®ä¸èµ›é¢˜"><a href="#githubå¯¹åº”é¡¹ç›®ä¸èµ›é¢˜" class="headerlink" title="githubå¯¹åº”é¡¹ç›®ä¸èµ›é¢˜"></a>githubå¯¹åº”é¡¹ç›®ä¸èµ›é¢˜</h2><h2 id="HPL-PL"><a href="#HPL-PL" class="headerlink" title="HPL-PL"></a>HPL-PL</h2><h3 id="å¤ç°æœºå™¨"><a href="#å¤ç°æœºå™¨" class="headerlink" title="å¤ç°æœºå™¨"></a>å¤ç°æœºå™¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ lscpu</span><br><span class="line">Architecture:                    x86_64</span><br><span class="line">CPU op-mode(s):                  32-bit, 64-bit</span><br><span class="line">Byte Order:                      Little Endian</span><br><span class="line">Address sizes:                   46 bits physical, 48 bits virtual</span><br><span class="line">CPU(s):                          36</span><br><span class="line">On-line CPU(s) list:             0-35</span><br><span class="line">Thread(s) per core:              1</span><br><span class="line">Core(s) per socket:              18</span><br><span class="line">Socket(s):                       2</span><br><span class="line">NUMA node(s):                    2</span><br><span class="line">Vendor ID:                       GenuineIntel</span><br><span class="line">CPU family:                      6</span><br><span class="line">Model:                           79</span><br><span class="line">Model name:                      Intel(R) Xeon(R) CPU E5-2695 v4 @ 2.10GHz</span><br><span class="line">Stepping:                        1</span><br><span class="line">CPU MHz:                         1296.157</span><br><span class="line">CPU max MHz:                     3300.0000</span><br><span class="line">CPU min MHz:                     1200.0000</span><br><span class="line">BogoMIPS:                        4199.98</span><br><span class="line">Virtualization:                  VT-x</span><br><span class="line">L1d cache:                       1.1 MiB</span><br><span class="line">L1i cache:                       1.1 MiB</span><br><span class="line">L2 cache:                        9 MiB</span><br><span class="line">L3 cache:                        90 MiB</span><br></pre></td></tr></table></figure>

<h3 id="baseline"><a href="#baseline" class="headerlink" title="baseline"></a>baseline</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ gcc --version</span><br><span class="line">gcc (Ubuntu 9.4.0-1ubuntu1~20.04.1) 9.4.0</span><br><span class="line">$ gcc -std=c11 conway.c -o Conway</span><br><span class="line">$ ./Conway</span><br><span class="line">â€¦â€¦</span><br><span class="line">Iter 997...</span><br><span class="line">Iter 998...</span><br><span class="line">Iter 999...</span><br><span class="line">136527.433000 ms</span><br></pre></td></tr></table></figure>

<h3 id="ä¼˜åŒ–æ­¥éª¤"><a href="#ä¼˜åŒ–æ­¥éª¤" class="headerlink" title="ä¼˜åŒ–æ­¥éª¤"></a>ä¼˜åŒ–æ­¥éª¤</h3><p>ç”±äºO3å’Œå¹¶è¡Œä¼šå¯¼è‡´çƒ­ç‚¹ä»£ç ä¸å¯è¯»</p>
<p>åœ¨å¯è¿­ä»£ä¼˜åŒ–çš„ä¾‹å­ä¸‹ï¼Œæ ¹æ®vtuneæœ€å¤§åŒ–å•æ ¸æ€§èƒ½ã€‚</p>
<p>å¾ˆæ˜æ˜¾ä¸æ˜¯è®¡ç®—å¯†é›†çš„åº”ç”¨ï¼Œæ€ä¹ˆå½¢æˆæµæ°´æœ€å¤§åŒ–å¸¦å®½åˆ©ç”¨ï¼Œåˆ’åˆ†<strong>é‡å¤åˆ©ç”¨å…ƒç´ </strong>æé«˜Cacheå‘½ä¸­ç‡æ˜¯é‡ç‚¹(å‘é‡åŒ–å¯¹è®¡ç®—åŠ é€Ÿæ˜æ˜¾)</p>
<p><img src="https://pic.shaojiemike.top/img/20221202184317.png"><br><img src="https://pic.shaojiemike.top/img/20221202184438.png"></p>
<ol>
<li>æ›¿æ¢if <code>tmp[i][j] = (!(cnt^3))||((a[i][j]&amp;1)&amp;&amp;(!(cnt^4)));</code></li>
<li>å»é™¤ä¸­é—´ä¸å¿…è¦çš„æ‹·è´</li>
<li>int å˜ char</li>
<li><strong>OMP_PROC_BIND&#x3D;true</strong> ç»‘å®šçº¿ç¨‹åˆ°å¯¹åº”localå¤„ç†å™¨å’Œå¯¹åº”localå†…å­˜</li>
</ol>
<h2 id="éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ "><a href="#éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ " class="headerlink" title="éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ "></a>éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ </h2><p>æš‚æ— </p>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>æš‚æ— </p>
<h2 id="å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½"><a href="#å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½" class="headerlink" title="å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½~~"></a>å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½~~</h2><ol>
<li>å®éªŒå®¤åŒå­¦é»„ä¸šç¦å‚åŠ äº†HPC-PLå…¨æ˜æ˜Ÿã€‚æƒ³å¤ç°ä¸€ä¸‹æ•ˆæœ</li>
<li>ä¹‹å‰Nvidia Nsightç”¨å¾—å¾ˆçˆ½ï¼Œ æƒ³åˆ°vtuneçš„è®¿å­˜ä¼˜åŒ–éƒ¨åˆ†å’Œæ±‡ç¼–å¯¹åº”çš„åˆ†æï¼Œä½¿ç”¨çš„å¾ˆå°‘ã€‚æƒ³ä»æé«˜è®¡ç®—æµæ°´å’Œè®¿å­˜è¿ç»­æµæ°´çš„è§’åº¦ç»“åˆvtuneä¼˜åŒ–ã€‚</li>
</ol>
<h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><div id='refer-anchor'></div>
æ— 
</div><div class="article-licensing box"><div class="licensing-title"><p>VtuneOptimize</p><p><a href="http://icarus.shaojiemike.top/2023/07/14/Work/software/perf/vtuneOptimize/">http://icarus.shaojiemike.top/2023/07/14/Work/software/perf/vtuneOptimize/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Shaojie Tan</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2023-07-14</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2023-12-05</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/ipcc/">ipcc</a><a class="link-muted mr-2" rel="tag" href="/tags/vtune/">vtune</a><a class="link-muted mr-2" rel="tag" href="/tags/HPL-PL/">HPL-PL</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>Afdian.net</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/" alt="Alipay"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2023/07/14/Work/software/perf/NUMAperf/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">NUMA perf</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2023/07/03/OutOfWork/4-devices/nas/NAS/"><span class="level-item">NAS configuration</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">ğ˜Šğ˜°ğ˜®ğ˜±ğ˜¶ğ˜µğ˜¦ğ˜³ ğ˜ˆğ˜³ğ˜¤ğ˜©ğ˜ªğ˜µğ˜¦ğ˜¤ğ˜µğ˜¶ğ˜³ğ˜¦ &amp; ğ˜ğ˜—ğ˜Š</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">358</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">29</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">476</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">118</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">51</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-03T09:31:21.000Z">2023-12-03</time></p><p class="title"><a href="/2023/12/03/OutOfWork/3-homepage/deployment/webDesign4customizeMarkdownGrammarInSSG/">Web Design 4 : Customize Markdown Grammar In SSG</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-30T21:48:21.000Z">2023-11-30</time></p><p class="title"><a href="/2023/11/30/OutOfWork/3-homepage/deployment/webDesign3FutureFeatures/">Web Design 3 : Future Features</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-30T21:47:20.000Z">2023-11-30</time></p><p class="title"><a href="/2023/11/30/OutOfWork/3-homepage/deployment/webDesign2LinkContent/">Web Design 2 : Content Organization &amp; Link Content using go template</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-29T07:35:21.000Z">2023-11-29</time></p><p class="title"><a href="/2023/11/29/OutOfWork/3-homepage/deployment/webDesign1LayoutOverview/">Web Design 1 : Layout Overview</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-29T02:54:24.000Z">2023-11-29</time></p><p class="title"><a href="/2023/11/29/Work/Programming/2-languageGrammar/GoTemplates/">Go Templates</a></p><p class="categories"><a href="/categories/toLearn/">toLearn</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">219</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">67</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">72</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2023 Shaojie Tan</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">Â© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>