<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Cache - SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="!!! abstract â€œå¯¼è¨€â€ Cache is to reduce latency"><meta property="og:type" content="blog"><meta property="og:title" content="Cache"><meta property="og:url" content="http://icarus.shaojiemike.top/2023/07/26/Work/Architecture/microHardware/cache/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:description" content="!!! abstract â€œå¯¼è¨€â€ Cache is to reduce latency"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://pic.shaojiemike.top/img/1212111.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211209204150.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211209204831.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20221122170254.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20230727110320.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20221122170944.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20221122171207.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20221122171154.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220319203936.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20221122170254.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211120095544.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211120095608.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211120100532.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211120101538.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20221114181529.png"><meta property="article:published_time" content="2023-07-26T16:00:00.000Z"><meta property="article:modified_time" content="2024-01-28T09:08:03.865Z"><meta property="article:author" content="Shaojie Tan"><meta property="article:tag" content="incomplete"><meta property="article:tag" content="cache"><meta property="article:tag" content="prefetch"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://pic.shaojiemike.top/img/1212111.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top/2023/07/26/Work/Architecture/microHardware/cache/"},"headline":"Cache","image":["https://pic.shaojiemike.top/img/1212111.png","https://pic.shaojiemike.top/img/20211209204150.png","https://pic.shaojiemike.top/img/20211209204831.png","https://pic.shaojiemike.top/img/20221122170254.png","https://pic.shaojiemike.top/img/20230727110320.png","https://pic.shaojiemike.top/img/20221122170944.png","https://pic.shaojiemike.top/img/20221122171207.png","https://pic.shaojiemike.top/img/20221122171154.png","https://pic.shaojiemike.top/img/20220319203936.png","https://pic.shaojiemike.top/img/20221122170254.png","https://pic.shaojiemike.top/img/20211120095544.png","https://pic.shaojiemike.top/img/20211120095608.png","https://pic.shaojiemike.top/img/20211120100532.png","https://pic.shaojiemike.top/img/20211120101538.png","https://pic.shaojiemike.top/img/20221114181529.png"],"datePublished":"2023-07-26T16:00:00.000Z","dateModified":"2024-01-28T09:08:03.865Z","author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":"!!! abstract â€œå¯¼è¨€â€ Cache is to reduce latency"}</script><link rel="canonical" href="http://icarus.shaojiemike.top/2023/07/26/Work/Architecture/microHardware/cache/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-07-26T16:00:00.000Z" title="7/26/2023, 4:00:00 PM">2023-07-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-01-28T09:08:03.865Z" title="1/28/2024, 9:08:03 AM">2024-01-28</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">37 minutes read (About 5557 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">Cache</h1><div class="content"><p>!!! abstract â€œå¯¼è¨€â€</p>
<pre><code>Cache is to reduce latency
</code></pre>
<span id="more"></span>

<p>??? failure â€œExcellent Video Resourceâ€</p>
<pre><code>We&#39;re still on the lookout for an exceptional blog or overview paper to complement our understanding of this topic. Stay tuned for updates!
</code></pre>
<p>??? success â€œOutstanding Blog or Overview Paperâ€</p>
<pre><code>[çŸ¥ä¹](https://zhuanlan.zhihu.com/p/384874383) è¿˜æ˜¯çŸ¥ä¹[^5]
</code></pre>
<h2 id="å†å²"><a href="#å†å²" class="headerlink" title="å†å²"></a>å†å²</h2><p>è‡ª1970så®ƒä»¬çš„è¯ç”Ÿä»¥æ¥ï¼ŒåŸºäºå¾®å¤„ç†å™¨çš„æ•°å­—å¹³å°ä¸€ç›´éµå¾ªç€æ‘©å°”å®šå¾‹ï¼Œå³åœ¨ç›¸åŒé¢ç§¯ä¸Šï¼Œå¤§çº¦æ¯ä¸¤å¹´å¯†åº¦å°±ç¿»ä¸€ç•ªã€‚ç„¶è€Œï¼Œå¾®å¤„ç†å™¨å’Œå­˜å‚¨å™¨åˆ¶é€ æŠ€æœ¯ä¸€ç›´åœ¨ä»¥ä¸¤ç§æˆªç„¶ç›¸åçš„æ–¹å¼åˆ©ç”¨è¿™ç§å¯†åº¦çš„å¢åŠ ã€‚å¾®å¤„ç†å™¨çš„åˆ¶é€ æŠ€æœ¯ä¸“æ³¨äºæé«˜æŒ‡ä»¤çš„æ‰§è¡Œé€Ÿåº¦ï¼Œè€Œå­˜å‚¨å™¨çš„åˆ¶é€ æŠ€æœ¯åˆ™ä¸»è¦å…³æ³¨å®¹é‡çš„æé«˜ï¼Œé€Ÿåº¦çš„å¢åŠ å¯å¿½ç•¥ä¸è®¡ã€‚è¿™ç§å¤„ç†å™¨å’Œå†…å­˜é—´çš„æ€§èƒ½å·®å¼‚è¶‹åŠ¿å¯¼è‡´äº†ä¸€ç§è¢«ç§°ä¸º<strong>â€œå­˜å‚¨å¢™â€</strong>çš„ç°è±¡<a href="%5B%E7%9F%A5%E4%B9%8E%5D(https://zhuanlan.zhihu.com/p/31875174)">^6</a>ã€‚</p>
<p>ä¸ºå…‹æœå­˜å‚¨å¢™ï¼Œè®¾è®¡è€…ä»¬å¼•å…¥äº†å¸¦æœ‰<strong>ç¼“å­˜</strong>ï¼ˆcacheï¼‰çš„å­˜å‚¨å™¨ä½“ç³»å±‚æ¬¡ï¼ˆmemory hierarchyï¼‰ï¼Œæ¯å±‚çš„å»¶è¿Ÿä¸å®¹é‡éƒ½ç»è¿‡äº†æƒè¡¡ã€‚ç¼“å­˜åŸºäºå†…å­˜è®¿é—®çš„å±€åŸŸæ€§åŸç†æ¥ç¼“è§£å¤„ç†å™¨ä¸å†…å­˜é—´çš„æ€§èƒ½å·®è·ã€‚ä½†ä¸å¹¸çš„æ˜¯ï¼Œå­˜åœ¨è®¸å¤šé‡è¦çš„å·¥ä½œè´Ÿè½½ä¼šè¡¨ç°å‡ºä¸åˆ©çš„å†…å­˜è®¿é—®æ¨¡å¼ã€‚è¿™äº›æ¨¡å¼ä¼šéš¾ä½ç°ä»£é«˜é€Ÿç¼“å­˜å±‚æ¬¡ç»“æ„ä¸­çš„ç®€å•æ›´æ–°ç­–ç•¥ï¼ˆè¿™äº›ç­–ç•¥è§„å®šäº†æŒ‡ä»¤å’Œæ•°æ®åœ¨ç¼“å­˜å±‚æ¬¡é—´ç§»åŠ¨çš„è§„åˆ™ï¼‰ã€‚å› æ­¤ï¼Œå¯¹äºåœ¨è¾ƒé«˜å±‚ç¼“å­˜ï¼ˆL1ã€L2ï¼‰ä¸­ä¸å­˜åœ¨çš„å†…å­˜å—ï¼Œå¤„ç†å™¨å¾€å¾€éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´è·å–å®ƒä»¬ã€‚</p>
<p><strong>é¢„å–ï¼ˆprefetching</strong>ï¼‰â€”â€”é¢„æµ‹æœªæ¥çš„å†…å­˜è®¿é—®ï¼Œå¹¶åœ¨å¤„ç†å™¨æ˜¾å¼è®¿é—®å‰å¯¹å°±ç›¸åº”å†…å­˜å—å‘å‡ºè¯·æ±‚ã€‚â€”â€”å…¶ä½œä¸ºä¸€ç§éšè—å†…å­˜è®¿é—®å»¶è¿Ÿçš„æ–¹æ³•æ˜¯éå¸¸å…·æœ‰å‰é€”çš„ã€‚å·²ç»å­˜åœ¨äº†å¤§é‡ç”¨äºé¢„æœŸçš„è½¯ç¡¬ä»¶æ–¹æ³•ã€‚<strong>è®¸å¤šé’ˆå¯¹ç®€å•å­˜å–æ¨¡å¼çš„ç¡¬ä»¶é¢„å–æœºåˆ¶å·²è¢«çº³å…¥ç°ä»£å¾®å¤„ç†å™¨ä¸­ï¼Œä»¥é¢„å–æŒ‡ä»¤ä¸æ•°æ®</strong>ã€‚</p>
<h2 id="cacheç¼“å­˜åŸç†"><a href="#cacheç¼“å­˜åŸç†" class="headerlink" title="cacheç¼“å­˜åŸç†"></a>cacheç¼“å­˜åŸç†</h2><p>Cortex-A53æ¶æ„ä¸Šå„çº§cacheä¹‹é—´çš„ç¡¬ä»¶æŠ½è±¡æ¡†å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://pic.shaojiemike.top/img/1212111.png">{ width&#x3D;70% }</p>
<p><img src="https://pic.shaojiemike.top/img/20211209204150.png"></p>
<h2 id="æ¯ä¸ªæœºå™¨å¯¹åº”çš„å­˜å‚¨å™¨å±±"><a href="#æ¯ä¸ªæœºå™¨å¯¹åº”çš„å­˜å‚¨å™¨å±±" class="headerlink" title="æ¯ä¸ªæœºå™¨å¯¹åº”çš„å­˜å‚¨å™¨å±±"></a>æ¯ä¸ªæœºå™¨å¯¹åº”çš„å­˜å‚¨å™¨å±±</h2><p><img src="https://pic.shaojiemike.top/img/20211209204831.png">{ width&#x3D;70% }</p>
<p>strideæ­¥é•¿æ„æ€æ˜¯ï¼Œç›¸é‚»è®¿é—®æ•°æ®ä¹‹é—´çš„é—´éš”ï¼Œè¶Šå¤§ç©ºé—´å±€éƒ¨æ€§ä¸å¥½ã€‚</p>
<h2 id="ç¼“å­˜çš„ç»“æ„"><a href="#ç¼“å­˜çš„ç»“æ„" class="headerlink" title="ç¼“å­˜çš„ç»“æ„"></a>ç¼“å­˜çš„ç»“æ„</h2><h3 id="æ•´ä½“é€»è¾‘"><a href="#æ•´ä½“é€»è¾‘" class="headerlink" title="æ•´ä½“é€»è¾‘"></a>æ•´ä½“é€»è¾‘</h3><p><img src="https://pic.shaojiemike.top/img/20221122170254.png"></p>
<ul>
<li>æ ‡è®° tag </li>
<li>ç»„ç´¢å¼• index(Index corresponds to bits used to determine the set of the Cache.)</li>
<li>åç§» offset</li>
</ul>
<p>??? example â€œcalculationâ€</p>
<pre><code>![](https://pic.shaojiemike.top/img/20211120101238.png)
</code></pre>
<h3 id="ç¼“å­˜çš„å†…å®¹"><a href="#ç¼“å­˜çš„å†…å®¹" class="headerlink" title="ç¼“å­˜çš„å†…å®¹"></a>ç¼“å­˜çš„å†…å®¹</h3><p>Skylakeæ¶æ„ï¼šå¯ä»¥<a target="_blank" rel="noopener" href="http://www.cs.fsu.edu/~zwang/files/cda3101/Fall2017/Lecture12_cda3101.pdf">è¿›ä¸€æ­¥é˜…è¯»</a></p>
<p><img src="https://pic.shaojiemike.top/img/20230727110320.png"></p>
<ul>
<li><strong>Physically indexed, physically tagged (PIPT)</strong> caches use the physical address for both the index and the tag.<ul>
<li>Simple to implement but slow, as the physical address must be looked up (which could involve a TLB miss and access to main memory) before that address can be looked up in the cache.</li>
</ul>
</li>
<li><strong>Virtually indexed, virtually tagged (VIVT)</strong> caches use the virtual address for both the index and the tag.<ul>
<li>Potentially much faster lookups.</li>
<li>Problems when several different virtual addresses may refer to the same physical addressï¼ˆåˆ«å Aliasï¼‰ â€“ addresses would be cached separately despite referring to the same memory, causing coherency problems.</li>
<li>Additionally, there is a problem that virtual-to-physical mappings can changeï¼ˆæ¯”å¦‚ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶ï¼‰, which would require clearing cache blocks.</li>
</ul>
</li>
<li><strong>Virtually indexed, physically tagged (VIPT)</strong> caches use the virtual address for the index and the physical address in the tag.<ul>
<li>To perform indexing with VA, virtual index bits should be same as physical index bits<br>and this happens when index is taken from page offset</li>
<li>cache associativity should be greaterï¼ˆæœ‰å…¶ä»–çš„æ ‡å¿—ä½ï¼‰ than or equal to cache size divided by page size.For example, with 32KB L1 cache and 4KB page, associativity should be at least 8. This,however, increases cache energy consumption but may not provide corresponding miss rate reduction.</li>
<li><a target="_blank" rel="noopener" href="https://developer.arm.com/documentation/ddi0344/k/programmers-model/addresses-in-a-processor-system">Cortex-A8 è®¾è®¡</a>ï¼šL1 cache is virtual index physical tag. L2 cache is physical address physical tag.<ul>
<li>æŸ¥æ‰¾é€Ÿåº¦å¿«ï¼šä½¿ç”¨virtual page offset æ¥indexç´¢å¼•ä¸ physical tagçš„ç¿»è¯‘èƒ½å¹¶è¡Œã€‚æ‰€ä»¥èƒ½æ¯”PIPTå¿«ï¼Œ</li>
<li>è§£å†³åˆ«åé—®é¢˜:ä½¿ç”¨ç‰©ç†åœ°å€ä½œä¸ºtag,å¯ä»¥å”¯ä¸€æ ‡è¯†ç¼“å­˜è¡Œ,é¿å…äº†VIVTä¸­çš„åˆ«åé—®é¢˜ã€‚</li>
<li>ç¼ºç‚¹ï¼šLimitation is that one size of a VIPT cache can be no larger than the page size</li>
</ul>
</li>
<li>Intel L1 also VIPT[^1]</li>
</ul>
</li>
</ul>
<p>More about paging [^5]</p>
<p>TLBçš„æ·±å…¥ç ”ç©¶å¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://www.researchgate.net/publication/309583874_A_Survey_of_Techniques_for_Architecting_TLBs">2017 A_Survey_of_Techniques_for_Architecting_TLBs</a></p>
<h3 id="æ˜ å°„ç­–ç•¥ï¼šç›´æ¥æ˜ å°„-vs-Nè·¯ç»„ç›¸è”-vs-å…¨ç›¸è”-2"><a href="#æ˜ å°„ç­–ç•¥ï¼šç›´æ¥æ˜ å°„-vs-Nè·¯ç»„ç›¸è”-vs-å…¨ç›¸è”-2" class="headerlink" title="æ˜ å°„ç­–ç•¥ï¼šç›´æ¥æ˜ å°„ vs Nè·¯ç»„ç›¸è” vs å…¨ç›¸è”^2"></a>æ˜ å°„ç­–ç•¥ï¼šç›´æ¥æ˜ å°„ vs Nè·¯ç»„ç›¸è” vs å…¨ç›¸è”<a target="_blank" rel="noopener" href="https://shaojiemike.notion.site/CSAPP-6-62b5d68fadc54142b306d8c7a1d8e1d7">^2</a></h3><p><img src="https://pic.shaojiemike.top/img/20221122170944.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20221122171207.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20221122171154.png"></p>
<h4 id="ä¸‰è€…çš„æ¯”è¾ƒ-è®¿é—®æ­¥éª¤ç»†èŠ‚"><a href="#ä¸‰è€…çš„æ¯”è¾ƒ-è®¿é—®æ­¥éª¤ç»†èŠ‚" class="headerlink" title="ä¸‰è€…çš„æ¯”è¾ƒ &amp; è®¿é—®æ­¥éª¤ç»†èŠ‚"></a>ä¸‰è€…çš„æ¯”è¾ƒ &amp; è®¿é—®æ­¥éª¤ç»†èŠ‚</h4><p>Set-associative caches offer lower <strong>miss rates</strong> than direct-mapped caches, but usually have a longer access <strong>time</strong>(tag comparator)(1).<br>{ .annotate }</p>
<ol>
<li>the access time for a two-way associative cache is 51%,46% and 40% times longer than the access time for a direct mapped cache for 8KB, 16KB and 32KB caches, respectively[^4]</li>
</ol>
<p>The <strong>energy</strong> consumption of set-associative cache tends to be higher than that of direct-mapped cache, because all the ways in a set are accessed in parallel although at most only one way has the desired data.</p>
<figure markdown>
  ![](https://pic.shaojiemike.top/shaojiemike/2024/01/1dec7b2a478b8b1aa3c3e2d7e1c453a4.png)
  <figcaption>ç›´æ¥æ˜ å°„</figcaption>
</figure>

<figure markdown>
  ![](https://pic.shaojiemike.top/shaojiemike/2024/01/2555953ecbf0356d6662c5eb76ca8b38.png)
  <figcaption>ç»„ç›¸è”tag/dataä¸€ä½“</figcaption>
</figure>

<p>!!! note â€œç»„ç›¸è”tag&#x2F;dataåˆ†å¼€æƒ…å†µï¼šå¹¶è¡Œå’Œä¸²è¡Œtagæ¯”è¾ƒå®ç°çš„ä¼˜åŠ£â€</p>
<pre><code>çœŸå®åœºæ™¯ä¸­ç»„ç›¸è”cacheçš„tagå’Œdataå¾€å¾€è¢«åˆ†å¼€å­˜å‚¨ï¼Œå› ä¸ºåˆ†å¼€å­˜å‚¨ï¼Œç»„ç›¸è”å®ç°ç”µè·¯åˆ†åŒ–æˆäº†å¹¶è¡Œå’Œä¸²è¡Œå®ç°æ–¹å¼ã€‚[^8]

&lt;figure markdown&gt;
![](https://pic.shaojiemike.top/shaojiemike/2024/01/e4cc170b52a96cf94aae53348c7ac09e.png)
&lt;figcaption&gt;ç»„ç›¸è”å¹¶è¡Œ&lt;/figcaption&gt;
&lt;/figure&gt;

1. indexåŒæ—¶é€åˆ°`tag ram`å’Œ`data ram`ï¼ŒåŒæ—¶è¯‘ç ï¼ŒåŒæ—¶è¯»å–tagå’Œdataï¼Œ
2. å¹¶æ ¹æ®tagæ¯”è¾ƒçš„ç»“æœæ¥é€‰æ‹©ä¸€ç»„dataè¿›è¡Œè¾“å‡ºï¼Œå…¶ä¸­`aligner`æ˜¯å­—èŠ‚é€‰æ‹©å™¨ã€‚

&lt;figure markdown&gt;
![](https://pic.shaojiemike.top/shaojiemike/2024/01/ae6f7ce6730426cc4ab2cf73b3e1ae30.png)
&lt;figcaption&gt;ç»„ç›¸è”ä¸²è¡Œ&lt;/figcaption&gt;
&lt;/figure&gt;

é¦–å…ˆtagå¹¶è¡Œæ¯”è¾ƒï¼Œç„¶åæ‰é€‰ä¸­æŸä¸€cache lineçš„æ•°æ®ã€‚

1. å¹¶è¡Œå®ç°å› ä¸ºæ¯”ä¸²è¡Œå¤šä¸€ä¸ªå¤šè·¯é€‰æ‹©å™¨ï¼Œå·¥ä½œæ—¶é—´ä¼šå˜é•¿ï¼Œå¯¹åº”çš„**æ—¶é’Ÿé¢‘ç‡ä¼šä¸‹é™**ï¼Œè€Œä¸”æ¯æ¬¡åŒæ—¶é€‰ä¸­å¤šä¸ªcache lineï¼Œ**åŠŸè€—è¾ƒå¤§**ï¼›
2. ä¸²è¡Œå®ç°åœ¨ç”¨æµæ°´çº¿æ¥å®ç°cacheæ—¶ä¼šæ˜æ˜¾å¢åŠ æ‰€éœ€**æ—¶é’Ÿå‘¨æœŸæ•°**ï¼ˆå¤šä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸï¼‰ã€‚
</code></pre>
<p>å› ä¸ºé«˜é€Ÿç¼“å­˜ç”µè·¯å¿…é¡»å¹¶è¡Œåœ°æœç´¢è®¸å¤šç›¸åŒ¹é…çš„æ ‡è®°ï¼Œæ„é€ ä¸€ä¸ªåˆå¤§åˆå¿«çš„å…¨ç›¸è”é«˜é€Ÿç¼“å­˜å¾ˆ<strong>å›°éš¾</strong>ï¼Œè€Œä¸”<strong>å¾ˆæ˜‚è´µ</strong>ã€‚å› æ­¤ï¼Œå…¨ç›¸è”é«˜é€Ÿç¼“å­˜åªé€‚åˆ<strong>åšå°</strong>çš„é«˜é€Ÿç¼“å­˜ï¼Œä¾‹å¦‚è™šæ‹Ÿå†…å­˜ç³»ç»Ÿä¸­çš„ç¿»è¯‘å¤‡ç”¨ç¼“å†²å™¨(TIB),å®ƒç¼“å­˜é¡µè¡¨é¡¹ã€‚</p>
<figure markdown>
  ![](https://pic.shaojiemike.top/shaojiemike/2024/01/c21a533157428a87835b33c4cc5d430b.png)
  <figcaption>å…¨ç›¸è”</figcaption>
</figure>

<h3 id="æ›¿æ¢ç­–ç•¥-Cache-placement-policies"><a href="#æ›¿æ¢ç­–ç•¥-Cache-placement-policies" class="headerlink" title="æ›¿æ¢ç­–ç•¥ Cache placement policies"></a>æ›¿æ¢ç­–ç•¥ Cache placement policies</h3><ol>
<li>LRU(Least Recently Used)</li>
<li>LFU(Least Frequently Used)</li>
<li>Advanced policies<ol>
<li>RRIP[^7]</li>
</ol>
</li>
</ol>
<h2 id="ç¼“å­˜æ•°æ®ç­–ç•¥ï¼šå†™å›å’Œå†™ç›´è¾¾"><a href="#ç¼“å­˜æ•°æ®ç­–ç•¥ï¼šå†™å›å’Œå†™ç›´è¾¾" class="headerlink" title="ç¼“å­˜æ•°æ®ç­–ç•¥ï¼šå†™å›å’Œå†™ç›´è¾¾"></a>ç¼“å­˜æ•°æ®ç­–ç•¥ï¼šå†™å›å’Œå†™ç›´è¾¾</h2><h3 id="RMW-cycle"><a href="#RMW-cycle" class="headerlink" title="RMW cycle"></a>RMW cycle</h3><p>å†™æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœæ•°æ®ä¸åœ¨cacheé‡Œï¼Œéœ€è¦Read-Modify-Writeï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšRMW cycleã€‚</p>
<h3 id="Write-Back-vs-Write-Through"><a href="#Write-Back-vs-Write-Through" class="headerlink" title="Write-Back vs Write-Through"></a>Write-Back vs Write-Through</h3><p>å†™ç›´è¾¾æœ‰ä¸ª<a target="_blank" rel="noopener" href="https://cs.stackexchange.com/questions/9221/does-the-write-through-cache-copies-the-whole-block-or-just-the-byte-which-is-up">é—®é¢˜</a>ï¼Œåˆ°åº•æ˜¯å†™ä¿®æ”¹çš„æ•°æ®ï¼Œè¿˜æ˜¯å†™æ•´ä¸ªcache lineï¼Ÿ</p>
<p>æ¥è‡ªç¾å›½ä¸œåŒ—å¤§å­¦çš„ç½‘å€ï¼Œç»“è®ºæ˜¯å†™æ•´ä¸ªcache lineã€‚</p>
<p><a target="_blank" rel="noopener" href="https://course.ccs.neu.edu/com3200/parent/NOTES/cache-basics.html">A write-through cache writes a <strong>cache block</strong> back immediately after the CPU write to the cache block.</a></p>
<p>A write-back cache writes the cache block back later.</p>
<h2 id="å¤šæ ¸å¹¶è¡Œï¼šç¼“å­˜ä¸€è‡´æ€§åè®®"><a href="#å¤šæ ¸å¹¶è¡Œï¼šç¼“å­˜ä¸€è‡´æ€§åè®®" class="headerlink" title="å¤šæ ¸å¹¶è¡Œï¼šç¼“å­˜ä¸€è‡´æ€§åè®®"></a>å¤šæ ¸å¹¶è¡Œï¼šç¼“å­˜ä¸€è‡´æ€§åè®®</h2><p>ç¼“å­˜ä¸€è‡´æ€§åè®®æ˜¯ä¸ºäº†è§£å†³å¤šæ ¸æˆ–å¤šå¤„ç†å™¨æ¶æ„ä¸­,ä¸åŒç¼“å­˜ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜è€Œè®¾è®¡çš„åè®®ã€‚å¸¸è§çš„ç¼“å­˜ä¸€è‡´æ€§åè®®åŒ…æ‹¬:</p>
<h3 id="åŸºäºæ€»çº¿çš„ä¸€è‡´æ€§åè®®ï¼ˆBus-based-Coherence-Protocolï¼‰"><a href="#åŸºäºæ€»çº¿çš„ä¸€è‡´æ€§åè®®ï¼ˆBus-based-Coherence-Protocolï¼‰" class="headerlink" title="åŸºäºæ€»çº¿çš„ä¸€è‡´æ€§åè®®ï¼ˆBus-based Coherence Protocolï¼‰"></a>åŸºäºæ€»çº¿çš„ä¸€è‡´æ€§åè®®ï¼ˆBus-based Coherence Protocolï¼‰</h3><p>åŸºäºæ€»çº¿çš„ä¸€è‡´æ€§åè®®æ˜¯å¦ä¸€ç§å¸¸è§çš„å…±äº«ç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚åœ¨è¿™ç§åè®®ä¸­ï¼Œå¤„ç†å™¨é€šè¿‡å…±äº«æ€»çº¿è¿›è¡Œé€šä¿¡ã€‚å½“ä¸€ä¸ªå¤„ç†å™¨ä¿®æ”¹äº†ä¸€ä¸ªç¼“å­˜å—æ—¶ï¼Œå®ƒå°†åœ¨æ€»çº¿ä¸Šå¹¿æ’­è¯¥æ“ä½œï¼Œä»¥é€šçŸ¥å…¶ä»–å¤„ç†å™¨ä½¿å…¶ç¼“å­˜æ— æ•ˆæˆ–è¿›è¡Œç›¸åº”çš„æ›´æ–°ã€‚</p>
<p>åŸºäºæ€»çº¿çš„åè®®çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯å®ƒçš„å®ç°ç›¸å¯¹ç®€å•ï¼Œå¹¶ä¸”ä¸éœ€è¦é¢å¤–çš„å­˜å‚¨ç»“æ„ï¼ˆå¦‚ç›®å½•ï¼‰ã€‚ç„¶è€Œï¼Œå®ƒåœ¨å¤„ç†å™¨ä¹‹é—´å…±äº«æ€»çº¿æ—¶å¯èƒ½å¼•å…¥ç“¶é¢ˆï¼Œå¹¶ä¸”å¯¹æ€»çº¿å¸¦å®½æœ‰ä¸€å®šçš„è¦æ±‚ã€‚</p>
<p>MESIåè®®<br>MESIåè®®æ˜¯ç›®å‰æœ€å¸¸è§çš„æ”¯æŒå†™å›ç­–ç•¥çš„ç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚ç¼“å­˜è¡Œæœ‰å››ç§çŠ¶æ€:</p>
<ul>
<li>M(Modified):ç¼“å­˜è¡Œè¢«ä¿®æ”¹,ä¸ä¸»å­˜æ•°æ®ä¸ä¸€è‡´,è¯¥ç¼“å­˜è¡Œçš„æ‹¥æœ‰è€…è´Ÿè´£å°†æ•°æ®å†™å›ä¸»å­˜ã€‚</li>
<li>E(Exclusive):ç¼“å­˜è¡Œä¸ä¸»å­˜ä¸€è‡´,ä½†å…¶ä»–ç¼“å­˜éƒ½æ²¡æœ‰è¯¥è¡Œçš„ç¼“å­˜å‰¯æœ¬ã€‚</li>
<li>S(Shared):å¤šä¸ªç¼“å­˜å…±äº«è¯¥ç¼“å­˜è¡Œçš„å‰¯æœ¬,ä¸ä¸»å­˜ä¸€è‡´ã€‚</li>
<li>I(Invalid):ç¼“å­˜è¡Œæ— æ•ˆã€‚</li>
</ul>
<p>é€šè¿‡æ— æ•ˆåŒ–ã€å…±äº«ã€ç‹¬å çŠ¶æ€çš„è½¬æ¢æ¥ä¿è¯ä¸€è‡´æ€§ã€‚</p>
<p>MOESIåè®®<br>åœ¨MESIåŸºç¡€ä¸Š,å¢åŠ äº†OwnedçŠ¶æ€,è¡¨ç¤ºæ‹¥æœ‰è¯¥ç¼“å­˜è¡Œä½†æœªä¿®æ”¹,å…¶ä»–ç¼“å­˜å¯å…±äº«è¯¥è¡Œã€‚å¯ä»¥å‡å°‘ writable lineçš„ä¼ è¾“ã€‚</p>
<p>Dragonåè®®<br>AMDçš„ç‰¹è‰²åè®®,é€šè¿‡å‘æ¯ä¸ªç¼“å­˜è¡Œæ·»åŠ æ—¶é—´æˆ³æ¥Detectå†²çªå¹¶è¿›è¡Œä»²è£ã€‚</p>
<h3 id="åŸºäºç›®å½•çš„ä¸€è‡´æ€§åè®®ï¼ˆDirectory-based-Coherence-Protocolï¼‰"><a href="#åŸºäºç›®å½•çš„ä¸€è‡´æ€§åè®®ï¼ˆDirectory-based-Coherence-Protocolï¼‰" class="headerlink" title="åŸºäºç›®å½•çš„ä¸€è‡´æ€§åè®®ï¼ˆDirectory-based Coherence Protocolï¼‰"></a>åŸºäºç›®å½•çš„ä¸€è‡´æ€§åè®®ï¼ˆDirectory-based Coherence Protocolï¼‰</h3><p>åŸºäºç›®å½•çš„ä¸€è‡´æ€§åè®®æ˜¯ä¸€ç§åœ¨å…±äº«å­˜å‚¨ç³»ç»Ÿä¸­ç”¨äºç»´æŠ¤ç¼“å­˜ä¸€è‡´æ€§çš„æ–¹æ³•ã€‚åœ¨è¿™ç§åè®®ä¸­ï¼Œæœ‰ä¸€ä¸ªç§°ä¸ºç›®å½•ï¼ˆdirectoryï¼‰çš„æ•°æ®ç»“æ„ï¼Œç”¨äºè·Ÿè¸ªæ¯ä¸ªç¼“å­˜å—çš„çŠ¶æ€å’Œæ‰€åœ¨ä½ç½®ã€‚ç›®å½•è®°å½•äº†ç¼“å­˜å—æ˜¯å¦åœ¨æœ¬åœ°ç¼“å­˜ã€æ˜¯å¦è¢«å…¶ä»–ç¼“å­˜æ‹¥æœ‰æˆ–å…±äº«ç­‰ä¿¡æ¯ã€‚å½“ä¸€ä¸ªå¤„ç†å™¨æƒ³è¦è®¿é—®æŸä¸ªç¼“å­˜å—æ—¶ï¼Œå®ƒé¦–å…ˆæŸ¥è¯¢ç›®å½•ä»¥ç¡®å®šå½“å‰çŠ¶æ€ï¼Œå¹¶æ ¹æ®éœ€è¦ä¸å…¶ä»–å¤„ç†å™¨è¿›è¡Œé€šä¿¡æ¥ç»´æŠ¤ä¸€è‡´æ€§ã€‚</p>
<p>åŸºäºç›®å½•çš„åè®®çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œå®ƒå‡å°‘äº†å¤„ç†å™¨ä¹‹é—´çš„é€šä¿¡é‡ï¼Œå› ä¸ºç¼“å­˜ä¸€è‡´æ€§ä¿¡æ¯å­˜å‚¨åœ¨ç›®å½•ä¸­ï¼Œè€Œä¸æ˜¯æ¯ä¸ªç¼“å­˜ä¸­ã€‚ç„¶è€Œï¼Œå®ƒå¼•å…¥äº†é¢å¤–çš„è®¿é—®å»¶è¿Ÿï¼Œå› ä¸ºå¤„ç†å™¨éœ€è¦ä¸ç›®å½•è¿›è¡Œé€šä¿¡ï¼Œä»¥äº†è§£ç¼“å­˜å—çš„çŠ¶æ€å’Œä½ç½®ã€‚</p>
<p>è¿™ç§åè®®çš„ä¸»è¦ä¼˜ç‚¹æ˜¯å…¨å±€ç›®å½•æä¾›äº†æ•´ä¸ªç³»ç»Ÿç¼“å­˜çŠ¶æ€çš„å…¨å±€è§†å›¾,å¯ä»¥é¿å…ä¸å¿…è¦çš„ç¼“å­˜é—´ä¼ è¾“,å®ç°é«˜æ•ˆçš„ç¼“å­˜ä¸€è‡´æ€§ç»´æŠ¤ã€‚å…¸å‹çš„å¦‚Fireflyç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚</p>
<p>ä½†ç»´æŠ¤å…¨å±€ç›®å½•çš„å¼€é”€ä¹Ÿéå¸¸é«˜,ä¸”ç›®å½•å¯èƒ½æˆä¸ºçƒ­ç‚¹ã€‚æ‰€ä»¥æ­¤ç±»åè®®æ›´é€‚ç”¨äºNUMAç³»ç»Ÿã€‚</p>
<h2 id="å¤šæ ¸å¹¶è¡Œçš„ä¼ªå…±äº«é—®é¢˜"><a href="#å¤šæ ¸å¹¶è¡Œçš„ä¼ªå…±äº«é—®é¢˜" class="headerlink" title="å¤šæ ¸å¹¶è¡Œçš„ä¼ªå…±äº«é—®é¢˜"></a>å¤šæ ¸å¹¶è¡Œçš„ä¼ªå…±äº«é—®é¢˜</h2><p>ç±»ä¼¼cacheå†™å†²çªï¼Œå½“å¤šçº¿ç¨‹ä¿®æ”¹äº’ç›¸ç‹¬ç«‹çš„å˜é‡æ—¶ï¼Œå¦‚æœè¿™äº›å˜é‡å…±äº«åŒä¸€ä¸ªç¼“å­˜è¡Œï¼Œå°±ä¼šæ— æ„ä¸­å½±å“å½¼æ­¤çš„æ€§èƒ½ï¼Œè¿™å°±æ˜¯ä¼ªå…±äº«ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/65394173">https://zhuanlan.zhihu.com/p/65394173</a></p>
<h3 id="é¿å…ä¼ªå…±äº«"><a href="#é¿å…ä¼ªå…±äº«" class="headerlink" title="é¿å…ä¼ªå…±äº«"></a>é¿å…ä¼ªå…±äº«</h3><p>ä¼ªå…±äº«çš„åŸç†æˆ‘ä»¬çŸ¥é“äº†ï¼Œä¸€ä¸ªç¼“å­˜è¡Œæ˜¯ 64 ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ª long ç±»å‹æ˜¯ 8 ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥é¿å…ä¼ªå…±äº«ä¹Ÿå¾ˆç®€å•ï¼Œç¬”è€…æ€»ç»“äº†ä¸‹å¤§æ¦‚æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p>
<p>ï¼ˆ1ï¼‰åœ¨ä¸¤ä¸ª long ç±»å‹çš„å˜é‡ä¹‹é—´å†åŠ  7 ä¸ª long ç±»å‹<br>ï¼ˆ2ï¼‰é‡æ–°åˆ›å»ºè‡ªå·±çš„ long ç±»å‹ï¼Œè€Œä¸æ˜¯ java è‡ªå¸¦çš„ long<br>ï¼ˆ3ï¼‰ä½¿ç”¨ @sun.misc.Contended æ³¨è§£ï¼ˆjava8ï¼‰</p>
<h2 id="é¢„å–"><a href="#é¢„å–" class="headerlink" title="é¢„å–"></a>é¢„å–</h2><h3 id="TLB-é¢„å–"><a href="#TLB-é¢„å–" class="headerlink" title="TLB é¢„å–"></a>TLB é¢„å–</h3><p>TLB ä½œä¸ºé¡µè¡¨çš„ç¼“å­˜ï¼Œä¸ºäº†æé«˜å‘½ä¸­ç‡ã€‚ä¹Ÿæ˜¯æœ‰å¯¹åº”çš„é¢„å–æŠ€æœ¯çš„ã€‚</p>
<p>åŸºäºG. B. Kandirajuçš„æ–‡ç« [^3]</p>
<ul>
<li>Sequential Prefetching (SP)</li>
<li>Recency Prefetching</li>
<li>arbitrary stride prefetching, and markov prefetching<ul>
<li>é©¬å°”ç§‘å¤«é“¾æ˜¯ä¸€ç§éšæœºè¿‡ç¨‹ï¼Œå®ƒå…·æœ‰â€æ— è®°å¿†æ€§â€çš„ç‰¹ç‚¹ï¼Œå³å½“å‰çŠ¶æ€åªä¸å‰ä¸€ä¸ªçŠ¶æ€æœ‰å…³ã€‚åœ¨ç¼“å­˜é¢„å–ä¸­ï¼Œå¯ä»¥ä½¿ç”¨é©¬å°”ç§‘å¤«é“¾æ¥å»ºæ¨¡ç¨‹åºçš„æ•°æ®è®¿é—®æ¨¡å¼ã€‚æ ¹æ®å…ˆå‰çš„è®¿é—®å†å²ï¼Œé©¬å°”ç§‘å¤«é“¾å¯ä»¥ä¼°è®¡å‡ºä¸‹ä¸€ä¸ªè®¿é—®çš„æ•°æ®ä½ç½®ï¼Œä»è€Œé¢„æµ‹æœªæ¥çš„æ•°æ®è®¿é—®æ¨¡å¼ã€‚</li>
<li>ç„¶è€Œï¼Œå‡†ç¡®å»ºç«‹æœ‰æ•ˆçš„é©¬å°”ç§‘å¤«é“¾æ¨¡å‹éœ€è¦è¶³å¤Ÿçš„å†å²æ•°æ®å’Œç²¾ç¡®çš„é¢„æµ‹ç®—æ³•ã€‚æ­¤å¤–ï¼Œé©¬å°”ç§‘å¤«é“¾æ¨¡å‹ä¹Ÿéœ€è¦æ ¹æ®ç¨‹åºçš„ç‰¹æ€§å’Œè®¿é—®æ¨¡å¼è¿›è¡Œå®šåˆ¶åŒ–çš„è°ƒä¼˜ï¼Œåˆ©ç”¨æ•°æ®è®¿é—®æ¨¡å¼çš„ç»Ÿè®¡ç‰¹æ€§æ¥è®¾è®¡ã€‚</li>
</ul>
</li>
<li>Distance Prefetching</li>
</ul>
<h3 id="æŒ‡ä»¤é¢„å–æŠ€æœ¯åŒ…æ‹¬"><a href="#æŒ‡ä»¤é¢„å–æŠ€æœ¯åŒ…æ‹¬" class="headerlink" title="æŒ‡ä»¤é¢„å–æŠ€æœ¯åŒ…æ‹¬"></a>æŒ‡ä»¤é¢„å–æŠ€æœ¯åŒ…æ‹¬</h3><ul>
<li>next-line prefetchersï¼ˆä¸‹ä¸€è¡Œé¢„å–ï¼‰</li>
<li>branch-directed prefetchingï¼ˆåˆ†æ”¯å®šå‘çš„é¢„å–ï¼‰</li>
<li>discontinuity prefetchersï¼ˆä¸è¿ç»­çš„é¢„å–ï¼‰</li>
<li>temporal Instruction streamingï¼ˆæ—¶é—´åŸŸä¸Šçš„å­˜å‚¨æµï¼‰</li>
</ul>
<h3 id="æ•°æ®é¢„å–å™¨åŒ…æ‹¬"><a href="#æ•°æ®é¢„å–å™¨åŒ…æ‹¬" class="headerlink" title="æ•°æ®é¢„å–å™¨åŒ…æ‹¬"></a>æ•°æ®é¢„å–å™¨åŒ…æ‹¬</h3><ul>
<li>stride and stream-based data prefetchersï¼ˆåŸºäºè·¨æ­¥å’Œæµçš„æ•°æ®é¢„å–å™¨ï¼‰</li>
<li>address-correlated prefetchingï¼ˆåŸºäºåœ°å€ç›¸å…³æ€§çš„é¢„å–å™¨ï¼‰</li>
<li>spatially correlated prefetchingï¼ˆåŸºäºç©ºé—´ç›¸å…³æ€§çš„é¢„å–å™¨ï¼‰</li>
<li>execution-based prefetchingï¼ˆåŸºäºæ‰§è¡Œçš„é¢„å–ï¼‰</li>
</ul>
<h2 id="æ•°æ®é¢„å–-prefetch"><a href="#æ•°æ®é¢„å–-prefetch" class="headerlink" title="æ•°æ®é¢„å– prefetch"></a>æ•°æ®é¢„å– prefetch</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>å°‡memoryä¸­çš„æ•°æ®åœ¨è¯»å†™å•å…ƒç©ºé—²æ™‚(è®¡ç®—å–®å…ƒåŠªåŠ›å·¥ä½œæ™‚)å¹³è¡Œä¸‹è¼‰ï¼Œé”åˆ°é™ä½ cache miss latency çš„æ•ˆæœã€‚æ³¨æ„ä¸€èˆ¬æ¯ä¸€çº§Cacheéƒ½æœ‰ç›¸åº”çš„ç¡¬ä»¶é¢„å–å•å…ƒã€‚</p>
<p>ä¼˜ç§€çš„prefetchç­–ç•¥é€šå¸¸ä½¿ç”¨Coverageå’ŒAccuracyæ¥è¡¡é‡ï¼Œå‰è€…ä¸ºprefetchingå‘½ä¸­å æ€»è®¿å­˜æ¯”ä¾‹ï¼Œåè€…ä¸ºæœ‰æ•ˆçš„prefetchingåœ¨æ€»prefetchè¯·æ±‚ä¸­çš„æ¯”ä¾‹ã€‚</p>
<p>ä¸€ä¸ªç†æƒ³çš„é¢„å–æœºåˆ¶åº”è¯¥æ˜¯</p>
<ol>
<li>é«˜è¦†ç›–ç‡ï¼Œæœ€å¤§ç¨‹åº¦æ¶ˆé™¤ç¼“å­˜ç¼ºå¤±ï¼›</li>
<li>é«˜å‡†ç¡®ç‡ï¼Œä¸ä¼šå¢åŠ è¿‡å¤šçš„å­˜å‚¨å¸¦å®½æ¶ˆè€—ï¼›</li>
<li>åŠæ—¶æ€§ï¼Œå®Œå…¨éšè—ç¼“å­˜ç¼ºå¤±æ—¶å»¶ã€‚</li>
</ol>
<p>ç‰¹ç‚¹</p>
<ol>
<li>prefetch ä¾æŠ“å–åˆ°è³‡æ–™çš„æ™‚é–“åˆ†é¡<ol>
<li>prefetch è³‡æ–™å¤ªæ—©åˆ°çš„è©±ï¼Œè¦åœ¨ cache ä¸­ç­‰å¾ˆä¹…ï¼Œå ä½å­ï¼Œé‚„å¯èƒ½è¢«è¸¢å‡ºå» ã€‚</li>
<li>å¤ªæ™šåˆ°çš„è©±ï¼Œå°±é”ä¸åˆ°é™ä½ latency çš„æ•ˆæœ</li>
</ol>
</li>
<li>æ ¹æ®prefetchæ•°æ®å­˜å‚¨çš„ä½ç½®åˆ†<ol>
<li>â€œbinding prefetchâ€æŒ‡é€šè¿‡è½¯ä»¶&#x2F;ç¡¬ä»¶æœºåˆ¶ç›´æ¥é¢„å–åˆ°å¯„å­˜å™¨ä¸­</li>
<li>ç°ä»£å¤„ç†å™¨å¤šç”¨â€non-binding prefetchingâ€ï¼Œå°†æ•°æ®é¢„å–åˆ°cacheæˆ–cacheç»“æ„ä¸­<strong>é¢å¤–çš„buffer</strong>é‡Œé¢</li>
</ol>
</li>
<li>prefetch æ˜¯æœ‰é¡å¤–é–‹éŠ·(over head)çš„<ol>
<li>prefetch æœ¬èº«å°±æ˜¯ä½¿ç”¨ä¸åŒæ–¹å¼å¿«å–å…§å®¹é€²è¡Œé¡å¤–çš„è£œå……ï¼Œé€²è¡Œé¡å¤–æ“ä½œæ™‚å°±æœƒæ¶ˆè€—é¡å¤–çš„æœ‰é™è³‡æºï¼Œä½†å¦‚æœé€™å€‹è£œå……çš„è³‡æ–™ä¸¦æ²’æœ‰æ°å¥½è¢«ä½¿ç”¨åˆ°å‰‡é€™äº›é¡å¤–æ¶ˆè€—çš„æœ‰é™è³‡æºå°±éƒ½æ˜¯æµªè²»æ‰çš„ï¼Œä¹Ÿå°±æ˜¯æ‰€è¬‚çš„å¿«å–æ±¡æŸ“ã€‚</li>
</ol>
</li>
</ol>
<h3 id="ç¡¬ä»¶é¢„å–"><a href="#ç¡¬ä»¶é¢„å–" class="headerlink" title="ç¡¬ä»¶é¢„å–"></a>ç¡¬ä»¶é¢„å–</h3><h4 id="è§¦å‘æ—¶æœº"><a href="#è§¦å‘æ—¶æœº" class="headerlink" title="è§¦å‘æ—¶æœº"></a>è§¦å‘æ—¶æœº</h4><p>åœ¨gem5 çš„å­¦ä¹ æ—¶ï¼Œ<code>prefetch_on_access = Param.Bool(False,&quot;notify the hardware prefetcher on every access (not just misses)&quot;)</code> è²Œä¼¼æš—ç¤ºäº†<a target="_blank" rel="noopener" href="https://gem5-users.gem5.narkive.com/seGGqCx3/about-prefetch-on-access-parameter">é¢„å–å‘ç”Ÿåœ¨cache missæ—¶ã€‚</a></p>
<h4 id="å‡ ç§åŸºæœ¬ç­–ç•¥"><a href="#å‡ ç§åŸºæœ¬ç­–ç•¥" class="headerlink" title="å‡ ç§åŸºæœ¬ç­–ç•¥"></a>å‡ ç§åŸºæœ¬ç­–ç•¥</h4><p>åŠ¨æ€è§‚æµ‹ç¨‹åºçš„è¡Œä¸ºå¹¶äº§ç”Ÿç›¸åº”çš„é¢„å–è¯·æ±‚ï¼Œè¿™ç§æ–¹å¼ç§°ä¸ºç¡¬ä»¶é¢„å–ï¼ˆhardware prefetchingï¼‰ã€‚è¯´ç®€å•äº›ï¼Œå°±æ˜¯ç”¨ç¡¬ä»¶æ ¹æ®æŸäº›è§„å¾‹å»çŒœæµ‹å¤„ç†å™¨æœªæ¥å°†è¦è®¿é—®çš„æ•°æ®åœ°å€ã€‚</p>
<ol>
<li>é¡ºåºé¢„å–ï¼ˆsequential prefetchingï¼‰æ£€æµ‹å¹¶é¢„å–å¯¹è¿ç»­åŒºåŸŸè¿›è¡Œè®¿é—®çš„æ•°æ®ã€‚<ol>
<li>é¡ºåºé¢„å–æ˜¯æœ€ç®€å•çš„é¢„å–æœºåˆ¶ï¼Œå› ä¸ºæ€»æ˜¯é¢„å–å½“å‰cache lineçš„ä¸‹ä¸€æ¡lineï¼Œç¡¬ä»¶å¼€é”€å°ï¼Œä½†æ˜¯å¯¹è®¿å­˜å¸¦å®½çš„éœ€æ±‚é«˜ã€‚</li>
</ol>
</li>
<li>æ­¥é•¿é¢„å–ï¼ˆstride prefetchingï¼‰æ£€æµ‹å¹¶é¢„å–è¿ç»­è®¿é—®ä¹‹é—´ç›¸éš”sä¸ªç¼“å­˜æ•°æ®å—çš„æ•°æ®ï¼Œå…¶ä¸­så³æ˜¯æ­¥é•¿çš„å¤§å°ã€‚ç¡¬ä»¶å®ç°éœ€è¦ä½¿ç”¨è®¿é—®é¢„æµ‹è¡¨ï¼Œè®°å½•è®¿é—®çš„åœ°å€ï¼Œæ­¥é•¿ä»¥åŠè®¿å­˜æŒ‡ä»¤çš„pcå€¼ã€‚</li>
<li>æµé¢„å–ï¼ˆstream prefetchingï¼‰å¯¹æµè®¿é—®ç‰¹å¾è¿›è¡Œé¢„å–ï¼Œæµè®¿é—®ç‰¹å¾æ˜¯æŒ‡ä¸€æ®µæ—¶é—´å†…ç¨‹åºè®¿é—®çš„cacheè¡Œåœ°å€å‘ˆç°çš„è§„å¾‹ï¼Œè¿™ç§è®¿é—®è§„å¾‹åœ¨ç§‘å­¦è®¡ç®—å’Œå·¥ç¨‹åº”ç”¨ä¸­å¹¿æ³›å­˜åœ¨ã€‚ç¡¬ä»¶å®ç°æ—¶ï¼Œéœ€è¦ä½¿ç”¨æµè¯†åˆ«ç¼“å†²è®°å½•ä¸€æ®µæ—¶é—´å†…è®¿å­˜çš„cacheè¡Œåœ°å€ã€‚é¢„å–å¼•æ“è¯†åˆ«åˆ°æµè®¿é—®åˆ™è¿›è¡Œé¢„å–ã€‚</li>
<li>å…³è”é¢„å–ï¼ˆassociation based prefetchingï¼‰åˆ©ç”¨è®¿å­˜åœ°å€ä¹‹é—´å­˜åœ¨çš„å…³è”æ€§è¿›è¡Œé¢„å–ã€‚</li>
</ol>
<p>å…¶ä»–åšæ³•:</p>
<ol>
<li>GHB prefetcher : Global History Bufferï¼Œå°‡ cache miss çš„è³‡æ–™æš«å­˜èµ·ä¾†ï¼Œæ ¹æ“šé€™äº›è³‡æ–™å»é¸æ“‡è¼ƒä½³çš„ prefetching methodã€‚æ¡ FIFO ï¼Œå¯é¿å… stable dataï¼Œæé«˜ç²¾æº–åº¦<ol>
<li>Data Cache Prefetching Using a Global History Buffer</li>
<li><img src="https://pic.shaojiemike.top/img/20220319203936.png"></li>
</ol>
</li>
<li>STR prefetcher : Stream buffersï¼Œå°‡ cache miss åœ¨è¨˜æ†¶é«”ä¸­é™„è¿‘çš„é€£çºŒè³‡æ–™æ”¾åˆ° stream buffer ä¸­ï¼Œåœ¨å‡è¨­å¸¸å¸¸ç”¨åˆ°éƒ½æœƒæ”¾åœ¨ä¸€èµ·çš„å‰æä¸‹ï¼Œå¯ä»¥æ¸›å°‘ cache miss çš„æƒ…æ³ã€‚</li>
</ol>
<h4 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h4><p>hardware prefetch å„ªé»</p>
<ul>
<li>é€éè¨“ç·´ï¼Œå¯ä»¥åœ¨åŸ·è¡Œæ™‚é–“åšå‡ºé©ç•¶çš„ prefetch é¸æ“‡</li>
<li>ä¸å¢åŠ æŒ‡ä»¤ï¼Œç›´æ¥ä»¥ç¡¬é«”é‹ä½œ</li>
</ul>
<p>hardware prefetch ç¼ºé»&#x2F;é™åˆ¶</p>
<ul>
<li>ç¡¬é«”å—åˆ°è³‡æºé™åˆ¶ï¼Œç„¡æ³•ä¸€æ¬¡æ“ä½œ<strong>å¤§é‡</strong>çš„ streams</li>
<li>stream <strong>å¤ªçŸ­</strong>æ²’æœ‰è¶³å¤ çš„ cache misses å»åšç¡¬é«”çš„é å–å’Œè¼‰å…¥æœ‰ç”¨çš„ cache block</li>
<li>å› ç‚ºç¡¬é«”æ˜¯æœ‰è¦å‰‡çš„æ‹¿å–ï¼Œå¦‚æœè¦å­˜å–<strong>ä¸è¦å‰‡</strong>çš„è¨˜æ†¶é«”(è³‡æ–™çµæ§‹)ï¼Œæœƒè®Šå¾—å¾ˆè¤‡é›œ</li>
</ul>
<h3 id="è½¯ä»¶é¢„å–"><a href="#è½¯ä»¶é¢„å–" class="headerlink" title="è½¯ä»¶é¢„å–"></a>è½¯ä»¶é¢„å–</h3><p>é€éç·¨è­¯å™¨æˆ–è€…ç›´æ¥åœ¨ç¨‹å¼ä¸­æ’å…¥ intrinsicsï¼Œé”åˆ° prefetch çš„æ•ˆæœï¼Œå¸¸è¦‹çš„æœ‰ intel SSE (Streaming SIMD Extensions) ã€ AVX</p>
<h4 id="ä¼˜ç¼ºç‚¹-1"><a href="#ä¼˜ç¼ºç‚¹-1" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h4><p>software prefetch å„ªé»</p>
<ul>
<li>ä¸è¦å‰‡çš„è¨˜æ†¶é«”å­˜å–</li>
<li>Cache Locality Hint ç¼“å­˜ä½ç½®æç¤º?<ul>
<li>å¯ä»¥åˆ©ç”¨ hint å°‡è³‡æ–™æ”¾åœ¨é©åˆçš„ cache level ï¼Œæ¸›å°‘ä¸åŒ level ä¹‹é–“é€ æˆ Latency</li>
<li>ç¡¬é«”åªæœƒå°‡ prefetch åˆ°çš„è³‡æ–™æ”¾åœ¨ LLC (last level cache)</li>
</ul>
</li>
<li>Loop Bounds<ul>
<li>ç”± loop unrolling, software pipelining, and using branch instructions é€™å¹¾å€‹æŠ€å·§ï¼Œä½¿å¾—è»Ÿé«”çš„ prefetch è¼ƒç¡¬é«”éˆæ´»</li>
</ul>
</li>
</ul>
<p>software prefetch ç¼ºé»</p>
<ol>
<li>å¢åŠ æŒ‡ä»¤æ•¸é‡<ol>
<li>é™¤äº†æŒ‡ä»¤æœ¬èº«ï¼Œæ¯é“æŒ‡ä»¤éƒ½éœ€è¦é¡å¤–çš„è¨ˆç®—è¨˜æ†¶é«”ä½ç½®</li>
</ol>
</li>
<li>Static Insertion<ol>
<li>ç„¡æ³•åœ¨åŸ·è¡Œæ™‚é–“æ ¹æ“šæƒ…æ³ä¾†åšæ›´å¥½çš„èª¿æ•´</li>
</ol>
</li>
<li>æ”¹è®Šç¨‹å¼çµæ§‹<ol>
<li>ç‚ºäº†ä½¿é å–é”åˆ°æ•ˆæœï¼Œæœ‰æ™‚å€™æœƒåšä¸€äº›çµæ§‹çš„ä¿®æ”¹ï¼Œä¾‹å¦‚:è¿´åœˆçš„æ‹†è§£(loop unrolling)ï¼Œå¯èƒ½ä½¿å¯è®€æ€§ä¸‹é™</li>
</ol>
</li>
</ol>
<h3 id="ç¡¬ä»¶åŠ è½¯ä»¶é¢„å–-software-hardware-prefetch"><a href="#ç¡¬ä»¶åŠ è½¯ä»¶é¢„å–-software-hardware-prefetch" class="headerlink" title="ç¡¬ä»¶åŠ è½¯ä»¶é¢„å– software + hardware prefetch"></a>ç¡¬ä»¶åŠ è½¯ä»¶é¢„å– software + hardware prefetch</h3><p>åŒæ™‚æ¡ç”¨ software åŠ hardware prefetch ï¼Œå…©è€…æœƒäº’ç›¸å½±éŸ¿ï¼Œæœ‰åŠ æˆçš„æ•ˆæœï¼Œä¹Ÿå¯èƒ½æœ‰è² é¢çš„å½±éŸ¿ã€‚</p>
<h4 id="ä¼˜ç¼ºç‚¹-2"><a href="#ä¼˜ç¼ºç‚¹-2" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h4><p>software + hardware prefetch å„ªé»&#x2F;æ­£é¢å½±éŸ¿</p>
<ol>
<li>é‡å°è¦å‰‡&#x2F;ä¸è¦å‰‡çš„ stream åˆ†åˆ¥äº¤çµ¦ hardware &#x2F; software prefetchï¼Œé”åˆ°æˆªé•·è£œçŸ­çš„æ­£é¢æ•ˆæœ</li>
<li>å¦‚æœ software prefetch çš„è³‡æ–™é²äº†ï¼Œ hardware prefetch ä¹Ÿèƒ½åŠæ™‚è£œä¸Šè³‡æ–™</li>
</ol>
<p>software + hardware prefetch ç¼ºé»&#x2F;è² é¢å½±éŸ¿</p>
<ol>
<li>software prefetch æœƒæ¸›å°‘èƒ½å¤ è¨“ç·´ hardware prefetch çš„è³‡æ–™ï¼Œå› ç‚ºéƒ½å·²ç¶“ prefetch ï¼Œ hardware prefetcher å°±ä»¥ç‚ºé€™äº›æ˜¯ä¸éœ€è¦ prefetch çš„è³‡æ–™</li>
<li>software prefetch æŒ‡ä»¤æœƒè§¸ç™¼ hardware prefetch ï¼Œé€ æˆéæ—©è¦æ±‚ prefetch</li>
<li>software prefetch å–åˆ°éŒ¯èª¤æˆ–å¤šé¤˜çš„è³‡æ–™æ™‚ï¼Œæœƒé€ æˆç¡¬é«”ä¸Šçš„è² æ“”ï¼Œé™ä½æ•ˆç‡</li>
</ol>
<h2 id="å®è·µï¼šè¯¦ç»†cacheå‚æ•°åˆ†æ"><a href="#å®è·µï¼šè¯¦ç»†cacheå‚æ•°åˆ†æ" class="headerlink" title="å®è·µï¼šè¯¦ç»†cacheå‚æ•°åˆ†æ"></a>å®è·µï¼šè¯¦ç»†cacheå‚æ•°åˆ†æ</h2><p><img src="https://pic.shaojiemike.top/img/20221122170254.png"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SYSNODE=/sys/devices/system/node</span><br><span class="line">grep <span class="string">&#x27;.*&#x27;</span> $SYSNODE/node*/cpu*/cache/index*<span class="comment">/* 2&gt;/dev/null | </span></span><br><span class="line"><span class="comment">    awk &#x27;-F[:/]&#x27; &#x27;&#123; printf &quot;%6s %6s %24s %s\n&quot; $6, $7, $9, $10, $11 ; &#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic.shaojiemike.top/img/20211120095544.png"><br>Data Cache 4è·¯256ç»„ç›¸è”ï¼Œæ¯å—64K &#x2F; (4*256) &#x3D;64å­—èŠ‚(æ­£å¥½æ˜¯ä¸€ä¸ªcache line)ã€‚å—åç§»ä½b&#x3D;6(2^6&#x3D;64)ï¼Œç»„ç´¢å¼•s&#x3D;8(2^8&#x3D;256)ï¼Œæ ‡è®°ä½t&#x3D;64-8-6&#x3D;50ä½ã€‚</p>
<p>æ¯å—èƒ½å­˜64&#x2F;4&#x3D;16ä¸ªintï¼ŒL1æ€»å…±èƒ½å­˜(4*256*16)&#x3D;1024*16ä¸ªintã€‚ï¼ˆä¸è€ƒè™‘å†™å›çš„è¯ã€‚</p>
<hr>
<p><img src="https://pic.shaojiemike.top/img/20211120095608.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20211120100532.png"></p>
<p><code>coherency_line_size</code>-how many bytes are in a cache line, which is the unit in which memory is read and written to&#x2F;from main memory.</p>
<p><code>ways_of_associativity</code>-how many different cache slots a given line can be mapped to. Higher is better (it means youâ€™re less likely to have a working set that is smaller than cache but canâ€™t simultaneously be in cache because lots of data wants to be in the same cache lines), but is hard to implement, especially in the lower-level caches that have to be faster. 8 is pretty common for L1.</p>
<p>$$size&#x3D;ways_of_associativity<em>coherency_line_size</em>number_of_sets&#x2F;1024$$</p>
<p>ä½†æ˜¯è¿™é‡Œå¯¹L3ä¸å¯¹ï¼Œå¾ˆå¥‡æ€ªã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">128*15*2048/1024=3840</span><br><span class="line">49152/3840=256*192/2*15*128=192/15=64/5</span><br></pre></td></tr></table></figure>

<h3 id="lscpu"><a href="#lscpu" class="headerlink" title="lscpu"></a>lscpu</h3><p>æ˜¯æ€»å…±çš„cacheå¤§å°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">64/1024*96=6</span><br><span class="line">512/1024*94=48</span><br><span class="line">49152/1024*4=192</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.shaojiemike.top/img/20211120101538.png"></p>
<h2 id="éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ "><a href="#éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ " class="headerlink" title="éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ "></a>éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ </h2><p>ç¡¬ä»¶é¢„å–æŠ€æœ¯å¯¼è®ºã€ŠA Primer on Hardware Prefetchingã€‹<br><img src="https://pic.shaojiemike.top/img/20221114181529.png"></p>
<p>â– â– 3 æ•°æ®é¢„å– Data Prefetching-</p>
<ul>
<li>â– 1 æ•°æ®çš„è·¨æ­¥å’Œæµé¢„å–å™¨ Stride and Stream Prefetchers for Data-</li>
<li>â– 2 åŸºäºåœ°å€ç›¸å…³æ€§çš„é¢„å–å™¨ Address-Correlating Prefetchers-<ul>
<li>1 è·³è½¬æŒ‡é’ˆ Jump Pointers-</li>
<li>2 æˆå¯¹ä¸¤è€…é—´çš„ç›¸å…³æ€§ Pair-Wise Correlation-</li>
<li>3 é©¬å°”å¯å¤«é¢„å–å™¨ Markov Prefetcher-</li>
<li>4 é€šè¿‡é¢„å–æ·±åº¦æ”¹å–„å‰ç»æ€§ Improving Lookahead via Prefetch Depth-</li>
<li>5 é€šè¿‡æ­»å¿«é¢„æµ‹æ”¹å–„å‰ç»æ€§ Improving Lookahead via Dead Block Prediction-</li>
<li>6 ç‰‡ä¸Šå­˜å‚¨å™¨å¯»å€çš„å±€é™æ€§ Addressing On-Chip Storage Limitations-</li>
<li>7 å…¨å±€å†å²ç¼“å†²åŒº Global History Buffer-</li>
<li>8 æµé“¾ Stream Chaining-</li>
<li>9 æ—¶é—´åŸŸä¸Šçš„å­˜å‚¨æµ Temporal Memory Streaming-</li>
<li>10 ä¸è§„åˆ™æµçš„ç¼“å†²åŒº Irregular Stream Buffer-</li>
</ul>
</li>
<li>â– 3 åŸºäºç©ºé—´ç›¸å…³æ€§çš„é¢„å–å™¨ Spatially Correlated Prefetching-<ul>
<li>1 Î”ç›¸å…³æ€§æŸ¥æ‰¾ Delta-Correlated Lookup-</li>
<li>2 PCå±€åŸŸæ€§&#x2F;Î”ç›¸å…³æ€§çš„å…¨å±€å†å²ç¼“å†²ï¼ˆGHB PC&#x2F;DCï¼‰ Global History Buffer PC-Localized&#x2F;Delta-Correlating (GHB PC&#x2F;DC)-</li>
<li>3 ä»£ç ç›¸å…³æ€§æŸ¥æ‰¾ Code-Correlated Lookup-</li>
<li>4 ç©ºé—´è¶³è¿¹é¢„æµ‹ Spatial Footprint Predicction-</li>
<li>5 ç©ºé—´æ¨¡å¼é¢„æµ‹ Spatial Pattern Prediction-</li>
<li>6 éšå½¢é¢„å– Stealth Prefetching-</li>
<li>7 ç©ºé—´å­˜å‚¨æµ Spatial Memory Streaming-</li>
<li>8 æ—¶ç©ºå­˜å‚¨æµ Spatio-Temporal Memory Streaming-</li>
</ul>
</li>
<li>â– 4 åŸºäºæ‰§è¡Œçš„é¢„å– Execution-Based Prefetching-<ul>
<li>1 ç®—æ³•æ±‡æ€» Algorithm Summarization-</li>
<li>2 è¾…åŠ©å†…å­˜å’Œè¾…åŠ©å†…æ ¸çš„æ–¹æ³• Helper-Thread and Helper-Core Approaches-</li>
<li>3 è¶…å‰æ‰§è¡Œ Run-Ahead Execution-</li>
<li>4 ä¸Šä¸‹æ–‡æ¢å¤ Context Restoration-</li>
<li>5 è®¡ç®—åˆ†æ‘Š Computation Spreading-</li>
</ul>
</li>
<li>â– 5 é¢„å–çš„è°ƒåˆ¶ä¸æ§åˆ¶ Prefetch Modulation and Control-</li>
<li>â– 6 è½¯ä»¶æ–¹æ³• Software Approaches</li>
</ul>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>æš‚æ— </p>
<h2 id="å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½"><a href="#å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½" class="headerlink" title="å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½~~"></a>å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½~~</h2><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p><a target="_blank" rel="noopener" href="https://www.findhao.net/easycoding/1694">https://www.findhao.net/easycoding/1694</a></p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Cache_placement_policies">https://en.wikipedia.org/wiki/Cache_placement_policies</a></p>
<p><a target="_blank" rel="noopener" href="https://hackmd.io/@Rance/Hy3KRm1CG?type=view">https://hackmd.io/@Rance/Hy3KRm1CG?type=view</a></p>
<p><a target="_blank" rel="noopener" href="https://aijishu.com/a/1060000000210697">https://aijishu.com/a/1060000000210697</a></p>
<p>[^1]: <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/49092541/which-cache-mapping-technique-is-used-in-intel-core-i7-processor">Which cache mapping technique is used in intel core i7 processor?</a></p>
<p>[^3]: G. B. Kandiraju and A. Sivasubramaniam, â€œGoing the distance for TLB prefetching: an application-driven study,â€ Proceedings 29th Annual International Symposium on Computer Architecture, Anchorage, AK, USA, 2002, pp. 195-206, doi: 10.1109&#x2F;ISCA.2002.1003578.</p>
<p>[^4]: B. Calder, D. Grunwald, and J. S. Emer, â€œPredictive sequential associative cache,â€ in Proceedings of the 1996 International Symposium on High-Performance Computer Architecture, 1996</p>
<p>[^5]: <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/663173997">Computer Architecture â€”â€” é«˜çº§ç¼“å­˜æŠ€æœ¯</a></p>
<p>[^7]: Aamer Jaleel, Kevin B. Theobald, Simon C. Steely, and Joel Emer. High Performance Cache Replacement Using Re-Reference Interval Prediction (RRIP). In ISCA 2010.</p>
<p>[^8]: <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/482651908">è®¡ç®—æœºä½“ç³»ç»“æ„-cacheé«˜é€Ÿç¼“å­˜ çŸ¥ä¹</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Cache</p><p><a href="http://icarus.shaojiemike.top/2023/07/26/Work/Architecture/microHardware/cache/">http://icarus.shaojiemike.top/2023/07/26/Work/Architecture/microHardware/cache/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Shaojie Tan</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2023-07-26</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2024-01-28</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/incomplete/">incomplete</a><a class="link-muted mr-2" rel="tag" href="/tags/cache/">cache</a><a class="link-muted mr-2" rel="tag" href="/tags/prefetch/">prefetch</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>Afdian.net</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/" alt="Alipay"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2023/07/27/Work/Programming/2-languageGrammar/python/pythonRegex/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">PythonRegex</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2023/07/25/Work/Programming/4-compile/llvm/"><span class="level-item">llvm</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">ğ˜Šğ˜°ğ˜®ğ˜±ğ˜¶ğ˜µğ˜¦ğ˜³ ğ˜ˆğ˜³ğ˜¤ğ˜©ğ˜ªğ˜µğ˜¦ğ˜¤ğ˜µğ˜¶ğ˜³ğ˜¦ &amp; ğ˜ğ˜—ğ˜Š</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">388</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">31</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">487</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">39</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math/"><span class="level-start"><span class="level-item">Math</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Thinking/"><span class="level-start"><span class="level-item">Thinking</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">118</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">51</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-27T08:35:33.000Z">2024-01-27</time></p><p class="title"><a href="/2024/01/27/Work/Artificial%20Intelligence/Basic/AIComputeMachine/">AI Compute Machine</a></p><p class="categories"><a href="/categories/Artificial-Intelligence/">Artificial Intelligence</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-25T03:20:42.000Z">2024-01-25</time></p><p class="title"><a href="/2024/01/25/OutOfWork/5-VideoEntertainment/AnimeSuperResolutionFrame/">Anime Super Resolution to 4K &amp; Interpolation to 120 fps</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-13T14:32:40.000Z">2024-01-13</time></p><p class="title"><a href="/2024/01/13/Thinking/2-courage2move/SocialScience/">Social Science</a></p><p class="categories"><a href="/categories/Thinking/">Thinking</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-13T12:15:22.000Z">2024-01-13</time></p><p class="title"><a href="/2024/01/13/Work/Architecture/FPGA/">FPGA</a></p><p class="categories"><a href="/categories/toLearn/">toLearn</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-13T08:02:52.000Z">2024-01-13</time></p><p class="title"><a href="/2024/01/13/Work/Architecture/workloadPriority/">Workload Characterization &amp; Priority &amp; Scheduler to CPU/GPU/PIM</a></p><p class="categories"><a href="/categories/Architecture/">Architecture</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/"><span class="level-start"><span class="level-item">2024</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">235</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">67</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">72</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2024 Shaojie Tan</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">Â© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>