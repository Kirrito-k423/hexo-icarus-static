<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>The CUDA Execution Model - SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="!!! abstract â€œå¯¼è¨€â€  The CUDA Execution Model: how the CUDA architecture handles the execution of code in parallel.  è¿™ç¯‡å°†èšç„¦äºCUDAçš„åŸºç¡€çŸ¥è¯†ï¼ŒåŸºæœ¬æ¦‚å¿µï¼Œ"><meta property="og:type" content="blog"><meta property="og:title" content="The CUDA Execution Model"><meta property="og:url" content="http://icarus.shaojiemike.top/2024/01/05/Work/Programming/2-languageGrammar/cudaExeModel/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:description" content="!!! abstract â€œå¯¼è¨€â€  The CUDA Execution Model: how the CUDA architecture handles the execution of code in parallel.  è¿™ç¯‡å°†èšç„¦äºCUDAçš„åŸºç¡€çŸ¥è¯†ï¼ŒåŸºæœ¬æ¦‚å¿µï¼Œ"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/192a9195f4ff6f379f670eb77945def0.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220120182538.png?60"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/ac21941919480c459aedec4591003550.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/19e2331a882e813f26a4d86701c56d49.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/1183449fd668f3e012def6d3e32a4aa6.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/bc0d123e5c0557b3c6a4bfe0d12a418e.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/467e5da69f1504f545ee961b152491e6.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/dc5dcb34330c099f5c73f348f614f9df.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/1bc8a2ce631dcc772fbd537fc8724b95.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/24dc9a9cc9ba089368610b521500b480.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220511235932.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220512000042.png"><meta property="article:published_time" content="2024-01-05T07:17:06.000Z"><meta property="article:modified_time" content="2024-01-27T13:11:30.821Z"><meta property="article:author" content="Shaojie Tan"><meta property="article:tag" content="cuda"><meta property="article:tag" content="warp"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://pic.shaojiemike.top/shaojiemike/2024/01/192a9195f4ff6f379f670eb77945def0.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top/2024/01/05/Work/Programming/2-languageGrammar/cudaExeModel/"},"headline":"The CUDA Execution Model","image":["https://pic.shaojiemike.top/shaojiemike/2024/01/192a9195f4ff6f379f670eb77945def0.png","https://pic.shaojiemike.top/shaojiemike/2024/01/ac21941919480c459aedec4591003550.png","https://pic.shaojiemike.top/shaojiemike/2024/01/19e2331a882e813f26a4d86701c56d49.png","https://pic.shaojiemike.top/shaojiemike/2024/01/1183449fd668f3e012def6d3e32a4aa6.png","https://pic.shaojiemike.top/shaojiemike/2024/01/bc0d123e5c0557b3c6a4bfe0d12a418e.png","https://pic.shaojiemike.top/shaojiemike/2024/01/467e5da69f1504f545ee961b152491e6.png","https://pic.shaojiemike.top/shaojiemike/2024/01/dc5dcb34330c099f5c73f348f614f9df.png","https://pic.shaojiemike.top/shaojiemike/2024/01/1bc8a2ce631dcc772fbd537fc8724b95.png","https://pic.shaojiemike.top/shaojiemike/2024/01/24dc9a9cc9ba089368610b521500b480.png","https://pic.shaojiemike.top/img/20220511235932.png","https://pic.shaojiemike.top/img/20220512000042.png"],"datePublished":"2024-01-05T07:17:06.000Z","dateModified":"2024-01-27T13:11:30.821Z","author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":"!!! abstract â€œå¯¼è¨€â€  The CUDA Execution Model: how the CUDA architecture handles the execution of code in parallel.  è¿™ç¯‡å°†èšç„¦äºCUDAçš„åŸºç¡€çŸ¥è¯†ï¼ŒåŸºæœ¬æ¦‚å¿µï¼Œ"}</script><link rel="canonical" href="http://icarus.shaojiemike.top/2024/01/05/Work/Programming/2-languageGrammar/cudaExeModel/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-01-05T07:17:06.000Z" title="1/5/2024, 7:17:06 AM">2024-01-05</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-01-27T13:11:30.821Z" title="1/27/2024, 1:11:30 PM">2024-01-27</time></span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">20 minutes read (About 2941 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">The CUDA Execution Model</h1><div class="content"><p>!!! abstract â€œå¯¼è¨€â€</p>
<pre><code> The CUDA Execution Model: how the CUDA architecture handles the execution of code in parallel.

è¿™ç¯‡å°†èšç„¦äºCUDAçš„åŸºç¡€çŸ¥è¯†ï¼ŒåŸºæœ¬æ¦‚å¿µï¼Œ 
</code></pre>
<span id="more"></span>

<h2 id="cuda-è¯­æ³•é€»è¾‘"><a href="#cuda-è¯­æ³•é€»è¾‘" class="headerlink" title="cuda è¯­æ³•é€»è¾‘"></a>cuda è¯­æ³•é€»è¾‘</h2><h3 id="è¿è¡Œé…ç½®é€»è¾‘"><a href="#è¿è¡Œé…ç½®é€»è¾‘" class="headerlink" title="è¿è¡Œé…ç½®é€»è¾‘"></a>è¿è¡Œé…ç½®é€»è¾‘</h3><p>Kernel Functions &amp; Device Functionsï¼šè¯¦è§ ç¼–ç¨‹è¯­æ³•éƒ¨åˆ† <code>__global__</code> å’Œ <code>__device__</code> çš„åŒºåˆ«ã€‚[^1]</p>
<h3 id="ä¾èµ–ä¸åŒæ­¥é€»è¾‘"><a href="#ä¾èµ–ä¸åŒæ­¥é€»è¾‘" class="headerlink" title="ä¾èµ–ä¸åŒæ­¥é€»è¾‘"></a>ä¾èµ–ä¸åŒæ­¥é€»è¾‘</h3><ol>
<li><code>__global__</code> å‡½æ•°å¯åŠ¨åï¼Œæ˜¯å¼‚æ­¥ä¸CPUæ‰§è¡Œçš„ã€‚</li>
<li>é»˜è®¤è¿ç»­æ‰§è¡Œçš„cuda kernel functionä¹‹é—´æ˜¯æœ‰ä¾èµ–å…³ç³»çš„ï¼šå‰ä¸€ä¸ªkernel(copy operation)å®Œæˆäº†ï¼Œä¸‹ä¸€ä¸ªkernelæ‰èƒ½å¼€å§‹ã€‚</li>
<li>kernel functionä¹‹é—´é»˜è®¤æ˜¯æœ‰implicit synchronization. ä½†æ˜¯kernelå†…å°±æ²¡æœ‰äº†ï¼Œéœ€è¦ç±»ä¼¼çš„<code>cudaDeviceSynchronize()</code>å‡½æ•°å®ç°åŒæ­¥ã€‚ä½†æ˜¯å¯¹æ€§èƒ½ä¼šæœ‰æå¤§å½±å“ï¼Œæ…ç”¨ã€‚</li>
</ol>
<h3 id="Architecture-Agnostic-Code"><a href="#Architecture-Agnostic-Code" class="headerlink" title="Architecture-Agnostic Code"></a>Architecture-Agnostic Code</h3><p>cuda ä»£ç æ˜¯è®¾è®¡æˆæ¶æ„æ— å…³çš„ï¼Œä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚</p>
<h2 id="Execution-Hierarchy"><a href="#Execution-Hierarchy" class="headerlink" title="Execution Hierarchy"></a>Execution Hierarchy</h2><p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/192a9195f4ff6f379f670eb77945def0.png">{ align&#x3D;right } </p>
<p>CUDA distinguishes four granularities: </p>
<ul>
<li>Grid (launch configuration) </li>
<li>Block (cooperative threads) </li>
<li>warps (implicat hardware-governed layer)<br>- Blocks will implicitly be split into warps.<br>- Groups of 32 threads, enable SIMD execution</li>
<li>Thread (isolated execution state): Threads within a block can synchronize and share <code>Shared Memory</code></li>
</ul>
<p><img src="https://pic.shaojiemike.top/img/20220120182538.png?60">{ width&#x3D;50% }</p>
<h3 id="Logical-Hierarchy-Aspects-grid-block-thread"><a href="#Logical-Hierarchy-Aspects-grid-block-thread" class="headerlink" title="Logical Hierarchy Aspects: grid, block, thread"></a>Logical Hierarchy Aspects: <strong>grid, block, thread</strong></h3><ul>
<li>Allows developers to structure their solutions for <strong>particular problem sizes</strong></li>
<li>Leaves <strong>threads</strong> with the independence to <strong>make individual decisions</strong></li>
</ul>
<p>??? example â€œå°†é—®é¢˜æŒ‰é€»è¾‘åˆ’åˆ†â€</p>
<pre><code>  ![](https://pic.shaojiemike.top/img/20220120202703.png?60)

  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dim3 <span class="title function_">grid</span><span class="params">((nx + block.x - <span class="number">1</span>) / block.x, (ny + block.y - <span class="number">1</span>) / block.y)</span>;</span><br></pre></td></tr></table></figure>
</code></pre>
<h3 id="Physical-Hierarchy-Aspects-the-warp"><a href="#Physical-Hierarchy-Aspects-the-warp" class="headerlink" title="Physical Hierarchy Aspects: the warp"></a>Physical Hierarchy Aspects: the <strong>warp</strong></h3><ul>
<li>If you want to use Hardware <code>SIMD</code>-width,  implies that at <code>least 32 threads</code> will run.</li>
</ul>
<h2 id="Block-Execution-Model-block-queue"><a href="#Block-Execution-Model-block-queue" class="headerlink" title="Block Execution Model : block queue"></a><strong>Block</strong> Execution Model : block queue</h2><ul>
<li>Grid é‡Œçš„ Blocksï¼Œ ä¼šè‡ªé€‚åº”ä¸åŒçš„GPUï¼Œè°ƒåº¦åˆ°SMå•å…ƒçš„block queueé‡Œ æŒ‰é¡ºåºæ‰§è¡Œã€‚<code>cuda Block</code>ç›¸å½“äº<code>C++</code>çº¿ç¨‹ï¼Œæ•°ç›®å¯ä»¥è®¾ç½®æ¯”è¾ƒå¤§ï¼Œè°ƒåº¦ä¾é <code>GPU</code>ï¼Œæ–¹å¼ç±»ä¼¼äº<code>CPU</code>åœ¨å¤šæ ¸ç³»ç»Ÿä¸‹è°ƒåº¦å¤šthreads.</li>
<li>ä¸€ä¸ªblocké‡Œçš„warpsï¼Œåˆ†é…åˆ°ä¸€ä¸ªSMé‡Œ</li>
<li>ä¸€ä¸ªblocké‡Œçš„threadsï¼Œå…±äº«ä¸€ä¸ªSMé‡Œçš„èµ„æº(e.g.,<code>Shared Memory</code>)</li>
</ul>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/ac21941919480c459aedec4591003550.png"></p>
<h2 id="Warp-Execution-Model-warp-scheduler"><a href="#Warp-Execution-Model-warp-scheduler" class="headerlink" title="Warp Execution Model : warp scheduler"></a><strong>Warp</strong> Execution Model : warp scheduler</h2><h3 id="Design"><a href="#Design" class="headerlink" title="Design"></a>Design</h3><ul>
<li>Warp &#x3D; Threads grouped into a SIMD instruction </li>
<li>From Oxford Dictionary: Warp: åœ¨çººç»‡å·¥ä¸šä¸­ï¼Œâ€œWarp ç»çº±â€ä¸€è¯æŒ‡çš„æ˜¯â€œç»‡æœºä¸Šçºµå‘æ‹‰ä¼¸çš„çº±çº¿ï¼Œç„¶åç”±çº¬çº±äº¤å‰â€ã€‚</li>
</ul>
<h3 id="Detail"><a href="#Detail" class="headerlink" title="Detail"></a>Detail</h3><ul>
<li>ä¸€æ—¦blockåˆ†é…ç»™SMï¼Œblockå†…çš„warpså°±resident(é©»ç•™åœ¨)SMé‡Œã€‚</li>
<li>å¦‚æœwarp is readyï¼ˆå‰ç½®ä¾èµ–æ•°æ®readyï¼‰ï¼Œwarp schdulerå°±ä¼šæ‰§è¡Œï¼Œå¦‚ä¸‹å›¾<br>- The SM warp schedulers will try to find ready warps, fetch instructions and dispatch them for execution.</li>
<li>æœ€ä½³å¹¶è¡Œçº¿ç¨‹æ•°ï¼š$144 SM * 4 warpScheduler&#x2F;SM * 32 Threads&#x2F;warps &#x3D; 18432$</li>
</ul>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/19e2331a882e813f26a4d86701c56d49.png"></p>
<h3 id="warp-switch-cost"><a href="#warp-switch-cost" class="headerlink" title="warp switch cost"></a>warp switch cost</h3><p>warp switch cost in the same warp scheduler is zero. åŸå› ä¸»è¦æ˜¯æ‰€éœ€ä¸Šä¸‹æ–‡æ˜¯ä¿å­˜åœ¨å¯„å­˜å™¨é‡Œçš„ï¼Œè€Œä¸åƒCPUè¿›ç¨‹&#x2F;çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¯èƒ½éœ€è¦è®¿å­˜æ¥è¯»å–ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<ul>
<li><strong>å¿«é€Ÿä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼šå½“ä¸€ä¸ªwarpç­‰å¾…ï¼ˆä¾‹å¦‚ï¼Œç­‰å¾…å†…å­˜è®¿é—®å®Œæˆï¼‰æ—¶ï¼ŒSMå¯ä»¥å¿«é€Ÿåˆ‡æ¢åˆ°å¦ä¸€ä¸ªwarpè¿›è¡Œè®¡ç®—ã€‚è¿™ç§ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€æå°ï¼ˆ0&#x2F;1 cycleï¼‰ï¼Œå› ä¸ºwarpçš„çŠ¶æ€ï¼ˆå¯„å­˜å™¨ç­‰ï¼‰æ˜¯ç‹¬ç«‹å­˜å‚¨çš„ã€‚</li>
<li><strong>éšè—å»¶è¿Ÿ</strong>ï¼šé€šè¿‡warpåˆ‡æ¢ï¼ŒGPUèƒ½å¤Ÿéšè—å»¶è¿Ÿï¼Œç‰¹åˆ«æ˜¯å†…å­˜è®¿é—®å»¶è¿Ÿã€‚å½“ä¸€ä¸ªwarpå› ä¸ºå†…å­˜è®¿é—®è€Œé˜»å¡æ—¶ï¼ŒSMå¯ä»¥æ‰§è¡Œå…¶ä»–warpä¸­çš„çº¿ç¨‹ï¼Œè¿™æ ·å°±å¯ä»¥æœ‰æ•ˆåˆ©ç”¨è®¡ç®—èµ„æºï¼Œå‡å°‘é—²ç½®æ—¶é—´ã€‚</li>
<li><strong>ç¡¬ä»¶è°ƒåº¦</strong>ï¼šWarpçš„è°ƒåº¦æ˜¯ç”±ç¡¬ä»¶è¿›è¡Œçš„ï¼Œä¸éœ€è¦æ“ä½œç³»ç»Ÿçº§åˆ«çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚è¿™ä½¿å¾—åˆ‡æ¢è¿‡ç¨‹éå¸¸å¿«é€Ÿå’Œé«˜æ•ˆã€‚</li>
</ul>
<h3 id="warp-scheduler-sub-core-32"><a href="#warp-scheduler-sub-core-32" class="headerlink" title="warp scheduler &#x3D; sub-core. *32?"></a>warp scheduler &#x3D; sub-core. *32?</h3><p>subcoreå†…çš„å¹¶è¡Œèµ„æº(è®¡ç®—å’Œè®¿å­˜bank)ä¸ä¸€å®šæ˜¯32çš„å€æ•°ï¼Œæ¥æ”¯æŒçº¿ç¨‹å¹¶è¡Œã€‚resource contentionä¼šå¯¼è‡´å¿…ç„¶çš„ç­‰å¾…ã€‚</p>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/1183449fd668f3e012def6d3e32a4aa6.png">[^2]</p>
<h3 id="SIMT-warp-divergence"><a href="#SIMT-warp-divergence" class="headerlink" title="SIMT (warp divergence)"></a>SIMT (warp divergence)</h3><p>warpé‡Œæ¯æ¡æŒ‡ä»¤çš„32ä¸ªçº¿ç¨‹æ˜¯SIMTè€Œä¸æ˜¯SIMDï¼Œæœ‰å‡ ç‚¹ç†ç”±ï¼š</p>
<ol>
<li>çº¿ç¨‹ç‹¬ç«‹è®¡ç®—å€¼ï¼šä¸åŒCPUçš„SIMDï¼Œwarpå†…çš„çº¿ç¨‹æ›´åƒcpué‡Œå¹¶è¡Œæ‰§è¡Œçš„å¤šè¿›ç¨‹ä½†æ˜¯é™åˆ¶äº†<strong>ä¸åŒè¿›ç¨‹æ¯æ¡æŒ‡ä»¤è¦åŒæ—¶æ‰§è¡Œ</strong>ï¼Œ</li>
<li>å‡ºç°çš„æƒ…å†µï¼šé€šå¸¸æ˜¯åœ¨cudaä»£ç é‡Œæœ‰<code>if</code>æ—¶å¯¼è‡´æ‰§è¡Œæµç¨‹åˆ†å‰äº†ï¼šå¯¹äºåŒä¸€æ¡æ‰§è¡Œï¼Œæœ‰äº›çº¿ç¨‹æ‰§è¡Œï¼Œä½†æ˜¯å¦ä¸€äº›è·³è¿‡äº†ã€‚</li>
<li>ç³»ç»Ÿæ”¯æŒï¼šæ¯æ¡æŒ‡ä»¤å¯¹æ¯ä¸ªçº¿ç¨‹ï¼Œæœ‰<code>active flag</code>æ¥åˆ¤æ–­æ˜¯å¦æ‰§è¡Œã€‚</li>
<li>å—é™çš„å¹¶è¡Œåº¦ï¼šsub-core é‡Œå¯èƒ½åªæœ‰8ä¸ªFP64å•å…ƒï¼Œå³ä½¿çº¿ç¨‹å…¨éƒ¨æ‰§è¡Œï¼ŒåŒä¸€æ—¶åˆ»SIMDçš„å¹¶è¡Œåº¦ä¹Ÿåªæœ‰8ã€‚è€Œä¸”è¦åœ¨è¿™äº›å•å…ƒä¸Šæ‰§è¡Œå››éæ‰èƒ½å¤„ç†å®Œ32ä¸ªçº¿ç¨‹ã€‚</li>
<li>$One^4$ rule: <strong>One</strong> functional unit can handle <strong>one</strong> instruction, for <strong>one</strong> thread, <strong>per</strong> clock.  ä½†æ˜¯CPU unitçš„å»¶è¿Ÿå°±ä¸æ˜¯one cycleï¼Œéœ€è¦æµæ°´çº¿éšè—ã€‚</li>
</ol>
<p>??? example â€œfewer than 32 of a particular type of unitâ€</p>
<pre><code>Other types of instructions will still require 32 units (eventually) but there may not be 32 of a given type of unit in the SM. When there are fewer than 32 of a particular type of unit, the warp scheduler will schedule a single instruction across **multiple clock cycles**.[^3] 

Suppose, for example, that a particular GPU SM design was such that there are only `4 DP units`. Then the warp scheduler, when it has e.g. a DP multiply operation/instruction to issue, will use those 4 units for a total of `8 clock cycles (4x8=32)` so as to provide a functional/execution unit for each instruction when considered per-thread, warp-wide. 
</code></pre>
<h3 id="Observationï¼šç±»æ¯”CPU"><a href="#Observationï¼šç±»æ¯”CPU" class="headerlink" title="Observationï¼šç±»æ¯”CPU"></a>Observationï¼šç±»æ¯”CPU</h3><ul>
<li>warpç±»ä¼¼è‡ªå¸¦SIMTçš„æŒ‡ä»¤</li>
<li>sub-coreä¹Ÿå’ŒCPUç±»ä¼¼åœ¨è¿½æ±‚æé«˜éƒ¨ä»¶åˆ©ç”¨ç‡ï¼Œä½†æ˜¯ä¸¤è€…è¿˜æ˜¯æœ‰åŒºåˆ«ï¼š<br>      - sub-coreä¸»è¦æ˜¯å¤šçº¿ç¨‹é—´çš„åˆ‡æ¢(å¥½åƒä¹Ÿæ²¡æœ‰ä¹±åºï¼Œè€Œæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢)<br>      - CPUçš„ä¹±åºæ‰§è¡Œï¼Œé€šè¿‡è®¡åˆ†æ¿ç­‰å®ç°è¯†åˆ«å‡ºæœ‰åºæŒ‡ä»¤æµä¸­æ— ä¾èµ–çš„æŒ‡ä»¤ï¼Œæ ¹æ®æƒ…å†µ(ä¹±åº)æ‰“ä¹±ä»–ä»¬çš„é¡ºåºï¼Œæ¥æé«˜ç¡¬ä»¶åˆ©ç”¨ç‡ã€‚</li>
</ul>
<p>??? tip â€œGPU vs CPU è¶…çº¿ç¨‹ Hyper-threadingâ€</p>
<pre><code>- CPUä¸€èˆ¬æœ€å¤šæ˜¯æ ¸æ•°çš„2å€ï¼Œåˆ‡æ¢æ—¶ä¸Šä¸‹æ–‡å¼€é”€è¿‡å¤§ã€‚ä¸€èˆ¬åªåœ¨IOæ—¶ã€‚å¤šçº¿ç¨‹æœ‰é¢å¤–ä¼˜åŠ¿ã€‚
- GPUå€ŸåŠ©ç¡¬ä»¶çš„è®¾è®¡ï¼Œçº¿ç¨‹æ•°å‡ ä¹æ²¡æœ‰ä¸Šé™ã€‚ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ä¸º0ï¼Œåè€Œçº¿ç¨‹è¶Šå¤šèƒ½èƒ½éšè—å»¶è¿Ÿ

![Latency hiding with 4 threads. Image Â©AMD](https://i0.wp.com/streamhpc.com/wp-content/uploads/2017/01/latency-hiding.jpg?resize=350%2C263&amp;ssl=1)
</code></pre>
<h2 id="Thread-Execution-Model-TEM"><a href="#Thread-Execution-Model-TEM" class="headerlink" title="Thread Execution Model (TEM)"></a>Thread Execution Model (TEM)</h2><ul>
<li>é¡ºåºæ‰§è¡Œ(In-order program execution), å½“ç„¶è¿™ä¸åŒ…æ‹¬ç¼–è¯‘æ—¶é‡æ’æ‰“ä¹±æŒ‡ä»¤é¡ºåºã€‚</li>
<li>GPUä¸Šæ˜¯æ²¡æœ‰ILP, æŒ‡ä»¤çº§å¹¶è¡Œçš„ã€‚</li>
</ul>
<p>Voltaåæ¶æ„ï¼Œæœ‰ä¸¤ç§GPUçº¿ç¨‹æ‰§è¡Œæ¨¡å‹(æœ‰ç¼–è¯‘é€‰é¡¹æ¥é€‰æ‹©)ï¼š</p>
<h3 id="TEM1-Legacy-Thread-Scheduling"><a href="#TEM1-Legacy-Thread-Scheduling" class="headerlink" title="TEM1: Legacy Thread Scheduling"></a>TEM1: Legacy Thread Scheduling</h3><ul>
<li>æ¯ä¸ªwarpçš„çº¿ç¨‹åªæœ‰ä¸€ä¸ªå”¯ä¸€Program Counter</li>
<li>æ‰€æœ‰çº¿ç¨‹ä¼šåŒæ­¥æ‰§è¡Œä¸€æ¡æŒ‡ä»¤</li>
<li>é¢å¯¹åˆ†æ”¯ï¼Œä¹Ÿåªèƒ½æŒ‰é¡ºåºï¼Œåˆ†åˆ«æ‰§è¡Œä¸¤ä¸ªbranch</li>
</ul>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/bc0d123e5c0557b3c6a4bfe0d12a418e.png"></p>
<p>??? note â€œControl flow: Branch divergenceâ€</p>
<pre><code>  Branch divergence occurs when threads inside warps `branches to different execution paths`.

  ![](https://pic.shaojiemike.top/shaojiemike/2024/01/d52d7abaa45eab2817399272813e18a4.png)
</code></pre>
<p>??? failure â€œDeadlock branchâ€</p>
<pre><code>  ![](https://pic.shaojiemike.top/shaojiemike/2024/01/211bd8b1fc111c03e9669ec61979d213.png)
</code></pre>
<h3 id="TEM2-Independent-Thread-Scheduling-ITS"><a href="#TEM2-Independent-Thread-Scheduling-ITS" class="headerlink" title="TEM2: Independent Thread Scheduling (ITS)"></a>TEM2: Independent Thread Scheduling (ITS)</h3><ul>
<li>æ”¹å˜ç‚¹ï¼šæ¯ä¸ªThreadéƒ½æœ‰äº†è‡ªå·±çš„PC, ä¸€ä¸ªwarpå†…çš„çº¿ç¨‹æ‰§è¡Œçš„ä½ç½®ï¼ˆä¸‹ä¸€æ¡æƒ³æ‰§è¡Œçš„æŒ‡ä»¤ï¼‰ä¸å¿…å†ç›¸åŒã€‚</li>
<li>ä¸å˜ç‚¹ï¼šä½†æ˜¯warpå†…çº¿ç¨‹æ¯ä¸ªcycleæ‰§è¡Œçš„è¿˜æ˜¯åŒä¸€æ¡æŒ‡ä»¤ã€‚ä½†æ˜¯warpæ‰§è¡Œçš„æŒ‡ä»¤å¯ä»¥åœ¨æ‰€å±çº¿ç¨‹çš„32ä¸ªPCé—´è·³è½¬ï¼Œè¿™è§£å†³äº†å‰é¢çš„Deadlockã€‚</li>
</ul>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/467e5da69f1504f545ee961b152491e6.png"></p>
<h2 id="Streaming-and-Task-based-programming"><a href="#Streaming-and-Task-based-programming" class="headerlink" title="Streaming and Task-based programming"></a>Streaming and Task-based programming</h2><figure markdown>
  ![](https://pic.shaojiemike.top/shaojiemike/2024/01/771f49fdcc35b2d765314577e63b1c84.png)
  <figcaption>GPU Pipeline Implementation, less memory consumption</figcaption>
</figure>[^5]

<h3 id="Time-Sliced-Kernels-Kernel-by-Kernel-KBK"><a href="#Time-Sliced-Kernels-Kernel-by-Kernel-KBK" class="headerlink" title="Time-Sliced Kernels (Kernel by Kernel, KBK)"></a>Time-Sliced Kernels (Kernel by Kernel, KBK)</h3><p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/dc5dcb34330c099f5c73f348f614f9df.png"></p>
<p>The benefits of this approach are</p>
<ul>
<li>There is no (added) divergence within a kernel </li>
<li>This also means that we should observe optimal occupancy for each kernel</li>
</ul>
<p>The drawbacks are</p>
<ul>
<li>There is need for CPU synchronization, which adds some overhead to the execution</li>
<li>We cannot easily use shared memory to keep data local from one stage to the other (only within onestage, consider a stage that could generate new input for itself) </li>
<li>Load imbalance might be a problem<ul>
<li>If one kernel runs longer than the others due to longer processing, parts of the device might beunused until the next CPU sync as no new work can be launched until the synchronizationpoint with the CPU comes up</li>
</ul>
</li>
</ul>
<h3 id="Dynamic-Parallelism"><a href="#Dynamic-Parallelism" class="headerlink" title="Dynamic Parallelism"></a>Dynamic Parallelism</h3><p>[NVIDIA 2012]</p>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/1bc8a2ce631dcc772fbd537fc8724b95.png"></p>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/24dc9a9cc9ba089368610b521500b480.png"></p>
<h2 id="shared-memory-åŸç†"><a href="#shared-memory-åŸç†" class="headerlink" title="shared memory åŸç†"></a>shared memory åŸç†</h2><p>GPU çš„å…±äº«å†…å­˜ï¼Œå®é™…ä¸Šæ˜¯ 32 å—å†…å­˜æ¡é€šè¿‡å¹¶è”ç»„æˆçš„ï¼Œæ¯ä¸ªæ—¶é’Ÿå‘¨æœŸéƒ½å¯ä»¥è¯»å–ä¸€ä¸ª intã€‚ç¬¬ i å—å†…å­˜ï¼Œè´Ÿè´£ <code>addr % 32 == i</code> çš„æ•°æ®ã€‚è¿™æ ·äº¤é”™å­˜å‚¨ï¼Œå¯ä»¥ä¿è¯éšæœºè®¿é—®æ—¶ï¼Œè®¿å­˜èƒ½å¤Ÿå°½é‡åˆ†æ‘Šåˆ° 32 ä¸ªå—ã€‚</p>
<p>å¦‚æœåœ¨blockå†…å¤šä¸ªçº¿ç¨‹è®¿é—®çš„åœ°å€è½å…¥åˆ°åŒä¸€ä¸ªbankå†…ï¼Œé‚£ä¹ˆå°±ä¼šè®¿é—®åŒä¸€ä¸ªbankå°±ä¼šäº§ç”Ÿbank conflictï¼Œè¿™äº›è®¿é—®å°†æ˜¯å˜æˆä¸²è¡Œï¼Œåœ¨å®é™…å¼€å‘è°ƒå¼ä¸­éå¸¸ä¸»è¦bank conflict.</p>
<p>å¤„ç†æ–¹æ³•éå¸¸ç®€å•ï¼Œæˆ‘ä»¬ä¸è¦æŠŠ shared memory å¼€è¾Ÿçš„ç©ºé—´è®¾ç½®æˆ 32 çš„å€æ•°å³å¯ï¼ˆçº¿æ€§åŒä½™æ–¹ç¨‹ï¼ŒåŸç†ä¹Ÿå¾ˆå¥½ç†è§£ï¼‰æˆ–è€…ä¿®æ”¹bankçš„sizeå¤§å°ï¼Œé»˜è®¤æ˜¯4å­—èŠ‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__host__ cudaError_t <span class="title function_">cudaDeviceSetSharedMemConfig</span> <span class="params">( cudaSharedMemConfig config )</span></span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ cudaSharedMemConfiä¸ºä¸€ä¸ªæšä¸¾å‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cudaSharedMemBankSizeDefault = <span class="number">0</span></span><br><span class="line">cudaSharedMemBankSizeFourByte = <span class="number">1</span></span><br><span class="line">cudaSharedMemBankSizeEightByte = <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p> åªæ”¯æŒåœ¨hostç«¯è¿›è¡Œè°ƒç”¨ï¼Œä¸æ”¯æŒåœ¨deviceç«¯è°ƒç”¨ã€‚<br>CUDA APIä¸­è¿˜æ”¯æŒè·å–bank sizeå¤§å°ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__host__  __device__ cudaError_t <span class="title function_">cudaDeviceGetSharedMemConfig</span> <span class="params">( cudaSharedMemConfig ** pConfig )</span></span><br></pre></td></tr></table></figure>

<p>??? tip â€œå€¼å¾—æ³¨æ„çš„æ˜¯â€</p>
<pre><code>1. å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€ä¸ªbankä¸­**ç›¸åŒ**çš„æ•°ç»„å…ƒç´  **ä¸ä¼š**äº§ç”Ÿbank conflictï¼Œå°†ä¼šå‡ºå‘å¹¿æ’­
2. åŒä¸€ä¸ª warp çš„ä¸åŒçº¿ç¨‹ä¼šè®¿é—®åˆ°åŒä¸€ä¸ª bank çš„**ä¸åŒ**åœ°å€å°±ä¼š**å‘ç”Ÿ** bank conflict
</code></pre>
<h3 id="å®¹æ˜“å‘ç”Ÿbank-conflitçš„æƒ…å†µ"><a href="#å®¹æ˜“å‘ç”Ÿbank-conflitçš„æƒ…å†µ" class="headerlink" title="å®¹æ˜“å‘ç”Ÿbank conflitçš„æƒ…å†µ"></a>å®¹æ˜“å‘ç”Ÿbank conflitçš„æƒ…å†µ</h3><ol>
<li>æ•°æ®ç±»å‹æ˜¯4å­—èŠ‚ï¼Œä½†æ˜¯ä¸æ˜¯å•ä½æ­¥é•¿</li>
<li><img src="https://pic.shaojiemike.top/img/20220511235932.png">[^2]</li>
<li>æ•°æ®ç±»å‹æ˜¯1å­—èŠ‚ï¼Œæ­¥é•¿æ˜¯1ã€‚</li>
<li><img src="https://pic.shaojiemike.top/img/20220512000042.png"></li>
</ol>
<h2 id="Nvidia-Design"><a href="#Nvidia-Design" class="headerlink" title="Nvidia Design"></a>Nvidia Design</h2><h3 id="NV-ç‰¹æ®Šæ±‡ç¼–æŒ‡ä»¤"><a href="#NV-ç‰¹æ®Šæ±‡ç¼–æŒ‡ä»¤" class="headerlink" title="NV ç‰¹æ®Šæ±‡ç¼–æŒ‡ä»¤"></a>NV ç‰¹æ®Šæ±‡ç¼–æŒ‡ä»¤</h3><p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/blog/mixed-precision-programming-cuda-8/">cuda8 DP2A and DP4A</a></p>
<h3 id="é™åˆ¶çš„å‚æ•°"><a href="#é™åˆ¶çš„å‚æ•°" class="headerlink" title="é™åˆ¶çš„å‚æ•°"></a>é™åˆ¶çš„å‚æ•°</h3><table>
<thead>
<tr>
<th>é™åˆ¶</th>
<th>å…·ä½“å€¼</th>
</tr>
</thead>
<tbody><tr>
<td>Maximum number of threads per block</td>
<td>1024</td>
</tr>
<tr>
<td>Maximum number of resident blocks per SM</td>
<td>16&#x2F;32</td>
</tr>
<tr>
<td>Maximum number of resident warps per SM</td>
<td>64&#x2F;32</td>
</tr>
<tr>
<td>Maximum number of resident threads per SM</td>
<td>2048&#x2F;1024</td>
</tr>
<tr>
<td>Maximum number of 32-bit registers per thread</td>
<td>255</td>
</tr>
<tr>
<td>Maximum amount of shared memory per thread block</td>
<td>48KB&#x2F;96KB&#x2F;64KB</td>
</tr>
</tbody></table>
<ul>
<li><strong>Most recent GPUs (excepting Turing) allow a hardware limit of 64 warps per SM</strong></li>
</ul>
<p>??? note â€œä¸€ä¸ªSMæœ€å¤šæœ‰2048ä¸ªçº¿ç¨‹â€</p>
<pre><code>![](https://pic.shaojiemike.top/img/20220409155719.png)[^4]
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Max dimension size of a thread block (x,y,z): (1024, 1024, 64)</span><br><span class="line">Max dimension size of a grid size    (x,y,z): (2147483647, 65535, 65535)</span><br><span class="line">(30) Multiprocessors, (128) CUDA Cores/MP:     3840 CUDA Cores</span><br><span class="line">Warp size:                                     32</span><br><span class="line">Maximum number of threads per multiprocessor:  2048</span><br><span class="line">Maximum number of threads per block:           1024</span><br><span class="line">Max dimension size of a thread block (x,y,z): (1024, 1024, 64) # æ˜¯x,y,z å„è‡ªæœ€å¤§å€¼</span><br><span class="line">Total amount of shared memory per block:       49152 bytes (48 Kbytes)</span><br><span class="line">Total shared memory per multiprocessor(SM):    98304 bytes (96 Kbytes)</span><br><span class="line">Total number of registers available per block: 65536</span><br></pre></td></tr></table></figure>

<p>??? example â€œGP102â€</p>
<pre><code>å›¾ä¸­çº¢æ¡†æ˜¯ä¸€ä¸ªSM, ç»¿ç‚¹æ˜¯core

![](https://pic.shaojiemike.top/img/20220512220943.png)

P40æœ‰30ä¸ªSMï¼Œæ¯ä¸ªSMæœ‰4*32=128ä¸ªæ ¸ã€‚

![](https://pic.shaojiemike.top/img/20220512220904.png)
</code></pre>
<!-- <figure markdown>
  ![Image title](https://dummyimage.com/600x400/){ width=80% }
  ![Image title](https://dummyimage.com/600x400/){ width="300" }
  <figcaption>Image caption</figcaption>
</figure> -->


<!-- ## ğŸ—æ–½å·¥ä¸­ğŸ—

ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§

è§‰å¾—æœ‰æ„ä¹‰å†™ï¼Œå…ˆå ä¸ªä½å­ã€‚è¿˜æ²¡å†™å¥½å‘¢ï¼Œå»ºè®®ä¸è¦çœ‹ï¼ˆé€»è¾‘å†…å®¹éƒ½æ²¡æƒ³æ¸…æ¥šï¼‰ï¼Œä¸è¦æ€¥~~

ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ -->


<h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><!-- footnote is for url which the writer do not want reader to click to interupt the reading. -->

<!-- ä¸Šé¢å›ç­”éƒ¨åˆ†**æ¥è‡ªChatGPT-3.5**ï¼Œæ²¡æœ‰è¿›è¡Œæ­£ç¡®æ€§çš„äº¤å‰æ ¡éªŒã€‚-->

<p>[^1]: <a target="_blank" rel="noopener" href="https://cuda-tutorial.github.io/part1_22.pdf">CUDA and Applications to Task-based Programming</a></p>
<p>[^2]: (ISCAâ€™22) GCoM: a detailed GPU core model for accurate analytical modeling of modern GPUs</p>
<p>[^3]: <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/62147624/how-many-cuda-cores-is-used-to-process-a-cuda-warp">How many CUDA cores is used to process a CUDA warp?</a></p>
<p>[^4]: Nvidia cuda-c-programming-guide <a target="_blank" rel="noopener" href="https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#features-and-technical-specifications__technical-specifications-per-compute-capability">ref</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>The CUDA Execution Model</p><p><a href="http://icarus.shaojiemike.top/2024/01/05/Work/Programming/2-languageGrammar/cudaExeModel/">http://icarus.shaojiemike.top/2024/01/05/Work/Programming/2-languageGrammar/cudaExeModel/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Shaojie Tan</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2024-01-05</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2024-01-27</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/cuda/">cuda</a><a class="link-muted mr-2" rel="tag" href="/tags/warp/">warp</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>Afdian.net</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/" alt="Alipay"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2024/01/09/Work/Programming/6-deploy/pipPackage/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Build and release your Pip Package</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2024/01/04/Work/Architecture/performanceModel/GPUPerformanceModel/"><span class="level-item">CPU / GPU Performance Model based on Interval Analysis</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">ğ˜Šğ˜°ğ˜®ğ˜±ğ˜¶ğ˜µğ˜¦ğ˜³ ğ˜ˆğ˜³ğ˜¤ğ˜©ğ˜ªğ˜µğ˜¦ğ˜¤ğ˜µğ˜¶ğ˜³ğ˜¦ &amp; ğ˜ğ˜—ğ˜Š</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">388</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">31</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">487</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#cuda-è¯­æ³•é€»è¾‘"><span class="level-left"><span class="level-item">1</span><span class="level-item">cuda è¯­æ³•é€»è¾‘</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#è¿è¡Œé…ç½®é€»è¾‘"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">è¿è¡Œé…ç½®é€»è¾‘</span></span></a></li><li><a class="level is-mobile" href="#ä¾èµ–ä¸åŒæ­¥é€»è¾‘"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">ä¾èµ–ä¸åŒæ­¥é€»è¾‘</span></span></a></li><li><a class="level is-mobile" href="#Architecture-Agnostic-Code"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">Architecture-Agnostic Code</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Execution-Hierarchy"><span class="level-left"><span class="level-item">2</span><span class="level-item">Execution Hierarchy</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Logical-Hierarchy-Aspects-grid-block-thread"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">Logical Hierarchy Aspects: grid, block, thread</span></span></a></li><li><a class="level is-mobile" href="#Physical-Hierarchy-Aspects-the-warp"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">Physical Hierarchy Aspects: the warp</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Block-Execution-Model-block-queue"><span class="level-left"><span class="level-item">3</span><span class="level-item">Block Execution Model : block queue</span></span></a></li><li><a class="level is-mobile" href="#Warp-Execution-Model-warp-scheduler"><span class="level-left"><span class="level-item">4</span><span class="level-item">Warp Execution Model : warp scheduler</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Design"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">Design</span></span></a></li><li><a class="level is-mobile" href="#Detail"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">Detail</span></span></a></li><li><a class="level is-mobile" href="#warp-switch-cost"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">warp switch cost</span></span></a></li><li><a class="level is-mobile" href="#warp-scheduler-sub-core-32"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">warp scheduler = sub-core. *32?</span></span></a></li><li><a class="level is-mobile" href="#SIMT-warp-divergence"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">SIMT (warp divergence)</span></span></a></li><li><a class="level is-mobile" href="#Observationï¼šç±»æ¯”CPU"><span class="level-left"><span class="level-item">4.6</span><span class="level-item">Observationï¼šç±»æ¯”CPU</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Thread-Execution-Model-TEM"><span class="level-left"><span class="level-item">5</span><span class="level-item">Thread Execution Model (TEM)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#TEM1-Legacy-Thread-Scheduling"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">TEM1: Legacy Thread Scheduling</span></span></a></li><li><a class="level is-mobile" href="#TEM2-Independent-Thread-Scheduling-ITS"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">TEM2: Independent Thread Scheduling (ITS)</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Streaming-and-Task-based-programming"><span class="level-left"><span class="level-item">6</span><span class="level-item">Streaming and Task-based programming</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Time-Sliced-Kernels-Kernel-by-Kernel-KBK"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">Time-Sliced Kernels (Kernel by Kernel, KBK)</span></span></a></li><li><a class="level is-mobile" href="#Dynamic-Parallelism"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">Dynamic Parallelism</span></span></a></li></ul></li><li><a class="level is-mobile" href="#shared-memory-åŸç†"><span class="level-left"><span class="level-item">7</span><span class="level-item">shared memory åŸç†</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#å®¹æ˜“å‘ç”Ÿbank-conflitçš„æƒ…å†µ"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">å®¹æ˜“å‘ç”Ÿbank conflitçš„æƒ…å†µ</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Nvidia-Design"><span class="level-left"><span class="level-item">8</span><span class="level-item">Nvidia Design</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#NV-ç‰¹æ®Šæ±‡ç¼–æŒ‡ä»¤"><span class="level-left"><span class="level-item">8.1</span><span class="level-item">NV ç‰¹æ®Šæ±‡ç¼–æŒ‡ä»¤</span></span></a></li><li><a class="level is-mobile" href="#é™åˆ¶çš„å‚æ•°"><span class="level-left"><span class="level-item">8.2</span><span class="level-item">é™åˆ¶çš„å‚æ•°</span></span></a></li></ul></li><li><a class="level is-mobile" href="#å‚è€ƒæ–‡çŒ®"><span class="level-left"><span class="level-item">9</span><span class="level-item">å‚è€ƒæ–‡çŒ®</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">39</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math/"><span class="level-start"><span class="level-item">Math</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Thinking/"><span class="level-start"><span class="level-item">Thinking</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">118</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">51</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-27T08:35:33.000Z">2024-01-27</time></p><p class="title"><a href="/2024/01/27/Work/Artificial%20Intelligence/Basic/AIComputeMachine/">AI Compute Machine</a></p><p class="categories"><a href="/categories/Artificial-Intelligence/">Artificial Intelligence</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-25T03:20:42.000Z">2024-01-25</time></p><p class="title"><a href="/2024/01/25/OutOfWork/5-VideoEntertainment/AnimeSuperResolutionFrame/">Anime Super Resolution to 4K &amp; Interpolation to 120 fps</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-13T14:32:40.000Z">2024-01-13</time></p><p class="title"><a href="/2024/01/13/Thinking/2-courage2move/SocialScience/">Social Science</a></p><p class="categories"><a href="/categories/Thinking/">Thinking</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-13T12:15:22.000Z">2024-01-13</time></p><p class="title"><a href="/2024/01/13/Work/Architecture/FPGA/">FPGA</a></p><p class="categories"><a href="/categories/toLearn/">toLearn</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-13T08:02:52.000Z">2024-01-13</time></p><p class="title"><a href="/2024/01/13/Work/Architecture/workloadPriority/">Workload Characterization &amp; Priority &amp; Scheduler to CPU/GPU/PIM</a></p><p class="categories"><a href="/categories/Architecture/">Architecture</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/"><span class="level-start"><span class="level-item">2024</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">235</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">67</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">72</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2024 Shaojie Tan</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">Â© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>