<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>The CUDA Execution Model - SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="!!! abstract “导言”  The CUDA Execution Model: how the CUDA architecture handles the execution of code in parallel.  这篇将聚焦于CUDA的基础知识，基本概念，"><meta property="og:type" content="blog"><meta property="og:title" content="The CUDA Execution Model"><meta property="og:url" content="http://icarus.shaojiemike.top/2024/01/05/Work/Programming/2-languageGrammar/cudaExeModel/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:description" content="!!! abstract “导言”  The CUDA Execution Model: how the CUDA architecture handles the execution of code in parallel.  这篇将聚焦于CUDA的基础知识，基本概念，"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/192a9195f4ff6f379f670eb77945def0.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220120182538.png?60"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/ac21941919480c459aedec4591003550.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/19e2331a882e813f26a4d86701c56d49.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/1183449fd668f3e012def6d3e32a4aa6.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/bc0d123e5c0557b3c6a4bfe0d12a418e.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/467e5da69f1504f545ee961b152491e6.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/dc5dcb34330c099f5c73f348f614f9df.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/1bc8a2ce631dcc772fbd537fc8724b95.png"><meta property="og:image" content="https://pic.shaojiemike.top/shaojiemike/2024/01/24dc9a9cc9ba089368610b521500b480.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220511235932.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20220512000042.png"><meta property="article:published_time" content="2024-01-05T07:17:06.000Z"><meta property="article:modified_time" content="2024-01-27T13:11:30.821Z"><meta property="article:author" content="Shaojie Tan"><meta property="article:tag" content="cuda"><meta property="article:tag" content="warp"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://pic.shaojiemike.top/shaojiemike/2024/01/192a9195f4ff6f379f670eb77945def0.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top/2024/01/05/Work/Programming/2-languageGrammar/cudaExeModel/"},"headline":"The CUDA Execution Model","image":["https://pic.shaojiemike.top/shaojiemike/2024/01/192a9195f4ff6f379f670eb77945def0.png","https://pic.shaojiemike.top/shaojiemike/2024/01/ac21941919480c459aedec4591003550.png","https://pic.shaojiemike.top/shaojiemike/2024/01/19e2331a882e813f26a4d86701c56d49.png","https://pic.shaojiemike.top/shaojiemike/2024/01/1183449fd668f3e012def6d3e32a4aa6.png","https://pic.shaojiemike.top/shaojiemike/2024/01/bc0d123e5c0557b3c6a4bfe0d12a418e.png","https://pic.shaojiemike.top/shaojiemike/2024/01/467e5da69f1504f545ee961b152491e6.png","https://pic.shaojiemike.top/shaojiemike/2024/01/dc5dcb34330c099f5c73f348f614f9df.png","https://pic.shaojiemike.top/shaojiemike/2024/01/1bc8a2ce631dcc772fbd537fc8724b95.png","https://pic.shaojiemike.top/shaojiemike/2024/01/24dc9a9cc9ba089368610b521500b480.png","https://pic.shaojiemike.top/img/20220511235932.png","https://pic.shaojiemike.top/img/20220512000042.png"],"datePublished":"2024-01-05T07:17:06.000Z","dateModified":"2024-01-27T13:11:30.821Z","author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":"!!! abstract “导言”  The CUDA Execution Model: how the CUDA architecture handles the execution of code in parallel.  这篇将聚焦于CUDA的基础知识，基本概念，"}</script><link rel="canonical" href="http://icarus.shaojiemike.top/2024/01/05/Work/Programming/2-languageGrammar/cudaExeModel/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-01-05T07:17:06.000Z" title="1/5/2024, 7:17:06 AM">2024-01-05</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-01-27T13:11:30.821Z" title="1/27/2024, 1:11:30 PM">2024-01-27</time></span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">20 minutes read (About 2941 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">The CUDA Execution Model</h1><div class="content"><p>!!! abstract “导言”</p>
<pre><code> The CUDA Execution Model: how the CUDA architecture handles the execution of code in parallel.

这篇将聚焦于CUDA的基础知识，基本概念， 
</code></pre>
<span id="more"></span>

<h2 id="cuda-语法逻辑"><a href="#cuda-语法逻辑" class="headerlink" title="cuda 语法逻辑"></a>cuda 语法逻辑</h2><h3 id="运行配置逻辑"><a href="#运行配置逻辑" class="headerlink" title="运行配置逻辑"></a>运行配置逻辑</h3><p>Kernel Functions &amp; Device Functions：详见 编程语法部分 <code>__global__</code> 和 <code>__device__</code> 的区别。[^1]</p>
<h3 id="依赖与同步逻辑"><a href="#依赖与同步逻辑" class="headerlink" title="依赖与同步逻辑"></a>依赖与同步逻辑</h3><ol>
<li><code>__global__</code> 函数启动后，是异步与CPU执行的。</li>
<li>默认连续执行的cuda kernel function之间是有依赖关系的：前一个kernel(copy operation)完成了，下一个kernel才能开始。</li>
<li>kernel function之间默认是有implicit synchronization. 但是kernel内就没有了，需要类似的<code>cudaDeviceSynchronize()</code>函数实现同步。但是对性能会有极大影响，慎用。</li>
</ol>
<h3 id="Architecture-Agnostic-Code"><a href="#Architecture-Agnostic-Code" class="headerlink" title="Architecture-Agnostic Code"></a>Architecture-Agnostic Code</h3><p>cuda 代码是设计成架构无关的，一种编程语言。</p>
<h2 id="Execution-Hierarchy"><a href="#Execution-Hierarchy" class="headerlink" title="Execution Hierarchy"></a>Execution Hierarchy</h2><p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/192a9195f4ff6f379f670eb77945def0.png">{ align&#x3D;right } </p>
<p>CUDA distinguishes four granularities: </p>
<ul>
<li>Grid (launch configuration) </li>
<li>Block (cooperative threads) </li>
<li>warps (implicat hardware-governed layer)<br>- Blocks will implicitly be split into warps.<br>- Groups of 32 threads, enable SIMD execution</li>
<li>Thread (isolated execution state): Threads within a block can synchronize and share <code>Shared Memory</code></li>
</ul>
<p><img src="https://pic.shaojiemike.top/img/20220120182538.png?60">{ width&#x3D;50% }</p>
<h3 id="Logical-Hierarchy-Aspects-grid-block-thread"><a href="#Logical-Hierarchy-Aspects-grid-block-thread" class="headerlink" title="Logical Hierarchy Aspects: grid, block, thread"></a>Logical Hierarchy Aspects: <strong>grid, block, thread</strong></h3><ul>
<li>Allows developers to structure their solutions for <strong>particular problem sizes</strong></li>
<li>Leaves <strong>threads</strong> with the independence to <strong>make individual decisions</strong></li>
</ul>
<p>??? example “将问题按逻辑划分”</p>
<pre><code>  ![](https://pic.shaojiemike.top/img/20220120202703.png?60)

  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dim3 <span class="title function_">grid</span><span class="params">((nx + block.x - <span class="number">1</span>) / block.x, (ny + block.y - <span class="number">1</span>) / block.y)</span>;</span><br></pre></td></tr></table></figure>
</code></pre>
<h3 id="Physical-Hierarchy-Aspects-the-warp"><a href="#Physical-Hierarchy-Aspects-the-warp" class="headerlink" title="Physical Hierarchy Aspects: the warp"></a>Physical Hierarchy Aspects: the <strong>warp</strong></h3><ul>
<li>If you want to use Hardware <code>SIMD</code>-width,  implies that at <code>least 32 threads</code> will run.</li>
</ul>
<h2 id="Block-Execution-Model-block-queue"><a href="#Block-Execution-Model-block-queue" class="headerlink" title="Block Execution Model : block queue"></a><strong>Block</strong> Execution Model : block queue</h2><ul>
<li>Grid 里的 Blocks， 会自适应不同的GPU，调度到SM单元的block queue里 按顺序执行。<code>cuda Block</code>相当于<code>C++</code>线程，数目可以设置比较大，调度依靠<code>GPU</code>，方式类似于<code>CPU</code>在多核系统下调度多threads.</li>
<li>一个block里的warps，分配到一个SM里</li>
<li>一个block里的threads，共享一个SM里的资源(e.g.,<code>Shared Memory</code>)</li>
</ul>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/ac21941919480c459aedec4591003550.png"></p>
<h2 id="Warp-Execution-Model-warp-scheduler"><a href="#Warp-Execution-Model-warp-scheduler" class="headerlink" title="Warp Execution Model : warp scheduler"></a><strong>Warp</strong> Execution Model : warp scheduler</h2><h3 id="Design"><a href="#Design" class="headerlink" title="Design"></a>Design</h3><ul>
<li>Warp &#x3D; Threads grouped into a SIMD instruction </li>
<li>From Oxford Dictionary: Warp: 在纺织工业中，“Warp 经纱”一词指的是“织机上纵向拉伸的纱线，然后由纬纱交叉”。</li>
</ul>
<h3 id="Detail"><a href="#Detail" class="headerlink" title="Detail"></a>Detail</h3><ul>
<li>一旦block分配给SM，block内的warps就resident(驻留在)SM里。</li>
<li>如果warp is ready（前置依赖数据ready），warp schduler就会执行，如下图<br>- The SM warp schedulers will try to find ready warps, fetch instructions and dispatch them for execution.</li>
<li>最佳并行线程数：$144 SM * 4 warpScheduler&#x2F;SM * 32 Threads&#x2F;warps &#x3D; 18432$</li>
</ul>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/19e2331a882e813f26a4d86701c56d49.png"></p>
<h3 id="warp-switch-cost"><a href="#warp-switch-cost" class="headerlink" title="warp switch cost"></a>warp switch cost</h3><p>warp switch cost in the same warp scheduler is zero. 原因主要是所需上下文是保存在寄存器里的，而不像CPU进程&#x2F;线程的上下文切换可能需要访存来读取上下文信息。</p>
<ul>
<li><strong>快速上下文切换</strong>：当一个warp等待（例如，等待内存访问完成）时，SM可以快速切换到另一个warp进行计算。这种上下文切换的开销极小（0&#x2F;1 cycle），因为warp的状态（寄存器等）是独立存储的。</li>
<li><strong>隐藏延迟</strong>：通过warp切换，GPU能够隐藏延迟，特别是内存访问延迟。当一个warp因为内存访问而阻塞时，SM可以执行其他warp中的线程，这样就可以有效利用计算资源，减少闲置时间。</li>
<li><strong>硬件调度</strong>：Warp的调度是由硬件进行的，不需要操作系统级别的上下文切换。这使得切换过程非常快速和高效。</li>
</ul>
<h3 id="warp-scheduler-sub-core-32"><a href="#warp-scheduler-sub-core-32" class="headerlink" title="warp scheduler &#x3D; sub-core. *32?"></a>warp scheduler &#x3D; sub-core. *32?</h3><p>subcore内的并行资源(计算和访存bank)不一定是32的倍数，来支持线程并行。resource contention会导致必然的等待。</p>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/1183449fd668f3e012def6d3e32a4aa6.png">[^2]</p>
<h3 id="SIMT-warp-divergence"><a href="#SIMT-warp-divergence" class="headerlink" title="SIMT (warp divergence)"></a>SIMT (warp divergence)</h3><p>warp里每条指令的32个线程是SIMT而不是SIMD，有几点理由：</p>
<ol>
<li>线程独立计算值：不同CPU的SIMD，warp内的线程更像cpu里并行执行的多进程但是限制了<strong>不同进程每条指令要同时执行</strong>，</li>
<li>出现的情况：通常是在cuda代码里有<code>if</code>时导致执行流程分叉了：对于同一条执行，有些线程执行，但是另一些跳过了。</li>
<li>系统支持：每条指令对每个线程，有<code>active flag</code>来判断是否执行。</li>
<li>受限的并行度：sub-core 里可能只有8个FP64单元，即使线程全部执行，同一时刻SIMD的并行度也只有8。而且要在这些单元上执行四遍才能处理完32个线程。</li>
<li>$One^4$ rule: <strong>One</strong> functional unit can handle <strong>one</strong> instruction, for <strong>one</strong> thread, <strong>per</strong> clock.  但是CPU unit的延迟就不是one cycle，需要流水线隐藏。</li>
</ol>
<p>??? example “fewer than 32 of a particular type of unit”</p>
<pre><code>Other types of instructions will still require 32 units (eventually) but there may not be 32 of a given type of unit in the SM. When there are fewer than 32 of a particular type of unit, the warp scheduler will schedule a single instruction across **multiple clock cycles**.[^3] 

Suppose, for example, that a particular GPU SM design was such that there are only `4 DP units`. Then the warp scheduler, when it has e.g. a DP multiply operation/instruction to issue, will use those 4 units for a total of `8 clock cycles (4x8=32)` so as to provide a functional/execution unit for each instruction when considered per-thread, warp-wide. 
</code></pre>
<h3 id="Observation：类比CPU"><a href="#Observation：类比CPU" class="headerlink" title="Observation：类比CPU"></a>Observation：类比CPU</h3><ul>
<li>warp类似自带SIMT的指令</li>
<li>sub-core也和CPU类似在追求提高部件利用率，但是两者还是有区别：<br>      - sub-core主要是多线程间的切换(好像也没有乱序，而是上下文切换)<br>      - CPU的乱序执行，通过计分板等实现识别出有序指令流中无依赖的指令，根据情况(乱序)打乱他们的顺序，来提高硬件利用率。</li>
</ul>
<p>??? tip “GPU vs CPU 超线程 Hyper-threading”</p>
<pre><code>- CPU一般最多是核数的2倍，切换时上下文开销过大。一般只在IO时。多线程有额外优势。
- GPU借助硬件的设计，线程数几乎没有上限。上下文切换开销为0，反而线程越多能能隐藏延迟

![Latency hiding with 4 threads. Image ©AMD](https://i0.wp.com/streamhpc.com/wp-content/uploads/2017/01/latency-hiding.jpg?resize=350%2C263&amp;ssl=1)
</code></pre>
<h2 id="Thread-Execution-Model-TEM"><a href="#Thread-Execution-Model-TEM" class="headerlink" title="Thread Execution Model (TEM)"></a>Thread Execution Model (TEM)</h2><ul>
<li>顺序执行(In-order program execution), 当然这不包括编译时重排打乱指令顺序。</li>
<li>GPU上是没有ILP, 指令级并行的。</li>
</ul>
<p>Volta后架构，有两种GPU线程执行模型(有编译选项来选择)：</p>
<h3 id="TEM1-Legacy-Thread-Scheduling"><a href="#TEM1-Legacy-Thread-Scheduling" class="headerlink" title="TEM1: Legacy Thread Scheduling"></a>TEM1: Legacy Thread Scheduling</h3><ul>
<li>每个warp的线程只有一个唯一Program Counter</li>
<li>所有线程会同步执行一条指令</li>
<li>面对分支，也只能按顺序，分别执行两个branch</li>
</ul>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/bc0d123e5c0557b3c6a4bfe0d12a418e.png"></p>
<p>??? note “Control flow: Branch divergence”</p>
<pre><code>  Branch divergence occurs when threads inside warps `branches to different execution paths`.

  ![](https://pic.shaojiemike.top/shaojiemike/2024/01/d52d7abaa45eab2817399272813e18a4.png)
</code></pre>
<p>??? failure “Deadlock branch”</p>
<pre><code>  ![](https://pic.shaojiemike.top/shaojiemike/2024/01/211bd8b1fc111c03e9669ec61979d213.png)
</code></pre>
<h3 id="TEM2-Independent-Thread-Scheduling-ITS"><a href="#TEM2-Independent-Thread-Scheduling-ITS" class="headerlink" title="TEM2: Independent Thread Scheduling (ITS)"></a>TEM2: Independent Thread Scheduling (ITS)</h3><ul>
<li>改变点：每个Thread都有了自己的PC, 一个warp内的线程执行的位置（下一条想执行的指令）不必再相同。</li>
<li>不变点：但是warp内线程每个cycle执行的还是同一条指令。但是warp执行的指令可以在所属线程的32个PC间跳转，这解决了前面的Deadlock。</li>
</ul>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/467e5da69f1504f545ee961b152491e6.png"></p>
<h2 id="Streaming-and-Task-based-programming"><a href="#Streaming-and-Task-based-programming" class="headerlink" title="Streaming and Task-based programming"></a>Streaming and Task-based programming</h2><figure markdown>
  ![](https://pic.shaojiemike.top/shaojiemike/2024/01/771f49fdcc35b2d765314577e63b1c84.png)
  <figcaption>GPU Pipeline Implementation, less memory consumption</figcaption>
</figure>[^5]

<h3 id="Time-Sliced-Kernels-Kernel-by-Kernel-KBK"><a href="#Time-Sliced-Kernels-Kernel-by-Kernel-KBK" class="headerlink" title="Time-Sliced Kernels (Kernel by Kernel, KBK)"></a>Time-Sliced Kernels (Kernel by Kernel, KBK)</h3><p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/dc5dcb34330c099f5c73f348f614f9df.png"></p>
<p>The benefits of this approach are</p>
<ul>
<li>There is no (added) divergence within a kernel </li>
<li>This also means that we should observe optimal occupancy for each kernel</li>
</ul>
<p>The drawbacks are</p>
<ul>
<li>There is need for CPU synchronization, which adds some overhead to the execution</li>
<li>We cannot easily use shared memory to keep data local from one stage to the other (only within onestage, consider a stage that could generate new input for itself) </li>
<li>Load imbalance might be a problem<ul>
<li>If one kernel runs longer than the others due to longer processing, parts of the device might beunused until the next CPU sync as no new work can be launched until the synchronizationpoint with the CPU comes up</li>
</ul>
</li>
</ul>
<h3 id="Dynamic-Parallelism"><a href="#Dynamic-Parallelism" class="headerlink" title="Dynamic Parallelism"></a>Dynamic Parallelism</h3><p>[NVIDIA 2012]</p>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/1bc8a2ce631dcc772fbd537fc8724b95.png"></p>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2024/01/24dc9a9cc9ba089368610b521500b480.png"></p>
<h2 id="shared-memory-原理"><a href="#shared-memory-原理" class="headerlink" title="shared memory 原理"></a>shared memory 原理</h2><p>GPU 的共享内存，实际上是 32 块内存条通过并联组成的，每个时钟周期都可以读取一个 int。第 i 块内存，负责 <code>addr % 32 == i</code> 的数据。这样交错存储，可以保证随机访问时，访存能够尽量分摊到 32 个块。</p>
<p>如果在block内多个线程访问的地址落入到同一个bank内，那么就会访问同一个bank就会产生bank conflict，这些访问将是变成串行，在实际开发调式中非常主要bank conflict.</p>
<p>处理方法非常简单，我们不要把 shared memory 开辟的空间设置成 32 的倍数即可（线性同余方程，原理也很好理解）或者修改bank的size大小，默认是4字节</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__host__ cudaError_t <span class="title function_">cudaDeviceSetSharedMemConfig</span> <span class="params">( cudaSharedMemConfig config )</span></span><br></pre></td></tr></table></figure>

<p>其中 cudaSharedMemConfi为一个枚举型：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cudaSharedMemBankSizeDefault = <span class="number">0</span></span><br><span class="line">cudaSharedMemBankSizeFourByte = <span class="number">1</span></span><br><span class="line">cudaSharedMemBankSizeEightByte = <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p> 只支持在host端进行调用，不支持在device端调用。<br>CUDA API中还支持获取bank size大小：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__host__  __device__ cudaError_t <span class="title function_">cudaDeviceGetSharedMemConfig</span> <span class="params">( cudaSharedMemConfig ** pConfig )</span></span><br></pre></td></tr></table></figure>

<p>??? tip “值得注意的是”</p>
<pre><code>1. 多个线程同时访问同一个bank中**相同**的数组元素 **不会**产生bank conflict，将会出发广播
2. 同一个 warp 的不同线程会访问到同一个 bank 的**不同**地址就会**发生** bank conflict
</code></pre>
<h3 id="容易发生bank-conflit的情况"><a href="#容易发生bank-conflit的情况" class="headerlink" title="容易发生bank conflit的情况"></a>容易发生bank conflit的情况</h3><ol>
<li>数据类型是4字节，但是不是单位步长</li>
<li><img src="https://pic.shaojiemike.top/img/20220511235932.png">[^2]</li>
<li>数据类型是1字节，步长是1。</li>
<li><img src="https://pic.shaojiemike.top/img/20220512000042.png"></li>
</ol>
<h2 id="Nvidia-Design"><a href="#Nvidia-Design" class="headerlink" title="Nvidia Design"></a>Nvidia Design</h2><h3 id="NV-特殊汇编指令"><a href="#NV-特殊汇编指令" class="headerlink" title="NV 特殊汇编指令"></a>NV 特殊汇编指令</h3><p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/blog/mixed-precision-programming-cuda-8/">cuda8 DP2A and DP4A</a></p>
<h3 id="限制的参数"><a href="#限制的参数" class="headerlink" title="限制的参数"></a>限制的参数</h3><table>
<thead>
<tr>
<th>限制</th>
<th>具体值</th>
</tr>
</thead>
<tbody><tr>
<td>Maximum number of threads per block</td>
<td>1024</td>
</tr>
<tr>
<td>Maximum number of resident blocks per SM</td>
<td>16&#x2F;32</td>
</tr>
<tr>
<td>Maximum number of resident warps per SM</td>
<td>64&#x2F;32</td>
</tr>
<tr>
<td>Maximum number of resident threads per SM</td>
<td>2048&#x2F;1024</td>
</tr>
<tr>
<td>Maximum number of 32-bit registers per thread</td>
<td>255</td>
</tr>
<tr>
<td>Maximum amount of shared memory per thread block</td>
<td>48KB&#x2F;96KB&#x2F;64KB</td>
</tr>
</tbody></table>
<ul>
<li><strong>Most recent GPUs (excepting Turing) allow a hardware limit of 64 warps per SM</strong></li>
</ul>
<p>??? note “一个SM最多有2048个线程”</p>
<pre><code>![](https://pic.shaojiemike.top/img/20220409155719.png)[^4]
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Max dimension size of a thread block (x,y,z): (1024, 1024, 64)</span><br><span class="line">Max dimension size of a grid size    (x,y,z): (2147483647, 65535, 65535)</span><br><span class="line">(30) Multiprocessors, (128) CUDA Cores/MP:     3840 CUDA Cores</span><br><span class="line">Warp size:                                     32</span><br><span class="line">Maximum number of threads per multiprocessor:  2048</span><br><span class="line">Maximum number of threads per block:           1024</span><br><span class="line">Max dimension size of a thread block (x,y,z): (1024, 1024, 64) # 是x,y,z 各自最大值</span><br><span class="line">Total amount of shared memory per block:       49152 bytes (48 Kbytes)</span><br><span class="line">Total shared memory per multiprocessor(SM):    98304 bytes (96 Kbytes)</span><br><span class="line">Total number of registers available per block: 65536</span><br></pre></td></tr></table></figure>

<p>??? example “GP102”</p>
<pre><code>图中红框是一个SM, 绿点是core

![](https://pic.shaojiemike.top/img/20220512220943.png)

P40有30个SM，每个SM有4*32=128个核。

![](https://pic.shaojiemike.top/img/20220512220904.png)
</code></pre>
<!-- <figure markdown>
  ![Image title](https://dummyimage.com/600x400/){ width=80% }
  ![Image title](https://dummyimage.com/600x400/){ width="300" }
  <figcaption>Image caption</figcaption>
</figure> -->


<!-- ## 🏗施工中🏗

🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧

觉得有意义写，先占个位子。还没写好呢，建议不要看（逻辑内容都没想清楚），不要急~~

🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧 -->


<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><!-- footnote is for url which the writer do not want reader to click to interupt the reading. -->

<!-- 上面回答部分**来自ChatGPT-3.5**，没有进行正确性的交叉校验。-->

<p>[^1]: <a target="_blank" rel="noopener" href="https://cuda-tutorial.github.io/part1_22.pdf">CUDA and Applications to Task-based Programming</a></p>
<p>[^2]: (ISCA’22) GCoM: a detailed GPU core model for accurate analytical modeling of modern GPUs</p>
<p>[^3]: <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/62147624/how-many-cuda-cores-is-used-to-process-a-cuda-warp">How many CUDA cores is used to process a CUDA warp?</a></p>
<p>[^4]: Nvidia cuda-c-programming-guide <a target="_blank" rel="noopener" href="https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#features-and-technical-specifications__technical-specifications-per-compute-capability">ref</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>The CUDA Execution Model</p><p><a href="http://icarus.shaojiemike.top/2024/01/05/Work/Programming/2-languageGrammar/cudaExeModel/">http://icarus.shaojiemike.top/2024/01/05/Work/Programming/2-languageGrammar/cudaExeModel/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Shaojie Tan</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2024-01-05</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2024-01-27</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/cuda/">cuda</a><a class="link-muted mr-2" rel="tag" href="/tags/warp/">warp</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>Afdian.net</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/" alt="Alipay"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2024/01/09/Work/Programming/6-deploy/pipPackage/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Build and release your Pip Package</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2024/01/04/Work/Architecture/performanceModel/GPUPerformanceModel/"><span class="level-item">CPU / GPU Performance Model based on Interval Analysis</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">𝘊𝘰𝘮𝘱𝘶𝘵𝘦𝘳 𝘈𝘳𝘤𝘩𝘪𝘵𝘦𝘤𝘵𝘶𝘳𝘦 &amp; 𝘏𝘗𝘊</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">388</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">31</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">487</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#cuda-语法逻辑"><span class="level-left"><span class="level-item">1</span><span class="level-item">cuda 语法逻辑</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#运行配置逻辑"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">运行配置逻辑</span></span></a></li><li><a class="level is-mobile" href="#依赖与同步逻辑"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">依赖与同步逻辑</span></span></a></li><li><a class="level is-mobile" href="#Architecture-Agnostic-Code"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">Architecture-Agnostic Code</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Execution-Hierarchy"><span class="level-left"><span class="level-item">2</span><span class="level-item">Execution Hierarchy</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Logical-Hierarchy-Aspects-grid-block-thread"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">Logical Hierarchy Aspects: grid, block, thread</span></span></a></li><li><a class="level is-mobile" href="#Physical-Hierarchy-Aspects-the-warp"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">Physical Hierarchy Aspects: the warp</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Block-Execution-Model-block-queue"><span class="level-left"><span class="level-item">3</span><span class="level-item">Block Execution Model : block queue</span></span></a></li><li><a class="level is-mobile" href="#Warp-Execution-Model-warp-scheduler"><span class="level-left"><span class="level-item">4</span><span class="level-item">Warp Execution Model : warp scheduler</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Design"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">Design</span></span></a></li><li><a class="level is-mobile" href="#Detail"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">Detail</span></span></a></li><li><a class="level is-mobile" href="#warp-switch-cost"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">warp switch cost</span></span></a></li><li><a class="level is-mobile" href="#warp-scheduler-sub-core-32"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">warp scheduler = sub-core. *32?</span></span></a></li><li><a class="level is-mobile" href="#SIMT-warp-divergence"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">SIMT (warp divergence)</span></span></a></li><li><a class="level is-mobile" href="#Observation：类比CPU"><span class="level-left"><span class="level-item">4.6</span><span class="level-item">Observation：类比CPU</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Thread-Execution-Model-TEM"><span class="level-left"><span class="level-item">5</span><span class="level-item">Thread Execution Model (TEM)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#TEM1-Legacy-Thread-Scheduling"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">TEM1: Legacy Thread Scheduling</span></span></a></li><li><a class="level is-mobile" href="#TEM2-Independent-Thread-Scheduling-ITS"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">TEM2: Independent Thread Scheduling (ITS)</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Streaming-and-Task-based-programming"><span class="level-left"><span class="level-item">6</span><span class="level-item">Streaming and Task-based programming</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Time-Sliced-Kernels-Kernel-by-Kernel-KBK"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">Time-Sliced Kernels (Kernel by Kernel, KBK)</span></span></a></li><li><a class="level is-mobile" href="#Dynamic-Parallelism"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">Dynamic Parallelism</span></span></a></li></ul></li><li><a class="level is-mobile" href="#shared-memory-原理"><span class="level-left"><span class="level-item">7</span><span class="level-item">shared memory 原理</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#容易发生bank-conflit的情况"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">容易发生bank conflit的情况</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Nvidia-Design"><span class="level-left"><span class="level-item">8</span><span class="level-item">Nvidia Design</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#NV-特殊汇编指令"><span class="level-left"><span class="level-item">8.1</span><span class="level-item">NV 特殊汇编指令</span></span></a></li><li><a class="level is-mobile" href="#限制的参数"><span class="level-left"><span class="level-item">8.2</span><span class="level-item">限制的参数</span></span></a></li></ul></li><li><a class="level is-mobile" href="#参考文献"><span class="level-left"><span class="level-item">9</span><span class="level-item">参考文献</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">39</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math/"><span class="level-start"><span class="level-item">Math</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Thinking/"><span class="level-start"><span class="level-item">Thinking</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">118</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">51</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-27T08:35:33.000Z">2024-01-27</time></p><p class="title"><a href="/2024/01/27/Work/Artificial%20Intelligence/Basic/AIComputeMachine/">AI Compute Machine</a></p><p class="categories"><a href="/categories/Artificial-Intelligence/">Artificial Intelligence</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-25T03:20:42.000Z">2024-01-25</time></p><p class="title"><a href="/2024/01/25/OutOfWork/5-VideoEntertainment/AnimeSuperResolutionFrame/">Anime Super Resolution to 4K &amp; Interpolation to 120 fps</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-13T14:32:40.000Z">2024-01-13</time></p><p class="title"><a href="/2024/01/13/Thinking/2-courage2move/SocialScience/">Social Science</a></p><p class="categories"><a href="/categories/Thinking/">Thinking</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-13T12:15:22.000Z">2024-01-13</time></p><p class="title"><a href="/2024/01/13/Work/Architecture/FPGA/">FPGA</a></p><p class="categories"><a href="/categories/toLearn/">toLearn</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-13T08:02:52.000Z">2024-01-13</time></p><p class="title"><a href="/2024/01/13/Work/Architecture/workloadPriority/">Workload Characterization &amp; Priority &amp; Scheduler to CPU/GPU/PIM</a></p><p class="categories"><a href="/categories/Architecture/">Architecture</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/"><span class="level-start"><span class="level-item">2024</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">235</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">67</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">72</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2024 Shaojie Tan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>