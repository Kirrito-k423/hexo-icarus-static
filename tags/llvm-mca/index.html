<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>Tag: llvm-mca - SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="SHAOJIE&#039;S BOOK"><meta property="og:url" content="http://icarus.shaojiemike.top/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://icarus.shaojiemike.top/img/og_image.png"><meta property="article:author" content="Shaojie Tan"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://icarus.shaojiemike.top/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top"},"headline":"SHAOJIE'S BOOK","image":["http://icarus.shaojiemike.top/img/og_image.png"],"author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.0.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">Tags</a></li><li class="is-active"><a href="#" aria-current="page">llvm-mca</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-05-30T16:00:00.000Z" title="5/30/2023, 4:00:00 PM">2023-05-30</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-27T02:43:32.801Z" title="11/27/2023, 2:43:32 AM">2023-11-27</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">24 minutes read (About 3665 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/30/Work/HPC/llvm-mca/LLVM-mca/">LLVM-MCA: docs</a></p><div class="content"><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>LLVM Machine Code Analyzer æ˜¯ä¸€ç§æ€§èƒ½åˆ†æå·¥å…·ï¼Œå®ƒä½¿ç”¨llvmä¸­å¯ç”¨çš„ä¿¡æ¯ï¼ˆå¦‚è°ƒåº¦æ¨¡å‹ï¼‰é™æ€æµ‹é‡ç‰¹å®šCPUä¸­æœºå™¨ä»£ç çš„æ€§èƒ½ã€‚</p>
<p>æ€§èƒ½æ˜¯æ ¹æ®<strong>ååé‡</strong>å’Œ<strong>å¤„ç†å™¨èµ„æºæ¶ˆè€—</strong>æ¥è¡¡é‡çš„ã€‚è¯¥å·¥å…·ç›®å‰é€‚ç”¨äºåœ¨åç«¯ä¸­ä½¿ç”¨LLVMè°ƒåº¦æ¨¡å‹çš„å¤„ç†å™¨ã€‚</p>
<p>è¯¥å·¥å…·çš„ä¸»è¦ç›®æ ‡ä¸ä»…æ˜¯é¢„æµ‹ä»£ç åœ¨ç›®æ ‡ä¸Šè¿è¡Œæ—¶çš„æ€§èƒ½ï¼Œè¿˜å¸®åŠ©è¯Šæ–­æ½œåœ¨çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p>ç»™å®šæ±‡ç¼–ä»£ç ï¼Œllvm-mcaå¯ä»¥ä¼°è®¡æ¯ä¸ªå‘¨æœŸçš„æŒ‡ä»¤æ•°ï¼ˆIPCï¼‰ä»¥åŠç¡¬ä»¶èµ„æºå‹åŠ›ã€‚åˆ†æå’ŒæŠ¥å‘Šé£æ ¼çš„çµæ„Ÿæ¥è‡ªè‹±ç‰¹å°”çš„IACAå·¥å…·ã€‚</p>
<h3 id="github"><a href="#github" class="headerlink" title="github"></a>github</h3><p><a target="_blank" rel="noopener" href="https://github.com/llvm/llvm-project/tree/main/llvm/tools/llvm-mca">https://github.com/llvm/llvm-project/tree/main/llvm/tools/llvm-mca</a></p>
<h3 id="docs"><a href="#docs" class="headerlink" title="docs"></a>docs</h3><p><a target="_blank" rel="noopener" href="https://llvm.org/docs/CommandGuide/llvm-mca.html">https://llvm.org/docs/CommandGuide/llvm-mca.html</a></p>
<h2 id="options"><a href="#options" class="headerlink" title="options"></a>options</h2><h3 id="architecture"><a href="#architecture" class="headerlink" title="architecture"></a>architecture</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-mtriple=&lt;target triple&gt;</span><br><span class="line">    eg. -mtriple=x86_64-unknown-unknown</span><br><span class="line">-march=&lt;arch&gt;</span><br><span class="line">    Specify the architecture for which to analyze the code. It defaults to the host default target.</span><br><span class="line">-march=&lt;arch&gt;</span><br><span class="line">    Specify the architecture for which to analyze the code. It defaults to the host default target.</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æ”¯æŒçš„arch</span></span><br><span class="line">llc --version</span><br><span class="line"><span class="comment"># æŸ¥çœ‹å…·ä½“æ”¯æŒçš„CPU Architecture</span></span><br><span class="line">llc -march=x86 -mattr=<span class="built_in">help</span></span><br></pre></td></tr></table></figure>

<h3 id="output-report"><a href="#output-report" class="headerlink" title="output-report"></a>output-report</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-output-asm-variant=&lt;variant id&gt;</span><br><span class="line">    ä¸ºå·¥å…·ç”Ÿæˆçš„æŠ¥å‘ŠæŒ‡å®šè¾“å‡ºç¨‹åºé›†å˜é‡ã€‚???</span><br><span class="line">-print-imm-hex</span><br><span class="line">    ä¼˜å…ˆ16è¿›åˆ¶è¾“å‡ºã€‚</span><br><span class="line">-json</span><br><span class="line">    é™¤äº†ç“¶é¢ˆåˆ†æï¼ŒåŸºæœ¬éƒ½æ”¯æŒjsonæ ¼å¼è¾“å‡ºè§†å›¾</span><br><span class="line">-timeline</span><br><span class="line">    æ‰“å°æŒ‡ä»¤æµæ°´çº¿æƒ…å†µ</span><br></pre></td></tr></table></figure>

<h3 id="runtime-options"><a href="#runtime-options" class="headerlink" title="runtime options"></a>runtime options</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-dispatch=&lt;width&gt;</span><br><span class="line">    ä¸ºå¤„ç†å™¨æŒ‡å®šä¸åŒçš„è°ƒåº¦å®½åº¦ã€‚è°ƒåº¦å®½åº¦é»˜è®¤ä¸ºå¤„ç†å™¨è°ƒåº¦æ¨¡å‹ä¸­çš„â€œIssueWidthâ€å­—æ®µã€‚</span><br><span class="line">-register-file-size=&lt;size&gt;</span><br><span class="line">    æŒ‡å®šå¯„å­˜å™¨æ–‡ä»¶çš„å¤§å°ã€‚æŒ‡å®šæ—¶ï¼Œè¯¥é¡¹ä¼šé™åˆ¶å¯ç”¨äºå¯„å­˜å™¨é‡å‘½åçš„ç‰©ç†å¯„å­˜å™¨çš„æ•°é‡ã€‚æ­¤æ ‡å¿—çš„å€¼ä¸ºé›¶æ„å‘³ç€â€œæ— é™æ•°é‡çš„ç‰©ç†å¯„å­˜å™¨â€ã€‚</span><br><span class="line">-iterations=&lt;number of iterations&gt;</span><br><span class="line">    æŒ‡å®šè¦è¿è¡Œçš„è¿­ä»£æ¬¡æ•°ã€‚å¦‚æœæ­¤æ ‡å¿—è®¾ç½®ä¸º 0ï¼Œåˆ™è¯¥å·¥å…·ä¼šå°†è¿­ä»£æ¬¡æ•°è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼ˆå³ 100ï¼‰ã€‚</span><br><span class="line">-noalias=&lt;bool&gt;</span><br><span class="line">    loads and stores donâ€™t alias</span><br><span class="line">-lqueue=&lt;load queue size&gt;</span><br><span class="line">-squeue=&lt;store queue size&gt;</span><br><span class="line">    åœ¨å·¥å…·æ¨¡æ‹Ÿçš„åŠ è½½/å­˜å‚¨å•å…ƒä¸­æŒ‡å®šåŠ è½½é˜Ÿåˆ—çš„å¤§å°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å·¥å…·å‡å®šåŠ è½½é˜Ÿåˆ—ä¸­çš„æ¡ç›®æ•°é‡ä¸å—é™åˆ¶ã€‚æ­¤æ ‡å¿—çš„é›¶å€¼å°†è¢«å¿½ç•¥ï¼Œè€Œæ˜¯ä½¿ç”¨é»˜è®¤åŠ è½½é˜Ÿåˆ—å¤§å°ã€‚</span><br><span class="line">-disable-cb</span><br><span class="line">    å¼ºåˆ¶ä½¿ç”¨é€šç”¨çš„ CustomBehaviour å’Œ InstrPostProcess ç±»ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç›®æ ‡ç‰¹å®šçš„å®ç°ã€‚é€šç”¨ç±»ä»ä¸æ£€æµ‹ä»»ä½•è‡ªå®šä¹‰å±é™©æˆ–å¯¹æŒ‡ä»¤è¿›è¡Œä»»ä½•åå¤„ç†ä¿®æ”¹ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="more-values-Info"><a href="#more-values-Info" class="headerlink" title="more values&#x2F;Info"></a>more values&#x2F;Info</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-resource-pressure</span><br><span class="line">    Enable the resource pressure view. This is enabled by default.</span><br><span class="line">-register-file-stats</span><br><span class="line">    å¯ç”¨æ³¨å†Œæ–‡ä»¶ä½¿ç”¨ç»Ÿè®¡ã€‚</span><br><span class="line">-dispatch-stats</span><br><span class="line">-scheduler-stats</span><br><span class="line">-retire-stats</span><br><span class="line">-instruction-info</span><br><span class="line">    å¯ç”¨é¢å¤–çš„è°ƒåº¦/å‘å‡º/retire control unitç»Ÿè®¡ã€‚è¯¥è§†å›¾æ”¶é›†å’Œåˆ†ææŒ‡ä»¤åˆ†æ´¾äº‹ä»¶ï¼Œä»¥åŠé™æ€/åŠ¨æ€åˆ†æ´¾åœé¡¿äº‹ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ç¦ç”¨æ­¤è§†å›¾ã€‚</span><br><span class="line">-show-encoding</span><br><span class="line">    æ‰“å°æŒ‡ä»¤16è¿›åˆ¶</span><br><span class="line">-all-stats</span><br><span class="line">-all-views</span><br><span class="line">-instruction-tables</span><br><span class="line">    è¿™ä¸èµ„æºå‹åŠ›è§†å›¾ä¸åŒï¼Œå› ä¸ºå®ƒä¸éœ€è¦æ¨¡æ‹Ÿä»£ç ã€‚ç›¸åï¼Œå®ƒæŒ‰é¡ºåºæ‰“å°æ¯ä¸ªæŒ‡ä»¤çš„èµ„æºå‹åŠ›çš„ç†è®ºå‡åŒ€åˆ†å¸ƒã€‚</span><br><span class="line">-bottleneck-analysis</span><br><span class="line">    æ‰“å°æœ‰å…³å½±å“ååé‡çš„ç“¶é¢ˆçš„ä¿¡æ¯ã€‚è¿™ç§åˆ†æå¯èƒ½å¾ˆæ˜‚è´µï¼Œå¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹æ˜¯ç¦ç”¨çš„ã€‚ç“¶é¢ˆåœ¨æ‘˜è¦è§†å›¾ä¸­çªå‡ºæ˜¾ç¤ºã€‚å…·æœ‰æœ‰åºåç«¯çš„å¤„ç†å™¨ç›®å‰ä¸æ”¯æŒç“¶é¢ˆåˆ†æã€‚???</span><br></pre></td></tr></table></figure>

<h2 id="å®ç°é€»è¾‘"><a href="#å®ç°é€»è¾‘" class="headerlink" title="å®ç°é€»è¾‘"></a>å®ç°é€»è¾‘</h2><p><img src="https://pic.shaojiemike.top/img/38FD1039D93F746E0A45477E84CF74A0.png"></p>
<h2 id="æ ·ä¾‹åˆ†æ"><a href="#æ ·ä¾‹åˆ†æ" class="headerlink" title="æ ·ä¾‹åˆ†æ"></a>æ ·ä¾‹åˆ†æ</h2><h3 id="quick-overview-of-the-performance-throughput"><a href="#quick-overview-of-the-performance-throughput" class="headerlink" title="quick overview of the performance throughput"></a>quick overview of the performance throughput</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Iterations:        300</span><br><span class="line">Instructions:      900</span><br><span class="line">Total Cycles:      610</span><br><span class="line">Total uOps:        900</span><br><span class="line"></span><br><span class="line">Dispatch Width:    2</span><br><span class="line">uOps Per Cycle:    1.48</span><br><span class="line">IPC:               1.48</span><br><span class="line">Block RThroughput: 2.0</span><br></pre></td></tr></table></figure>

<ol>
<li>IPC<ol>
<li>ç†è®ºæœ€å¤§å€¼æ˜¯$$\frac{OneLoopInstructions}{Block_RThroughput}&#x3D;(OneLoopInstructions)*(Block_Throughput)$$</li>
</ol>
</li>
<li>uOps Per Cycle<ol>
<li>simulated micro opcodes (uOps)</li>
<li><strong>æ¯ä¸ªå‘¨æœŸçš„simulated micro opcodesæ•°</strong></li>
<li>åœ¨ä¸è€ƒè™‘å¾ªç¯ä¾èµ–çš„æƒ…å†µä¸‹ï¼Œç†è®ºä¸Šæœ€å¤§å€¼æ˜¯$$\frac{OneLoopUOps}{Block_RThroughput}&#x3D;(OneLoopUOps)*(Block_Throughput)$$</li>
<li>A delta between Dispatch Width and this field is an indicator of a performance issue.</li>
<li>The delta between the Dispatch Width (2.00), and the theoretical maximum uOp throughput (1.50) is an indicator of a performance bottleneck caused by the lack of hardware resources, and the Resource pressure view can help to identify the problematic resource usage.</li>
</ol>
</li>
<li>Dispatch Width<ol>
<li>å‘å°„åˆ°ä¹±åºåç«¯çš„æœ€å¤§å¾®æŒ‡ä»¤æ“ä½œæ•°(the maximum number of micro opcodes&#x2F;uOps)ï¼Ÿ</li>
</ol>
</li>
<li>Block RThroughput (Block Reciprocal Throughput)<ol>
<li>åœ¨ä¸è€ƒè™‘å¾ªç¯ä¾èµ–çš„æƒ…å†µä¸‹ï¼Œç†è®ºä¸Šçš„<strong>æ¯æ¬¡å¾ªç¯çš„æœ€å¤§blockæˆ–è€…iterationsæ•°</strong></li>
<li>å—é™äºdispatch rateå’Œthe availability of hardware resources.</li>
</ol>
</li>
</ol>
<h3 id="Instruction-info-view"><a href="#Instruction-info-view" class="headerlink" title="Instruction info view"></a>Instruction info view</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Instruction Info:</span><br><span class="line">[1]: #uOps</span><br><span class="line">[2]: Latency</span><br><span class="line">[3]: RThroughput</span><br><span class="line">[4]: MayLoad</span><br><span class="line">[5]: MayStore</span><br><span class="line">[6]: HasSideEffects (U)</span><br><span class="line"></span><br><span class="line">[1]    [2]    [3]    [4]    [5]    [6]    Instructions:</span><br><span class="line"> 1      2     1.00                        vmulps      %xmm0, %xmm1, %xmm2</span><br><span class="line"> 1      3     1.00                        vhaddps     %xmm2, %xmm2, %xmm3</span><br><span class="line"> 1      3     1.00                        vhaddps     %xmm3, %xmm3, %xmm4</span><br></pre></td></tr></table></figure>

<p>æ˜¾ç¤ºäº†æŒ‡ä»¤é‡Œé˜Ÿåˆ—æ¯æ¡æŒ‡ä»¤çš„<strong>å»¶è¿Ÿ</strong>å’Œ<strong>ååé‡çš„å€’æ•°</strong>ã€‚</p>
<p>RThroughputæ˜¯æŒ‡ä»¤ååé‡çš„å€’æ•°ã€‚åœ¨ä¸è€ƒè™‘å¾ªç¯ä¾èµ–çš„æƒ…å†µä¸‹ï¼Œååé‡æ˜¯<strong>å•å‘¨æœŸèƒ½æ‰§è¡Œçš„åŒç±»å‹æŒ‡ä»¤çš„æœ€å¤§æ•°é‡</strong>ã€‚</p>
<h3 id="Resource-pressure-view"><a href="#Resource-pressure-view" class="headerlink" title="Resource pressure view"></a>Resource pressure view</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Resources:</span><br><span class="line">[0]   - JALU0</span><br><span class="line">[1]   - JALU1</span><br><span class="line">[2]   - JDiv</span><br><span class="line">[3]   - JFPA</span><br><span class="line">[4]   - JFPM</span><br><span class="line">[5]   - JFPU0</span><br><span class="line">[6]   - JFPU1</span><br><span class="line">[7]   - JLAGU</span><br><span class="line">[8]   - JMul</span><br><span class="line">[9]   - JSAGU</span><br><span class="line">[10]  - JSTC</span><br><span class="line">[11]  - JVALU0</span><br><span class="line">[12]  - JVALU1</span><br><span class="line">[13]  - JVIMUL</span><br><span class="line"></span><br><span class="line">Resource pressure per iteration:</span><br><span class="line">[0]    [1]    [2]    [3]    [4]    [5]    [6]    [7]    [8]    [9]    [10]   [11]   [12]   [13]</span><br><span class="line"> -      -      -     2.00   1.00   2.00   1.00    -      -      -      -      -      -      -</span><br><span class="line"></span><br><span class="line">Resource pressure by instruction:</span><br><span class="line">[0]    [1]    [2]    [3]    [4]    [5]    [6]    [7]    [8]    [9]    [10]   [11]   [12]   [13]   Instructions:</span><br><span class="line"> -      -      -      -     1.00    -     1.00    -      -      -      -      -      -      -     vmulps      %xmm0, %xmm1, %xmm2</span><br><span class="line"> -      -      -     1.00    -     1.00    -      -      -      -      -      -      -      -     vhaddps     %xmm2, %xmm2, %xmm3</span><br><span class="line"> -      -      -     1.00    -     1.00    -      -      -      -      -      -      -      -     vhaddps     %xmm3, %xmm3, %xmm4</span><br></pre></td></tr></table></figure>

<p>æ¯æ¬¡å¾ªç¯æˆ–è€…æ¯æ¡æŒ‡ä»¤æ‰§è¡Œï¼Œæ¶ˆè€—çš„èµ„æºå‘¨æœŸæ•°ã€‚ä»è€Œæ‰¾åˆ°é«˜èµ„æºå ç”¨çš„éƒ¨åˆ†ã€‚</p>
<h3 id="Timeline-View"><a href="#Timeline-View" class="headerlink" title="Timeline View"></a>Timeline View</h3><p>å¯æ‰“å°æµæ°´çº¿æƒ…å†µ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Timeline view:</span><br><span class="line">                    012345</span><br><span class="line">Index     0123456789</span><br><span class="line"></span><br><span class="line">[0,0]     DeeER.    .    .   vmulps   %xmm0, %xmm1, %xmm2</span><br><span class="line">[0,1]     D==eeeER  .    .   vhaddps  %xmm2, %xmm2, %xmm3</span><br><span class="line">[0,2]     .D====eeeER    .   vhaddps  %xmm3, %xmm3, %xmm4</span><br><span class="line">[1,0]     .DeeE-----R    .   vmulps   %xmm0, %xmm1, %xmm2</span><br><span class="line">[1,1]     . D=eeeE---R   .   vhaddps  %xmm2, %xmm2, %xmm3</span><br><span class="line">[1,2]     . D====eeeER   .   vhaddps  %xmm3, %xmm3, %xmm4</span><br><span class="line">[2,0]     .  DeeE-----R  .   vmulps   %xmm0, %xmm1, %xmm2</span><br><span class="line">[2,1]     .  D====eeeER  .   vhaddps  %xmm2, %xmm2, %xmm3</span><br><span class="line">[2,2]     .   D======eeeER   vhaddps  %xmm3, %xmm3, %xmm4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Average Wait times (based on the timeline view):</span><br><span class="line">[0]: Executions</span><br><span class="line">[1]: Average time spent waiting in a scheduler&#x27;s queue</span><br><span class="line">[2]: Average time spent waiting in a scheduler&#x27;s queue while ready</span><br><span class="line">[3]: Average time elapsed from WB until retire stage</span><br><span class="line"></span><br><span class="line">      [0]    [1]    [2]    [3]</span><br><span class="line">0.     3     1.0    1.0    3.3       vmulps   %xmm0, %xmm1, %xmm2</span><br><span class="line">1.     3     3.3    0.7    1.0       vhaddps  %xmm2, %xmm2, %xmm3</span><br><span class="line">2.     3     5.7    0.0    0.0       vhaddps  %xmm3, %xmm3, %xmm4</span><br><span class="line">       3     3.3    0.5    1.4       &lt;total&gt;</span><br></pre></td></tr></table></figure>

<p>å½±å“å› ç´ åŒ…æ‹¬ï¼š</p>
<ol>
<li>æ•°æ®å†²çª&#x2F;ä¾èµ–ï¼šè¯»åå†™ï¼Œå†™åè¯»ä¾èµ– ã€‚æ— æ³•æŒ‡ä»¤çº§å¹¶è¡Œï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¯„å­˜å™¨é‡å‘½åè§£å†³</li>
<li>ç»“æ„å†²çªï¼šå ç”¨å‘å°„ä½ æˆ–è€… åŒä¸€ç¡¬ä»¶</li>
<li>æ§åˆ¶å†²çªï¼šåˆ†æ”¯ï¼Ÿ</li>
<li>instructions must retire in program order, so [1,0] has to wait for [0,2] to be retired first</li>
</ol>
<h3 id="Bottleneck-Analysis"><a href="#Bottleneck-Analysis" class="headerlink" title="Bottleneck Analysis"></a>Bottleneck Analysis</h3><ul>
<li>å¯ä»¥åˆ†æå‡ºæ•°æ®å†²çª&#x2F;ä¾èµ–å’Œç»“æ„å†²çªçš„å½±å“å¤§å°</li>
<li>å‡†ç¡®æ€§å–å†³äºæ¨¡æ‹Ÿå’Œæ˜¯å¦æœ‰å¯¹åº”CPUæ¨¡å‹ã€‚</li>
<li>æš‚æ—¶ä¸æ”¯æŒæœ‰åºåç«¯ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Cycles with backend pressure increase [ 91.52% ]</span><br><span class="line">Throughput Bottlenecks:</span><br><span class="line">  Resource Pressure       [ 0.01% ]</span><br><span class="line">  - SBPort0  [ 0.01% ]</span><br><span class="line">  - SBPort1  [ 0.01% ]</span><br><span class="line">  - SBPort5  [ 0.01% ]</span><br><span class="line">  Data Dependencies:      [ 91.51% ]</span><br><span class="line">  - Register Dependencies [ 91.51% ]</span><br><span class="line">  - Memory Dependencies   [ 10.76% ]</span><br></pre></td></tr></table></figure>

<ul>
<li>ç«¯å£ä¿¡æ¯æ¥è‡ªTableGen <code>llvm/lib/Target/X86/X86SchedSandyBridge.td</code></li>
<li>é²²é¹920çš„æ¥è‡ª <code>llvm/lib/Target/AArch64/AArch64SchedTSV110.td</code></li>
</ul>
<h3 id="é¢å¤–ä¿¡æ¯"><a href="#é¢å¤–ä¿¡æ¯" class="headerlink" title="é¢å¤–ä¿¡æ¯"></a>é¢å¤–ä¿¡æ¯</h3><ol>
<li>Dynamic Dispatch Stall Cycles</li>
<li>Dispatch Logic<ol>
<li>å¯ä»¥çœ‹å‡ºæµæ°´çº¿å‘å°„æ»¡å¸¦å®½æˆ–å‡ æ¡æŒ‡ä»¤çš„æ—¶é—´å æ¯”</li>
</ol>
</li>
<li>Schedulers<ol>
<li>æ¯ä¸ªå‘¨æœŸå¾®æŒ‡ä»¤å‘å°„æ•°å æ¯”</li>
</ol>
</li>
<li>Schedulerâ€™s queue usage<ol>
<li><p>æ‰§è¡Œæ—¶ä½¿ç”¨çš„å¹³å‡æˆ–æœ€å¤§buffer entries (i.e., scheduler queue entries)</p>
</li>
<li><p>AMD Jaguar</p>
</li>
<li><pre><code>  JALU01 - A scheduler for ALU instructions.
  JFPU01 - A scheduler floating point operations.
  JLSAGU - A scheduler for address generation.
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">5. Retire Control Unit</span><br><span class="line">   1. åœ¨ä¸€ä¸ªå‘¨æœŸé‡Œæœ‰å¤šå°‘æŒ‡ä»¤retiredçš„å æ¯”(å¥½å§ï¼Œæ„Ÿè§‰æœ‰è¯­ç—…)</span><br><span class="line">6. A re-order buffer (ROB) çš„ä½¿ç”¨æƒ…å†µ</span><br><span class="line">7. Register File statistics</span><br><span class="line">   1. physical register file (PRF)</span><br><span class="line">   2. floating-point registers (JFpuPRF)</span><br><span class="line">   3. integer registers (JIntegerPRF)</span><br><span class="line"></span><br><span class="line">## Instruction Flow</span><br><span class="line"></span><br><span class="line">llvm-mca å‡è®¾æŒ‡ä»¤åœ¨æ¨¡æ‹Ÿå¼€å§‹ä¹‹å‰å·²ç»å…¨éƒ¨è§£ç å¹¶æ”¾å…¥é˜Ÿåˆ—ä¸­ã€‚å› æ­¤ï¼ŒæŒ‡ä»¤æå–å’Œè§£ç é˜¶æ®µæ²¡æœ‰è¢«è®¡ç®—ã€‚æœªè€ƒè™‘å‰ç«¯çš„æ€§èƒ½ç“¶é¢ˆã€‚æ­¤å¤–ï¼Œllvm-mca ä¸æ¨¡æ‹Ÿåˆ†æ”¯é¢„æµ‹ã€‚</span><br><span class="line"></span><br><span class="line">### Instruction Dispatch</span><br><span class="line"></span><br><span class="line">å¤„ç†å™¨çš„é»˜è®¤ dispatch widthå€¼ç­‰äºLLVMâ€™s scheduling modelé‡Œçš„IssueWidthå€¼ã€‚</span><br><span class="line"></span><br><span class="line">An instruction can be dispatched if:</span><br><span class="line"></span><br><span class="line">* The size of the **dispatch group** is smaller than processorâ€™s dispatch width.</span><br><span class="line">* There are enough entries in the **reorder buffer**.</span><br><span class="line">* There are enough **physical registers** to do register renaming.</span><br><span class="line">* The schedulers are **not full**.</span><br><span class="line"></span><br><span class="line">reorder bufferè´Ÿè´£è·Ÿè¸ªå‘½ä»¤ï¼Œä½¿ä¹‹æŒ‰ç…§ç¨‹åºé¡ºåºretiredç»“æŸã€‚å…¶é»˜è®¤å€¼ä¸º MicroOpBufferSize ã€‚</span><br><span class="line"></span><br><span class="line">å„ç§Buffered resources è¢«è§†ä½œscheduler resources.</span><br><span class="line"></span><br><span class="line">### Instruction Issue</span><br><span class="line"></span><br><span class="line">æ¯ä¸ªå¤„ç†å™¨è°ƒåº¦å™¨å®ç°ä¸€ä¸ªæŒ‡ä»¤ç¼“å†²åŒºã€‚æŒ‡ä»¤å¿…é¡»åœ¨è°ƒåº¦ç¨‹åºçš„ç¼“å†²åŒºä¸­ç­‰å¾…ï¼Œç›´åˆ°è¾“å…¥å¯„å­˜å™¨æ“ä½œæ•°å¯ç”¨ã€‚åªæœ‰åœ¨é‚£ä¸ªæ—¶å€™ï¼ŒæŒ‡ä»¤æ‰ç¬¦åˆæ‰§è¡Œçš„æ¡ä»¶ï¼Œå¹¶ä¸”å¯èƒ½ä¼šè¢«å‘å‡ºï¼ˆå¯èƒ½æ˜¯ä¹±åºçš„ï¼‰ä»¥ä¾›æ‰§è¡Œã€‚ llvm-mca åœ¨è°ƒåº¦æ¨¡å‹çš„å¸®åŠ©ä¸‹è®¡ç®—æŒ‡ä»¤å»¶è¿Ÿã€‚</span><br><span class="line"></span><br><span class="line">llvm-mca çš„è°ƒåº¦å™¨æ—¨åœ¨æ¨¡æ‹Ÿå¤šå¤„ç†å™¨è°ƒåº¦å™¨ã€‚è°ƒåº¦å™¨è´Ÿè´£è·Ÿè¸ªæ•°æ®ä¾èµ–å…³ç³»ï¼Œå¹¶åŠ¨æ€é€‰æ‹©æŒ‡ä»¤æ¶ˆè€—å“ªäº›å¤„ç†å™¨èµ„æºã€‚å®ƒå°†å¤„ç†å™¨èµ„æºå•å…ƒå’Œèµ„æºç»„çš„ç®¡ç†å§”æ‰˜ç»™èµ„æºç®¡â€‹â€‹ç†å™¨ã€‚èµ„æºç®¡ç†å™¨è´Ÿè´£é€‰æ‹©æŒ‡ä»¤æ¶ˆè€—çš„èµ„æºå•å…ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€æ¡æŒ‡ä»¤æ¶ˆè€—äº†ä¸€ä¸ªèµ„æºç»„çš„1cyï¼Œåˆ™èµ„æºç®¡ç†å™¨ä»è¯¥ç»„ä¸­é€‰æ‹©ä¸€ä¸ªå¯ç”¨å•å…ƒï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œèµ„æºç®¡ç†å™¨ä½¿ç”¨å¾ªç¯é€‰æ‹©å™¨æ¥ä¿è¯èµ„æºä½¿ç”¨åœ¨ç»„çš„æ‰€æœ‰å•å…ƒä¹‹é—´å‡åŒ€åˆ†é…ã€‚</span><br><span class="line"></span><br><span class="line">llvm-mcaâ€™s scheduler internally groups instructions into three sets:</span><br><span class="line"></span><br><span class="line">* WaitSet: a set of instructions whose operands are not ready.</span><br><span class="line">* ReadySet: a set of instructions ready to execute.</span><br><span class="line">* IssuedSet: a set of instructions executing.</span><br><span class="line"></span><br><span class="line">### Write-Back and Retire Stage</span><br><span class="line"></span><br><span class="line"> retire control unit</span><br><span class="line"></span><br><span class="line">1. When instructions are executed,the flags the instruction as â€œready to retire.â€</span><br><span class="line">2. Instructions are retired in program order</span><br><span class="line">3. free the physical registers</span><br><span class="line"></span><br><span class="line">### Load/Store Unit and Memory Consistency Model</span><br><span class="line"></span><br><span class="line">load/store unit (LSUnit)ç”¨æ¥æ¨¡æ‹Ÿä¹±åºmemoryæ“ä½œ</span><br><span class="line"></span><br><span class="line">The rules are:</span><br><span class="line"></span><br><span class="line">1. A younger load is allowed to pass an older load only if there are no intervening stores or barriers between the two loads.</span><br><span class="line">2. A younger load is allowed to pass an older store provided that the load does not alias with the store.</span><br><span class="line">3. A younger store is not allowed to pass an older store.ä¸èƒ½äº¤æ¢é¡ºåºçš„æ„æ€</span><br><span class="line">4. A younger store is not allowed to pass an older load.</span><br><span class="line"></span><br><span class="line">å‡è®¾ loads do not alias (-noalias=true) store operations.Under this assumption, younger loads are always allowed to pass older stores. ???</span><br><span class="line"></span><br><span class="line">LSUnitä¸æ‰“ç®—è·‘alias analysisæ¥é¢„æµ‹ä½•æ—¶loadä¸storeä¸ç›¸äº’alias???</span><br><span class="line"></span><br><span class="line">in the case of write-combining memory, rule 3 could be relaxed to allow reordering of non-aliasing store operations.???</span><br><span class="line"></span><br><span class="line">LSUnitä¸ç®¡çš„å…¶ä½™ä¸‰ç‚¹ï¼š</span><br><span class="line"></span><br><span class="line">1. The LSUnit does not know when store-to-load forwarding may occur.</span><br><span class="line">2. The LSUnit does not know anything about cache hierarchy and memory types.</span><br><span class="line">3. The LSUnit does not know how to identify serializing operations and memory fences.</span><br><span class="line">4. The LSUnit does not attempt to predict if a load or store hits or misses the L1 cache(ä¸è€ƒè™‘cacheå‘½ä¸­ï¼Œé»˜è®¤æ˜¯å‘½ä¸­L1,äº§ç”Ÿthe load-to-use latencyçš„æœ€ä¹è§‚å¼€é”€)</span><br><span class="line"></span><br><span class="line">llvm-mca ä¸çŸ¥é“åºåˆ—åŒ–æ“ä½œæˆ–å†…å­˜å±éšœä¹‹ç±»çš„æŒ‡ä»¤ã€‚ LSUnit ä¿å®ˆåœ°å‡è®¾åŒæ—¶å…·æœ‰â€œMayLoadâ€å’Œæœªå»ºæ¨¡å‰¯ä½œç”¨çš„æŒ‡ä»¤çš„è¡Œä¸ºç±»ä¼¼äºâ€œè½¯â€load-barrierã€‚è¿™æ„å‘³ç€ï¼Œå®ƒåœ¨ä¸å¼ºåˆ¶åˆ·æ–°loadé˜Ÿåˆ—çš„æƒ…å†µä¸‹åºåˆ—åŒ–åŠ è½½ã€‚ç±»ä¼¼åœ°ï¼Œâ€œMayStoreâ€å’Œå…·æœ‰æœªå»ºæ¨¡å‰¯ä½œç”¨çš„æŒ‡ä»¤è¢«è§†ä¸ºstoreéšœç¢ã€‚å®Œæ•´çš„memory-barrieræ˜¯å…·æœ‰æœªå»ºæ¨¡å‰¯ä½œç”¨çš„â€œMayLoadâ€å’Œâ€œMayStoreâ€æŒ‡ä»¤ã€‚LLVMçš„å®ç°æ˜¯ä¸å‡†ç¡®çš„ï¼Œä½†è¿™æ˜¯æˆ‘ä»¬ç›®å‰ä½¿ç”¨ LLVM ä¸­å¯ç”¨çš„å½“å‰ä¿¡æ¯æ‰€èƒ½åšçš„æœ€å¥½çš„äº‹æƒ…ã€‚</span><br><span class="line"></span><br><span class="line">load/store barrierä¼šå ç”¨åœ¨load/store é˜Ÿåˆ—é‡Œå ç”¨ä¸€é¡¹ã€‚</span><br><span class="line">å½“load/store barrieræ˜¯å…¶é˜Ÿåˆ—é‡Œoldesté¡¹æ—¶ï¼Œå…¶ä¼šè¢«æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line">![](https://pic.shaojiemike.top/img/440472FD7AB14BC3C1F29BD2D565ACDF.png)</span><br><span class="line"></span><br><span class="line">### In-order Issue and Execute</span><br><span class="line"></span><br><span class="line">æœ‰åºå¤„ç†å™¨è¢«å»ºæ¨¡ä¸ºå•ä¸ª InOrderIssueStage é˜¶æ®µã€‚å®ƒç»•è¿‡ Dispatchã€Scheduler å’Œ Load/Store å•å…ƒã€‚ä¸€æ—¦å®ƒä»¬çš„æ“ä½œæ•°å¯„å­˜å™¨å¯ç”¨å¹¶ä¸”æ»¡è¶³èµ„æºè¦æ±‚ï¼Œå°±ä¼šå‘å‡ºæŒ‡ä»¤ã€‚æ ¹æ®LLVMçš„è°ƒåº¦æ¨¡å‹ä¸­IssueWidthå‚æ•°çš„å€¼ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå‘¨æœŸå†…å‘å‡ºå¤šæ¡æŒ‡ä»¤ã€‚ä¸€æ—¦å‘å‡ºï¼ŒæŒ‡ä»¤å°±ä¼šè¢«ç§»åˆ° IssuedInst é›†ï¼Œç›´åˆ°å®ƒå‡†å¤‡å¥½retireã€‚ llvm-mca ç¡®ä¿æŒ‰é¡ºåºæäº¤å†™å…¥ã€‚ä½†æ˜¯ï¼Œå¦‚æœ RetireOOO å±æ€§for at least one of its writesä¸ºçœŸï¼Œåˆ™å…è®¸æŒ‡ä»¤æäº¤å†™å…¥å¹¶æ— åºretire???</span><br><span class="line"></span><br><span class="line">## Custom Behaviour è‡ªå®šä¹‰è¡Œä¸º</span><br><span class="line"></span><br><span class="line">æŸäº›æŒ‡ä»¤åœ¨è¯¥æ¨¡å‹ä¸­å¹¶ä¸èƒ½è¢«å‡†ç¡®çš„æ¨¡æ‹Ÿã€‚ä¸ºäº†å‡ æ¡æŒ‡ä»¤è€Œä¿®æ”¹æ¨¡å‹ä¸æ˜¯ä¸ªå¥½çš„é€‰æ‹©ï¼Œä¸€èˆ¬é€šè¿‡**CustomBehaviour**ç±»å¯¹æŸäº›æŒ‡ä»¤è¿›è¡Œç‰¹æ®Šå»ºæ¨¡ï¼šè‡ªå®šä¹‰æ•°æ®ä¾èµ–ï¼Œä»¥åŠè§„é¿ã€å•ç‹¬å¤„ç†ç‰¹æ®Šæƒ…å†µã€‚</span><br><span class="line"></span><br><span class="line">ä¸ºæ­¤ï¼Œllvm-mcaè®¾ç½®äº†ä¸€ä¸ªé€šç”¨çš„ä»¥åŠå¤šä¸ªç‰¹æ®Šçš„**CustomBehaviour**ç±»ã€‚ä¸‹é¢ä¸¤ç§æƒ…å†µä¸‹ä¼šä½¿ç”¨é€šç”¨ç±»ï¼š</span><br><span class="line"></span><br><span class="line">1. å¼€å¯äº†`-disable-cb`é€‰é¡¹</span><br><span class="line">2. ä¸å­˜åœ¨é’ˆå¯¹æŸç›®æ ‡çš„ç‰¹æ®Šç±»(é€šç”¨ç±»ä¹Ÿåšä¸äº†ä»€ä¹ˆï¼Œæˆ‘ä»€ä¹ˆä¹Ÿåšä¸åˆ°ğŸ˜¥)</span><br><span class="line"></span><br><span class="line">ä½†æ˜¯æ³¨æ„ç›®å‰åªæœ‰in-orderæµæ°´çº¿å®ç°äº†**CustomBehaviour**ç±»ï¼Œout-orderæµæ°´çº¿å°†æ¥ä¹Ÿä¼šæ”¯æŒã€‚</span><br><span class="line"></span><br><span class="line">è¯¥ç±»ä¸»è¦é€šè¿‡`checkCustomHazard()`å‡½æ•°æ¥å®ç°ï¼Œé€šè¿‡å½“å‰æŒ‡ä»¤å’ŒçœŸæ­£æµæ°´çº¿ä¸­æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œæ¥åˆ¤æ–­å½“å‰æŒ‡ä»¤éœ€è¦ç­‰å¾…å‡ ä¸ªå‘¨æœŸæ‰èƒ½å‘å°„ã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœæƒ³å¯¹æ²¡æœ‰å®ç°çš„ç›®æ ‡æ·»åŠ **CustomBehaviour**ç±»ï¼Œå¯ä»¥å‚è€ƒå·²æœ‰çš„å®ç°ï¼Œæ¯”å¦‚åœ¨`/llvm/lib/Target/AMDGPU/MCA/`ç›®å½•ä¸‹ã€‚</span><br><span class="line"></span><br><span class="line">## Custom Views è‡ªå®šä¹‰è§†å›¾</span><br><span class="line"></span><br><span class="line">å…³äºè‡ªå®šä¹‰çš„è§†å›¾çš„æ·»åŠ è·¯å¾„ï¼Œå¦‚æœ**æ²¡æœ‰è¾“å‡º**ä»æœªåœ¨MC layer classes (MCSubtargetInfo, MCInstrInfo, etc.)é‡Œå‡ºç°è¿‡çš„**æ–°åç«¯å€¼**ï¼Œè¯·æŠŠå®ç°åŠ å…¥`/tools/llvm-mca/View/`ã€‚ç›¸åï¼Œè¯·åŠ å…¥`/lib/Target/&lt;TargetName&gt;/MCA/`ç›®å½•ã€‚</span><br><span class="line"></span><br><span class="line">å…³äºCustom Viewsæ‰€éœ€å†…å®¹ï¼Œéœ€è¦å†™ç‰¹æ®Šçš„**CustomBehaviour**ç±»æ¥è¦†å†™`CustomBehaviour::getViews()`å‡½æ•°ï¼Œæ ¹æ®ä½ç½®çš„ä¸åŒè¿˜æœ‰ä¸‰ç§å®ç°`getStartViews(), getPostInstrInfoViews(),getEndViews()`ã€‚</span><br><span class="line"></span><br><span class="line">## å½±å“å‡†ç¡®æ€§çš„å› ç´ </span><br><span class="line"></span><br><span class="line">è°ƒåº¦æ¨¡å‹ä¸ä»…ç”¨äºè®¡ç®—æŒ‡ä»¤å»¶è¿Ÿå’Œååé‡ï¼Œè¿˜ç”¨äºäº†è§£å¯ç”¨çš„å¤„ç†å™¨èµ„æºä»¥åŠå¦‚ä½•æ¨¡æ‹Ÿå®ƒä»¬ã€‚</span><br><span class="line"></span><br><span class="line">llvm mcaè¿›è¡Œåˆ†æçš„è´¨é‡ä¸å¯é¿å…åœ°å—åˆ°**llvmä¸­è°ƒåº¦æ¨¡å‹è´¨é‡**çš„å½±å“ã€‚</span><br><span class="line"></span><br><span class="line">## åŠŸèƒ½ï¼ˆèƒ½ä¼°è®¡çš„å€¼</span><br><span class="line"></span><br><span class="line">1. IPC</span><br><span class="line">2. ç¡¬ä»¶èµ„æºå‹åŠ›resource-pressure</span><br><span class="line">3. ä¸€äº›é¢å¤–Infoï¼Ÿ</span><br><span class="line">   1.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
 register-file-stats
 -dispatch-stats
 -scheduler-stats
 -retire-stats
 -instruction-info
 instruction-tables
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">4. ååé‡ç“¶é¢ˆï¼Ÿ</span><br><span class="line"></span><br><span class="line">### æ”¯æŒå¯¹ç‰¹å®šä»£ç å—çš„åˆ†æ</span><br><span class="line"></span><br><span class="line">1. æ±‡ç¼–ä»£ç ï¼Œæ”¯æŒå‘½åå’ŒåµŒå¥—</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ol>
<h1 id="LLVM-MCA-BEGIN-block-name"><a href="#LLVM-MCA-BEGIN-block-name" class="headerlink" title="LLVM-MCA-BEGIN block-name"></a>LLVM-MCA-BEGIN block-name</h1><p> add %eax, %eax</p>
<h1 id="LLVM-MCA-END"><a href="#LLVM-MCA-END" class="headerlink" title="LLVM-MCA-END"></a>LLVM-MCA-END</h1> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. é«˜çº§è¯­è¨€ï¼Œé€šè¿‡å†…è”æ±‡ç¼–å®ç°</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p> int foo(int a, int b) {<br>     __asm volatile(â€œ# LLVM-MCA-BEGIN fooâ€);<br>     a +&#x3D; 42;<br>     __asm volatile(â€œ# LLVM-MCA-ENDâ€);<br>     a *&#x3D; b;<br>     return a;<br> }</p>
<pre><code>
ä½†æ˜¯ï¼Œè¿™ä¼šå¹²æ‰°å¾ªç¯çŸ¢é‡åŒ–ç­‰ä¼˜åŒ–ï¼Œå¹¶å¯èƒ½å¯¹ç”Ÿæˆçš„ä»£ç äº§ç”Ÿå½±å“ã€‚å…·ä½“å½±å“è¯·å¯¹æ¯”æ±‡ç¼–ä»£ç ã€‚
</code></pre>
</li>
</ol>
<h2 id="ç›¸å…³è®ºæ–‡"><a href="#ç›¸å…³è®ºæ–‡" class="headerlink" title="ç›¸å…³è®ºæ–‡"></a>ç›¸å…³è®ºæ–‡</h2><p>Googleå­¦æœ¯æœllvm-mcaï¼Œä¸€å †è®ºæ–‡ã€‚ä½†æ˜¯ä¸æ€¥ç€çœ‹ï¼Œå› ä¸ºæ²¡æœ‰é¢„å¤‡çŸ¥è¯†ï¼Œæ²¡æœ‰é—®é¢˜çš„å»çœ‹è®ºæ–‡ã€‚æ•ˆç‡å’Œæ”¶è·å¾ˆä½çš„ï¼Œè€Œä¸”ä¼šçœ‹ä¸æ‡‚ã€‚</p>
<h2 id="ç›¸å…³é¡¹ç›®"><a href="#ç›¸å…³é¡¹ç›®" class="headerlink" title="ç›¸å…³é¡¹ç›®"></a>ç›¸å…³é¡¹ç›®</h2><h3 id="mc-ruler"><a href="#mc-ruler" class="headerlink" title="mc-ruler"></a>mc-ruler</h3><p><a target="_blank" rel="noopener" href="https://github.com/jeremyong/mc_ruler#">mc-ruler</a>æ˜¯æ•´åˆäº†llvm-mcaçš„cmake,å¯ä»¥æ‰“å°æŒ‡å®šéƒ¨åˆ†çš„ä»£ç åˆ†æä¿¡æ¯ã€‚å¦‚æœä¹‹åè¦æµ‹è¯•å¯èƒ½ç”¨å¾—ä¸Šã€‚</p>
<h2 id="éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ "><a href="#éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ " class="headerlink" title="éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ "></a>éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ </h2><ol>
<li>å…·ä½“åŠŸèƒ½</li>
<li>llvmå¦‚ä½•å®ç°çš„ï¼Œè¦çœ‹ä»£ç ã€‚</li>
</ol>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><ol>
<li>(llvm-mca detects Intel syntax by the presence of an <strong>.intel_syntax</strong> directive at the beginning of the input. By default its output syntax matches that of its input.)</li>
<li>ï¼Ÿï¼Ÿï¼Ÿçš„åœ°æ–¹</li>
<li>å¤§æ¦‚çœ‹äº†ä¸€ä¸‹åŠŸèƒ½ï¼Œä½†æ˜¯æ€§èƒ½æ€ä¹ˆå¯¹æ¯”å‘¢ã€‚å‡†ç¡®å€¼æ˜¯å¤šå°‘å‘¢ï¼Ÿ<ol>
<li>arm kunpeng pmu-tools å®ç°</li>
</ol>
</li>
<li>æ¯æ¬¡çš„ä¼°è®¡å€¼ä¼šæ³¢åŠ¨å—ï¼Ÿ</li>
</ol>
<p>å¦‚ä½•å’Œå¤§ç¥äº¤æµå‘¢+æé—®çš„è‰ºæœ¯</p>
<h2 id="å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½"><a href="#å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½" class="headerlink" title="å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½~~"></a>å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½~~</h2><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><div id='refer-anchor'></div>
æ— 
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-10T11:56:03.000Z" title="10/10/2021, 11:56:03 AM">2021-10-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-27T02:43:32.801Z" title="11/27/2023, 2:43:32 AM">2023-11-27</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">3 minutes read (About 404 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/10/Work/HPC/llvm-mca/LLVM-mca6/">uops.info: Characterizing Latency, Throughput, and Port Usage of Instructions on Intel Microarchitectures (2019)</a></p><div class="content"><h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>ç°ä»£è®¡ç®—æœºå¾®æ¶æ„æ˜¯æœ€å¤æ‚çš„å‡ ä¸ªäººé€ ç³»ç»Ÿã€‚åœ¨ä¸Šé¢é¢„æµ‹ï¼Œè§£é‡Šå’Œä¼˜åŒ–è½¯ä»¶æ˜¯å›°éš¾çš„ã€‚æˆ‘ä»¬éœ€è¦å…¶è¿è¡Œè¡Œä¸ºçš„å¯ä¿¡æ¨¡å‹ï¼Œä½†æ˜¯äº‹å®æ˜¯ç¨€ç¼ºçš„ã€‚</p>
<p>æœ¬æ–‡è®¾è®¡å’Œå®ç°äº†ä¸€ç§æ„å»ºX86æŒ‡ä»¤çš„å»¶è¿Ÿï¼Œååé‡å’Œç«¯å£ä½¿ç”¨çš„å¯ä¿¡æ¨¡å‹ã€‚å¹¶ä»”ç»†æ¢ç©¶äº†è¿™ä¸‰ä¸ªæŒ‡æ ‡çš„å®šä¹‰ã€‚å°¤å…¶æ˜¯latencyçš„å€¼åœ¨ä¸åŒçš„æ“ä½œæ•°æƒ…å†µæ—¶æ˜¯å¦‚ä½•ç¡®å®šçš„ã€‚</p>
<p>åŒæ—¶å…¶ç»“æœä¹Ÿæ˜¯æœºå™¨å¯è¯»çš„ã€‚å¹¶ä¸”å¯¹å·²æœ‰çš„æ‰€æœ‰Intelæ¶æ„éƒ½è¿›è¡Œäº†æµ‹è¯•ã€‚</p>
<p>å®˜ç½‘æœ‰ç»“æœ <a target="_blank" rel="noopener" href="http://www.uops.info/">http://www.uops.info</a> </p>
<p>We also plan to release <strong>the source code of our tool</strong> as open source</p>
<h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1 ç®€ä»‹"></a>1 ç®€ä»‹</h2><h2 id="2-ç›¸å…³å·¥ä½œ"><a href="#2-ç›¸å…³å·¥ä½œ" class="headerlink" title="2 ç›¸å…³å·¥ä½œ"></a>2 ç›¸å…³å·¥ä½œ</h2><h3 id="Information-provided-by-Intel"><a href="#Information-provided-by-Intel" class="headerlink" title="Information provided by Intel"></a>Information provided by Intel</h3><h3 id="Measurement-based-Approaches"><a href="#Measurement-based-Approaches" class="headerlink" title="Measurement-based Approaches"></a>Measurement-based Approaches</h3><h2 id="3-Background"><a href="#3-Background" class="headerlink" title="3 Background"></a>3 Background</h2><h3 id="Pipeline-of-Intel-Core-CPUs"><a href="#Pipeline-of-Intel-Core-CPUs" class="headerlink" title="Pipeline of Intel Core CPUs"></a>Pipeline of Intel Core CPUs</h3><h3 id="Assembler-Instructions"><a href="#Assembler-Instructions" class="headerlink" title="Assembler Instructions"></a>Assembler Instructions</h3><h3 id="Hardware-Performance-Counters"><a href="#Hardware-Performance-Counters" class="headerlink" title="Hardware Performance Counters"></a>Hardware Performance Counters</h3><h2 id="4-Definitions"><a href="#4-Definitions" class="headerlink" title="4 Definitions"></a>4 Definitions</h2><h3 id="Latency"><a href="#Latency" class="headerlink" title="Latency"></a>Latency</h3><h3 id="Throughput"><a href="#Throughput" class="headerlink" title="Throughput"></a>Throughput</h3><h3 id="Port-Usage"><a href="#Port-Usage" class="headerlink" title="Port Usage"></a>Port Usage</h3><h2 id="5-Algorithms"><a href="#5-Algorithms" class="headerlink" title="5 Algorithms"></a>5 Algorithms</h2><h3 id="Port-Usage-1"><a href="#Port-Usage-1" class="headerlink" title="Port Usage"></a>Port Usage</h3><ol>
<li>Finding Blocking Instructions</li>
<li>Port Usage Algorithm</li>
<li></li>
</ol>
<h3 id="Latency-1"><a href="#Latency-1" class="headerlink" title="Latency"></a>Latency</h3><ol>
<li>Register -&gt; Register<ol>
<li>Both registers are general-purpose registers </li>
<li>Both registers are SIMD registers</li>
<li>The registers have different types</li>
</ol>
</li>
<li>Memory â†’ Register</li>
<li>Status Flags â†’ Register</li>
<li>Register â†’ Memory</li>
<li>Divisions</li>
</ol>
<h3 id="Throughtput"><a href="#Throughtput" class="headerlink" title="Throughtput"></a>Throughtput</h3><ol>
<li>Measuring Throughput</li>
<li>Computing Throughput from Port Usage</li>
</ol>
<h2 id="Computing-Throughput-from-Port-Usage"><a href="#Computing-Throughput-from-Port-Usage" class="headerlink" title="Computing Throughput from Port Usage"></a>Computing Throughput from Port Usage</h2><h3 id="Details-of-the-x86-Instruction-Set"><a href="#Details-of-the-x86-Instruction-Set" class="headerlink" title="Details of the x86 Instruction Set"></a>Details of the x86 Instruction Set</h3><h3 id="Measurements-on-the-Hardware"><a href="#Measurements-on-the-Hardware" class="headerlink" title="Measurements on the Hardware"></a>Measurements on the Hardware</h3><h3 id="Analysis-Using-Intel-IACA"><a href="#Analysis-Using-Intel-IACA" class="headerlink" title="Analysis Using Intel IACA"></a>Analysis Using Intel IACA</h3><h3 id="Machine-readable-Output"><a href="#Machine-readable-Output" class="headerlink" title="Machine-readable Output"></a>Machine-readable Output</h3><h2 id="7-Evaluation"><a href="#7-Evaluation" class="headerlink" title="7 Evaluation"></a>7 Evaluation</h2><p>balabala~</p>
<h2 id="8-Limitations"><a href="#8-Limitations" class="headerlink" title="8 Limitations"></a>8 Limitations</h2><h2 id="9-Conclusions-and-Future-Work"><a href="#9-Conclusions-and-Future-Work" class="headerlink" title="9 Conclusions and Future Work"></a>9 Conclusions and Future Work</h2><p>æˆ‘ä»¬çš„å·¥å…·å¯ä»¥ç”¨æ¥ä¼˜åŒ–llvm-mcaç­‰è½¯ä»¶ã€‚</p>
<p>Future work includes adapting our algorithms to AMD x86 CPUs. å®˜ç½‘å·²ç»å®ç°äº†ã€‚</p>
<p>We would also like to extend our approach tocharacterize other undocumented performance-relevant aspects of the pipeline, e.g., regarding micro and macro-fusion, or whether instructions use the simple decoder, the complex decoder, or the Microcode-ROM.</p>
<h2 id="éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ "><a href="#éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ " class="headerlink" title="éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ "></a>éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ </h2><p>æš‚æ— </p>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>æš‚æ— </p>
<h2 id="å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½"><a href="#å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½" class="headerlink" title="å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½~~"></a>å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½~~</h2><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><div id='refer-anchor'></div>
æ— 

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-09-19T11:09:16.000Z" title="9/19/2021, 11:09:16 AM">2021-09-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-27T02:43:32.817Z" title="11/27/2023, 2:43:32 AM">2023-11-27</time></span><span class="level-item"><a class="link-muted" href="/categories/Tips/">Tips</a></span><span class="level-item">4 minutes read (About 674 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/19/Work/software/perf/staticCodeAnalysis/">Static Code Analysis</a></p><div class="content"><h2 id="é™æ€ä»£ç åˆ†æå™¨çš„æ„ä¹‰"><a href="#é™æ€ä»£ç åˆ†æå™¨çš„æ„ä¹‰" class="headerlink" title="é™æ€ä»£ç åˆ†æå™¨çš„æ„ä¹‰"></a>é™æ€ä»£ç åˆ†æå™¨çš„æ„ä¹‰</h2><p>åœ¨ä¸è¿è¡Œç¨‹åºçš„æƒ…å†µä¸‹ï¼Œé¢„æµ‹ç¨‹åºæ€§èƒ½è¡¨ç°ã€‚å¾—åˆ°ä¼°è®¡æ—¶é’Ÿå‘¨æœŸï¼Œèµ„æºå ç”¨æƒ…å†µï¼Œæ½œåœ¨çš„ä»£ç ç“¶é¢ˆç­‰çš„åˆ†æã€‚ä»¥ä¾¿ä¼˜åŒ–ç¨‹åºï¼Œæˆ–è€…ä¸ºäº†æ›´å¥½çš„è¿è¡Œç¨‹åºåè¿‡æ¥å¯¹CPUçš„æ¶æ„è®¾è®¡æå‡ºæ„è§ã€‚</p>
<p>åœ¨é¢„æµ‹çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¼šç®€å•è¿›è¡Œè‡ªåŠ¨å‘é‡åŒ–ï¼ŒæŒ‡ä»¤è°ƒåº¦ç­‰å·¥ä½œã€‚</p>
<p>æ¯”å¦‚ä½ æƒ³çœ‹åœ¨armæ¶æ„ä¸‹è¯¥ç¨‹åºä¸‹æœ‰ä»€ä¹ˆç“¶é¢ˆï¼Œä½†æ˜¯ä½ åªæœ‰intelçš„æœºå™¨ï¼Œä½ å°±å¯ä»¥é€šè¿‡é™æ€ä»£ç åˆ†æå™¨æ¥åˆ†æã€‚ä½†æ˜¯å½“å‰çš„æ•ˆæœéƒ½ä¸æ˜¯å¤ªå¥½ã€‚</p>
<h2 id="å·²æœ‰çš„Static-Code-Analyzer"><a href="#å·²æœ‰çš„Static-Code-Analyzer" class="headerlink" title="å·²æœ‰çš„Static Code Analyzer"></a>å·²æœ‰çš„Static Code Analyzer</h2><h3 id="IACA"><a href="#IACA" class="headerlink" title="IACA"></a>IACA</h3><p>IACA (the Intel Architecture Code Analyzer) is a (2019: <strong>end-of-life</strong>) freeware, <strong>closed-source</strong> static analysis tool made by Intel</p>
<p>ç”±äºIntelå¯¹è‡ªå·±çš„å¤„ç†å™¨ä¼˜åŒ–å¾ˆäº†è§£ï¼Œæ‰€æœ‰å¯ä»¥æ›´å¥½çš„é¢„æµ‹ã€‚<br>æ¯”å¦‚ zero-idioms å’Œ micro-op fusionsï¼ˆèšåˆï¼Œå°†ç›¸é‚»æŒ‡ä»¤å˜ä¸ºä¸€æ¡æŒ‡ä»¤ï¼‰</p>
<p>zero-idioms â€”â€” The processor recognizes that certain instructions are independent of the prior value of the register if the two operand registers are the same. An instruction that subtracts a register from itself will always give zero, regardless of the previous value of the register.</p>
<h3 id="Ithemal"><a href="#Ithemal" class="headerlink" title="Ithemal"></a>Ithemal</h3><p>Ithemal (Instruction THroughput Estimator using MAchine Learning)<br>åŸºäºhierarchical LSTMâ€“based æ–¹æ³•ã€‚åŸºæœ¬å—é¢„æµ‹å™¨ï¼Œä½†æ˜¯æ˜¯é»‘ç›’ã€‚</p>
<p>Long short-term memory (LSTM) is an artificial recurrent neural network (RNN) architecture used in the field of deep learning.</p>
<p>åº”è¯¥æ˜¯å‡†ç¡®åº¦æœ€é«˜çš„</p>
<h3 id="LLVM-mca"><a href="#LLVM-mca" class="headerlink" title="LLVM-mca"></a>LLVM-mca</h3><p>LLVM Machine Code Analyzer<br>å—åˆ°IACAå¯å‘çš„ç›¸ä¼¼çš„å·¥å…·ï¼Œæ˜¯ä¹±åºè¶…æ ‡é‡(å¤šæ¡æµæ°´çº¿ï¼Œæ¯å‘¨æœŸå¯ä»¥å®Œæˆ2æ¡ä»¥ä¸ŠæŒ‡ä»¤ï¼Œå¦‚ä¸‹å›¾)å¾®æ¶æ„æ¨¡æ‹Ÿå™¨ã€‚<br><img src="https://pic.shaojiemike.top/img/20210921154507.png"><br>ä½¿ç”¨äº†LLVMåç«¯çš„è°ƒåº¦æ¨¡å‹å‚æ•°ã€‚è¿™ç§é‡ç”¨è°ƒåº¦æ¨¡å‹çš„é€‰æ‹©å¯¹llvm cost æ¨¡å‹æä¾›äº†ç»éªŒã€‚å…¶å‡†ç¡®æ€§äºè°ƒåº¦æ¨¡å‹æœ‰å…³ã€‚</p>
<h3 id="OSACA"><a href="#OSACA" class="headerlink" title="OSACA"></a>OSACA</h3><p>Open Source Architecture Code Analyzer<br><img src="https://pic.shaojiemike.top/img/20210919192500.png"></p>
<p>æ˜¯IACAçš„å¼€æºæ›¿ä»£ï¼Œä¹Ÿå’Œllvm-mcaå¾ˆåƒã€‚æ˜¯å‚æ•°åŒ–çš„ä¹±åºæ¨¡æ‹Ÿå™¨ï¼Œä½†æ˜¯å‚æ•°æ¥è‡ªæµ‹é‡çš„æŒ‡ä»¤æŸ¥æ‰¾è¡¨</p>
<h2 id="cost-model"><a href="#cost-model" class="headerlink" title="cost model"></a>cost model</h2><p>LLVM å’ŒGCC ä¹Ÿæœ‰cost model,ä½†æ˜¯æ˜¯æŒ‡ä»¤å±‚é¢çš„ï¼Œä¸æ˜¯åŸºæœ¬å—å±‚é¢çš„ã€‚</p>
<p>æ¯”å¦‚LLVM è‡³å°‘æœ‰3ä¸ªï¼š</p>
<ol>
<li>a generic, per-instruction IR (Intermediate Representation) cost model for its target-independent optimizations</li>
<li>one for instruction scheduling (the scheduling model [14] is also used by llvm-mca);</li>
<li>another one for register allocation</li>
</ol>
<h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><h3 id="throughput"><a href="#throughput" class="headerlink" title="throughput"></a>throughput</h3><p>Predicting the (average) number of clock cycles a processor takes to execute a block of assembly instructions<br>in steady state</p>
<h3 id="performance-models-Processor-performance-models"><a href="#performance-models-Processor-performance-models" class="headerlink" title="performance models &#x2F; Processor performance models"></a>performance models &#x2F; Processor performance models</h3><p>æŒ‡ä»£é™æ€ä»£ç åˆ†æå™¨,å°±æ˜¯åˆ«åã€‚</p>
<h2 id="éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ "><a href="#éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ " class="headerlink" title="éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ "></a>éœ€è¦è¿›ä¸€æ­¥çš„ç ”ç©¶å­¦ä¹ </h2><p>æš‚æ— </p>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>æš‚æ— </p>
<h2 id="å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½"><a href="#å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½" class="headerlink" title="å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½~~"></a>å¼€é¢˜ç¼˜ç”±ã€æ€»ç»“ã€åæ€ã€åæ§½~~</h2><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p><a target="_blank" rel="noopener" href="https://github.com/RRZE-HPC/OSACA">https://github.com/RRZE-HPC/OSACA</a></p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">ğ˜Šğ˜°ğ˜®ğ˜±ğ˜¶ğ˜µğ˜¦ğ˜³ ğ˜ˆğ˜³ğ˜¤ğ˜©ğ˜ªğ˜µğ˜¦ğ˜¤ğ˜µğ˜¶ğ˜³ğ˜¦ &amp; ğ˜ğ˜—ğ˜Š</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">350</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">29</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">473</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">118</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-26T02:45:00.000Z">2023-11-26</time></p><p class="title"><a href="/2023/11/26/OutOfWork/1-lifeAndCareer/salaryTaxInsurance/">Salary &amp; Tax &amp; Insurance</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-24T10:33:09.000Z">2023-11-24</time></p><p class="title"><a href="/2023/11/24/OutOfWork/3-homepage/team/When4teampage/">When &amp; How 4 team presentation page &amp; knowledge database pool</a></p><p class="categories"><a href="/categories/thinking/">thinking</a> / <a href="/categories/thinking/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-22T08:12:35.000Z">2023-11-22</time></p><p class="title"><a href="/2023/11/22/Work/hardware/dataLink/">Data Link</a></p><p class="categories"><a href="/categories/hardware/">hardware</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-19T10:15:31.000Z">2023-11-19</time></p><p class="title"><a href="/2023/11/19/Work/network/example/wireguardServer2Server/">Wireguard Server 2 Server in OpenWRT</a></p><p class="categories"><a href="/categories/network/">network</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-18T02:42:03.000Z">2023-11-18</time></p><p class="title"><a href="/2023/11/18/OutOfWork/4-devices/nas/DockerOnNas/">Docker On Nas</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">211</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">67</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">72</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2023 Shaojie Tan</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">Â© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>