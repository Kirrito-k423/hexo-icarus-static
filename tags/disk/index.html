<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>Tag: disk - SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="SHAOJIE&#039;S BOOK"><meta property="og:url" content="http://icarus.shaojiemike.top/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://icarus.shaojiemike.top/img/og_image.png"><meta property="article:author" content="Shaojie Tan"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://icarus.shaojiemike.top/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top"},"headline":"SHAOJIE'S BOOK","image":["http://icarus.shaojiemike.top/img/og_image.png"],"author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.0.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">Tags</a></li><li class="is-active"><a href="#" aria-current="page">disk</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-11-18T02:05:50.000Z" title="11/18/2023, 2:05:50 AM">2023-11-18</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-01-09T03:43:01.284Z" title="1/9/2024, 3:43:01 AM">2024-01-09</time></span><span class="level-item"><a class="link-muted" href="/categories/OOW/">OOW</a></span><span class="level-item">8 minutes read (About 1135 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/18/OutOfWork/4-devices/nas/migrateFromSynology2UgreenDX4600/">Migrate From Synology DS220J to UGREEN DX4600</a></p><div class="content"><p>!!! abstract “导言”</p>
<pre><code>Synology is too expensive, and after graduate school there is little time for me to study the OOW things.
</code></pre></div><a class="article-more button is-small is-size-7" href="/2023/11/18/OutOfWork/4-devices/nas/migrateFromSynology2UgreenDX4600/#more">Read more</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-09-19T12:57:49.000Z" title="9/19/2023, 12:57:49 PM">2023-09-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-01-09T03:43:01.284Z" title="1/9/2024, 3:43:01 AM">2024-01-09</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">2 minutes read (About 341 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/09/19/OutOfWork/4-devices/4-DiskC/">Disk C: make room for installation </a></p><div class="content"><h2 id="🏗施工中🏗"><a href="#🏗施工中🏗" class="headerlink" title="🏗施工中🏗"></a>🏗施工中🏗</h2><p>🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧</p>
<p>觉得有意义写，先占个位子。还没写好呢，建议不要看（逻辑内容都没想清楚），不要急~~</p>
<p>🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧🚧</p>
<h2 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h2><p><img src="https://pic.shaojiemike.top/img/20230919210159.png"></p>
<p>100GB tiny disk space is occupied half space by <code>Users/Administrator/AppData/local</code> and <code>Users/Administrator/Roaming</code>.</p>
<h2 id="What-happend-if-I-remove"><a href="#What-happend-if-I-remove" class="headerlink" title="What happend if I remove"></a>What happend if I remove</h2><h3 id="AppData"><a href="#AppData" class="headerlink" title="AppData"></a>AppData</h3><p>If you delete the AppData folder, you will reset all related settings and information of your programs and applications. Browsers, for example, will erase your user profile data and settings, while games will erase all your gaming data and settings.</p>
<h2 id="How-to-correct-make-room"><a href="#How-to-correct-make-room" class="headerlink" title="How to correct make room"></a>How to correct make room</h2><p>found out the space-cosuming application, Unload it will auto remove the files under <code>AppData</code> directory.</p>
<h2 id="tools"><a href="#tools" class="headerlink" title="tools"></a>tools</h2><ol>
<li>SpaceSniffer        ： <a target="_blank" rel="noopener" href="https://www.fosshub.com/SpaceSniffer.html">https://www.fosshub.com/SpaceSniffer.html</a></li>
<li>磁盘空间</li>
</ol>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>C盘没空间了！！！</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>上面回答部分<strong>来自ChatGPT-3.5</strong>，没有进行正确性的交叉校验。</p>
<div id='refer-anchor'></div>

<p>无</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-07-15T16:00:00.000Z" title="7/15/2023, 4:00:00 PM">2023-07-15</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-01-09T03:43:01.296Z" title="1/9/2024, 3:43:01 AM">2024-01-09</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">41 minutes read (About 6223 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/07/15/Work/Operating%20system/Disk/">Disk</a></p><div class="content"><h2 id="lsblk命令"><a href="#lsblk命令" class="headerlink" title="lsblk命令"></a>lsblk命令</h2><p>MAJ:MIN  主:次 设备号</p>
<p>TYPE：块设备类型，比如disk磁盘，part分区，lvm逻辑卷，rom只读存储</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ lsblk -f # 查看磁盘分区格式，有格式才能挂载成功。</span><br><span class="line">NAME   FSTYPE   LABEL UUID                                 FSAVAIL FSUSE% MOUNTPOINT</span><br><span class="line">sda</span><br><span class="line">├─sda1</span><br><span class="line">└─sda2 ext4           9449ee1e-7cdb-4852-9c60-73959ce812c0   18.1G    93% /</span><br><span class="line">sdb</span><br></pre></td></tr></table></figure>

<h2 id="fdisk命令"><a href="#fdisk命令" class="headerlink" title="fdisk命令"></a>fdisk命令</h2><h2 id="blkid命令"><a href="#blkid命令" class="headerlink" title="blkid命令"></a>blkid命令</h2><p>使用blkid命令对查询设备上所采用文件系统类型进行查询。blkid主要用来对系统的块设备（包括交换分区）所使用的文件系统类型、LABEL、UUID等信息进行查询。要使用这个命令必须安装e2fsprogs软件包。</p>
<h3 id="分区已有文件系统"><a href="#分区已有文件系统" class="headerlink" title="分区已有文件系统"></a>分区已有文件系统</h3><p>直接使用blkid可列出当前系统中所以已挂载文件系统的类型。(或者 check <code>/etc/fstab</code>)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt; blkid</span><br><span class="line">/dev/sdb: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;dc35a623-6a3e-f4fe-f9f7-05e102a9c7ec&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/sdc: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;7772d530-24d2-2064-29a3-9d61c0b6289e&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/sda: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;683c1101-69b1-f2c6-586b-155fbda91846&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/sdd1: UUID=<span class="string">&quot;F51A-FBBA&quot;</span> TYPE=<span class="string">&quot;vfat&quot;</span> PARTUUID=<span class="string">&quot;f377e755-9c1e-41dd-b50b-cb50a095be4c&quot;</span></span><br><span class="line">/dev/sdd2: UUID=<span class="string">&quot;3df43f90-d64c-4061-bbca-2614ecc57f34&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;c599a2f0-9888-4f86-88fb-a49b9cde4666&quot;</span></span><br><span class="line">/dev/sdd3: UUID=<span class="string">&quot;f12ca879-4545-46b7-bb2e-bdcdf771cb96&quot;</span> TYPE=<span class="string">&quot;swap&quot;</span> PARTUUID=<span class="string">&quot;bb5ab1b6-f67b-46fc-aead-14b8b86972ad&quot;</span></span><br><span class="line">/dev/sdd4: UUID=<span class="string">&quot;07fbfa2a-6b48-4423-9260-dc36080b42c4&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;6b4f7a39-1c0f-4fcf-a407-b31e469a3cdc&quot;</span></span><br><span class="line">/dev/sdf: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;86ffe123-2c7f-f7f1-40a0-57a12982fe17&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/sdg: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;36a06a4f-c84e-0684-8997-2997a68de012&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/sdh: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;369a926d-1f63-f397-ba4e-3118ef2ecf1d&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/sde: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;4dd3f6ca-1e73-2606-ec65-c98badcd77ad&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/md0p1: UUID=<span class="string">&quot;c960e42b-f321-482d-aed4-c90f29e77291&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;d0949a94-c6e4-4621-890b-8d3f2d70fe57&quot;</span></span><br><span class="line">/dev/md0p2: UUID=<span class="string">&quot;addb8c13-8e34-4d8a-995b-101638f2dcbb&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;c6594348-58c5-49c2-9f40-82ce49653b7c&quot;</span></span><br><span class="line">/dev/md0p3: UUID=<span class="string">&quot;3354846e-7bec-45fb-8b59-4c6d60340d0d&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;8012f7e0-7dfa-46c5-b748-ef04d68a31ed&quot;</span></span><br><span class="line">/dev/md0p4: UUID=<span class="string">&quot;def8fb56-701e-4d6c-81d9-ecb765cc4d06&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;f6bb7944-fb1c-42de-af77-545c26303ad2&quot;</span></span><br><span class="line">/dev/md0p5: UUID=<span class="string">&quot;2f0590a9-6490-4758-999f-bdb5ef5954db&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;bbfe02f4-6b6a-4eeb-bb58-92b8b14b0997&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt; blkid -o list</span><br><span class="line">device                                                                       fs_type         label            mount point                                                                      UUID</span><br><span class="line">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">/dev/sdb                                                                                          linux_raid_member    ubuntu-server:0       (not mounted)                                                                                         2d900913-d0a4-4a15-7bd8-46dda015c95e</span><br><span class="line">/dev/sdc                                                                                          linux_raid_member    ubuntu-server:0       (not mounted)                                                                                         2d900913-d0a4-4a15-7bd8-46dda015c95e</span><br><span class="line">/dev/sda                                                                                          linux_raid_member    ubuntu-server:0       (not mounted)                                                                                         2d900913-d0a4-4a15-7bd8-46dda015c95e</span><br><span class="line">/dev/sdd1                                                                                         vfat                                       /boot/efi                                                                                             F51A-FBBA</span><br><span class="line">/dev/sdd2                                                                                         ext4                                       /                                                                                                     3df43f90-d64c-4061-bbca-2614ecc57f34</span><br><span class="line">/dev/sdd3                                                                                         swap                                       [SWAP]                                                                                                f12ca879-4545-46b7-bb2e-bdcdf771cb96</span><br><span class="line">/dev/sdd4                                                                                         ext4                                       /tmp                                                                                                  07fbfa2a-6b48-4423-9260-dc36080b42c4</span><br><span class="line">/dev/sdf                                                                                          linux_raid_member    ubuntu-server:0       (not mounted)                                                                                         2d900913-d0a4-4a15-7bd8-46dda015c95e</span><br><span class="line">/dev/sdg                                                                                          linux_raid_member    ubuntu-server:0       (not mounted)                                                                                         2d900913-d0a4-4a15-7bd8-46dda015c95e</span><br><span class="line">/dev/sdh                                                                                          linux_raid_member    ubuntu-server:0       (not mounted)                                                                                         2d900913-d0a4-4a15-7bd8-46dda015c95e</span><br><span class="line">/dev/sde                                                                                          linux_raid_member    ubuntu-server:0       (not mounted)                                                                                         2d900913-d0a4-4a15-7bd8-46dda015c95e</span><br><span class="line">/dev/md0p1                                                                                        ext4                                       /home                                                                                                 c960e42b-f321-482d-aed4-c90f29e77291</span><br><span class="line">/dev/md0p2                                                                                        ext4                                       /usr                                                                                                  addb8c13-8e34-4d8a-995b-101638f2dcbb</span><br><span class="line">/dev/md0p3                                                                                        ext4                                       /boot                                                                                                 3354846e-7bec-45fb-8b59-4c6d60340d0d</span><br><span class="line">/dev/md0p4                                                                                        ext4                                       /var                                                                                                  def8fb56-701e-4d6c-81d9-ecb765cc4d06</span><br><span class="line">/dev/md0p5                                                                                        ext4                                       /srv                                                                                                  2f0590a9-6490-4758-999f-bdb5ef5954db</span><br></pre></td></tr></table></figure>

<h3 id="UUID"><a href="#UUID" class="headerlink" title="UUID"></a>UUID</h3><p>帮助使用者<strong>唯一</strong>的确定系统中的<strong>所有存储设备</strong>，不管它们是什么类型的。它可以标识DVD驱动器，USB存储设备以及你系统中的硬盘设备等。</p>
<p>使用原因包括：设备名并非总是不变的</p>
<h2 id="df-命令"><a href="#df-命令" class="headerlink" title="df 命令"></a>df 命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">shaojiemike@brainiac1 ~/blockFrequency  [08:02:54]</span><br><span class="line">&gt; <span class="built_in">df</span> -lh </span><br><span class="line">文件系统        容量  已用  可用 已用% 挂载点</span><br><span class="line">udev             94G     0   94G    0% /dev</span><br><span class="line">tmpfs            19G  4.3M   19G    1% /run</span><br><span class="line">/dev/sdd2       984G   12G  923G    2% /</span><br><span class="line">tmpfs            95G   88K   95G    1% /dev/shm</span><br><span class="line">tmpfs           5.0M     0  5.0M    0% /run/lock</span><br><span class="line">tmpfs            95G     0   95G    0% /sys/fs/cgroup</span><br><span class="line">/dev/md0p3       20G  347M   19G    2% /boot</span><br><span class="line">/dev/sdd4        53G  319M   50G    1% /tmp</span><br><span class="line">/dev/md0p5       47G   53M   45G    1% /srv</span><br><span class="line">/dev/sdd1       511M  3.6M  508M    1% /boot/efi</span><br><span class="line">/dev/md0p4      590G  5.7G  554G    2% /var</span><br><span class="line">/dev/md0p1      6.5T  5.1T  1.2T   82% /home</span><br><span class="line">/dev/loop0       49M   49M     0  100% /snap/core18/2289</span><br><span class="line">/dev/loop1       58M   58M     0  100% /snap/core20/1360</span><br><span class="line">/dev/loop3       38M   38M     0  100% /snap/snapd/14982</span><br><span class="line">/dev/loop4       38M   38M     0  100% /snap/snapd/15183</span><br><span class="line">/dev/loop2       58M   58M     0  100% /snap/core20/1380</span><br><span class="line">/dev/loop5       61M   61M     0  100% /snap/lxd/21843</span><br><span class="line">/dev/loop7       49M   49M     0  100% /snap/core18/2349</span><br><span class="line">/dev/loop6       62M   62M     0  100% /snap/lxd/22530</span><br><span class="line">tmpfs            19G     0   19G    0% /run/user/1006</span><br><span class="line">tmpfs            19G     0   19G    0% /run/user/1008</span><br><span class="line">tmpfs            19G     0   19G    0% /run/user/1005</span><br></pre></td></tr></table></figure>

<h2 id="snap的机制"><a href="#snap的机制" class="headerlink" title="snap的机制"></a>snap的机制</h2><p>一种新的<a target="_blank" rel="noopener" href="https://www.ubuntukylin.com/news/666-cn.html">安装包管理方式</a>。使用<code>snapcraft</code>将软件打包成snap格式的打包工具集。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+-----------+       +------------+      +------------+</span><br><span class="line">| Developer +------&gt;| Snapcraft  +-----&gt;| Snap Store |</span><br><span class="line">+-----------+       +------------+      +-----+------+</span><br><span class="line">                                              | update     </span><br><span class="line">                                              v       </span><br><span class="line">+-----------+       +------------+      +------------+</span><br><span class="line">| End User  +------&gt;|   Snap     +-----&gt;|   Snapd    |</span><br><span class="line">+-----------+       +-----+------+      +-----+------+</span><br><span class="line">                          | containerize      |       </span><br><span class="line">                          v                   |       </span><br><span class="line">                    +------------+            |       </span><br><span class="line">                    |   Snaps    |&lt;-----------+ manage</span><br><span class="line">                    +------------+     </span><br></pre></td></tr></table></figure>

<h3 id="core"><a href="#core" class="headerlink" title="core"></a>core</h3><p>snap的每个版本软件会，占用一个<code>/dev/loop</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/snap/core18 代表ubuntu 18版本的软件所运行的环境</span><br><span class="line">/snap/core20 代表ubuntu 20版本的软件所运行的环境</span><br></pre></td></tr></table></figure>

<p>Snap应用运行在以Ubuntu<br>为核心的容器里，与各个发行版做到了解耦。因此Snap应用的开发者很开心了，<br>只需保证自己应用在[Ubuntu Core]欢快运行即可，不需要考虑其他发行版的适配。</p>
<h3 id="snapd"><a href="#snapd" class="headerlink" title="snapd"></a>snapd</h3><p>Snap应用由<code>snapd</code>守护进程管理。snapd每天会去Snap Store查本地Snap应<br>用有没有可用更新，如果有，就把更新拿下来，应用到当前Snap应用上。自动更新不可关闭,但是可以设置延迟60天。</p>
<h3 id="lxc-lxd"><a href="#lxc-lxd" class="headerlink" title="lxc&#x2F;lxd"></a>lxc&#x2F;lxd</h3><p><code>lxc</code>是Linux Container的简写，它是一种内核虚拟化技术，可以提供轻量级的虚拟化，以便隔离进程和资源；它不需要提供指令解释机制，没有全虚拟化的复杂性，相当于C++中的NameSpace。<br><code>lxc</code>容器能有效地把操作系统管理的资源划分到不同的组中，并能在不同的组之间平衡有冲突的资源使用需求，因此它可以在单一的主机节点上同时执行多个相互隔离的容器。</p>
<p><code>lxd</code>是基于<code>lxc</code>构筑的容器管理进程，提供镜像、网络、存储、以及容器等能力。<br>  <br>大家可能有个疑问，为什么不用docker容器呢？docker容器原先也是我的首选，但实际操作过程中发现snap包安装所需要的squashfs文件系统在docker中无法mount，会出现如下错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">system does not fully support snapd: cannot mount squashfs imag  </span><br></pre></td></tr></table></figure>

<h2 id="tmpfs"><a href="#tmpfs" class="headerlink" title="tmpfs"></a>tmpfs</h2><p><code>/dev/shm</code>下的tmpfs是内存的一半,是一个临时文件系统，驻留在内存中，所以&#x2F;dev&#x2F;shm&#x2F;这个目录不在硬盘上，而是在内存里。因为是在内存里，所以读写非常快，可以提供较高的访问速度。</p>
<p><code>/sys/fs/cgroup</code>是systemd在代码里自动挂载的。cgroups(Control Groups) 是 linux 内核提供的一种机制，这种机制可以根据需求把一系列系统任务及其子任务整合(或分隔)到按资源划分等级的不同组内，从而为系统资源管理提供一个统一的框架。简单说，cgroups 可以限制、记录任务组所使用的物理资源。</p>
<p><code>/run/user</code>是每个login的用户所需的一些数据</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">ls</span> /run/user -l</span><br><span class="line">总用量 0</span><br><span class="line">drwx------ 7 qcjiang     qcjiang     360 Jul 11 14:54 1005</span><br><span class="line">drwx------ 7 shaojiemike shaojiemike 780 Jul 11 01:10 1006</span><br><span class="line">drwx------ 7 zwcao       zwcao       360 Jul  9 15:48 1008</span><br><span class="line">drwx------ 7 udfrt       udfrt       200 Jul 11 16:03 1010</span><br></pre></td></tr></table></figure>

<p>利用tmpfs这个特性可以用来提高服务器性能，把一些对读写性能要求较高，但是数据又可以丢失的这样的数据保存在&#x2F;dev&#x2F;shm中，来提高访问速度。</p>
<p>tmpfs用途还是较广的，Linux中可以把一些程序的临时文件放置在tmpfs中，利用tmpfs比硬盘速度快的特点来提升系统性能。比如可以用来放squid程序的缓存文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 临时调整大小，重启后会恢复正常，恢复为内存一半大小。</span></span><br><span class="line">mount -o remount,size=777M tmpfs /dev/shm</span><br><span class="line"><span class="comment"># 永久修改</span></span><br><span class="line">vim  /etc/fstab </span><br><span class="line"><span class="comment"># 把tmpfs这一行改为：</span></span><br><span class="line">tmpfs                   /dev/shm                tmpfs   defaults,size=777M     0 0</span><br></pre></td></tr></table></figure>

<h2 id="etc-fstab-解析"><a href="#etc-fstab-解析" class="headerlink" title="&#x2F;etc&#x2F;fstab 解析"></a>&#x2F;etc&#x2F;fstab 解析</h2><p>&#x2F;etc&#x2F;fstab 是专门用配置挂载硬盘的文件</p>
<p>语法为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Device] [Mount Point] [File System Type] [Options] [Dump] [Pass]</span><br><span class="line"></span><br><span class="line">[Device] 包含文件系统的device或者partition </span><br><span class="line">[Mount Point] 挂载的目录，从该目录可以访问设备/分区的内容（注意：swap没有装入点）</span><br><span class="line">[File System Type] 文件系统类型</span><br><span class="line">[Options] mount的选项，默认的defaults</span><br><span class="line">[Dump] 是否开启备份，0 来表示不备份这个区</span><br><span class="line">[Pass]  fsck是否会check该区域，0表示不检查。fsck （文件系统检查）是一种命令行程序，可让您在一个或多个Linux文件系统上执行一致性检查和交互式修复。 它用于检查指定类型文件系统。 在系统无法启动或无法安装分区的情况下，可以使用 fsck 命令修复损坏的文件系统。</span><br></pre></td></tr></table></figure>

<h3 id="Device"><a href="#Device" class="headerlink" title="Device"></a>Device</h3><p>device 有两种表示方式，可以用&#x2F;dev&#x2F;xdx 之类的location 或者 硬件的UUID 来表示，硬件的UUID 可以用<code>blkid</code> 来查询</p>
<p>对于uuid</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># / was on /dev/sdd2 during curtin installation  </span></span><br><span class="line">/dev/disk/by-uuid/3df43f90-d64c-4061-bbca-2614ecc57f34 / ext4 defaults 0 0</span><br><span class="line"></span><br><span class="line">&gt; blkid |grep 3df</span><br><span class="line">/dev/sdd2: UUID=<span class="string">&quot;3df43f90-d64c-4061-bbca-2614ecc57f34&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;c599a2f0-9888-4f86-88fb-a49b9cde4666&quot;</span></span><br></pre></td></tr></table></figure>

<p>对于id</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /home was on /dev/md0p1 during curtin installation                                            </span></span><br><span class="line">/dev/disk/by-id/md-uuid-2d900913:d0a44a15:7bd846dd:a015c95e-part1 /home ext4 defaults 0 0</span><br><span class="line"><span class="comment"># /usr was on /dev/md0p2 during curtin installation</span></span><br><span class="line">/dev/disk/by-id/md-uuid-2d900913:d0a44a15:7bd846dd:a015c95e-part2 /usr ext4 defaults 0 0</span><br><span class="line"><span class="comment"># /boot was on /dev/md0p3 during curtin installation</span></span><br><span class="line">/dev/disk/by-id/md-uuid-2d900913:d0a44a15:7bd846dd:a015c95e-part3 /boot ext4 defaults 0 0</span><br><span class="line"><span class="comment"># /var was on /dev/md0p4 during curtin installation</span></span><br><span class="line">/dev/disk/by-id/md-uuid-2d900913:d0a44a15:7bd846dd:a015c95e-part4 /var ext4 defaults 0 0</span><br><span class="line"><span class="comment"># /srv was on /dev/md0p5 during curtin installation</span></span><br><span class="line">/dev/disk/by-id/md-uuid-2d900913:d0a44a15:7bd846dd:a015c95e-part5 /srv ext4 defaults 0 0</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; blkid |grep a015c95e</span><br><span class="line">/dev/sdb: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;dc35a623-6a3e-f4fe-f9f7-05e102a9c7ec&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/sdc: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;7772d530-24d2-2064-29a3-9d61c0b6289e&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/sda: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;683c1101-69b1-f2c6-586b-155fbda91846&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/sdf: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;86ffe123-2c7f-f7f1-40a0-57a12982fe17&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/sdg: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;36a06a4f-c84e-0684-8997-2997a68de012&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/sdh: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;369a926d-1f63-f397-ba4e-3118ef2ecf1d&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br><span class="line">/dev/sde: UUID=<span class="string">&quot;2d900913-d0a4-4a15-7bd8-46dda015c95e&quot;</span> UUID_SUB=<span class="string">&quot;4dd3f6ca-1e73-2606-ec65-c98badcd77ad&quot;</span> LABEL=<span class="string">&quot;ubuntu-server:0&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span></span><br></pre></td></tr></table></figure>

<p>这里可以看到这7个硬盘的UUID是一样的，说明属于同一个RAID文件系统卷，但是子卷UUID_SUB是不一样的</p>
<p>问题:</p>
<ol>
<li>为什么8块盘里<code>/dev/sdd1</code>第四块被拆成了4份</li>
<li>blkid里的<ol>
<li>UUID_SUB 什么意思</li>
<li>&#x2F;dev&#x2F;md0p1<ol>
<li>好像和GPT分区有关</li>
</ol>
</li>
<li>为什么device里 &#x2F;dev&#x2F;md0p1 没和blkid的对应上</li>
</ol>
</li>
</ol>
<h3 id="File-System-Type"><a href="#File-System-Type" class="headerlink" title="File System Type"></a>File System Type</h3><p>auto, vfat( for FAT partition), ntfs or ntfs-3g( for NTFS partition), ext4 or ext3 or ext2 or jfs,  udf or iso9660 ( for CD&#x2F;DVD), swap</p>
<h2 id="磁盘分区-MBR-vs-GPT"><a href="#磁盘分区-MBR-vs-GPT" class="headerlink" title="磁盘分区 MBR vs GPT"></a>磁盘分区 MBR vs GPT</h2><p>当服务器插入一块硬盘，如果我们想要使用该硬盘，需要先使用磁盘分区管理工具进行磁盘分区，然后格式化分区，把分区挂载到目录</p>
<p>上，才可以正式使用该硬盘存储文件。磁盘分区管理工具有很多，本文主要介绍fdisk，gdisk,parted，并进行比较。</p>
<h3 id="判断分区是GPT还是MBR"><a href="#判断分区是GPT还是MBR" class="headerlink" title="判断分区是GPT还是MBR"></a>判断分区是GPT还是MBR</h3><p><code>fdisk -l</code>和<code>gdisk -l /dev/sda</code>都可以，下面介绍另一种</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">sudo parted -l</span><br><span class="line">型号：TOSHIBA AL15SEB120N (scsi)                                                                                 磁盘 /dev/sdd: 1200GB</span><br><span class="line">扇区大小 (逻辑/物理)：512B/512B</span><br><span class="line">分区表：gpt</span><br><span class="line">磁盘标志：</span><br><span class="line"></span><br><span class="line">编号  起始点  结束点  大小    文件系统        名称  标志</span><br><span class="line"> 1    1049kB  538MB   537MB   fat32                 启动, EFI 启动</span><br><span class="line"> 2    538MB   1074GB  1074GB  ext4</span><br><span class="line"> 3    1074GB  1143GB  68.7GB  linux-swap(v1)        交换</span><br><span class="line"> 4    1143GB  1200GB  57.2GB  ext4</span><br><span class="line"></span><br><span class="line">型号：Linux 软件 RAID 数组 (md)</span><br><span class="line">磁盘 /dev/md0: 8401GB</span><br><span class="line">扇区大小 (逻辑/物理)：512B/512B</span><br><span class="line">分区表：gpt</span><br><span class="line">磁盘标志：</span><br><span class="line"></span><br><span class="line">编号  起始点  结束点  大小    文件系统  名称  标志</span><br><span class="line"> 1    1049kB  7147GB  7147GB  ext4</span><br><span class="line"> 2    7147GB  7684GB  537GB   ext4</span><br><span class="line"> 3    7684GB  7705GB  21.5GB  ext4</span><br><span class="line"> 4    7705GB  8349GB  644GB   ext4</span><br><span class="line"> 5    8349GB  8401GB  51.3GB  ext4</span><br></pre></td></tr></table></figure>

<p>可以看出上面的普通硬盘和RAID0都是GPT。#显示Partition Table: msdos，则是MBR分区</p>
<h3 id="MBR-Master-Boot-Record"><a href="#MBR-Master-Boot-Record" class="headerlink" title="MBR(Master Boot Record)"></a>MBR(Master Boot Record)</h3><p>是传统的分区机制，应用于绝大多数使用BIOS引导的PC设备（苹果使用EFI的方式），很多Server服务器即支持BIOS也支持EFI的引导方式。MBR只支持不超过2TB的硬盘。</p>
<p>MBR分区分为:</p>
<ol>
<li>主分区（一块硬盘最多只能创建4个主分区）、</li>
<li>扩展分区（一个扩展分区会占用一个主分区的位置）、</li>
<li>逻辑分区（逻辑分区是基于扩展分区创建出来的，<ol>
<li>先有扩展分区，然后在扩展分区的基础上再创建逻辑分区；</li>
<li>也就是说我们要使用逻辑分区，必须先要创建扩展分区，扩展分区的空间是不能被直接使用的，</li>
<li>我们必须在扩展分区的基础上去建立逻辑分区，才能够被使用）。</li>
</ol>
</li>
<li>在Linux上使用扩展分区和逻辑分区最多可以创建15个分区；</li>
</ol>
<h3 id="GPT-GUID-Partition-Table-分区"><a href="#GPT-GUID-Partition-Table-分区" class="headerlink" title="GPT(GUID Partition Table)分区"></a>GPT(GUID Partition Table)分区</h3><p>解决了MBR的很多缺点；<br>​1. 支持超过2TB的磁盘；<br>​2. 向后兼容MBR；<br>3. GPT分区只支持64位操作系统；</p>
<h3 id="fdisk对-dev-sdb硬盘进行分区"><a href="#fdisk对-dev-sdb硬盘进行分区" class="headerlink" title="fdisk对&#x2F;dev&#x2F;sdb硬盘进行分区"></a>fdisk对&#x2F;dev&#x2F;sdb硬盘进行分区</h3><p><strong>必须</strong>先取消挂载，取消挂载后分区。不然分区结果重启后会消失，文件全没了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo umount /mnt/ <span class="comment">#挂载目录</span></span><br></pre></td></tr></table></figure>

<p>创建一个主分区，一个扩展分区，其中扩展分区包含两个逻辑分区。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lsblk</span><br><span class="line">sdb               8:16   0    1G  0 disk </span><br><span class="line">└─sdb1            8:17   0  200M  0 part </span><br></pre></td></tr></table></figure>

<p>sdb这块磁盘大小为1G。而且已有分区sdb1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># fdisk /dev/sdb</span></span><br><span class="line">p              <span class="comment">#打印分区表</span></span><br><span class="line">d         <span class="comment">#因为此磁盘只有一个分区sdb1，所以按d删除时候默认不会让选择要删除的分区，如果有多个分区会提示要删除的分区。</span></span><br><span class="line">p        <span class="comment">#打印分区表，再次查看分区表，发现/dev/sdb1已经被删除</span></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n                  <span class="comment">#新建分区</span></span><br><span class="line">Partition <span class="built_in">type</span>:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)             <span class="comment">#主分区</span></span><br><span class="line">   e   extended                                            <span class="comment">#扩展分区</span></span><br><span class="line">Select (default p): p                                      <span class="comment">#选择新建主分区</span></span><br><span class="line">Partition number (1-4, default 1):                         <span class="comment">#主分区号，会生成/dev/sdb1</span></span><br><span class="line">First sector (2048-2097151, default 2048):                  <span class="comment">#开始扇区，回车默认从2048开始</span></span><br><span class="line">Using default value 2048</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (2048-2097151, default 2097151): +50M     <span class="comment">#分配主分区大小，在此为50M</span></span><br><span class="line">Partition 1 of <span class="built_in">type</span> Linux and of size 50 MiB is <span class="built_in">set</span></span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n                    <span class="comment">#新建分区</span></span><br><span class="line">Partition <span class="built_in">type</span>:</span><br><span class="line">   p   primary (1 primary, 0 extended, 3 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): e                      <span class="comment">#选择创建扩展分区</span></span><br><span class="line">Partition number (2-4, default 2):          <span class="comment">#扩展分区编号，在此我们直接回车，默认为/dev/sdb2</span></span><br><span class="line">First sector (104448-2097151, default 104448):               <span class="comment">#默认回车，从当前扇区开始</span></span><br><span class="line">Using default value 104448</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (104448-2097151, default 2097151): +500M    <span class="comment">#分配扩展分区大小，在此为500M</span></span><br><span class="line">Partition 2 of <span class="built_in">type</span> Extended and of size 500 MiB is <span class="built_in">set</span></span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Partition <span class="built_in">type</span>:</span><br><span class="line">   p   primary (1 primary, 1 extended, 2 free)</span><br><span class="line">   l   logical (numbered from 5)</span><br><span class="line">Select (default p): l                         <span class="comment">#新建逻辑分区</span></span><br><span class="line">Adding logical partition 5                    <span class="comment">#默认逻辑分区编号为5</span></span><br><span class="line">First sector (106496-1128447, default 106496):                 <span class="comment">#逻辑分区起始位置</span></span><br><span class="line">Using default value 106496</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (106496-1128447, default 1128447): +200M     <span class="comment">#分配逻辑分区大小，在此为200M</span></span><br><span class="line">Partition 5 of <span class="built_in">type</span> Linux and of size 200 MiB is <span class="built_in">set</span></span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n     </span><br><span class="line">Partition <span class="built_in">type</span>:</span><br><span class="line">   p   primary (1 primary, 1 extended, 2 free)</span><br><span class="line">   l   logical (numbered from 5)</span><br><span class="line">Select (default p): l                   <span class="comment">#新建第二个逻辑分区</span></span><br><span class="line">Adding logical partition 6</span><br><span class="line">First sector (518144-1128447, default 518144): </span><br><span class="line">Using default value 518144</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (518144-1128447, default 1128447):             <span class="comment">#直接回车，默认分配剩余空间</span></span><br><span class="line">Using default value 1128447</span><br><span class="line">Partition 6 of <span class="built_in">type</span> Linux and of size 298 MiB is <span class="built_in">set</span></span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): p</span><br><span class="line">...</span><br><span class="line">Disk label <span class="built_in">type</span>: dos</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048      104447       51200   83  Linux</span><br><span class="line">/dev/sdb2          104448     1128447      512000    5  Extended</span><br><span class="line">/dev/sdb5          106496      516095      204800   83  Linux</span><br><span class="line">/dev/sdb6          518144     1128447      305152   83  Linux</span><br><span class="line"></span><br><span class="line"><span class="comment">#通过如上输出可知，/dev/sdb1为主分区，/dev/sdb2为扩展分区，扩展分区又包含两个逻辑分区/dev/sdb5和/dev/sdb6</span></span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): w            <span class="comment">#保存分区信息并退出</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@node5 ~]<span class="comment"># lsblk</span></span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sdb               8:16   0    1G  0 disk </span><br><span class="line">├─sdb1            8:17   0   50M  0 part </span><br><span class="line">├─sdb2            8:18   0    1K  0 part </span><br><span class="line">├─sdb5            8:21   0  200M  0 part </span><br><span class="line">└─sdb6            8:22   0  298M  0 part </span><br></pre></td></tr></table></figure>

<h3 id="格式化分区"><a href="#格式化分区" class="headerlink" title="格式化分区"></a>格式化分区</h3><p>把&#x2F;dev&#x2F;sdb5格式化成ext4文件系统<br><code>[root@node5 ~]# mkfs.ext4 /dev/sdb5</code></p>
<h3 id="挂载分区"><a href="#挂载分区" class="headerlink" title="挂载分区"></a>挂载分区</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /sdb5</span><br><span class="line">mount /dev/sdb5 /sdb5</span><br></pre></td></tr></table></figure>

<h3 id="设置开机自动挂载分区"><a href="#设置开机自动挂载分区" class="headerlink" title="设置开机自动挂载分区"></a>设置开机自动挂载分区</h3><p>磁盘分区使用mount手动挂载之后，还需要把挂载信息写入<code>/etc/fstab</code>文件中，不然重启之后，需要重新挂载。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -a <span class="comment">#重新加载内核</span></span><br></pre></td></tr></table></figure>

<h2 id="RAID-mdadm"><a href="#RAID-mdadm" class="headerlink" title="RAID - mdadm"></a>RAID - mdadm</h2><p>mdadm是一个用于创建、管理、监控RAID设备的工具，它使用linux中的md驱动。mdadm程序是一个独立的程序，能完成所有软件RAID的管理功能。常见功能如下:</p>
<ol>
<li>mdadm –create device options…<ol>
<li>Create a new array from unused devices.</li>
</ol>
</li>
<li>mdadm –manage device options…<ol>
<li>make changes to an existing array.</li>
</ol>
</li>
<li>mdadm –misc options… devices<ol>
<li>report on or modify various md related devices.</li>
</ol>
</li>
</ol>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>配置文件，默认是”&#x2F;etc&#x2F;mdadm.conf”或者是”&#x2F;etc&#x2F;mdadm&#x2F;mdadm.conf”</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">cat</span> /etc/mdadm/mdadm.conf</span><br><span class="line">ARRAY /dev/md0 metadata=1.2 name=ubuntu-server:0 UUID=2d900913:d0a44a15:7bd846dd:a015c95e</span><br><span class="line">MAILADDR root</span><br></pre></td></tr></table></figure>

<p><code>–metadata=</code>定义组件设备上超级块的类型。对于–create，默认是0.90。</p>
<p><code>0</code>,<code>0.90</code> ： 限制一个RAID中的设备数为28个，限制组件设备大小为2TB</p>
<p><code>1</code>,<code>1.0</code>,<code>1.1</code>,<code>1.2</code> ：不同的子版本号标识在不同的地方存储超级块。1.0在设备的结尾，1.1在设备的开头，1.2在设备的4K处。</p>
<p><code>MAILADDR</code> 使用monitor模式(同时也使–scan选项)时，警报事件发送到的Email地址。</p>
<p><code>sudo mdadm -Ds &gt; /etc/mdadm/mdadm.conf</code></p>
<p> 把查询出来的 RAID 信息写到 mdadm.conf 中</p>
<p> -s 或 –scan 扫描 RAID 设备；-D 或 –detail 查看 RAID 的详细信息</p>
<h3 id="查看当前RAID"><a href="#查看当前RAID" class="headerlink" title="查看当前RAID"></a>查看当前RAID</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">cat</span> /proc/mdstat</span><br><span class="line">Personalities : [raid0] [linear] [multipath] [raid1] [raid6] [raid5] [raid4] [raid10]</span><br><span class="line">md0 : active raid0 sdf[4] sde[3] sdh[6] sdg[5] sda[0] sdc[2] sdb[1]</span><br><span class="line">      8203865600 blocks super 1.2 512k chunks</span><br><span class="line"></span><br><span class="line">unused devices: &lt;none&gt;</span><br></pre></td></tr></table></figure>

<h3 id="RAID0的搭建"><a href="#RAID0的搭建" class="headerlink" title="RAID0的搭建"></a>RAID0的搭建</h3><p>猜测命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mdadm –create /dev/md0 –chunk=512 –metadata=1.2 –level=0 –raid-devices=7 /dev/sda /dev/sdb /dev/sdc /dev/sde /dev/sdf /dev/sdg /dev/sdh</span><br></pre></td></tr></table></figure>

<p>说明：使用7块创建RAID0，条带大小是512KB。</p>
<p>创建完之后</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; lsblk -l</span><br><span class="line">md0     9:0    0  7.7T  0 raid0</span><br><span class="line">md0p1 259:0    0  7.7T  0 md</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/md0 <span class="comment">#分区</span></span><br><span class="line">mount /dev/md0p1 /home/ <span class="comment">#挂载</span></span><br><span class="line">mount /dev/md0p2 /usr/ <span class="comment">#挂载</span></span><br><span class="line">mount /dev/md0p3 /boot/ <span class="comment">#挂载</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; lsblk -l</span><br><span class="line">md0     9:0    0  7.7T  0 raid0</span><br><span class="line">md0p1 259:0    0  6.5T  0 part  /home</span><br><span class="line">md0p2 259:1    0  500G  0 part  /usr</span><br><span class="line">md0p3 259:2    0   20G  0 part  /boot</span><br><span class="line">md0p4 259:3    0  600G  0 part  /var</span><br><span class="line">md0p5 259:4    0 47.8G  0 part  /srv</span><br></pre></td></tr></table></figure>

<p><code>vi /etc/fstab</code> #设置开机自动挂载</p>
<h3 id="扩容，添加硬盘"><a href="#扩容，添加硬盘" class="headerlink" title="扩容，添加硬盘"></a>扩容，添加硬盘</h3><p>增大RAID 的大小涉及按给定顺序执行下列任务：</p>
<ol>
<li>增加所有组成 RAID 的所有分区的大小，</li>
<li>增加 RAID 本身的大小，</li>
<li>最后增加文件系统的大小。</li>
</ol>
<p>第一步：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mdadm /dev/md0 --add /dev/sdc1</span><br></pre></td></tr></table></figure>

<p>说明：给md0增加热备盘sdc1。运行<code>cat /proc/mdstat</code>等到 RAID 同步并一致，然后再继续下一个分区。</p>
<p>第二步：<br>RAID 阵列配置将继续使用原始阵列大小，直到您强制其了解新的可用空间。您可以为 RAID 指定大小或使用最大可用空间。</p>
<p>查看大小</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mdadm -D /dev/md0 | grep -e <span class="string">&quot;Array Size&quot;</span> -e <span class="string">&quot;Dev Size&quot;</span></span><br></pre></td></tr></table></figure>

<p>将RAID大小增加到最大可用大小</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mdadm --grow /dev/md0 -z max</span><br></pre></td></tr></table></figure>

<p>第三步: 不确定</p>
<p>更改 Ext2、Ext3 或 Ext4 文件系统的大小(先查看md0分区大小)</p>
<p>先fdisk删除part1分区，新建同名(同分区标号)的分区，First cylinder起始点相同，通过改变终点为最大值来扩容。</p>
<p>将文件系统大小扩展为名为 &#x2F;dev&#x2F;md0 的设备的<strong>最大可用大小</strong>，请输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; sudo resize2fs /dev/md0p1</span><br><span class="line">resize2fs 1.45.5 (07-Jan-2020)</span><br><span class="line">文件系统已经为 1744830464 个块（每块 4k）。无需进一步处理！</span><br></pre></td></tr></table></figure>

<p>如果未指定大小参数，大小将默认为该分区的大小。</p>
<h2 id="loop机制"><a href="#loop机制" class="headerlink" title="loop机制"></a>loop机制</h2><p>Loop设备是一种块设备，但是它并不指向硬盘或者光驱，而是指向一个文件块或者另一种块设备。</p>
<p>回环设备（ ‘loopback device’）允许用户以一个普通磁盘文件虚拟一个块设备。设想一个磁盘设备，对它的所有读写操作都将被重定向到读写一个名为 disk-image 的普通文件而非操作实际磁盘或分区的轨道和扇区。（当然，disk-image 必须存在于一个实际的磁盘上，而这个磁盘必须比虚拟的磁盘容量更大。）回环设备允许你这样使用一个普通文件。</p>
<h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><p>将一个Loop设备指向一个文件系统文件，比如iso文件，紧接着就可以通过mount挂载该loop设备到主文件系统的一个目录下了，我们就可以正常访问该镜像中的内容，就像访问一个文件系统一样。</p>
<h3 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h3><p><code>losetup -a</code>列出已使用的。</p>
<p>loop设备映射或者指向一个文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个文件</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zeroof=/var/loop.img bs=1M count=10240</span><br><span class="line"><span class="comment"># 使用losetup将文件转化为块设备,获得了一个磁盘</span></span><br><span class="line">losetup /dev/loop0 /var/loop.img</span><br><span class="line"><span class="comment"># 在磁盘上构建文件系统</span></span><br><span class="line"><span class="comment"># 挂载</span></span><br><span class="line"><span class="built_in">mkdir</span> /myloopdev</span><br><span class="line">mount /dev/loop0 /myloopdev</span><br><span class="line"><span class="comment"># 正常使用</span></span><br><span class="line"><span class="comment"># 卸载该磁盘</span></span><br><span class="line">umount /myloopdev</span><br><span class="line"><span class="comment"># 接着删除该loop设备，</span></span><br><span class="line">losetup –d  /dev/loop0</span><br></pre></td></tr></table></figure>

<h3 id="mount-硬盘"><a href="#mount-硬盘" class="headerlink" title="mount 硬盘"></a>mount 硬盘</h3><h2 id="实际操作"><a href="#实际操作" class="headerlink" title="实际操作"></a>实际操作</h2><h3 id="物理挂盘"><a href="#物理挂盘" class="headerlink" title="物理挂盘"></a>物理挂盘</h3><p>注意，推进插入的时候把卡扣打开<br><img src="https://pic.shaojiemike.top/img/20220713134443.png"></p>
<h3 id="命令行处理"><a href="#命令行处理" class="headerlink" title="命令行处理"></a>命令行处理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l <span class="comment"># 看不见新盘</span></span><br><span class="line">lsblk <span class="comment"># 也看不见</span></span><br><span class="line">sudo reboot <span class="comment"># 重启</span></span><br></pre></td></tr></table></figure>

<p>还是找不到？ 还是8块。</p>
<p>猜测：盘坏了吗？</p>
<p>额外找了其他类型的盘，还有160GB的固态插上。确实是四块坏盘。换了借口也无法识别。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo shutdown -h now <span class="comment"># 热拔插还是有风险</span></span><br></pre></td></tr></table></figure>

<p>总算整了5块</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sdi         8:128  0 931.5G  0 disk  </span><br><span class="line">└─sdi1      8:129  0 931.5G  0 part  </span><br><span class="line">sdj         8:144  0 149.1G  0 disk  </span><br><span class="line">├─sdj1      8:145  0   512M  0 part  </span><br><span class="line">└─sdj2      8:146  0 148.6G  0 part  </span><br><span class="line">sdk         8:160  0   1.8T  0 disk  </span><br><span class="line">└─sdk1      8:161  0   1.8T  0 part  </span><br><span class="line">sdl         8:176  0   1.8T  0 disk  </span><br><span class="line">└─sdl1      8:177  0   1.8T  0 part  </span><br><span class="line">sdm         8:192  0   1.8T  0 disk  </span><br><span class="line">└─sdm1      8:193  0   1.8T  0 part </span><br></pre></td></tr></table></figure>

<h3 id="尝试一：-RAID0扩容"><a href="#尝试一：-RAID0扩容" class="headerlink" title="尝试一： RAID0扩容"></a>尝试一： RAID0扩容</h3><p>那sdk为例。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; sudo fdisk /dev/sdk <span class="comment">#d 删除分区</span></span><br><span class="line">&gt; sudo mdadm /dev/md0 --add /dev/sdk</span><br><span class="line">mdadm: add new device failed <span class="keyword">for</span> /dev/sdk as 7: Invalid argument</span><br><span class="line"><span class="comment"># 没分区的结构</span></span><br></pre></td></tr></table></figure>

<p>尝试分区后add分区</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; sudo mdadm /dev/md0 --add /dev/sdk1</span><br><span class="line">mdadm: add new device failed <span class="keyword">for</span> /dev/sdk1 as 7: Invalid argument</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://serverfault.com/questions/649105/mdadm-add-new-device-failed-for-dev-xvdl-as-2-invalid-argument">第二种</a>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mdadm --grow /dev/md0 --level=0 --raid-devices=8 --add /dev/sdk</span><br></pre></td></tr></table></figure>

<p>理论上这样的，但是要reshape，而且和<code>dev.raid.speed_limit_max</code>速度有关。我不确定会不会丢失资料，所以没尝试。</p>
<p>所以没有扩容</p>
<h3 id="尝试二：-普通挂载"><a href="#尝试二：-普通挂载" class="headerlink" title="尝试二： 普通挂载"></a>尝试二： 普通挂载</h3><p>先格式化各个分区</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; blkid -o list                                                            </span><br><span class="line">/dev/sdi1                                                                    ext4                                 (not mounted)                                                            </span><br><span class="line">/dev/sdl1                                                                    LVM2_member                          (not mounted)                                                            </span><br><span class="line">/dev/sdm1                                                                    LVM2_member                          (not mounted)                                                               </span><br><span class="line">/dev/sdk1                                                                    LVM2_member                          (not mounted)   </span><br></pre></td></tr></table></figure>

<p>sdi&#x2F;l&#x2F;m&#x2F;k 全部格式化为ext4。<code>blkid -o list</code>不是实时的。挂载后通过<code>df -Th</code>查看</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkfs.ext4 /dev/sdk1     </span><br><span class="line">sudo mount /dev/sdk1 /addDisk/DiskNo4</span><br></pre></td></tr></table></figure>

<p>修改权限，大家都可以访问（直接777算了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> -R ogu+r+w+X /addDisk</span><br></pre></td></tr></table></figure>

<p>配置开机启动，<code>blkid -o list</code> 获得uuid</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/dev/sdk1                                                                    ext4                                 (not mounted)                                                                    ac862e68-9c6f-424a-b4ec-e44e62f7a330</span><br><span class="line">/dev/sdj1                                                                    ext4                                 (not mounted)                                                                    8258b393-2e8e-41d1-9b84-0a7f88986443</span><br><span class="line">/dev/sdl1                                                                    ext4                                 (not mounted)                                                                    5c2e1324-ecc5-40dd-a668-4ec682065d9f</span><br><span class="line">/dev/sdi1                                                                    ext4                                 (not mounted)                                                                    0ae289c5-51f7-4ef2-a07c-6ec8d123e065</span><br></pre></td></tr></table></figure>

<p>修改<code>/etc/fstab</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /addDisk/DiskNo1 was on /dev/sdi1 during curtin installation  </span></span><br><span class="line">/dev/disk/by-uuid/0ae289c5-51f7-4ef2-a07c-6ec8d123e065 /addDisk/DiskNo1 ext4 defaults 0 0</span><br><span class="line"><span class="comment"># /addDisk/DiskNo2 was on /dev/sdl1 during curtin installation  </span></span><br><span class="line">/dev/disk/by-uuid/5c2e1324-ecc5-40dd-a668-4ec682065d9f /addDisk/DiskNo2 ext4 defaults 0 0</span><br><span class="line"><span class="comment"># /addDisk/DiskNo3 was on /dev/sdj1 during curtin installation  </span></span><br><span class="line">/dev/disk/by-uuid/8258b393-2e8e-41d1-9b84-0a7f88986443 /addDisk/DiskNo3 ext4 defaults 0 0</span><br><span class="line"><span class="comment"># /addDisk/DiskNo4 was on /dev/sdk1 during curtin installation  </span></span><br><span class="line">/dev/disk/by-uuid/ac862e68-9c6f-424a-b4ec-e44e62f7a330 /addDisk/DiskNo4 ext4 defaults 0 0</span><br></pre></td></tr></table></figure>

<h2 id="COW-文件系统"><a href="#COW-文件系统" class="headerlink" title="COW 文件系统"></a>COW 文件系统</h2><p>USB启动的系统，会挂载在<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/19782224">COPY-ON-WRITE</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@ubuntu:/dev$ <span class="built_in">df</span> -lh</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">udev            126G     0  126G   0% /dev</span><br><span class="line">tmpfs            26G  3.0M   26G   1% /run</span><br><span class="line">/dev/sdc1        29G  2.1G   27G   8% /cdrom -- USB启动的设备</span><br><span class="line">/dev/loop0      2.0G  2.0G     0 100% /rofs</span><br><span class="line">/cow            126G  209M  126G   1% /</span><br></pre></td></tr></table></figure>

<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><ol>
<li>查找未挂载的盘 lsblk</li>
<li>判断硬盘好坏，是否坏道<ol>
<li>检测坏块<code>sudo badblocks -v /dev/sda &gt; badsectors.txt</code></li>
<li>综合评价<code>sudo smartctl -H /dev/sda10</code></li>
</ol>
</li>
<li>格式化硬盘</li>
<li>挂载新分区<ol>
<li>查看已有盘挂载的分区</li>
</ol>
</li>
<li>如何挂载已有分区</li>
</ol>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://forum.ubuntu.org.cn/viewtopic.php?t=487421">https://forum.ubuntu.org.cn/viewtopic.php?t=487421</a></p>
<p><a target="_blank" rel="noopener" href="https://bbs.huaweicloud.com/blogs/197847">https://bbs.huaweicloud.com/blogs/197847</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/dangelzjj/article/details/104200396">https://blog.csdn.net/dangelzjj/article/details/104200396</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/renshengdezheli/p/13941563.html">https://www.cnblogs.com/renshengdezheli/p/13941563.html</a></p>
<p><a target="_blank" rel="noopener" href="https://linux.cn/article-7961-1.html">https://linux.cn/article-7961-1.html</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-05-11T16:00:00.000Z" title="5/11/2023, 4:00:00 PM">2023-05-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-01-09T03:43:01.308Z" title="1/9/2024, 3:43:01 AM">2024-01-09</time></span><span class="level-item"><a class="link-muted" href="/categories/toLearn/">toLearn</a></span><span class="level-item">4 minutes read (About 637 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/11/Work/network/example/mountNetworkDisk/">Mount Network Disk</a></p><div class="content"><h2 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h2><ul>
<li>The <strong>Server Message Block (SMB)</strong> Protocol is the network file sharing protocol of Microsoft Windows. The set of message packets defining a particular version of the protocol is called a dialect(方言？). </li>
<li>The <strong>Common Internet File System (CIFS)</strong> is a dialect of SMB. <ul>
<li>Both SMB and CIFS are also available on VMS. Both SMB and CIFS are also available on other operating systems like Linux and Android via alternate implementations which are not officially supported by Microsoft.</li>
</ul>
</li>
<li>mount 通过修改 <code>/etc/fstab</code> 文件实现</li>
</ul>
<h2 id="lazy-umount"><a href="#lazy-umount" class="headerlink" title="lazy umount"></a>lazy umount</h2><ul>
<li>分区占用会报错<code>device is busy</code><ul>
<li>先尝试kill相关占用进程 <code>lsof /mountPath | sed -n &#39;2,$p&#39; | awk &#39;&#123;print $2&#125;&#39; | sudo xargs -r kill -9</code></li>
</ul>
</li>
<li><code>umount -l /media/disk</code><ul>
<li>立即从目录结构中实现卸载，即新进程将无法通过&#x2F;media&#x2F;disk访问&#x2F;dev&#x2F;sdb1。</li>
<li>正在访问该文件系统的程序不受影响。即正在操作&#x2F;media&#x2F;disk的进程不会被打断，且仍可以读写&#x2F;dev&#x2F;sdb1中的所有文件。</li>
<li>如果所有进程对&#x2F;media&#x2F;disk的操作都执行完，那么才真正地umount。</li>
<li>由此可知，lazy umount并没有真正实现umount，仅用于特殊需要的情况，而用这种方法来卸载U盘是不安全的。</li>
</ul>
</li>
</ul>
<h2 id="Ubuntu-挂载网络硬盘"><a href="#Ubuntu-挂载网络硬盘" class="headerlink" title="Ubuntu 挂载网络硬盘"></a>Ubuntu 挂载网络硬盘</h2><p>在snode5测试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ip acsa-med.acsalab.com</span></span><br><span class="line">mount 114.214.236.245:/volume1/acsa-med /acsa-med</span><br><span class="line">  114.214.236.245:/volume1/acsa-med      66T   40T   27T  61% /acsa-med</span><br><span class="line">mount -o soft,proto=rdma,port=2050 10.1.13.1:/home /staff</span><br><span class="line">  10.1.13.1:/home                        35T  8.1G   35T   1% /staff</span><br><span class="line"></span><br><span class="line"><span class="comment"># 挂载网络共享文件夹Entertainment 到ubuntu空目录/synology，除开root，本地用户yyy也能访问：</span></span><br><span class="line">sudo apt-get install cifs-utils</span><br><span class="line"><span class="comment"># 可以省略 pass。 </span></span><br><span class="line">sudo mount.cifs //synology.acsalab.com/Entertainment /synology -o user=xxx vers=3.0</span><br></pre></td></tr></table></figure>

<ul>
<li>注意: 挂载的时候选择ipv6域名<code>synology.acsalab.com</code>更好, 之前ipv4反而走了WARP的wiregaurd代理导致链接不上</li>
<li>其中<code>uid</code>和<code>domain</code>可以用<code>id</code>命令可知</li>
</ul>
<h3 id="强制取消-CIFS-Share-挂载"><a href="#强制取消-CIFS-Share-挂载" class="headerlink" title="强制取消 CIFS Share 挂载"></a>强制取消 CIFS Share 挂载</h3><p>lazy<code>-l</code>方式unmount所有<code>-a</code> 文件系统为<code>-t cifs</code>的挂载</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount -a -t cifs -l /path/to/share</span><br></pre></td></tr></table></figure>

<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>姜师兄不知道怎么取消挂载后出现</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root@brainiac1:/home/qcjiang/mnt<span class="comment"># ls -al</span></span><br><span class="line"><span class="built_in">ls</span>: cannot access <span class="string">&#x27;nas&#x27;</span>: No such device</span><br><span class="line">total 8</span><br><span class="line">drwxr-xr-x  3 root    root    4096 May 11 15:52 .</span><br><span class="line">drwxr-xr-x 23 qcjiang qcjiang 4096 May 11 15:52 ..</span><br><span class="line">d?????????  ? ?       ?          ?            ? nas</span><br><span class="line"></span><br><span class="line">root@brainiac1:/home/qcjiang/mnt/nas<span class="comment"># ls -al</span></span><br><span class="line"><span class="built_in">ls</span>: cannot open directory <span class="string">&#x27;.&#x27;</span>: No such device</span><br><span class="line"></span><br><span class="line">root@brainiac1:/home/qcjiang/mnt<span class="comment"># lsof /mntSyno</span></span><br><span class="line">lsof: WARNING: can<span class="string">&#x27;t stat() cifs file system /home/qcjiang/mnt/nas</span></span><br><span class="line"><span class="string">      Output information may be incomplete.</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>d?????????</code>经常出现在无权限访问时，需要<code>chmod +x /path</code>解决</li>
<li>但是这里是没有处理空cifs挂载，运行<code>umount /home/qcjiang/mnt/nas</code> 即可解决。</li>
</ul>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><p>想将Nas上的盘挂载到</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-09-02T09:07:34.000Z" title="9/2/2022, 9:07:34 AM">2022-09-02</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-01-09T03:43:01.312Z" title="1/9/2024, 3:43:01 AM">2024-01-09</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">6 minutes read (About 825 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/09/02/Work/software/linux/ubuntu/">Ubuntu server reInstall</a></p><div class="content"><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ol>
<li>写U盘（见<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/dbe64ce09b74">网上教程</a>，注意备份U盘文件）</li>
<li>插U盘，开机前根据机器型号使用命令(F2，F4, F12或者Del)进入boit manager，选择从U盘boot<ol>
<li>改引导启动顺序，把U盘启动改到最前面<img src="https://pic.shaojiemike.top/img/20220902174441.png"></li>
</ol>
</li>
<li>根据提示安装ubuntu(服务器不用分区，默认就行，如果自己电脑双系统则需要根据内存设置分区)</li>
<li>设置root密码并进入root <code>sudo passwd root</code></li>
<li>配置实验室网络</li>
</ol>
<h3 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a>下载安装包</h3><p><a target="_blank" rel="noopener" href="https://ubuntu.com/download/server">官网下载</a></p>
<h2 id="重装系统怎么保留原本的磁盘文件"><a href="#重装系统怎么保留原本的磁盘文件" class="headerlink" title="重装系统怎么保留原本的磁盘文件"></a>重装系统怎么保留原本的磁盘文件</h2><p>只要在安装系统时分出一个&#x2F;home分区。你可以把Ubuntu的“&#x2F;”分区看为Windows的C盘，重装Ubuntu时只格式化“&#x2F;”分区，不格式化“&#x2F;home”，这样就可以保留“&#x2F;home”中的数据了。使用的时候就挂载就行</p>
<p>但是假如一开始没分区:</p>
<ol>
<li>可以插块新盘当作系统盘，系统安装好之后，把旧的文件系统挂载到新系统的某个目录下</li>
<li>从旧的文件系统里划出一块区域，安装新系统。<ol>
<li>在你要安装的目标磁盘中，通过删除卷和删除分区操作腾出一块未分配的磁盘空间作为安装区</li>
</ol>
</li>
</ol>
<h2 id="从已有分区中提取空间"><a href="#从已有分区中提取空间" class="headerlink" title="从已有分区中提取空间"></a>从已有分区中提取空间</h2><p>xfs类型不可以直接缩减，只扩不减。如果是ext2，ext3，ext4可以在线缩减，如果xfs盘要缩小就要删除后重新添加</p>
<p><a target="_blank" rel="noopener" href="https://www.ywbj.cc/?p=712">https://www.ywbj.cc/?p=712</a></p>
<h3 id="非系统根分区LVM缩容"><a href="#非系统根分区LVM缩容" class="headerlink" title="非系统根分区LVM缩容"></a>非系统根分区LVM缩容</h3><ol>
<li>取消挂载<br>系统根分区无法在线取消挂载，所以这时请勿对系统根分区执行任何缩容操作   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount /lv/ #取消挂载目录</span><br></pre></td></tr></table></figure></li>
<li>e2fsck检查修复磁盘完整性   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e2fsck -f /dev/vg0/lv0</span><br></pre></td></tr></table></figure></li>
<li>缩小系统文件空间，即<code>df -h</code>查看的空间<br>不取消挂载，这步会报错，注：一定先减文件系统，再减逻辑卷   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resize2fs /dev/vg0/lv0 10G</span><br></pre></td></tr></table></figure></li>
<li>缩小磁盘空间，即lsblk查看的空间<br>不执行上面的操作，直接执行这步，虽然成功，但是会操作数据丢失，系统无法启动。   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lvreduce -L 10G /dev/vg0/lv0</span><br></pre></td></tr></table></figure></li>
<li>重新挂载   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -a</span><br></pre></td></tr></table></figure>
最后查看lvs空间</li>
</ol>
<h3 id="系统根分区LVM缩容（救援模式）"><a href="#系统根分区LVM缩容（救援模式）" class="headerlink" title="系统根分区LVM缩容（救援模式）"></a>系统根分区LVM缩容（救援模式）</h3><p>正常启动系统进入救援模式 ：启动按shift键，出现选择系统界面，按e。找到以单词 linux 开头的行，并在该行的末尾添加以下内容（要到达末尾，只需按下 CTRL+e 或使用 END 键或左右箭头键）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemd.unit=rescue.target</span><br></pre></td></tr></table></figure>
<p>添加完成后，只需按下 <code>CTRL+x</code> 或 <code>F10</code> 即可继续启动救援模式。几秒钟后，你将以 root 用户身份进入救援模式（单用户模式）<br><img src="https://pic.shaojiemike.top/img/20220902182623.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40018873/article/details/109537532">https://blog.csdn.net/weixin_40018873/article/details/109537532</a></p>
<p><a target="_blank" rel="noopener" href="https://www.ywbj.cc/?p=712">https://www.ywbj.cc/?p=712</a></p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">𝘊𝘰𝘮𝘱𝘶𝘵𝘦𝘳 𝘈𝘳𝘤𝘩𝘪𝘵𝘦𝘤𝘵𝘶𝘳𝘦 &amp; 𝘏𝘗𝘊</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">379</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">30</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">487</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">38</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math/"><span class="level-start"><span class="level-item">Math</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">118</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">50</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-05T07:17:06.000Z">2024-01-05</time></p><p class="title"><a href="/2024/01/05/Work/Programming/2-languageGrammar/cudaExeModel/">The CUDA Execution Model</a></p><p class="categories"><a href="/categories/toLearn/">toLearn</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-04T02:55:54.000Z">2024-01-04</time></p><p class="title"><a href="/2024/01/04/Work/Architecture/performanceModel/GPUPerformanceModel/">CPU / GPU Performance Model based on Interval Analysis</a></p><p class="categories"><a href="/categories/Architecture/">Architecture</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-03T08:23:31.000Z">2024-01-03</time></p><p class="title"><a href="/2024/01/03/Work/Artificial%20Intelligence/Training/AITraningParallism/">AI Traning Parallism</a></p><p class="categories"><a href="/categories/Artificial-Intelligence/">Artificial Intelligence</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-03T01:19:28.000Z">2024-01-03</time></p><p class="title"><a href="/2024/01/03/Work/Architecture/companySpecificDesign/NewGenerationShenweiSystem/">New Generation Shenwei System</a></p><p class="categories"><a href="/categories/Architecture/">Architecture</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-01T14:59:59.000Z">2024-01-01</time></p><p class="title"><a href="/2024/01/01/Thinking/3-EfficientLife/overview_balance/SelfMonitor-healthyBodyModel-TimeAdvisor-5levelHealthyEfficiencyMetrics/">Burnout Monitor : Healthy Body Model + Time Advisor + 5 level Healthy &amp; Efficiency self-evaluation Metrics</a></p><p class="categories"><a href="/categories/thinking/">thinking</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/"><span class="level-start"><span class="level-item">2024</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">235</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">67</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">72</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2024 Shaojie Tan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>