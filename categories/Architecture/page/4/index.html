<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>Category: Architecture - SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="SHAOJIE&#039;S BOOK"><meta property="og:url" content="http://icarus.shaojiemike.top/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://icarus.shaojiemike.top/img/og_image.png"><meta property="article:author" content="Shaojie Tan"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://icarus.shaojiemike.top/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top"},"headline":"SHAOJIE'S BOOK","image":["http://icarus.shaojiemike.top/img/og_image.png"],"author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">Categories</a></li><li class="is-active"><a href="#" aria-current="page">Architecture</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-26T00:49:53.000Z" title="10/26/2021, 12:49:53 AM">2021-10-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.458Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">a few seconds read (About 109 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/26/Work/Architecture/companySpecificDesign/AMD-Arch/">AMD Architecture on EPYC</a></p><div class="content"><h2 id="ROMA-SOC架构"><a href="#ROMA-SOC架构" class="headerlink" title="ROMA SOC架构"></a>ROMA SOC架构</h2><p><img src="https://pic.shaojiemike.top/img/20211026085159.png"></p>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>CCD<br>CCX</p>
<h3 id="ROMA与MILAN架构比较"><a href="#ROMA与MILAN架构比较" class="headerlink" title="ROMA与MILAN架构比较"></a>ROMA与MILAN架构比较</h3><p><img src="https://pic.shaojiemike.top/img/20211026085416.png"></p>
<p>Roma使用Zen2核心，MILan使用Zen3核心。而且后者缓存更大，核心通信延迟更低。</p>
<h3 id="计算CCD和CCX"><a href="#计算CCD和CCX" class="headerlink" title="计算CCD和CCX"></a>计算CCD和CCX</h3><p><img src="https://pic.shaojiemike.top/img/20211026085830.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-24T16:00:00.000Z" title="10/24/2021, 4:00:00 PM">2021-10-24</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.453Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">a few seconds read (About 104 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/24/Work/Architecture/SIMD/neon/">Arm - Neon</a></p><div class="content"><p><a target="_blank" rel="noopener" href="https://community.arm.com/arm-community-blogs/b/operating-systems-blog/posts/arm-neon-programming-quick-reference">https://community.arm.com/arm-community-blogs/b/operating-systems-blog/posts/arm-neon-programming-quick-reference</a></p>
<h2 id="Arm-cpu-向量化支持判断"><a href="#Arm-cpu-向量化支持判断" class="headerlink" title="Arm cpu 向量化支持判断"></a>Arm cpu 向量化支持判断</h2><h2 id="向量化指令"><a href="#向量化指令" class="headerlink" title="向量化指令"></a>向量化指令</h2><h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/heliangbin87/article/details/79581113?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link">https://blog.csdn.net/heliangbin87/article/details/79581113?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-21T16:00:00.000Z" title="10/21/2021, 4:00:00 PM">2021-10-21</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.437Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">a minute read (About 195 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/21/Work/Operating%20system/csapp1/">CSAPP: Machine Programming III: Procedures</a></p><div class="content"><h2 id="stack"><a href="#stack" class="headerlink" title="stack"></a>stack</h2><p><img src="https://i.loli.net/2021/10/22/9EdAqmXveSUOiGk.png"></p>
<h2 id="register-使用约定"><a href="#register-使用约定" class="headerlink" title="register 使用约定"></a>register 使用约定</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rax 返回/传出寄存器</span><br><span class="line">rdi rsi 传入寄存器</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2021/10/22/1HqRQoNk5vbOfts.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">寄存器 %rsp 存放栈顶地址 (lowest stack address) pushq %rsp-8 popq %rsp+8</span><br><span class="line">rip 存call地址</span><br></pre></td></tr></table></figure>

<p>caller 调用者 callee 被调用者<br><img src="https://i.loli.net/2021/10/22/OnzB3DUITS2VwGr.png"><br><img src="https://i.loli.net/2021/10/22/9KnENm4dxSFtb8s.png"></p>
<h2 id="calling-procedure"><a href="#calling-procedure" class="headerlink" title="calling procedure"></a>calling procedure</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">callq 调用</span><br><span class="line">retq 返回</span><br></pre></td></tr></table></figure>
<h3 id="调用控制"><a href="#调用控制" class="headerlink" title="调用控制"></a>调用控制</h3><p><a target="_blank" rel="noopener" href="https://bkfish.github.io/2018/12/21/CSAPP%E5%8F%88%E5%8F%8C%E5%8F%92%E5%8F%95%E6%9D%A5%E4%B8%80%E9%81%8D%E4%B9%8B%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%E6%A0%88%E5%B8%A7%E7%9A%84%E5%8F%98%E5%8C%96/">https://bkfish.github.io/2018/12/21/CSAPP又双叒叕来一遍之函数调用过程栈帧的变化/</a></p>
<h3 id="传参数"><a href="#传参数" class="headerlink" title="传参数"></a>传参数</h3><ol>
<li>push到栈里<ol>
<li>递归调用，把上一级的数据及时push保存</li>
</ol>
</li>
<li>保存在寄存器里</li>
</ol>
<h3 id="Managing-local-data"><a href="#Managing-local-data" class="headerlink" title="Managing local data"></a>Managing local data</h3><p><img src="https://i.loli.net/2021/10/22/VKzA6vrXSpIaq15.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-20T16:00:00.000Z" title="10/20/2021, 4:00:00 PM">2021-10-20</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.453Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">8 minutes read (About 1258 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/20/Work/Architecture/SIMD/SIMD/">SIMD+SSE+AVX</a></p><div class="content"><h2 id="SIMD"><a href="#SIMD" class="headerlink" title="SIMD"></a>SIMD</h2><p>SIMD全称Single Instruction Multiple Data，单指令多数据流，能够复制多个操作数，并把它们打包在大型寄存器的一组指令集。</p>
<p>通过使用矢量寄存器，指令译码后几个执行部件同时访问内存，一次性获得所有操作数进行运算。这个特点使SIMD特别适合于多媒体应用等数据密集型运算。如 AMD的3D NOW！技术</p>
<h2 id="MMX"><a href="#MMX" class="headerlink" title="MMX"></a>MMX</h2><p>MMX是由57条指令组成的SIMD多媒体指令集，MMX将64位寄存当作2个32位或8个8位寄存器来用，只能处理整形计算，这样的64位寄存器有８组，分别命名为MM0~MM7．这些寄存器不是为MMX单独设置的，而是借用的FPU的寄存器，占用浮点寄存器进行运算（64位MMX寄存器实际上就是浮点数寄存器的别名），以至于MMX指令和浮点数操作不能同时工作。为了减少在MMX和浮点数模式切换之间所消耗的时间，程序员们尽可能减少模式切换的次数，也就是说，这两种操作在应用上是互斥的。</p>
<h2 id="SSE"><a href="#SSE" class="headerlink" title="SSE"></a>SSE</h2><p>SSE为Streaming SIMD Extensions的缩写。Intel SSE指令通过128bit位宽的专用寄存器, 支持一次操作128bit数据. float是单精度浮点数, 占32bit, 那么可以使用一条SSE指令一次计算4个float数。注意这些SSE指令要求参数中的内存地址必须对齐于16字节边界。</p>
<h3 id="SSE专用矢量寄存器个数，是每个core一个吗？"><a href="#SSE专用矢量寄存器个数，是每个core一个吗？" class="headerlink" title="SSE专用矢量寄存器个数，是每个core一个吗？"></a>SSE专用矢量寄存器个数，是每个core一个吗？</h3><p>SSE有8个128位寄存器，XMM0 ~XMM7。此外SSE还提供了新的控制&#x2F;状态寄存器MXCSR。为了回答这个问题，我们需要了解CPU的架构。每个core是独占register的<br><img src="https://pic.shaojiemike.top/PicGoSKLServer.png"></p>
<h3 id="SSE-相关编译命令"><a href="#SSE-相关编译命令" class="headerlink" title="SSE 相关编译命令"></a>SSE 相关编译命令</h3><p>addps xmm0, xmm1 ; reg-reg<br>addps xmm0, [ebx] ; reg-mem<br>sse提供了两个版本的指令，其一以后缀ps结尾，这组指令对打包单精度浮点值执行类似mmx操作运算，而第二种后缀ss</p>
<h3 id="SSE-相关函数"><a href="#SSE-相关函数" class="headerlink" title="SSE 相关函数"></a>SSE 相关函数</h3><ol>
<li>load系列     eg.__m128 _mm_load_ss (float *p)</li>
<li>store系列    eg.__m128 _mm_set_ss (float w) </li>
<li>其他操作     eg.__m128 _mm_add_ss (__m128 a, __m128 b)包括加法、减法、乘法、除法、开方、最大值、最小值、近似求倒数、求开方的倒数等等浮点操作</li>
</ol>
<h3 id="SSE指令集的发展"><a href="#SSE指令集的发展" class="headerlink" title="SSE指令集的发展"></a>SSE指令集的发展</h3><p><img src="https://pic.shaojiemike.top/PicGo20210714223527.png"></p>
<ol>
<li>SSE2则进一步支持双精度浮点数，由于寄存器长度没有变长，所以只能支持２个双精度浮点计算或是４个单精度浮点计算．另外，它在这组寄存器上实现了整型计算，从而代替了MMX．</li>
<li>SSE3支持一些更加复杂的算术计算．</li>
<li>SSE4增加了更多指令，并且在数据搬移上下了一番工夫，支持不对齐的数据搬移，增加了super shuffle引擎．</li>
<li>由于2007年8月，AMD抢先宣布了SSE5指令集。之后Intel将新出的叫做AVX指令集。由于SSE5和AVX指令集功能类似，并且AVX包含更多的优秀特性，因此AMD决定支持AVX指令集</li>
</ol>
<h2 id="AVX"><a href="#AVX" class="headerlink" title="AVX"></a>AVX</h2><p> Advanced Vector Extensions。较新的Intel CPU都支持AVX指令集, 它可以一次操作256bit数据, 是SSE的2倍，可以使用一条AVX指令一次计算8个float数。AVX指令要求内存地址对齐于32字节边界。</p>
<h2 id="SSE-与-AVX的发展"><a href="#SSE-与-AVX的发展" class="headerlink" title="SSE 与 AVX的发展"></a>SSE 与 AVX的发展</h2><p><img src="https://pic.shaojiemike.top/PicGoregisters_updated.png"><br><img src="https://pic.shaojiemike.top/PicGoIntel-mmx-sse-sse2-avx-AVX-512.png"></p>
<h2 id="性能对比"><a href="#性能对比" class="headerlink" title="性能对比"></a>性能对比</h2><p>根据参考文章，其中用gcc编译AVX版代码时需要加-mavx选项.<br><img src="https://pic.shaojiemike.top/PicGo20210714222019.png"><br>开启-O3选项，一般不用将代码改成多次计算和内存对齐。</p>
<h2 id="判断是否向量化，看汇编"><a href="#判断是否向量化，看汇编" class="headerlink" title="判断是否向量化，看汇编"></a>判断是否向量化，看汇编</h2><h3 id="GNU"><a href="#GNU" class="headerlink" title="GNU"></a>GNU</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcc -march=native -c -Q --help=target # 查看支持的指令集</span><br><span class="line">g++ -O2 -ftree-vectorize -ftree-vectorizer-verbose=9 -S -c foo.cpp -o /dev/stdout | c++filt # 查看汇编</span><br><span class="line">OBJDUMP # 反汇编</span><br></pre></td></tr></table></figure>
<p>c++函数在linux系统下编译之后会变成如下样子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_ZNK4Json5ValueixEPKc</span><br></pre></td></tr></table></figure>
<p>在linux命令行使用c++filter</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ c++filt _ZNK4Json5ValueixEPKc</span><br><span class="line">Json::Value::operator[](char const*) const</span><br></pre></td></tr></table></figure>
<p>可以得到函数的原始名称， 展开后续追踪</p>
<h3 id="intel-icpc"><a href="#intel-icpc" class="headerlink" title="intel icpc"></a>intel icpc</h3><h3 id="clang"><a href="#clang" class="headerlink" title="clang"></a>clang</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-Rpass=loop-vectorize </span><br><span class="line">identifies loops that were successfully vectorized.</span><br><span class="line"></span><br><span class="line">-Rpass-missed=loop-vectorize </span><br><span class="line">identifies loops that failed vectorization and indicates if vectorization was specified.</span><br><span class="line"></span><br><span class="line">-Rpass-analysis=loop-vectorize </span><br><span class="line">identifies the statements that caused vectorization to fail.</span><br></pre></td></tr></table></figure>
<h2 id="常见汇编代码"><a href="#常见汇编代码" class="headerlink" title="常见汇编代码"></a>常见汇编代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xmm 寄存器</span><br><span class="line">movsd</span><br></pre></td></tr></table></figure>
<h3 id="MMX指令"><a href="#MMX指令" class="headerlink" title="MMX指令"></a>MMX指令</h3><p><img src="https://pic.shaojiemike.top/img/20210824191542.png"></p>
<h2 id="手动向量化"><a href="#手动向量化" class="headerlink" title="手动向量化"></a>手动向量化</h2><p><img src="https://pic.shaojiemike.top/img/20210828093838.png"><br>循环展开8次<br><img src="https://pic.shaojiemike.top/img/20210828093812.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20210829163015.png"></p>
<h3 id="例子1"><a href="#例子1" class="headerlink" title="例子1"></a>例子1</h3><h2 id="SIMD寄存器"><a href="#SIMD寄存器" class="headerlink" title="SIMD寄存器"></a>SIMD寄存器</h2><p><img src="https://pic.shaojiemike.top/img/20210829162207.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.dazhuanlan.com/2020/02/01/5e3475c89d5bd/">https://www.dazhuanlan.com/2020/02/01/5e3475c89d5bd/</a></p>
<p><a target="_blank" rel="noopener" href="https://software.intel.com/sites/landingpage/IntrinsicsGuide/">https://software.intel.com/sites/landingpage/IntrinsicsGuide/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-10T11:56:03.000Z" title="10/10/2021, 11:56:03 AM">2021-10-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.444Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">3 minutes read (About 404 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/10/Work/HPC/llvm-mca/LLVM-mca6/">uops.info: Characterizing Latency, Throughput, and Port Usage of Instructions on Intel Microarchitectures (2019)</a></p><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>现代计算机微架构是最复杂的几个人造系统。在上面预测，解释和优化软件是困难的。我们需要其运行行为的可信模型，但是事实是稀缺的。</p>
<p>本文设计和实现了一种构建X86指令的延迟，吞吐量和端口使用的可信模型。并仔细探究了这三个指标的定义。尤其是latency的值在不同的操作数情况时是如何确定的。</p>
<p>同时其结果也是机器可读的。并且对已有的所有Intel架构都进行了测试。</p>
<p>官网有结果 <a target="_blank" rel="noopener" href="http://www.uops.info/">http://www.uops.info</a> </p>
<p>We also plan to release <strong>the source code of our tool</strong> as open source</p>
<h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1 简介"></a>1 简介</h2><h2 id="2-相关工作"><a href="#2-相关工作" class="headerlink" title="2 相关工作"></a>2 相关工作</h2><h3 id="Information-provided-by-Intel"><a href="#Information-provided-by-Intel" class="headerlink" title="Information provided by Intel"></a>Information provided by Intel</h3><h3 id="Measurement-based-Approaches"><a href="#Measurement-based-Approaches" class="headerlink" title="Measurement-based Approaches"></a>Measurement-based Approaches</h3><h2 id="3-Background"><a href="#3-Background" class="headerlink" title="3 Background"></a>3 Background</h2><h3 id="Pipeline-of-Intel-Core-CPUs"><a href="#Pipeline-of-Intel-Core-CPUs" class="headerlink" title="Pipeline of Intel Core CPUs"></a>Pipeline of Intel Core CPUs</h3><h3 id="Assembler-Instructions"><a href="#Assembler-Instructions" class="headerlink" title="Assembler Instructions"></a>Assembler Instructions</h3><h3 id="Hardware-Performance-Counters"><a href="#Hardware-Performance-Counters" class="headerlink" title="Hardware Performance Counters"></a>Hardware Performance Counters</h3><h2 id="4-Definitions"><a href="#4-Definitions" class="headerlink" title="4 Definitions"></a>4 Definitions</h2><h3 id="Latency"><a href="#Latency" class="headerlink" title="Latency"></a>Latency</h3><h3 id="Throughput"><a href="#Throughput" class="headerlink" title="Throughput"></a>Throughput</h3><h3 id="Port-Usage"><a href="#Port-Usage" class="headerlink" title="Port Usage"></a>Port Usage</h3><h2 id="5-Algorithms"><a href="#5-Algorithms" class="headerlink" title="5 Algorithms"></a>5 Algorithms</h2><h3 id="Port-Usage-1"><a href="#Port-Usage-1" class="headerlink" title="Port Usage"></a>Port Usage</h3><ol>
<li>Finding Blocking Instructions</li>
<li>Port Usage Algorithm</li>
<li></li>
</ol>
<h3 id="Latency-1"><a href="#Latency-1" class="headerlink" title="Latency"></a>Latency</h3><ol>
<li>Register -&gt; Register<ol>
<li>Both registers are general-purpose registers </li>
<li>Both registers are SIMD registers</li>
<li>The registers have different types</li>
</ol>
</li>
<li>Memory → Register</li>
<li>Status Flags → Register</li>
<li>Register → Memory</li>
<li>Divisions</li>
</ol>
<h3 id="Throughtput"><a href="#Throughtput" class="headerlink" title="Throughtput"></a>Throughtput</h3><ol>
<li>Measuring Throughput</li>
<li>Computing Throughput from Port Usage</li>
</ol>
<h2 id="Computing-Throughput-from-Port-Usage"><a href="#Computing-Throughput-from-Port-Usage" class="headerlink" title="Computing Throughput from Port Usage"></a>Computing Throughput from Port Usage</h2><h3 id="Details-of-the-x86-Instruction-Set"><a href="#Details-of-the-x86-Instruction-Set" class="headerlink" title="Details of the x86 Instruction Set"></a>Details of the x86 Instruction Set</h3><h3 id="Measurements-on-the-Hardware"><a href="#Measurements-on-the-Hardware" class="headerlink" title="Measurements on the Hardware"></a>Measurements on the Hardware</h3><h3 id="Analysis-Using-Intel-IACA"><a href="#Analysis-Using-Intel-IACA" class="headerlink" title="Analysis Using Intel IACA"></a>Analysis Using Intel IACA</h3><h3 id="Machine-readable-Output"><a href="#Machine-readable-Output" class="headerlink" title="Machine-readable Output"></a>Machine-readable Output</h3><h2 id="7-Evaluation"><a href="#7-Evaluation" class="headerlink" title="7 Evaluation"></a>7 Evaluation</h2><p>balabala~</p>
<h2 id="8-Limitations"><a href="#8-Limitations" class="headerlink" title="8 Limitations"></a>8 Limitations</h2><h2 id="9-Conclusions-and-Future-Work"><a href="#9-Conclusions-and-Future-Work" class="headerlink" title="9 Conclusions and Future Work"></a>9 Conclusions and Future Work</h2><p>我们的工具可以用来优化llvm-mca等软件。</p>
<p>Future work includes adapting our algorithms to AMD x86 CPUs. 官网已经实现了。</p>
<p>We would also like to extend our approach tocharacterize other undocumented performance-relevant aspects of the pipeline, e.g., regarding micro and macro-fusion, or whether instructions use the simple decoder, the complex decoder, or the Microcode-ROM.</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-09-26T13:18:22.000Z" title="9/26/2021, 1:18:22 PM">2021-09-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.444Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">3 minutes read (About 434 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/26/Work/HPC/llvm-mca/LLVM-mca5/">BHive : An Infrastructure for Adaptive Dynamic Optimization 2003 IEEE</a></p><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>动态优化逐渐显现出是一种解决传统静态汇编困难的好方法。 但是市面上有大量的针对开发静态优化的编译器框架，但是少有针对动态优化的。</p>
<p>我们实现了一种动态分析和优化的框架，为DynamoRIO动态代码修改系统提供了一种创建额外模块的交互界面。通过简单轻量的API就可以提炼许多DynamoRIO运行时的底层细节，但是只能在单指令流下,而且不同指令显示的细节也是不同的。</p>
<p>该API不仅可以用来优化，也可以instrumentation,热点分析和动态翻译。</p>
<p>为了展现架构的有效性，我们实现了若干优化，一些例子有40%提升，基于DynamoRIO平均有12%加速。</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>随着现代软件的复杂，还有动态load,共享库等特性，静态分析越来越衰弱。静态分析器去分析整个程序是困难或者不可能的，而静态优化又受限于静态代码分析器的准确性。而且静态优化过多会导致出错时难以debug。</p>
<h2 id="DynamoRIO"><a href="#DynamoRIO" class="headerlink" title="DynamoRIO"></a>DynamoRIO</h2><h2 id="Client-Interface"><a href="#Client-Interface" class="headerlink" title="Client Interface"></a>Client Interface</h2><h3 id="Instruction-Representation"><a href="#Instruction-Representation" class="headerlink" title="Instruction Representation"></a>Instruction Representation</h3><h3 id="DynamoRIO-API"><a href="#DynamoRIO-API" class="headerlink" title="DynamoRIO API"></a>DynamoRIO API</h3><h3 id="DynamoRIO-Client"><a href="#DynamoRIO-Client" class="headerlink" title="DynamoRIO Client"></a>DynamoRIO Client</h3><h3 id="Extensions-for-Adaptive-Optimization"><a href="#Extensions-for-Adaptive-Optimization" class="headerlink" title="Extensions for Adaptive Optimization"></a>Extensions for Adaptive Optimization</h3><h3 id="Extensions-for-Custom-Traces"><a href="#Extensions-for-Custom-Traces" class="headerlink" title="Extensions for Custom Traces"></a>Extensions for Custom Traces</h3><h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><h3 id="Redundant-Load-Removal"><a href="#Redundant-Load-Removal" class="headerlink" title="Redundant Load Removal"></a>Redundant Load Removal</h3><h3 id="Strength-Reduction"><a href="#Strength-Reduction" class="headerlink" title="Strength Reduction"></a>Strength Reduction</h3><h3 id="Indirect-Branch-Dispatch"><a href="#Indirect-Branch-Dispatch" class="headerlink" title="Indirect Branch Dispatch"></a>Indirect Branch Dispatch</h3><h3 id="Custom-Traces"><a href="#Custom-Traces" class="headerlink" title="Custom Traces"></a>Custom Traces</h3><h2 id="Experimental-Results"><a href="#Experimental-Results" class="headerlink" title="Experimental Results"></a>Experimental Results</h2><h2 id="Related-Work"><a href="#Related-Work" class="headerlink" title="Related Work"></a>Related Work</h2><h2 id="Conclusions"><a href="#Conclusions" class="headerlink" title="Conclusions"></a>Conclusions</h2><p>就是这个动态框架好，使用范围广，前途光明</p>
<h2 id="BHive的提取基本块的应该就是-bbuf"><a href="#BHive的提取基本块的应该就是-bbuf" class="headerlink" title="BHive的提取基本块的应该就是 bbuf"></a>BHive的提取基本块的应该就是 bbuf</h2><p><a target="_blank" rel="noopener" href="https://github.com/DynamoRIO/dynamorio/blob/master/api/samples/bbbuf.c">https://github.com/DynamoRIO/dynamorio/blob/master/api/samples/bbbuf.c</a></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-09-18T15:01:13.000Z" title="9/18/2021, 3:01:13 PM">2021-09-18</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.457Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">2 minutes read (About 332 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/18/Work/Architecture/companySpecificDesign/kunpeng/">Kunpeng</a></p><div class="content"><p><img src="https://pic.shaojiemike.top/img/20220706191616.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706191804.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706194535.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706192133.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706192208.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706192401.png"></p>
<p>多线程SMT (Simultaneous multithreading)</p>
<p><img src="https://pic.shaojiemike.top/img/20220706192649.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706192925.png"><br>统一的调度器复杂度超级高，只有Intel实现了，但是效果很好。</p>
<p><img src="https://pic.shaojiemike.top/img/20220706193012.png"></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/51354994">什么是CPU Die</a></p>
<p><img src="https://pic.shaojiemike.top/img/20220706193217.png"><br>良品率会更高</p>
<p><img src="https://pic.shaojiemike.top/img/20220706193253.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706193414.png"><br>自研OpenBLAS+ ，毕申编译器，自研MPI</p>
<p><img src="https://pic.shaojiemike.top/img/20220706193501.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706193531.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706193559.png"></p>
<p>片间一致性可以到达4P到16P？？？。Intel可以达到8P</p>
<p><img src="https://pic.shaojiemike.top/img/20220706194215.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706194305.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706194356.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706194744.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706195047.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706194818.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706194901.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706194929.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706195017.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706195134.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706195252.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706195417.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706195438.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220706195506.png"></p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ol>
<li>虽然说是保密的，但是鲲鹏930,950应该已经出来了<ol>
<li>930，950是异构的核(是大小核吗？)</li>
</ol>
</li>
</ol>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://bbs.huaweicloud.com/blogs/268031">https://bbs.huaweicloud.com/blogs/268031</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-09-18T11:13:16.000Z" title="9/18/2021, 11:13:16 AM">2021-09-18</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.451Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">3 minutes read (About 455 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/18/Work/Architecture/BigLittle-Endian/">Big-Endian &amp; Little-Endian</a></p><div class="content"><h2 id="问题是否有意义"><a href="#问题是否有意义" class="headerlink" title="问题是否有意义"></a>问题是否有意义</h2><p>鸡蛋从哪头打破，怎么会有哪种更合适呢？对个人生活和社会发展又有什么意义呢？Swift写这段故事，其实是讽刺当时法国和英国的时政，认为真正重要的事情得不到关注、而在一些毫无意义的事情上争论不休。</p>
<h2 id="各个阵营的选择"><a href="#各个阵营的选择" class="headerlink" title="各个阵营的选择"></a>各个阵营的选择</h2><p>Motorola的PowerPC系列CPU采用Big-Endian方式存储数据，</p>
<p>而Intel的x86系列则采用Little-Endian方式存储数据。</p>
<p>JAVA虚拟机中多字节类型数据的存放顺序，也就是JAVA字节序是Big-Endian。</p>
<p>很多的ARM，DSP(Digital signal processor)都为小端模式。有些ARM处理器还可以随时在程序中(在ARM Cortex 系列使用REV、REV16、REVSH指令)进行大小端的切换。</p>
<h2 id="忽略大小端的情况"><a href="#忽略大小端的情况" class="headerlink" title="忽略大小端的情况"></a>忽略大小端的情况</h2><p>得益于高级语言的发展，在现在的软件开发基本不需关心字节序（除非是socket编程），如Java这类跨平台移植的语言由虚拟机屏蔽了字节序问题。</p>
<p>对于大小端的处理也和编译器的实现有关，在C语言中，默认是小端（但在一些对于单片机的实现中却是基于大端，比如Keil 51C），Java是平台无关的，默认是大端。在网络上传输数据普遍采用的都是大端</p>
<h2 id="大小尾端程序"><a href="#大小尾端程序" class="headerlink" title="大小尾端程序"></a>大小尾端程序</h2><p>华为鲲鹏AArch64 和 Intel x86 都是little-endian<br><img src="https://pic.shaojiemike.top/img/20211003151847.png"><br><img src="https://pic.shaojiemike.top/img/20211003151919.png"><br><img src="https://pic.shaojiemike.top/img/20211003154646.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-08-03T08:20:32.000Z" title="8/3/2021, 8:20:32 AM">2021-08-03</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.452Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">10 minutes read (About 1495 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/03/Work/Architecture/GPU/cpuvsgpu/">CPU vs GPU</a></p><div class="content"><h2 id="GPU-vs-CPU"><a href="#GPU-vs-CPU" class="headerlink" title="GPU vs CPU"></a>GPU vs CPU</h2><p><img src="https://pic.shaojiemike.top/img/v2-75cdb098e645c614492746417b457c13_1440w.jpg"></p>
<h3 id="CPU-latency-oriented-design"><a href="#CPU-latency-oriented-design" class="headerlink" title="CPU: latency-oriented design"></a>CPU: latency-oriented design</h3><p>低延时的设计思路</p>
<ol>
<li><strong>large L1 caches</strong> to reduce the average latency of data</li>
<li>时钟周期的频率是非常高的，达到3-4GHz</li>
<li><strong>Instruction-level parallelism</strong> to compute partial results ahead of time to further reduce latency<ol>
<li>当程序含有多个分支的时候，它通过提供分支预测的能力来降低延时。</li>
<li>数据转发。 当一些指令依赖前面的指令结果时，数据转发的逻辑控制单元决定这些指令在pipeline中的位置并且尽可能快的转发一个指令的结果给后续的指令。</li>
</ol>
</li>
</ol>
<p>相比之下计算能力只是CPU很小的一部分。擅长逻辑控制，串行的运算。</p>
<h3 id="GPU-throughput-oriented-design"><a href="#GPU-throughput-oriented-design" class="headerlink" title="GPU: throughput-oriented design"></a>GPU: throughput-oriented design</h3><p>大吞吐量设计思路</p>
<ol>
<li>GPU采用了数量众多的计算单元和超长的流水线</li>
<li>但只有非常简单的控制逻辑</li>
<li>几乎省去了Cache。缓存的目的不是保存后面需要访问的数据的，减少cache miss。这点和CPU不同，而是为thread提高服务的。</li>
<li>GPU “over-subscribed”  threads： GPU运行任务会启动远超物理核数的thread，原因是借助极小的上下文切换开销，GPU能通过快速切换Threads&#x2F;warps来隐藏访存延迟。<ol>
<li>GPU线程的创建与调度使用硬件而不是操作系统，速度很快（PowerPC创建线程需要37万个周期）[^1]</li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/24254975/measure-the-overhead-of-context-switching-in-gpu">Cost to switch between warps</a> allocated to a warp scheduler is <code>0</code> cycles and can happen every cycle.[^2]</li>
</ol>
</li>
</ol>
<p>对带宽大的密集计算并行性能出众，擅长的是大规模并发计算。</p>
<p><img src="https://pic.shaojiemike.top/img/141016254012704.png"></p>
<table>
<thead>
<tr>
<th>对比项</th>
<th>CPU</th>
<th>GPU</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Cache, local memory</td>
<td>多</td>
<td></td>
<td>低延时</td>
</tr>
<tr>
<td>Threads(线程数)</td>
<td></td>
<td>多</td>
<td></td>
</tr>
<tr>
<td>Registers</td>
<td></td>
<td>多</td>
<td>多寄存器可以支持非常多的Thread,thread需要用到register,thread数目大，register也必须得跟着很大才行。</td>
</tr>
<tr>
<td>SIMD Unit</td>
<td></td>
<td>多</td>
<td>单指令多数据流,以同步方式，在同一时间内执行同一条指令</td>
</tr>
</tbody></table>
<h2 id="DRAM-vs-GDRAM"><a href="#DRAM-vs-GDRAM" class="headerlink" title="DRAM vs GDRAM"></a>DRAM vs GDRAM</h2><p>其实最早用在显卡上的DDR颗粒与用在内存上的DDR颗粒仍然是一样的。后来由于GPU特殊的需要，显存颗粒与内存颗粒开始分道扬镳，这其中包括了几方面的因素：</p>
<ol>
<li><strong>GPU需要比CPU更高的带宽</strong> GPU不像CPU那样有大容量二三级缓存，GPU与显存之间的数据交换远比CPU频繁，而且大多都是突发性的数据流，因此GPU比CPU更加渴望得到更高的显存带宽支持。<strong>位宽×频率&#x3D;带宽</strong>，因此提高带宽的方法就是增加位宽和提高频率，但GPU对于位宽和频率的需求还有其它的因素。</li>
<li><strong>显卡需要高位宽的显存</strong>显卡PCB空间是有限的，在有限的空间内如何合理的安排显存颗粒，无论高中低端显卡都面临这个问题。从布线、成本、性能等多种角度来看，显存都需要达到更高的位宽。 3090是384位。而内存则没有那么多要求，多年来内存条都是64bit，所以单颗内存颗粒没必要设计成高位宽，只要提高容量就行了，所以位宽一直维持在4&#x2F;8bit。</li>
<li><strong>显卡能让显存达到更高的频率</strong>显存颗粒与GPU配套使用时，一般都经过专门的设计和优化，而不像内存那样有太多顾忌。GPU的显存控制器比CPU或北桥内存控制器性能优异，而且显卡PCB可以随意的进行优化，因此显存一般都能达到更高的频率。而内存受到内存PCB、主板走线、北桥CPU得诸多因素的限制很难冲击高频率。由此算来，显存与内存“分家”既是意料之外，又是情理之中的事情了。为了更好地满足显卡GPU的特殊要求，一些厂商(如三星等)推出了专门为图形系统设计的高速DDR显存，称为“Graphics Double Data Rate DRAM”，也就是我们现在常见的GDDR。</li>
</ol>
<h3 id="内存频率"><a href="#内存频率" class="headerlink" title="内存频率"></a>内存频率</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> dmidecode|grep -A16 <span class="string">&quot;Memory Device&quot;</span>|grep <span class="string">&quot;Speed&quot;</span></span><br><span class="line">   Speed: 2666 MT/s</span><br></pre></td></tr></table></figure>

<h3 id="显存等效频率"><a href="#显存等效频率" class="headerlink" title="显存等效频率"></a>显存等效频率</h3><p>因为显存可以在一个时钟周期内的上升沿和下降沿同时传送数据，所以显存的实际频率应该是标称频率的一半。</p>
<p>从GDDR5开始用两路传输，GDDR6采用四路传输(达到类似效果)。<br><img src="https://pic.shaojiemike.top/img/Inkedb3fb43166d224f4aca0be8097747b3559922d156_LI.jpg"></p>
<p><img src="https://pic.shaojiemike.top/img/image-20200909130334697.png"></p>
<p>GDDR6X的频率估计应该至少从16Gbps（GDDR6目前的极限）起跳，20Gbps为主，这样在同样的位宽下，带宽比目前常见的14Gbps GDDR6大一半。比如在常见的中高端显卡256bit～384位宽下能提供512GB&#x2F;s～768GB&#x2F;s的带宽。</p>
<p>RTX 3090的GDDR6X显存位宽384bit，等效频率19Gbps到21Gbps，带宽可达<code>912GB/s</code>到<code>1006GB/s</code>，达到T级。(384*19&#x2F;8&#x3D;912)</p>
<p>RTX 3090 加速频率 (GHz) 1.7,  基础频率 (GHz) 1.4</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">19/1.4 = 13.57</span><br><span class="line">21/1.7 = 12.35</span><br></pre></td></tr></table></figure>

<h3 id="消费者设备-GDDR6x-DDR4-的带宽对比"><a href="#消费者设备-GDDR6x-DDR4-的带宽对比" class="headerlink" title="消费者设备 GDDR6x DDR4 的带宽对比"></a>消费者设备 GDDR6x DDR4 的带宽对比</h3><ul>
<li>上一小节 RTX 3090 带宽在<code>912GB/s</code>到<code>1006GB/s</code> 附近</li>
<li>DRAM Types 一文里有分析，个人主机插满4条DDR4带宽” <code>3.2 Gbps * 64 bits * 2 / 8 = 51.2GB/s</code></li>
</ul>
<p>可见两者差了20倍左右。</p>
<h2 id="GPU-CPU-workload-preference"><a href="#GPU-CPU-workload-preference" class="headerlink" title="GPU &#x2F; CPU workload preference"></a>GPU &#x2F; CPU workload preference</h2><p>通过上面的例子，大致能知道： 需要高访存带宽和高并行度的SIMD的应用适合分配在GPU上。</p>
<h3 id="最佳并行线程数"><a href="#最佳并行线程数" class="headerlink" title="最佳并行线程数"></a>最佳并行线程数</h3><p>$$ 144 SM * 4 warpScheduler&#x2F;SM * 32 Threads&#x2F;warps &#x3D; 18432 $$</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/156171120?utm_source=wechat_session">https://zhuanlan.zhihu.com/p/156171120?utm_source=wechat_session</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/biglucky/p/4223565.html">https://www.cnblogs.com/biglucky/p/4223565.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/36825227/answer/69351247">https://www.zhihu.com/question/36825227/answer/69351247</a></p>
<p><a target="_blank" rel="noopener" href="https://baijiahao.baidu.com/s?id=1675253413370892973&amp;wfr=spider&amp;for=pc">https://baijiahao.baidu.com/s?id=1675253413370892973&amp;wfr=spider&amp;for=pc</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/62234511">https://zhuanlan.zhihu.com/p/62234511</a></p>
<p><a target="_blank" rel="noopener" href="https://kknews.cc/digital/x6v69xq.html">https://kknews.cc/digital/x6v69xq.html</a></p>
<p>[^1]: <a target="_blank" rel="noopener" href="http://202.38.64.11/~xuyun/GPU_Computing.pdf">并行计算课程-CUDA</a> 密码pa22</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-07-19T06:38:02.000Z" title="7/19/2021, 6:38:02 AM">2021-07-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-23T13:03:19.458Z" title="9/23/2024, 1:03:19 PM">2024-09-23</time></span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a></span><span class="level-item">3 minutes read (About 385 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/19/Work/Architecture/companySpecificDesign/ZEN2/">ZEN2</a></p><div class="content"><p><img src="https://pic.shaojiemike.top/PicGob204ebd4-1092-439b-ad41-d5059e3cf096.PNG"><br>Zen 2 使用所谓的 TAGE 分支预测器，它比其前身具有更深的分支历史。这通过比 Zen (+) 更大的分支目标缓冲区 (BTB) 得到增强，L1 BTB（512 个条目）增加了一倍，L2 BTB 几乎增加了一倍（现在为 7K）。随着 MOP 缓存增长到 4K，更大更好的主题仍在继续。这特别方便，因为没有处理器想要多次解码微操作。将它们解码一次并将它们放入大（r）缓存中可以加快速度并使处理器更高效。</p>
<p>有趣的是，在分析了大量应用程序及其数据集大小后，指令缓存实际上从 64KB 下降到 32KB，但关联性从 4 路增加到 8 路。原因是，根据 Mike Clark 的说法，这种减少几乎不会降低性能：无论如何，大多数数据集都需要超过 64KB。新的缓存还具有改进的预取和更好的利用率。</p>
<p>这一切意味着 Zen 2 的前端更高效——有助于 IPC——但确实以占用更多空间为代价。<br><img src="https://pic.shaojiemike.top/PicGo1489653b-73b4-4084-9b78-681bb80e76dc.PNG"></p>
<h2 id="Zen-2-微架构的简化图"><a href="#Zen-2-微架构的简化图" class="headerlink" title="Zen 2 微架构的简化图"></a>Zen 2 微架构的简化图</h2><p><img src="https://pic.shaojiemike.top/PicGo1920px-Zen2_Microarchitektur.png"></p>
<h2 id="单个核心"><a href="#单个核心" class="headerlink" title="单个核心"></a>单个核心</h2><p><img src="https://pic.shaojiemike.top/PicGo900px-zen_2_core_diagram.png"></p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://hexus.net/tech/news/cpu/131549-the-architecture-behind-amds-zen-2-ryzen-3000-cpus/">https://hexus.net/tech/news/cpu/131549-the-architecture-behind-amds-zen-2-ryzen-3000-cpus/</a></p>
<p><a target="_blank" rel="noopener" href="https://en.wikichip.org/wiki/amd/microarchitectures/zen_2">https://en.wikichip.org/wiki/amd/microarchitectures/zen_2</a></p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/categories/Architecture/page/3/">Previous</a></div><div class="pagination-next"><a href="/categories/Architecture/page/5/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/categories/Architecture/">1</a></li><li><a class="pagination-link" href="/categories/Architecture/page/2/">2</a></li><li><a class="pagination-link" href="/categories/Architecture/page/3/">3</a></li><li><a class="pagination-link is-current" href="/categories/Architecture/page/4/">4</a></li><li><a class="pagination-link" href="/categories/Architecture/page/5/">5</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">𝘊𝘰𝘮𝘱𝘶𝘵𝘦𝘳 𝘈𝘳𝘤𝘩𝘪𝘵𝘦𝘤𝘵𝘶𝘳𝘦 &amp; 𝘏𝘗𝘊</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">423</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">35</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">512</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">41</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/Camp/"><span class="level-start"><span class="level-item">Camp</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math/"><span class="level-start"><span class="level-item">Math</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile" href="/categories/ProjectRecord/"><span class="level-start"><span class="level-item">ProjectRecord</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Thinking/"><span class="level-start"><span class="level-item">Thinking</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">116</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/love/"><span class="level-start"><span class="level-item">love</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/programming/"><span class="level-start"><span class="level-item">programming</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">54</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-23T01:54:23.000Z">2024-09-23</time></p><p class="title"><a href="/2024/09/23/Work/Miscellaneous/ProjectRecord/24Q3-1-OptimizePTAWithThreadAffinity/">[DevLog]24Q3P1 - Optimize PTA With Thread Affinity</a></p><p class="categories"><a href="/categories/ProjectRecord/">ProjectRecord</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-22T09:19:48.000Z">2024-09-22</time></p><p class="title"><a href="/2024/09/22/Work/software/simulator/PC/VirtualBox/">VirtualBox</a></p><p class="categories"><a href="/categories/software/">software</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-13T07:08:55.000Z">2024-09-13</time></p><p class="title"><a href="/2024/09/13/Work/software/PC/macbook/">Macbook Config</a></p><p class="categories"><a href="/categories/software/">software</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-13T00:47:35.000Z">2024-09-13</time></p><p class="title"><a href="/2024/09/13/Work/Programming/2-languageGrammar/c/Types/">[C++ Basic] Types</a></p><p class="categories"><a href="/categories/toLearn/">toLearn</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-12T14:41:50.000Z">2024-09-12</time></p><p class="title"><a href="/2024/09/12/Work/Programming/2-languageGrammar/c/Class/">[C++ Basic] User-Defined Types: Class</a></p><p class="categories"><a href="/categories/Programming/">Programming</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/09/"><span class="level-start"><span class="level-item">September 2024</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/08/"><span class="level-start"><span class="level-item">August 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/07/"><span class="level-start"><span class="level-item">July 2024</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/06/"><span class="level-start"><span class="level-item">June 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/05/"><span class="level-start"><span class="level-item">May 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">April 2024</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">March 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">February 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/01/"><span class="level-start"><span class="level-item">January 2024</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">December 2023</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">November 2023</span></span><span class="level-end"><span class="level-item tag">33</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">October 2023</span></span><span class="level-end"><span class="level-item tag">56</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/09/"><span class="level-start"><span class="level-item">September 2023</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">August 2023</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">July 2023</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">June 2023</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">May 2023</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">April 2023</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">March 2023</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">February 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">January 2023</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">December 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/11/"><span class="level-start"><span class="level-item">November 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">October 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">September 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">August 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">July 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">May 2022</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">April 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">March 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">February 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">January 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">December 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">November 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">September 2021</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2024 Shaojie Tan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>