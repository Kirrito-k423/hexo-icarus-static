<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>Category: Tutorials - SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="SHAOJIE&#039;S BOOK"><meta property="og:url" content="http://icarus.shaojiemike.top/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://icarus.shaojiemike.top/img/og_image.png"><meta property="article:author" content="Shaojie Tan"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://icarus.shaojiemike.top/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top"},"headline":"SHAOJIE'S BOOK","image":["http://icarus.shaojiemike.top/img/og_image.png"],"author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.2.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">Categories</a></li><li class="is-active"><a href="#" aria-current="page">Tutorials</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-05-11T16:00:00.000Z" title="5/11/2023, 4:00:00 PM">2023-05-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-05-08T15:39:47.433Z" title="5/8/2024, 3:39:47 PM">2024-05-08</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">7 minutes read (About 1110 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/11/Work/software/linux/services/">Services Systemd Systemclt</a></p><div class="content"><h2 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h2><h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><p>历史上，Linux 的启动一直采用init进程。<br>下面的命令用来启动服务。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo /etc/init.d/apache2 start</span><br><span class="line"># 或者</span><br><span class="line">$ service apache2 start</span><br></pre></td></tr></table></figure>
<p>这种方法有两个缺点。</p>
<p>一是启动时间长。init进程是串行启动，只有前一个进程启动完，才会启动下一个进程。</p>
<p>二是启动脚本复杂。init进程只是执行启动脚本，不管其他事情。脚本需要自己处理各种情况，这往往使得脚本变得很长。</p>
<h3 id="Systemd"><a href="#Systemd" class="headerlink" title="Systemd"></a>Systemd</h3><p>Systemd 就是为了解决这些问题而诞生的。它的设计目标是，为系统的启动和管理提供一套完整的解决方案。</p>
<p>根据 Linux 惯例，字母d是守护进程（daemon）的缩写。 Systemd 这个名字的含义，就是它要守护整个系统。</p>
<p>使用了 Systemd，就不需要再用init了。Systemd 取代了initd，成为系统的第一个进程（PID 等于 1），其他进程都是它的子进程。</p>
<p>Systemd 的优点是功能强大，使用方便，缺点是体系庞大，非常复杂。事实上，现在还有很多人反对使用 Systemd，理由就是它过于复杂，与操作系统的其他部分强耦合，违反”keep simple, keep stupid”的Unix 哲学。<br><img src="https://pic.shaojiemike.top/img/20220628174222.png"></p>
<h3 id="systemctl"><a href="#systemctl" class="headerlink" title="systemctl"></a>systemctl</h3><p>systemctl是 Systemd 的主命令，用于管理系统。</p>
<p> systemctl - Control the systemd system and service manager</p>
<h3 id="systemctl常见命令"><a href="#systemctl常见命令" class="headerlink" title="systemctl常见命令"></a>systemctl常见命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">systemctl is-enabled servicename.service #查询服务是否开机启动</span><br><span class="line">systemctl enable *.service #开机运行服务</span><br><span class="line">systemctl disable *.service #取消开机运行</span><br><span class="line">systemctl start *.service #启动服务</span><br><span class="line">systemctl stop *.service #停止服务</span><br><span class="line">systemctl restart *.service #重启服务</span><br><span class="line">systemctl reload *.service #重新加载服务配置文件</span><br><span class="line">systemctl status *.service #查询服务运行状态</span><br><span class="line">systemctl --failed #显示启动失败的服务</span><br></pre></td></tr></table></figure>
<h3 id="systemctl命令实操"><a href="#systemctl命令实操" class="headerlink" title="systemctl命令实操"></a>systemctl命令实操</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 查看相关unit</span><br><span class="line">shaojiemike@tsjNas:~$ systemctl|grep wg</span><br><span class="line">  pkg-wg-quick@wg0.service</span><br><span class="line">       loaded active exited  WireGuard via wg-quick(8) for wg0</span><br><span class="line"></span><br><span class="line"># 查看已经启动的服务</span><br><span class="line">systemctl list-unit-files --state=enabled|grep wg</span><br><span class="line">pkg-wg-quick@.service                     enabled //由于我删除了wg0，所以.service前没wg0</span><br><span class="line"></span><br><span class="line"># 删除服务</span><br><span class="line">sh-4.4#  systemctl disable pkg-wg-quick@.service</span><br><span class="line">Removed symlink /etc/systemd/system/syno-low-priority-packages.target.wants/pkg-wg-quick@wg0.service.</span><br></pre></td></tr></table></figure>

<h3 id="开机启动原理"><a href="#开机启动原理" class="headerlink" title="开机启动原理"></a>开机启动原理</h3><p>Systemd 默认从目录<code>/etc/systemd/system/</code>读取配置文件。但是，里面存放的大部分文件都是符号链接，指向目录<code>/usr/lib/systemd/system/</code>，真正的配置文件存放在那个目录。</p>
<p><code>systemctl enable</code>命令用于在上面两个目录之间，建立符号链接关系。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; $ sudo systemctl enable clamd@scan.service</span><br><span class="line"># 等同于</span><br><span class="line">$ sudo ln -s &#x27;/usr/lib/systemd/system/clamd@scan.service&#x27; &#x27;/etc/systemd/system/multi-user.target.wants/clamd@scan.service&#x27;</span><br><span class="line">&gt; </span><br></pre></td></tr></table></figure>
<p>如果配置文件里面设置了开机启动，<code>systemctl enable</code>命令相当于激活开机启动。</p>
<p>与之对应的，<code>systemctl disable</code>命令用于在两个目录之间，撤销符号链接关系，相当于撤销开机启动。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; $ sudo systemctl disable clamd@scan.service</span><br><span class="line">&gt; </span><br></pre></td></tr></table></figure>
<p>配置文件的后缀名，就是该 Unit 的种类，比如<code>sshd.socket</code>。如果省略，Systemd 默认后缀名为<code>.service</code>，所以<code>sshd</code>会被理解成<code>sshd.service</code>。</p>
<h2 id="把程序设置systemctl服务-并开机启动"><a href="#把程序设置systemctl服务-并开机启动" class="headerlink" title="把程序设置systemctl服务,并开机启动"></a>把程序设置systemctl服务,并开机启动</h2><ol>
<li>Systemd 默认从目录<code>/etc/systemd/system/</code>读取配置文件。但是，里面存放的大部分文件都是符号链接，指向目录<code>/usr/lib/systemd/system/</code>，真正的配置文件存放在那个目录。</li>
<li>进入目录<code>/usr/lib/systemd/system</code>,修改<code>webhook.service</code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Webhook receiver for GitHub</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">ExecStart=/usr/local/bin/webhook</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nexus.service  #启动服务</span><br><span class="line">systemctl enable nexus.service #设置开机启动</span><br></pre></td></tr></table></figure>
<code>Loaded: loaded (/etc/systemd/system/webhook.service; enabled;</code>这个<code>enabled</code>就是开机启动的意思</li>
</ol>
<h2 id="查看服务的log"><a href="#查看服务的log" class="headerlink" title="查看服务的log"></a>查看服务的log</h2><p>journalctl - Query the systemd journal</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># root @ snode0 in /etc/systemd/system [17:57:48]</span><br><span class="line">$ journalctl -u webhook.service</span><br><span class="line">-- Logs begin at Mon 2022-06-06 15:54:50 CST, end at Tue 2022-06-28 17:57:50 CST. --</span><br><span class="line">Jun 28 17:30:53 snode0 systemd[1]: Started Webhook receiver for GitHub.</span><br></pre></td></tr></table></figure>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl reload webhook.service</span><br><span class="line">==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-units ===</span><br><span class="line">Authentication is required to reload &#x27;webhook.service&#x27;.</span><br><span class="line">Multiple identities can be used for authentication:</span><br><span class="line"> 1.  Jun Shi (shijun)</span><br><span class="line"> 2.  Shaojie Tan (shaojiemike)</span><br><span class="line">Choose identity to authenticate as (1-2): 2</span><br><span class="line">Password:</span><br><span class="line">==== AUTHENTICATION COMPLETE ===</span><br><span class="line">Failed to reload webhook.service: Job type reload is not applicable for unit webhook.service.</span><br></pre></td></tr></table></figure>
<p>Simple 类型不能reload</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40741855/article/details/104984071">https://blog.csdn.net/qq_40741855/article/details/104984071</a></p>
<p><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html">https://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-05-11T16:00:00.000Z" title="5/11/2023, 4:00:00 PM">2023-05-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-05-08T15:39:47.433Z" title="5/8/2024, 3:39:47 PM">2024-05-08</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">18 minutes read (About 2681 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/11/Work/software/perf/nvidiaNsight/">Nvidia Nsight</a></p><div class="content"><h2 id="Nsight-system-compute-Graph-的关系"><a href="#Nsight-system-compute-Graph-的关系" class="headerlink" title="Nsight system compute &amp; Graph 的关系"></a>Nsight system compute &amp; Graph 的关系</h2><p><img src="https://pic.shaojiemike.top/img/20220513195618.png"></p>
<h3 id="Nsight-Systems"><a href="#Nsight-Systems" class="headerlink" title="Nsight Systems"></a>Nsight Systems</h3><p>All developers should start with Nsight Systems to identify the largest optimization opportunities. Nsight Systems provides developers a <strong>system-wide visualization</strong> of an applications performance. Developers can optimize <strong>bottlenecks</strong> to scale efficiently across any number or size of CPUs and GPUs; from large servers to our smallest SoC. For <strong>further optimizations to compute kernels developers should use Nsight Compute</strong> or to further optimize a graphics workloads, use Nsight Graphics.</p>
<h3 id="Nsight-Compute"><a href="#Nsight-Compute" class="headerlink" title="Nsight Compute"></a>Nsight Compute</h3><p>Nsight Compute is an interactive <strong>kernel</strong> profiler for <strong>CUDA</strong> applications. It provides detailed performance metrics and API debugging via a user interface and command line tool. Nsight Compute also provides customizable and data-driven user interface and metric collection that can be extended with analysis scripts for post-processing results.</p>
<h3 id="Nsight-Graphics"><a href="#Nsight-Graphics" class="headerlink" title="Nsight Graphics"></a>Nsight Graphics</h3><p>Nsight Graphics is a standalone application for the debugging, profiling, and analysis of <strong>graphics applications</strong> on Microsoft Windows and Linux. It allows you to optimize the performance of your Direct3D 11, Direct3D 12, DirectX Raytracing 1.1, <strong>OpenGL</strong>, Vulkan, and KHR Vulkan <strong>Ray Tracing</strong> Extension based applications.</p>
<h2 id="Install-Nsight-local"><a href="#Install-Nsight-local" class="headerlink" title="Install Nsight local"></a>Install Nsight local</h2><ol>
<li>check the perf config To collect thread scheduling data and IP (instruction pointer) samples<ol>
<li><code>cat /proc/sys/kernel/perf_event_paranoid</code></li>
<li>如果大于2，临时改变 <code>sudo sh -c &#39;echo 2 &gt;/proc/sys/kernel/perf_event_paranoid&#39;</code>重启会重置</li>
<li>永久修改 <code>sudo sh -c &#39;echo kernel.perf_event_paranoid=2 &gt; /etc/sysctl.d/local.conf&#39;</code></li>
</ol>
</li>
<li><a target="_blank" rel="noopener" href="https://developer.nvidia.com/gameworksdownload#?dn=nsight-systems-2022-2">下载Nsight</a><ol>
<li>但是单独下载要会员</li>
<li>下载cuda toolkit,有集成</li>
</ol>
</li>
</ol>
<h2 id="Nsight-System"><a href="#Nsight-System" class="headerlink" title="Nsight System"></a>Nsight System</h2><h3 id="目标与功能"><a href="#目标与功能" class="headerlink" title="目标与功能"></a>目标与功能</h3><p>运行 <code>nsight-sys</code>，可以从整体上看GPU,CPU资源的使用情况，和分辨出热点函数和kernel，但是对于为什么是热点给不出具体分析。</p>
<h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p>勾选了CUDA-trace, GPU Metrics选项</p>
<p>??? tip “GPU Metrics 需要 sudo”</p>
<pre><code>否则会报错。一般情况下使用sudo能保证`0 error`

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GPU Metrics [0]: The user running Nsight Systems does not have permission to access NVIDIA GPU Performance Counters on the target device. For more details, please visit https://developer.nvidia.com/ERR_NVGPUCTRPERM</span><br><span class="line">  - API <span class="keyword">function</span>: NVPW_GPU_PeriodicSampler_GetCounterAvailability(&amp;params)</span><br><span class="line">  - Error code: 17</span><br><span class="line">  - Source <span class="keyword">function</span>: static std::vector&lt;unsigned char&gt; QuadDDaemon::EventSource::GpuMetricsBackend::Impl::CounterConfig::GetCounterAvailabilityImage(uint32_t)</span><br><span class="line">  - Source location: /dvs/p4/build/sw/devtools/Agora/Rel/DTC_F/QuadD/Target/quadd_d/quadd_d/jni/EventSource/GpuMetricsBackend.cpp:609</span><br></pre></td></tr></table></figure>
</code></pre>
<h3 id="Profile-速度"><a href="#Profile-速度" class="headerlink" title="Profile 速度"></a>Profile 速度</h3><p>大致2到3倍时间：默认采样率，单独运行52s, Nsight-sys模拟需要135s。</p>
<h3 id="HPC-APP-PCIE-GPU-DRAM-Bandwidth-Warp"><a href="#HPC-APP-PCIE-GPU-DRAM-Bandwidth-Warp" class="headerlink" title="HPC APP : PCIE, GPU DRAM Bandwidth, Warp"></a>HPC APP : PCIE, GPU DRAM Bandwidth, Warp</h3><p> GPU Metrics选项能看出 PCIE, GPU DRAM Bandwidth, Warp的使用情况。</p>
<p><img src="https://pic.shaojiemike.top/img/20220521143324.png"></p>
<h4 id="Compute-Warps-in-Flight"><a href="#Compute-Warps-in-Flight" class="headerlink" title="Compute Warps in Flight"></a>Compute Warps in Flight</h4><p>将鼠标放在上面会有<strong>具体</strong>的数值或者名称的解释，(正在使用的Warps)</p>
<p><img src="https://pic.shaojiemike.top/img/20220521143753.png"><br><img src="https://pic.shaojiemike.top/img/20220521144435.png"></p>
<h4 id="Unallocated-Warps-in-Active-SMs"><a href="#Unallocated-Warps-in-Active-SMs" class="headerlink" title="Unallocated Warps in Active SMs"></a>Unallocated Warps in Active SMs</h4><ul>
<li><strong>Definition:</strong> This metric represents the number of warps that are not actively executing but are assigned to an active Streaming Multiprocessor (SM).</li>
<li><strong>Interpretation:</strong> In CUDA, SMs are the fundamental processing units on the GPU. Each SM can execute multiple warps concurrently. “Unallocated Warps in Active SMs” indicates the number of warps that are ready to be scheduled on an SM but are currently waiting due to resource contention or other factors. <strong>A high number</strong> may suggest that there is room for additional work but available resources are <strong>not fully utilized</strong>.</li>
</ul>
<h4 id="NVTX"><a href="#NVTX" class="headerlink" title="NVTX"></a>NVTX</h4><p>由于没有根据kernel function区分，很难读。为此提供了NVTX来给代码打标签</p>
<p>??? note “The NVIDIA Tools Extension Library (NVTX)”</p>
<pre><code>使用NVTX可以在C代码里插入标记，使得Nvsight能有效监控区域代码。

头文件：[^1]

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;nvToolsExt.h&gt;</span></span></span><br></pre></td></tr></table></figure>

需要标记代码前后加入：

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nvtxRangePush(<span class="string">&quot;checkResult&quot;</span>); <span class="comment">//nvtxRangePushA,nvtxRangePushW,nvtxRangePushEx 好像都差不多</span></span><br><span class="line">checkResult&lt;&lt;&lt;dim3(row_num / TPBX, col_num / TPBY, <span class="number">1</span>), dim3(TPBX, TPBY, <span class="number">1</span>)&gt;&gt;&gt;(row_num, col_num, result);</span><br><span class="line">cudaDeviceSynchronize(); </span><br><span class="line">nvtxRangePop();</span><br></pre></td></tr></table></figure>

注意NVTX是作用在**CPU线程**上的，无法在GPU里用。

注意需要 `g++ -o testnv -I/usr/local/cuda/include -L/usr/local/cuda/lib64 -lnvToolsExt testnv.cpp`。或者修改cmake来实现同样的效果

NVTX问题：怎么不在同一竖直方向上？GPU还先跑是什么情况[^2]

![](https://pic.shaojiemike.top/img/20220521153540.png)
</code></pre>
<h3 id="AI-APP-Stable-Diffusion-XL"><a href="#AI-APP-Stable-Diffusion-XL" class="headerlink" title="AI APP: Stable Diffusion XL"></a>AI APP: Stable Diffusion XL</h3><p><img src="https://pic.shaojiemike.top/shaojiemike/2023/12/1a1f45bbc4293f22a0b26305dc74c220.png"></p>
<p>具体分析见 Deploy Stable Diffusion to A100</p>
<h2 id="Nsight-Compute-1"><a href="#Nsight-Compute-1" class="headerlink" title="Nsight Compute"></a>Nsight Compute</h2><ul>
<li>Nsight Systems 就是nvprof的继任者，NVIDIA最新的用于监测 kernel timeline的工具。</li>
<li>NVIDIA 计算能力7.5及以上的GPU设备(从A100开始)不再支持nvprof工具进行性能剖析，提示使用Nsight Compute作为替代品.</li>
</ul>
<h3 id="目标与功能-1"><a href="#目标与功能-1" class="headerlink" title="目标与功能"></a>目标与功能</h3><p>默认kernel模式，会根据 function的调度关系，将程序划分为kernel</p>
<ol>
<li>Summary： 给出in-order执行的每个kernel的参数，时间，资源占用(寄存器，计算访存单元)信息。<ol>
<li>Detail: 对于<strong>被选择的kernel</strong>给出， NV的优化建议</li>
<li>Source：对于<strong>被选择的kernel</strong>给出， 给出源代码</li>
</ol>
</li>
</ol>
<h3 id="基本使用-1"><a href="#基本使用-1" class="headerlink" title="基本使用"></a>基本使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># recommand running under sudo</span></span><br><span class="line">ncu <span class="comment"># 命令行 Nsight Compute CLI(ncu)</span></span><br><span class="line">ncu-ui <span class="comment"># GUI</span></span><br></pre></td></tr></table></figure>

<h3 id="Profile速度"><a href="#Profile速度" class="headerlink" title="Profile速度"></a>Profile速度</h3><p>目测模拟时间慢百倍。</p>
<h3 id="使用Nsight-Compute-CLI-nv-nsight-cu-cli-ncu-输出数据"><a href="#使用Nsight-Compute-CLI-nv-nsight-cu-cli-ncu-输出数据" class="headerlink" title="使用Nsight Compute CLI (nv-nsight-cu-cli &#x2F; ncu) 输出数据"></a>使用Nsight Compute CLI (nv-nsight-cu-cli &#x2F; ncu) 输出数据</h3><p><code>nv-nsight-cu-cli -&gt; ncu</code></p>
<p>下面是一个使用样例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/NVIDIA-Nsight-Compute/nv-nsight-cu-cli -o mnist -f --csv --profile-from-start off /usr/bin/python3 mnist.py</span><br></pre></td></tr></table></figure>

<p>其中-o是为了输出.nsight-cuprof-report文件用于后续的可视化查看，-f为强制覆盖原有文件，–csv可是在console输出除 timeline 以外数据的时候以逗号分隔数据，方便拷贝至csv文件， –profile-from-start的使用方法和Nsight System以及nvprof一样。其余flag选项可见<a target="_blank" rel="noopener" href="https://docs.nvidia.com/nsight-compute/NsightComputeCli/index.html">文档</a>。</p>
<p>上面的例子会生成mnist.nsight-cuprof-report文件。</p>
<p>注意</p>
<p>最前面的可执行文件需要绝对路径，如上面的python3需要使用 &#x2F;usr&#x2F;bin&#x2F;python3。<br>生成过程中可能会产生很大的临时文件（几十G）。如果本次磁盘空间不够，可以设置如下环境变量来调整存储临时文件的地址。没有找到能直接使用 Nsight Compute 修改临时文件地址的方式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export /TMPDIR=/path/for/tmp</span><br></pre></td></tr></table></figure>

<h3 id="ncu与nvprof命令行抓取参数的映射表"><a href="#ncu与nvprof命令行抓取参数的映射表" class="headerlink" title="ncu与nvprof命令行抓取参数的映射表"></a>ncu与nvprof命令行抓取参数的映射表</h3><p><a target="_blank" rel="noopener" href="https://www.freesion.com/article/34871449930/">https://www.freesion.com/article/34871449930/</a></p>
<h3 id="ncu-ui教程"><a href="#ncu-ui教程" class="headerlink" title="ncu-ui教程"></a>ncu-ui教程</h3><p>为了显示原代码makefile添加 <code>-g -G</code>选项<br>对应CmakeList.txt</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">target_compile_options(better PUBLIC $&lt;$&lt;COMPILE_LANGUAGE:CUDA&gt;:--extended-lambda</span><br><span class="line">    -G -src-in-ptx</span><br><span class="line">    &gt;)</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yan31415/article/details/109491749">https://blog.csdn.net/yan31415/article/details/109491749</a></p>
<h3 id="ncu-ui表格-图"><a href="#ncu-ui表格-图" class="headerlink" title="ncu-ui表格&amp;图"></a>ncu-ui表格&amp;图</h3><p><img src="https://pic.shaojiemike.top/img/20220521160243.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220521161200.png"><br>我不明白我的SMEM怎么不是从DRAM来的， 而且峰值怎么这么低？</p>
<p>这个错误也是令人迷惑<br>The memory access pattern for loads from L1TEX to L2 is not optimal. The granularity of an L1TEX request to L2 is a 128 byte cache line. That is 4 consecutive 32-byte sectors per L2 request. However, this kernel only accesses an average of 3.7 sectors out of the possible 4 sectors per cache line. Check the Source Counters section for uncoalesced loads and try to minimize how many cache lines need to be accessed per memory request.</p>
<p><img src="https://pic.shaojiemike.top/img/20220521163326.png"></p>
<p>不知道为什么有1%和2% 的bank conflict</p>
<p>可以看到 SMEM， Register，Block Size是怎么影响GPU Warp的分配调度的。<br><img src="https://pic.shaojiemike.top/img/20220521163505.png"><br>上图没有拖累，吃满了64个warp。</p>
<p>关于if语句<br><img src="https://pic.shaojiemike.top/img/20220521163918.png"><br>if语句只要warp里执行相同就行。</p>
<p>可以提示出不连续访问的地方。(这里是这样设计的，已经避免了绝大部分的不连续访问)<br><img src="https://pic.shaojiemike.top/img/20220521164456.png"></p>
<p>显示stall最多的指令是什么以及在等待什么。还有执行最多的指令<br><img src="https://pic.shaojiemike.top/img/20220521164627.png"></p>
<p>假如 file mismatched 手动选择文件就行<br><img src="https://pic.shaojiemike.top/img/20220521165836.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20220521170004.png"></p>
<p>stall的信息，感觉就这些有点用。(其中sb是scoreboard的意思)</p>
<h2 id="ncu-ui-分析汇编"><a href="#ncu-ui-分析汇编" class="headerlink" title="ncu-ui 分析汇编"></a>ncu-ui 分析汇编</h2><h3 id="PTX-SASS汇编说明"><a href="#PTX-SASS汇编说明" class="headerlink" title="PTX&amp;SASS汇编说明"></a>PTX&amp;SASS汇编说明</h3><p>有两种汇编</p>
<p>请看PTX SASS一文</p>
<h3 id="基本说明"><a href="#基本说明" class="headerlink" title="基本说明"></a>基本说明</h3><p><img src="https://pic.shaojiemike.top/img/20220522095802.png"></p>
<p>可以通过指令执行数或者采样率来得知，执行最多的指令。</p>
<p>鼠标悬停可以知道具体命令的含义</p>
<h3 id="Ex1-for循环头"><a href="#Ex1-for循环头" class="headerlink" title="Ex1: for循环头"></a>Ex1: for循环头</h3><p><img src="https://pic.shaojiemike.top/img/20220522101042.png"></p>
<h3 id="Ex2-for-loop-kernel"><a href="#Ex2-for-loop-kernel" class="headerlink" title="Ex2: for-loop kernel"></a>Ex2: for-loop kernel</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sdata[Regular_local_index]=arr_data[Regular_global_index];</span><br></pre></td></tr></table></figure>

<p>该从DRAM里读取到SMEM的指令对应的PTX和SASS代码<br><img src="https://pic.shaojiemike.top/img/20220522105005.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cvt.f32.u16 d, a;   // convert 16-bit unsigned to 32-bit float</span><br></pre></td></tr></table></figure>

<h3 id="问题：无效self-mov？"><a href="#问题：无效self-mov？" class="headerlink" title="问题：无效self-mov？"></a>问题：无效self-mov？</h3><p><img src="https://pic.shaojiemike.top/img/20220522101410.png"></p>
<p>为了隐藏延迟？</p>
<p>直接原因是PTX翻译成SASS。一条mov变多条了</p>
<p><img src="https://pic.shaojiemike.top/img/20220522103503.png"></p>
<h2 id="CUDA-Visual-Profiler"><a href="#CUDA-Visual-Profiler" class="headerlink" title="CUDA Visual Profiler"></a>CUDA Visual Profiler</h2><p>老一代debugger工具，逐渐被Nsight淘汰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvprof # 命令行,nsys 之前的名称叫做 nvprof</span><br><span class="line">nvvp</span><br></pre></td></tr></table></figure>

<p>在more里有建议</p>
<h3 id="nvprof捕获信息存储"><a href="#nvprof捕获信息存储" class="headerlink" title="nvprof捕获信息存储"></a>nvprof捕获信息存储</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nvprof --analysis-metrics -o  nbody-analysis.nvprof ./nbody --benchmark -numdevices=2 -i=1</span><br><span class="line"><span class="comment"># 下面输出 .qdrep 文件</span></span><br><span class="line">nsys profile --stats=<span class="literal">true</span> --force-overwrite=<span class="literal">true</span>  -o baseline-report ./single-thread-vector-add</span><br></pre></td></tr></table></figure>

<h2 id="CUDA-Visual-Profiler-问题"><a href="#CUDA-Visual-Profiler-问题" class="headerlink" title="CUDA Visual Profiler 问题"></a>CUDA Visual Profiler 问题</h2><p>??? failure “&#x3D;&#x3D;7196&#x3D;&#x3D; Warning: Some profiling data are not recorded. Make sure cudaProfilerStop() or cuProfilerStop() is called before application exit to flush profile data.”</p>
<pre><code>解决方法在程序末尾加cudaDeviceReset()或者cudaProfilerStop()
</code></pre>
<h2 id="Nsight-Compute-问题"><a href="#Nsight-Compute-问题" class="headerlink" title="Nsight Compute 问题"></a>Nsight Compute 问题</h2><h3 id="OpenGL-没有安装"><a href="#OpenGL-没有安装" class="headerlink" title="OpenGL 没有安装"></a>OpenGL 没有安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Warning: Failed to get OpenGL version. OpenGL version 2.0 or higher is required.</span><br><span class="line">OpenGL version is too low (0). Falling back to Mesa software rendering.</span><br><span class="line">qt.qpa.plugin: Could not load the Qt platform plugin <span class="string">&quot;xcb&quot;</span> <span class="keyword">in</span> <span class="string">&quot;&quot;</span> even though it was found.</span><br><span class="line">This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.</span><br><span class="line"></span><br><span class="line">Available platform plugins are: offscreen, wayland-egl, wayland, wayland-xcomposite-egl, wayland-xcomposite-glx, xcb.</span><br></pre></td></tr></table></figure>

<p>解决办法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libxcb-xinerama0</span><br><span class="line">sudo apt install libxcb-icccm4 libxcb-image0 libxcb-keysyms1 libxcb-render-util0</span><br></pre></td></tr></table></figure>

<h3 id="Qt插件缺失"><a href="#Qt插件缺失" class="headerlink" title="Qt插件缺失"></a>Qt插件缺失</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">qt.qpa.plugin: Could not load the Qt platform plugin &quot;xcb&quot; in &quot;&quot; even though it was found.</span><br><span class="line">This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.</span><br><span class="line"></span><br><span class="line">Available platform plugins are: xcb.</span><br><span class="line"></span><br><span class="line">Application could not be initialized!</span><br><span class="line">    This is likely due to missing Qt platform dependencies.</span><br><span class="line">    For a list of dependencies, please refer to https://doc.qt.io/qt-5/linux-requirements.html</span><br><span class="line">    To view missing libraries, set QT_DEBUG_PLUGINS=1 and re-run the application.</span><br></pre></td></tr></table></figure>

<p>按照说明 <code>export QT_DEBUG_PLUGINS=1</code>再次运行, 显示具体问题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cannot load library /staff/shaojiemike/Install/cuda_11.7.0_515.43.04_linux/nsight-compute-2022.2.0/host/linux-desktop-glibc_2_11_3-x64/Plugins/platforms/libqxcb.so: (libxcb-xinput.so.0: cannot open shared object file: No such file or directory)</span><br></pre></td></tr></table></figure>

<p>解决 <code>sudo apt-get install libxcb-xinput0</code></p>
<h3 id="kernel没权限profile"><a href="#kernel没权限profile" class="headerlink" title="kernel没权限profile"></a>kernel没权限profile</h3><p><code>ERR_NVGPUCTRPERM - The user does not have permission to profile on the target device</code></p>
<p>要用sudo，或者最新的NV</p>
<h3 id="could-not-connect-to-display-localhost-10-0-under-sudo"><a href="#could-not-connect-to-display-localhost-10-0-under-sudo" class="headerlink" title="could not connect to display localhost:10.0 under sudo"></a>could not connect to display localhost:10.0 <strong>under sudo</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sudo ncu-ui</span><br><span class="line">MobaXterm X11 proxy: Authorisation not recognised</span><br><span class="line">qt.qpa.xcb: could not connect to display localhost:10.0</span><br><span class="line"></span><br><span class="line">MobaXterm X11 proxy: Unsupported authorisation protocol</span><br><span class="line">Error: Can<span class="string">&#x27;t open display: localhost:10.0</span></span><br></pre></td></tr></table></figure>

<p>解决办法(原因是sudo相当于切换到root用户，丢失了xauth信息)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ xauth list</span><br><span class="line">snode0/unix:12  MIT-MAGIC-COOKIE-1  84941f1f8be97d19436356685f75b884</span><br><span class="line">snode0/unix:13  MIT-MAGIC-COOKIE-1  5172ee2c7364b055cd37538b460f7741</span><br><span class="line">snode0/unix:11  MIT-MAGIC-COOKIE-1  589f3b5ab852f24ca3710c53e6439260</span><br><span class="line">hades1/unix:10  MIT-MAGIC-COOKIE-1  9346adec202bd65250f3d21239025750</span><br><span class="line">snode0/unix:10  MIT-MAGIC-COOKIE-1  52285c563f1688741fa1b434ed2b7b2c</span><br><span class="line"></span><br><span class="line">sudo -s <span class="comment"># 切换</span></span><br><span class="line">xauth add snode0/unix:10  MIT-MAGIC-COOKIE-1  52285c563f1688741fa1b434ed2b7b2c <span class="comment"># 补全xauth</span></span><br><span class="line"><span class="comment"># 正常执行 xauth有用的总是最后一个</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic.shaojiemike.top/img/20220606170556.png"></p>
<h3 id="GPU-Metrics-0-Sampling-buffer-overflow"><a href="#GPU-Metrics-0-Sampling-buffer-overflow" class="headerlink" title="GPU Metrics [0]: Sampling buffer overflow."></a>GPU Metrics [0]: Sampling buffer overflow.</h3><ol>
<li>只勾选CUDA Metrics 和 GPU Metrics</li>
<li>降低采样频率</li>
</ol>
<h3 id="Error-0-UnsupportedGpu"><a href="#Error-0-UnsupportedGpu" class="headerlink" title="Error 0: UnsupportedGpu"></a>Error 0: UnsupportedGpu</h3><p>原因是 <a target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/nsight-unsupported-gpu/163617">软件对GPU的支持是逐步</a>的需要安装最新的。</p>
<p>不支持的Nsight的可以尝试老的debugger工具 CUDA Visual Profiler</p>
<h3 id="Error-Profiling-is-not-supported-on-this-device"><a href="#Error-Profiling-is-not-supported-on-this-device" class="headerlink" title="Error: Profiling is not supported on this device"></a>Error: Profiling is not supported on this device</h3><p>Pascal support was deprecated, then dropped from Nsight Compute after Nsight Compute 2019.5.1.</p>
<p>The profiling tools that support Pascal in the CUDA Toolkit 11.1 and later are <code>nvprof</code> and <code>visual profiler</code>.</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>NVTX问题</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/tools-overview">https://developer.nvidia.com/tools-overview</a></p>
<p><a target="_blank" rel="noopener" href="https://www.365seal.com/y/zyn1yxJQn3.html">https://www.365seal.com/y/zyn1yxJQn3.html</a></p>
<p>[^1]: <a target="_blank" rel="noopener" href="https://docs.nvidia.com/nsight-visual-studio-edition/2020.1/nvtx/index.html">Usage of NVTX</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-05-10T16:00:00.000Z" title="5/10/2023, 4:00:00 PM">2023-05-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-05-08T15:39:47.393Z" title="5/8/2024, 3:39:47 PM">2024-05-08</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">3 minutes read (About 484 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/10/OutOfWork/5-VideoEntertainment/5-tmm/">TinyMediaManager</a></p><div class="content"><h2 id="docker-compose-in-Portainer"><a href="#docker-compose-in-Portainer" class="headerlink" title="docker-compose in Portainer"></a>docker-compose in Portainer</h2><p>使用<a target="_blank" rel="noopener" href="https://github.com/romancin/tinymediamanager-docker/blob/master/docker-compose.yaml">github的版本</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">tinymediamanager_service:</span><br><span class="line">    image: romancin/tinymediamanager:latest</span><br><span class="line">    container_name: tinymediamanager</span><br><span class="line">    ports:</span><br><span class="line">      - 5803:5800</span><br><span class="line">    environment:</span><br><span class="line">      - USER_ID=0</span><br><span class="line">      - GROUP_ID=0</span><br><span class="line">      - PASSWORD=acsa1411</span><br><span class="line">      - TZ=Europe/Madrid</span><br><span class="line">      - VNC_PASSWORD=password <span class="comment">#建议去除</span></span><br><span class="line">    volumes:</span><br><span class="line">      - /bt:/bt</span><br><span class="line">      - /share/Container/tinymediamanager:/config:rw</span><br><span class="line">      - /share/Container/tinymediamanager/media:/media:rw</span><br></pre></td></tr></table></figure>
<p>VNC 网页默认密码 <code>password</code></p>
<h3 id="口口字体问题"><a href="#口口字体问题" class="headerlink" title="口口字体问题"></a>口口字体问题</h3><p>进入容器内bash，安装字体</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it  tinymediamanager bash</span><br><span class="line">wget https://mirrors.aliyun.com/alpine/edge/testing/x86_64/font-wqy-zenhei-0.9.45-r2.apk</span><br><span class="line">apk add --allow-untrusted font-wqy-zenhei-0.9.45-r2.apk</span><br><span class="line"><span class="comment">#  fc-list 查看字体</span></span><br></pre></td></tr></table></figure>
<p>然后先将字体改成最后几个， 然后再改语言。</p>
<p>然后restart容器。注意不是重启stack（会删除容器，重启创建</p>
<h2 id="tmm-on-Windows"><a href="#tmm-on-Windows" class="headerlink" title="tmm on Windows"></a>tmm on Windows</h2><p>利用网络挂载文件夹，用<a target="_blank" rel="noopener" href="https://www.tinymediamanager.org/download/">tMM软件</a>刮削.</p>
<p>要注意<strong>动漫</strong>属于<strong>电视剧</strong></p>
<h3 id="多季度动漫管理"><a href="#多季度动漫管理" class="headerlink" title="多季度动漫管理"></a>多季度动漫管理</h3><p><img src="https://pic.shaojiemike.top/img/20221127083143.png"></p>
<p>基础命名规则如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">剧集英文名 （上映年份）/这是文件夹</span><br><span class="line">---Specials /这是文件夹，存放OVA，特典，剧场版之类</span><br><span class="line">------剧集英文名 S00E01.mp4</span><br><span class="line">------剧集英文名 S00E02.mp4</span><br><span class="line">------......</span><br><span class="line">---Season 01 /这是文件夹，有几季就建几个文件夹</span><br><span class="line">------剧集英文名 S01E01.mp4</span><br><span class="line">------剧集英文名 S01E01.mp4</span><br><span class="line">------......</span><br><span class="line">---Season 02 /同上</span><br><span class="line">------剧集英文名 S02E01.mp4</span><br><span class="line">------剧集英文名 S02E02.mp4</span><br><span class="line">------......</span><br></pre></td></tr></table></figure>
<p>其中Specials里，视频文件后的S00表示这是“特典”，后面的E01代表“第几个特典”。</p>
<p>请根据<a target="_blank" rel="noopener" href="https://thetvdb.com/">TheTVDB</a>里的数据确定你的ova视频的编号。</p>
<p><img src="https://pic.shaojiemike.top/img/20221127083534.png"></p>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p><img src="https://pic.shaojiemike.top/img/20221126163953.png"></p>
<p>在<a target="_blank" rel="noopener" href="https://dnschecker.org/#A/api.themoviedb.org">DNS索引网站</a>查看域名的中国服务器IP地址</p>
<p>实际ping速度，修改win10的hosts文件在<code>C:\WINDOWS\system32\drivers\etc</code></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv18956570/">https://www.bilibili.com/read/cv18956570/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-05-10T16:00:00.000Z" title="5/10/2023, 4:00:00 PM">2023-05-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-05-08T15:39:47.433Z" title="5/8/2024, 3:39:47 PM">2024-05-08</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">21 minutes read (About 3183 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/10/Work/software/manager/docker/">Docker</a></p><div class="content"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>基于 Go 语言 并遵从 Apache2.0 协议开源。Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上。</p>
<h3 id="structure"><a href="#structure" class="headerlink" title="structure"></a>structure</h3><p><img src="https://pic.shaojiemike.top/img/20220306200924.png"></p>
<h3 id="Docker-vs-VMWare"><a href="#Docker-vs-VMWare" class="headerlink" title="Docker vs VMWare"></a>Docker vs VMWare</h3><p>相对于传统虚拟机，Docker 没有硬件虚拟化&#x2F;hypervisor，可以运行在物理机、虚拟机, 甚至嵌套运行在 Docker 容器内，并且其不携带操作系统的，会轻巧很多。而且调用资源时利用 <code>Docker Engine</code> 去调用宿主的的资源，这时候过程是虚拟内存-&gt;真正物理内存。</p>
<p><img src="https://assets-global.website-files.com/5efc3ccdb72aaa7480ec8179/5f03f585f55f79c8b17ae7d2_containers-blog.png" alt="Image title">{ align&#x3D;left }<img src="https://images.contentstack.io/v3/assets/blt300387d93dabf50e/bltb6200bc085503718/5e1f209a63d1b6503160c6d5/containers-vs-virtual-machines.jpg" alt="Image title2">{ align&#x3D;right }</p>
<h3 id="Potential-Linux-Kernel-Compatibility-Issues"><a href="#Potential-Linux-Kernel-Compatibility-Issues" class="headerlink" title="Potential Linux Kernel Compatibility Issues"></a>Potential Linux Kernel Compatibility Issues</h3><p>!!! question “ how docker run different ubuntu version <strong>Sharing the same running kernel</strong>? no SW conficts?”</p>
<pre><code> If your host kernel is &quot;**compatible enough**&quot; with the software in the container you want to run it will work; otherwise, it won&#39;t.[^1] So what does &quot;compatible enough&quot; mean? It depends on what requests the program makes of the kernel (system calls) and** what features it expects the kernel to support**. Some programs make requests that will break things; others don&#39;t. 
</code></pre>
<p>!!! example “Compatibility”</p>
<pre><code>on an Ubuntu 18.04 (kernel 4.19) or similar host:[^1]
  `docker run centos:7 bash` works fine.
  ` docker run centos:6 bash` fails with `exit code 139`, meaning it terminated with a segmentation violation signal; this is because the `4.19 kernel` doesn&#39;t support something that that build of bash tried to do.
  `docker run centos:6 ls` works fine because it&#39;s not making a request the kernel can&#39;t handle, as bash was.
  If you try `docker run centos:6 bash` on an older kernel, say 4.9 or earlier, you&#39;ll find it will work fine.
</code></pre>
<h2 id="Portainer-统一管理"><a href="#Portainer-统一管理" class="headerlink" title="Portainer 统一管理"></a>Portainer 统一管理</h2><ul>
<li>安装Portainer Community Edition (CE)而不是Portainer Business Edition (BE)</li>
<li><a target="_blank" rel="noopener" href="https://docs.portainer.io/start/install/server/docker/wsl">WSL的安装</a>和linux类似  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建 Portainer Server 将用于存储其数据库的卷</span></span><br><span class="line">docker volume create portainer_data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载并安装 Portainer Server 容器, 9000为WebUI端口， 8000 是可选的，仅当您计划将边缘计算功能与边缘代理一起使用时才需要。</span></span><br><span class="line">docker run -d -p 8000:8000 -p 9000:9000 --name portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v /portainer_data:/data portainer/portainer-ce:2.11.1</span><br></pre></td></tr></table></figure></li>
<li>Portainer里的docker部署: 建议使用 Stacks 下的 docker-compose 来进行</li>
</ul>
<p>!!! warning “端口映射”</p>
<pre><code>`2333:8000` 为 容器内部端口`8000`，宿主机端口为`2333`
</code></pre>
<p>!!! tip “远程WebUI访问”</p>
<pre><code>默认部署在 `http://localhost:9000`, 可以如下操作来部署 `http://222.195.72.218:9000/#!/home`

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># docker在服务器上时，可以关闭防火墙访问，也可以ssh代理到本地</span><br><span class="line">brainiac1# ufw status</span><br><span class="line">Status: inactive</span><br></pre></td></tr></table></figure>
</code></pre>
<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安裝 docker</span></span><br><span class="line">curl -sSL get.docker.com | sh</span><br><span class="line"><span class="comment"># 將目前使用者新增到 docker 群組內，需要重新登入才會生效</span></span><br><span class="line">sudo usermod -aG docker <span class="variable">$USER</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安裝 docker-compose</span></span><br><span class="line">sudo curl -L <span class="string">&quot;https://github.com/docker/compose/releases/download/<span class="subst">$(curl -sL https://api.github.com/repos/docker/compose/releases/latest | grep tag_name | cut -d&#x27;<span class="string">&quot;&#x27; -f 4)/docker-compose-<span class="subst">$(uname -s)</span>-<span class="subst">$(uname -m)</span>&quot;</span> -o /usr/local/bin/docker-compose</span></span></span><br><span class="line"><span class="subst"><span class="string">sudo chmod +x /usr/local/bin/docker-compose</span></span></span><br></pre></td></tr></table></figure>

<h2 id="Relationship"><a href="#Relationship" class="headerlink" title="Relationship"></a>Relationship</h2><figure markdown>
  ![dockerTripleThing](https://www.markbuckler.com/img/docker_high_level.png)
  <figcaption>Dockerfile & Image & Container</figcaption>
</figure>

<ul>
<li>Image like a static configed&#x2F;compiled software using dockerfile&#x2F;gcc. </li>
<li>And container is a running process that we can control.</li>
</ul>
<h2 id="Dockfile"><a href="#Dockfile" class="headerlink" title="Dockfile"></a>Dockfile</h2><p>First, <strong>write an installation script for all of your dependencies</strong>. This script is written with Docker specific syntax and is called a Dockerfile(1).<br>{ .annotate }</p>
<ol>
<li>A Dockerfile is a script used to <strong>create a Docker image</strong>, which is a lightweight, standalone, and executable package that includes everything needed to run a piece of software, including the code, runtime, system tools, system libraries, and settings.</li>
</ol>
<figure markdown>
  ![Building image using Dockerfile](https://iximiuz.com/you-need-containers-to-build-an-image/kdpv.png)
  <figcaption>Building image using Dockerfile</figcaption>
</figure>

<p>??? tip “Using dockerfile in portainer” </p>
<pre><code>`Images &gt; Build image`
</code></pre>
<p>??? example “Dockerfile”</p>
<pre><code>Here&#39;s a simple Dockerfile code snippet(**it&#39;s usually built on official base image**):

<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use an official base image</span></span><br><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">20.04</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set environment variables</span></span><br><span class="line"><span class="keyword">ENV</span> MY_ENV_VARIABLE my_value</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run commands to install packages and set up the environment</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="language-bash">    package1 \</span></span><br><span class="line"><span class="language-bash">    package2 \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">rm</span> -rf /var/lib/apt/lists/*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy files from your local machine to the container</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> local_directory /container_directory</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the working directory</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Expose a port</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define the command to run when the container starts</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;command_to_start_application&quot;</span>]</span></span><br></pre></td></tr></table></figure>

In this example, and more [options](https://docs.docker.com/engine/reference/builder/):

- `FROM` specifies the base image, in this case, Ubuntu 20.04.
- `ENV` sets an environment variable.
- `RUN` executes commands to install packages.
- `COPY` copies files from your local machine to the container.
- `WORKDIR` sets the working directory within the container.
- `EXPOSE` specifies that the container will listen on port 8080.
- `CMD` defines the command that will be executed when the container starts.
</code></pre>
<h2 id="cheat-sheet"><a href="#cheat-sheet" class="headerlink" title="cheat sheet"></a>cheat sheet</h2><p><img src="https://pic.shaojiemike.top/img/20220306200737.png"></p>
<h3 id="查看容器出错日志"><a href="#查看容器出错日志" class="headerlink" title="查看容器出错日志"></a>查看容器出错日志</h3><p>后接容器ID</p>
<p><code>docker logs --tail 1000  1fed0d4782cf</code></p>
<h2 id="docker-build"><a href="#docker-build" class="headerlink" title="docker build"></a>docker build</h2><p>Then, run these commands to build a Docker image of your environment by using <code>docker build</code>. </p>
<p>??? note “Dockfile Path”</p>
<pre><code>docker build 基本的格式为 `docker build [ 选项 ] 路径`，该命令将读取指定路径下(包括子目录)的 Dockerfile，并将该路径下所有内容发送给 Docker 服务端，由服务端来创建镜像。因此一般建议放置 Dockerfile 的目录为空目录。也可以通过 `.dockerignore` 文件(每一行添加一条匹配模式)来让 Docker 忽略路径下的目录和文件。
</code></pre>
<p>??? example “option”</p>
<pre><code>[option](https://docs.docker.com/engine/reference/commandline/build/#build-with-url) like

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker build -t myrepo/myapp /tmp/test1/</span><br><span class="line">$ docker build -t username/image_name:tag_name .</span><br></pre></td></tr></table></figure>
</code></pre>
<h3 id="docker-build-use-proxy"><a href="#docker-build-use-proxy" class="headerlink" title="docker build use proxy"></a>docker build use proxy</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker build --network=host\</span><br><span class="line">    --build-arg http_proxy=http://127.0.0.1:7890 \</span><br><span class="line">    --build-arg https_proxy=http://127.0.0.1:7890 \</span><br><span class="line">    --build-arg <span class="string">&quot;NO_PROXY=localhost,127.0.0.1,.example.com&quot;</span> \</span><br><span class="line">    -t ithemal:latest .</span><br></pre></td></tr></table></figure>

<p>You also can set the proxy in the Dockerfile.[^6]</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ENV</span> http_proxy <span class="string">&quot;http://127.0.0.1:7890&quot;</span></span><br><span class="line"><span class="keyword">ENV</span> https_proxy <span class="string">&quot;https://127.0.0.1:7890&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="docker-tag"><a href="#docker-tag" class="headerlink" title="docker tag"></a>docker tag</h3><p>镜像的完整 tag 不仅包含镜像名字, 还指明了镜像从哪里来, 要到哪里去, 就像一个 URL。可以通过 -t 选项指定镜像的标签信息，譬如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</span><br></pre></td></tr></table></figure>

<h2 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a>docker run</h2><p>Once successfully built, you can instantiate copies of this image as many times as you would like by using <code>docker run</code> to create Docker containers.</p>
<p><img src="https://pic.shaojiemike.top/shaojiemike/2023/12/37121d51f5b604f073984c590052c195.png" alt="Container Lifecycle">[^2] </p>
<p>??? example “option”</p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用镜像nginx:latest以交互模式启动一个容器,在容器内执行/bin/bash命令。</span></span><br><span class="line">$ docker run -it nginx:latest /bin/bash</span><br><span class="line"><span class="comment"># remove all stop container</span></span><br><span class="line">$ docker container prune</span><br></pre></td></tr></table></figure>

- `-i`: 以交互模式运行容器，通常与 `-t` 同时使用；
- `-t`: 为容器重新分配一个伪输入终端，通常与 `-i` 同时使用；
- `-d`: 后台运行容器，并返回容器ID；
- `-P`: 随机端口映射，容器内部端口随机映射到主机的端口
- `-p`: 指定端口映射，格式为：`主机(宿主)端口:容器端口`
- `--name=&quot;nginx-lb&quot;`: 为容器指定一个名称；
- `-e username=&quot;ritchie&quot;`: 设置环境变量；
</code></pre>
<h3 id="docker-Volumes"><a href="#docker-Volumes" class="headerlink" title="docker Volumes"></a>docker Volumes</h3><p><a target="_blank" rel="noopener" href="https://docs.docker.com/storage/volumes/">volumes</a> allow me to interact with data outside of the docker container. </p>
<p>??? question “Volumes is better than bind mounts”</p>
<pre><code>1. Volumes are easier to **back up or migrate** than bind mounts.
2. Volumes work on both Linux and Windows containers.
So [option](https://docs.docker.com/engine/reference/commandline/run/) `-v` is better than `--mount`
</code></pre>
<p>??? example “options”</p>
<pre><code><figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span><span class="language-bash"> \</span></span><br><span class="line"><span class="language-bash">-v &lt;path to datasets&gt;:/datasets \</span></span><br><span class="line"><span class="language-bash">-v &lt;path to approx-vision&gt;:/approx-vision \</span></span><br><span class="line"><span class="language-bash">-it mbuckler/approx-vision \</span></span><br><span class="line"><span class="language-bash">/bin/bash</span></span><br></pre></td></tr></table></figure>
</code></pre>
<h2 id="docker-push-pull"><a href="#docker-push-pull" class="headerlink" title="docker push&#x2F;pull"></a>docker push&#x2F;pull</h2><p>It is in these containers that you will run or develop your code. If you would like other people to be able to use your Docker image you can push to DockerHub (with <code>docker push</code>), and if you want to use someone else’s image you can pull from DockerHub (with <code>docker pull</code>).[^4]</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><h3 id="AllForOne"><a href="#AllForOne" class="headerlink" title="AllForOne"></a>AllForOne</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">docker_name=<span class="string">&quot;mihoyo-bbs&quot;</span></span><br><span class="line">docker stop <span class="variable">$&#123;docker_name&#125;</span></span><br><span class="line">docker <span class="built_in">rm</span> <span class="variable">$&#123;docker_name&#125;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[5;36mOrz 旧容器(镜像)已清理\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">time_now=$(<span class="built_in">date</span> <span class="string">&quot;+%m%d%H&quot;</span>)</span><br><span class="line">docker build -f dockerfile --tag <span class="variable">$&#123;docker_name&#125;</span>:<span class="string">&quot;<span class="variable">$&#123;time_now&#125;</span>&quot;</span> .</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[5;36mOrz 镜像重建完成\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">docker run -itd \</span><br><span class="line">	--name <span class="variable">$&#123;docker_name&#125;</span> \</span><br><span class="line">	--log-opt max-size=1m \</span><br><span class="line">	-v $(<span class="built_in">pwd</span>):/var/app \</span><br><span class="line">	<span class="variable">$&#123;docker_name&#125;</span>:<span class="string">&quot;<span class="variable">$&#123;time_now&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[5;36mOrz 镜像启动完成\033[0m&quot;</span></span><br><span class="line">docker ps -a <span class="comment">#顯示目前的 container 及狀態</span></span><br><span class="line">docker logs <span class="variable">$&#123;docker_name&#125;</span> -f <span class="comment"># -f, --follow         Follow log output</span></span><br></pre></td></tr></table></figure>

<h3 id="hackergame2020-的源码的dockerfile"><a href="#hackergame2020-的源码的dockerfile" class="headerlink" title="hackergame2020 的源码的dockerfile"></a>hackergame2020 的源码的dockerfile</h3><p><img src="https://pic.shaojiemike.top/img/20211024201741.png"></p>
<h2 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h2><p><a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-compose.html">Compose</a> 是用于定义和运行多容器 Docker 应用程序的工具。<strong>需要额外安装</strong>。通过 Compose，您可以使用 YML 文件来配置应用程序需要的所有服务。然后，使用一个命令，就可以从 YML 文件配置中创建并启动所有服务。</p>
<p>??? failure “十分不建议使用<code>docker-compose</code>命令”</p>
<pre><code>使用`root`用户执行`docker-compose up -d`，不然会有文件权限问题。各种问题，软件版本问题等，十分折磨。
</code></pre>
<p>??? example “compose file”</p>
<pre><code><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mihoyo-bbs:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">darkatse/mihoyo-bbs</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CRON_SIGNIN=30</span> <span class="number">9</span> <span class="string">*</span> <span class="string">*</span> <span class="string">*</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MULTI=TRUE</span></span><br><span class="line">    <span class="attr">volumes:</span> <span class="comment"># 将主机的数据卷或着文件挂载到容器里。</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.:/var/app</span></span><br><span class="line">    <span class="attr">logging:</span> <span class="comment"># driver：指定服务容器的日志记录驱动程序，默认值为json-file</span></span><br><span class="line">      <span class="attr">driver:</span> <span class="string">&quot;json-file&quot;</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">max-size:</span> <span class="string">&quot;1m&quot;</span> <span class="comment"># 最多1m个文件,当达到文件限制上限，会自动删除旧得文件。</span></span><br></pre></td></tr></table></figure>

AutoMihoyoBBS[^5] 将上述 YAML 文件保存为 docker-compose.yml，然后在包含该文件的目录中运行以下命令：
</code></pre>
<p>??? example “deploy”</p>
<pre><code>`docker-compose logs -f`命令来查看程序输出。 `-f, --follow         Follow log output`

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker-compose up 命令来启动并运行整个应用程序。</span></span><br><span class="line"><span class="comment"># docker-compose down 可以将整个应用停止并删除相关资源。</span></span><br><span class="line">$ docker-compose up -d </span><br><span class="line"><span class="comment"># 在后台执行该服务可以加上 -d 参数</span></span><br><span class="line">Creating network <span class="string">&quot;automihoyobbs_default&quot;</span> with the default driver</span><br><span class="line">Pulling mihoyo-bbs (darkatse/mihoyo-bbs:)...</span><br><span class="line">latest: Pulling from darkatse/mihoyo-bbs</span><br><span class="line">df9b9388f04a: Pull complete</span><br><span class="line">a1ef3e6b7a02: Pull complete</span><br><span class="line">7a687728470e: Pull complete</span><br><span class="line">4ecf30de1710: Pull complete</span><br><span class="line">a1f99e431609: Pull complete</span><br><span class="line">7e9141a60a66: Pull complete</span><br><span class="line">7aa39aec04ec: Pull complete</span><br><span class="line">a75b4b3d5690: Pull complete</span><br><span class="line">dee0a6b07871: Pull complete</span><br><span class="line">abed80702fed: Pull complete</span><br><span class="line">Digest: sha256:10958801df87675c390a8cdcc153c2f87a41af92d35f9f2cf9b7758aa3e10d1b</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> darkatse/mihoyo-bbs:latest</span><br><span class="line">Creating automihoyobbs_mihoyo-bbs_1 ... <span class="keyword">done</span></span><br></pre></td></tr></table></figure>
</code></pre>
<h2 id="启动docker并通过xhost保持tmux连接"><a href="#启动docker并通过xhost保持tmux连接" class="headerlink" title="启动docker并通过xhost保持tmux连接"></a>启动docker并通过xhost保持tmux连接</h2><p><code>docker/docker_connect.sh</code> 或者 <a target="_blank" rel="noopener" href="https://blog.csdn.net/winter2121/article/details/118223637">https://blog.csdn.net/winter2121/article/details/118223637</a></p>
<p>What if I want to use X forwarding from within a Docker container?[^4]</p>
<h2 id="Docker-of-VNC"><a href="#Docker-of-VNC" class="headerlink" title="Docker of VNC"></a>Docker of VNC</h2><p>在Linux服务器上使用Docker运行图形化界面的应用程序。为了实现这一点，您需要使用一个特别配置的Docker镜像，该镜像支持图形用户界面(GUI)。这通常涉及到安装一个桌面环境和任何必要的图形驱动程序。</p>
<p>以下是实现这一目的的基本步骤：</p>
<ol>
<li><p><strong>选择一个合适的基础镜像</strong>：您可以从一个已经包含了桌面环境的基础镜像开始，例如Ubuntu或Fedora。</p>
</li>
<li><p><strong>安装图形界面</strong>：在Dockerfile中，您可以安装一个桌面环境，如GNOME、KDE或Xfce，以及任何其他必需的软件。</p>
</li>
<li><p><strong>配置X11或其他显示服务器</strong>：为了让图形界面能够显示，您需要配置X11或类似的显示服务器。这可能涉及到暴露和映射一些端口，以及安装和配置VNC服务器或其他远程桌面软件。</p>
</li>
<li><p><strong>运行容器并连接到图形界面</strong>：一旦容器运行起来，您需要通过VNC客户端或其他远程桌面工具连接到它。</p>
</li>
</ol>
<p>这里是一个示例的Dockerfile，用于创建一个带有图形界面的Ubuntu容器：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装必要的软件包</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="language-bash">    ubuntu-desktop \</span></span><br><span class="line"><span class="language-bash">    vnc4server \</span></span><br><span class="line"><span class="language-bash">    xterm</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置VNC服务器</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> /root/.vnc</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;your-password&quot;</span> | vncpasswd -f &gt; /root/.vnc/passwd</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> 600 /root/.vnc/passwd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置VNC启动脚本</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> vnc_startup.sh /root/vnc_startup.sh</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> +x /root/vnc_startup.sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 暴露VNC端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">5900</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;/root/vnc_startup.sh&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p>在这个Dockerfile中，<code>ubuntu-desktop</code>和<code>vnc4server</code>被安装，以便提供图形界面和VNC访问。您需要创建一个VNC启动脚本（<code>vnc_startup.sh</code>），以启动VNC服务器并运行桌面环境。</p>
<p>请注意，运行图形界面的容器通常比标准的、无GUI的容器更加资源密集，并且可能需要更多的存储空间和内存。此外，确保遵循最佳安全实践，特别是在暴露VNC或其他远程访问服务时。</p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Got-permission-denied-while-trying-to-connect-to-the-Docker-daemon-socket"><a href="#Got-permission-denied-while-trying-to-connect-to-the-Docker-daemon-socket" class="headerlink" title="Got permission denied while trying to connect to the Docker daemon socket"></a>Got permission denied while trying to connect to the Docker daemon socket</h3><ol>
<li>sudo 运行</li>
<li>加入docker用户组</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd docker     <span class="comment">#添加docker用户组</span></span><br><span class="line">sudo usermod -aG docker <span class="variable">$USER</span> <span class="comment">#将登陆用户加入到docker用户组中</span></span><br><span class="line">sudo gpasswd -a <span class="variable">$USER</span> docker    <span class="comment"># or</span></span><br><span class="line"><span class="built_in">groups</span> <span class="comment"># 重新登录查看是否生效</span></span><br><span class="line">newgrp docker     <span class="comment">#更新用户组</span></span><br><span class="line">docker ps    <span class="comment">#测试docker命令是否可以使用sudo正常使用</span></span><br></pre></td></tr></table></figure>

<h3 id="failed-to-create-endpoint-portainer-on-network-bridge-adding-interface-xxx-to-bridge-yyy-failed-Device-does-not-exist"><a href="#failed-to-create-endpoint-portainer-on-network-bridge-adding-interface-xxx-to-bridge-yyy-failed-Device-does-not-exist" class="headerlink" title="failed to create endpoint portainer on network bridge: adding interface xxx to bridge yyy failed: Device does not exist."></a>failed to create endpoint portainer on network bridge: adding interface <code>xxx</code> to bridge <code>yyy</code> failed: Device does not exist.</h3><p>??? failure “gpt’s solution” </p>
<pre><code>这个错误表明 Docker 在创建容器时遇到了问题，具体原因是无法将网络接口 `veth2c573cd` 添加到 Docker 网络桥 `docker0`，并且提示设备不存在。


查看 Docker 网络列表，确保相关的网络（可能是 `bridge`）存在：

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>

如果不存在，你可以尝试删除并重新创建：

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker network <span class="built_in">rm</span> yyy</span><br><span class="line">docker network create yyy</span><br></pre></td></tr></table></figure>

然后再次运行你的 Docker 容器。
</code></pre>
<h3 id="sudo-password-in-docker-image"><a href="#sudo-password-in-docker-image" class="headerlink" title="sudo password in docker image"></a>sudo password in docker image</h3><p>link <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/28721699/root-password-inside-a-docker-container">1</a> <a target="_blank" rel="noopener" href="https://www.zhangshengrong.com/p/AvN6YAOWam/">2</a> <a target="_blank" rel="noopener" href="https://blog.csdn.net/xzl9811wl/article/details/107060382">3</a></p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1395434">https://cloud.tencent.com/developer/article/1395434</a></p>
<p>[^1]: <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/32841982/how-can-docker-run-distros-with-different-kernels">How can Docker run distros with different kernels?</a></p>
<p>[^2]: <a target="_blank" rel="noopener" href="https://linuxhandbook.com/container-lifecycle-docker-commands/#what-are-docker-containers-again">Docker Commands for Managing Container Lifecycle (Definitive Guide)</a></p>
<p>[^4]: <a target="_blank" rel="noopener" href="https://www.markbuckler.com/post/docker-use/">Developing in Docker</a></p>
<p>[^6]: <a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1806455">https://cloud.tencent.com/developer/article/1806455</a> &amp; <a target="_blank" rel="noopener" href="http://www.debugself.com/2018/01/17/docker_network/">http://www.debugself.com/2018/01/17/docker_network/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-05-10T16:00:00.000Z" title="5/10/2023, 4:00:00 PM">2023-05-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-05-08T15:39:47.437Z" title="5/8/2024, 3:39:47 PM">2024-05-08</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">a few seconds read (About 50 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/10/Work/software/visualization/vue/">Vue</a></p><div class="content"><h2 id="vue-chart"><a href="#vue-chart" class="headerlink" title="vue-chart"></a>vue-chart</h2><p><a target="_blank" rel="noopener" href="https://stackblitz.com/edit/vue-echarts-vue-3?file=src/App.vue">https://stackblitz.com/edit/vue-echarts-vue-3?file=src%2FApp.vue</a></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-05-09T16:00:00.000Z" title="5/9/2023, 4:00:00 PM">2023-05-09</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-05-08T15:39:47.389Z" title="5/8/2024, 3:39:47 PM">2024-05-08</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">2 minutes read (About 275 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/09/OutOfWork/3-homepage/3-homepage/">Homepage great template</a></p><div class="content"><h2 id="个人网站的需求分析"><a href="#个人网站的需求分析" class="headerlink" title="个人网站的需求分析"></a>个人网站的需求分析</h2><h3 id="功能需求"><a href="#功能需求" class="headerlink" title="功能需求"></a>功能需求</h3><ol>
<li>博客的标签和分类是必须的</li>
<li>搜索功能、评论功能(Mkdocs <strong>内置搜索</strong>)</li>
<li><a target="_blank" rel="noopener" href="https://github.com/feathericons/feather#client-side-javascript">icon support</a> and <a target="_blank" rel="noopener" href="https://retrolog.io/blog/creating-a-hugo-theme-from-scratch/">usage</a></li>
</ol>
<h3 id="个人需求"><a href="#个人需求" class="headerlink" title="个人需求"></a>个人需求</h3><ol>
<li>少图片的冷淡风</li>
<li>但是要有彩色或者加粗等功能来体现文中的重要程度。(Mkdocs 的提示框真好用)</li>
</ol>
<h2 id="个人主页"><a href="#个人主页" class="headerlink" title="个人主页"></a>个人主页</h2><ol>
<li>基于<a target="_blank" rel="noopener" href="https://squidfunk.github.io/mkdocs-material/">Mkdocs</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ppoffice/hexo-theme-icarus">Hexo icarus</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/adityatelange/hugo-PaperMod/">Hugo PaperMod</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/blinkfox/hexo-theme-matery">Hexo matery</a></li>
</ol>
<p>??? example “mkdocs”</p>
<pre><code>  1. https://101.lug.ustc.edu.cn/
  2. https://docs.acsalab.com/
  3. https://jia.je/
</code></pre>
<h2 id="部署位置"><a href="#部署位置" class="headerlink" title="部署位置"></a>部署位置</h2><h3 id="cloudflare-pages"><a href="#cloudflare-pages" class="headerlink" title="cloudflare pages"></a>cloudflare pages</h3><ol>
<li>不同于之前的<a target="_blank" rel="noopener" href="https://findhao.net/easycoding/2609">教程</a>, 创建位置有所调整。<ol>
<li><code>Workers &amp; Pages</code> 下 <code>create an application</code>, choose the <code>Pages</code> tab and follow the git connection tutorial.</li>
<li>最大的优点是集成了github和mkdocs，可以直接运行<code>mkdocs build</code> 实现<a target="_blank" rel="noopener" href="https://shaojiemike.pages.dev/">部署</a>。</li>
</ol>
</li>
</ol>
<h3 id="GitHub-pages"><a href="#GitHub-pages" class="headerlink" title="GitHub pages"></a>GitHub pages</h3><p><a target="_blank" rel="noopener" href="https://kirrito-k423.github.io/">https://kirrito-k423.github.io/</a></p>
<h2 id="使用自己的域名"><a href="#使用自己的域名" class="headerlink" title="使用自己的域名"></a>使用自己的域名</h2><p>替换<code>shaojiemike.pages.dev</code> 变成自己的域名 <code>shaojiemike.top</code>: cloudflare pages 下直接提供<code>Custom domains</code> 的解析 <code>CNAME www shaojiemike.pages.dev</code></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-05-09T16:00:00.000Z" title="5/9/2023, 4:00:00 PM">2023-05-09</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-05-08T15:39:47.437Z" title="5/8/2024, 3:39:47 PM">2024-05-08</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">a minute read (About 204 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/09/Work/software/visualization/visualization-ranking/">Visualization Ranking</a></p><div class="content"><h2 id="Goal"><a href="#Goal" class="headerlink" title="Goal"></a>Goal</h2><p>横向条形图排序赛跑叫Bar chart race</p>
<h2 id="visualization-using-echart"><a href="#visualization-using-echart" class="headerlink" title="visualization using echart"></a>visualization using echart</h2><ol>
<li>完整的中文官方教程和丰富的插件和相关项目</li>
<li>可以支持vue</li>
<li>支持动态折线图和动态柱状图</li>
</ol>
<h2 id="visualization-using-d3-js"><a href="#visualization-using-d3-js" class="headerlink" title="visualization using d3.js"></a>visualization using d3.js</h2><p>参考<a target="_blank" rel="noopener" href="https://github.com/Jannchie/Historical-ranking-data-visualization-based-on-d3.js">项目</a></p>
<p>但是好像是静态的，而且只有一个排序的柱状图</p>
<h2 id="visualization-using-anichart"><a href="#visualization-using-anichart" class="headerlink" title="visualization using anichart"></a>visualization using anichart</h2><p>参考<a target="_blank" rel="noopener" href="https://anichart.vercel.app/guide/render-the-chart.html">文档</a>, 使用<a target="_blank" rel="noopener" href="https://github.com/Kirrito-k423/leetcode-ranking-visualization-anichart">template项目</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Kirrito-k423/leetcode-ranking-visualization-anichart.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># Install Dependencies</span></span><br><span class="line">npm install -g pnpm</span><br><span class="line">pnpm i</span><br><span class="line">pnpm build <span class="comment"># error</span></span><br></pre></td></tr></table></figure>

<p>由于项目还在开发，暂时不进一步尝试</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-04-30T00:17:14.000Z" title="4/30/2023, 12:17:14 AM">2023-04-30</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-05-08T15:39:47.413Z" title="5/8/2024, 3:39:47 PM">2024-05-08</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">5 minutes read (About 743 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/30/Work/Programming/1-env/c/gccOnWin10/">GccOnWin10</a></p><div class="content"><h2 id="路线"><a href="#路线" class="headerlink" title="路线"></a>路线</h2><h3 id="MinGW"><a href="#MinGW" class="headerlink" title="MinGW"></a>MinGW</h3><ul>
<li>MinGW（Minimalist GNU for Windows），又称mingw32，是将GCC编译器和GNU Binutils移植到Win32平台下的产物，包括一系列头文件（Win32API）、库和可执行文件。</li>
<li>另有可用于产生32位及64位Windows可执行文件的<code>MinGW-w64</code>项目，是从原本MinGW产生的分支。如今已经独立发展</li>
<li>安装gcc<ul>
<li>在<code>MinGW Installation Manager</code> 中 勾选<code> gcc/g++ make gdb</code> 等项<img src="https://pic.shaojiemike.top/img/20230430083219.png"></li>
<li>貌似只能安装在C盘（这很不好</li>
<li>但是如果安装的是便携版的<code>git bash</code>,就没有上述程序。</li>
</ul>
</li>
</ul>
<h3 id="MSYS2"><a href="#MSYS2" class="headerlink" title="MSYS2"></a>MSYS2</h3><ul>
<li>MSYS2是一组工具和库，为您构建、安装和运行本机Windows软件提供了一个易于使用的环境。</li>
<li>包括类似<ul>
<li>命令行终端mintty、bash、</li>
<li>git和Subversion 版本控制系统、</li>
<li>tar和awk 工具，</li>
<li>AutoTools 构建系统，</li>
</ul>
</li>
<li><code>Pacman</code>的包管理系统, 来提供包的轻松安装和保持更新的方式，Arch Linux用户应该很熟悉这个系统。<ul>
<li>强大的功能: 例如依赖项解析和简单的完整系统升级，以及直接和可重复的包构建</li>
<li>程序包库包含2800多个准备安装的预构建程序包。</li>
</ul>
</li>
<li>所有这些都是基于Cygwin的修改版本。尽管其中一些核心部分是基于Cygwin的，但MSYS2的主要关注点是为本地Windows软件提供一个build环境，并将使用Cygwin的部分保持在最低限度。</li>
<li>MSYS2为GCC、Mingw-W64、CPython、CMake、Meson、openssl、FFmpeg、Rust、Ruby等提供了最新的native builds。</li>
</ul>
<h2 id="Clang-and-GDB-using-MSYS2"><a href="#Clang-and-GDB-using-MSYS2" class="headerlink" title="Clang and GDB using MSYS2"></a>Clang and GDB using MSYS2</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.msys2.org/">MSYS2 Installation</a><ul>
<li>图形化界面自定义安装路径</li>
<li>打开<code>MSYS2 MSYS</code>安装软件<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更新包管理 输入Y继续</span></span><br><span class="line">pacman -Syu</span><br><span class="line"><span class="comment"># 安装 UCRT(Universal C Runtime)  版本的 clang gdb</span></span><br><span class="line">pacman -S --needed base-devel mingw-w64-ucrt-x86_64-clang mingw-w64-ucrt-x86_64-gdb</span><br></pre></td></tr></table></figure></li>
<li>VSCODE 添加到<code>MSYS2 MinGW UCRT 64-bit</code>终端的路径下。 CTRL+O  CTRL+X 保存退出<ul>
<li><pre><code class="bash">  cd ~
  nano .bashrc
  export PATH=$PATH:/e/commonSoftware/Microsoft\ VS\ Code/bin
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">	* 终端里`code .`就能打开</span><br><span class="line">  * 或者系统路径添加`E:\commonSoftware\msys32\ucrt64\bin` VSCODE 就能正常访问`g++`</span><br><span class="line"></span><br><span class="line">### 无法识别库</span><br><span class="line"></span><br><span class="line">存在红色波浪线， 插件`clangd`导致的</span><br><span class="line"></span><br><span class="line">### 无法点击头文件跳转</span><br><span class="line"></span><br><span class="line">* 激活跳转</span><br><span class="line">  * 安装`C/C++`插件</span><br><span class="line">* 设置`includePath`</span><br><span class="line">  * `Ctrl+Shift+P`输入`C/C++ 编辑配置`</span><br><span class="line">  * 添加`E:\\commonSoftware\\msys32\\ucrt64\\include`</span><br><span class="line"></span><br><span class="line">## 需求</span><br><span class="line"></span><br><span class="line">* 笔记本有g++, 台式机没有</span><br><span class="line">* vscode能顺利识别调用，并且gdb</span><br><span class="line">```bash</span><br><span class="line">D:\PowerShell&gt; which g++</span><br><span class="line">/c/Program Files/mingw-w64/x86_64-8.1.0-win32-seh-rt_v6-rev0/mingw64/bin/g++</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><ul>
<li>原本我从来不配置Windows的编译器的，直到服务器zfs挂壁了</li>
<li>看来还是要靠自己~</li>
</ul>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://solarianprogrammer.com/2021/06/11/install-clang-windows-msys2-mingw-w64/">https://solarianprogrammer.com/2021/06/11/install-clang-windows-msys2-mingw-w64/</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_51429482/article/details/125191731">https://blog.csdn.net/m0_51429482/article/details/125191731</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-04-17T16:00:00.000Z" title="4/17/2023, 4:00:00 PM">2023-04-17</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-05-08T15:39:47.385Z" title="5/8/2024, 3:39:47 PM">2024-05-08</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">12 minutes read (About 1757 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/17/OutOfWork/2-selfLearning/2-codeforces/">Codeforces &amp; Topcoder</a></p><div class="content"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>codeforces<ul>
<li>Codeforces 是一家为计算机编程爱好者提供的在线评测系统</li>
<li>该网站由俄罗斯 ITMO 大学（圣彼得堡国家信息技术、机械学与光学研究型大学）的一个团体创立并负责运营。</li>
<li>在编程挑战赛中，选手有 2 个小时的时间去解决 5 道题，通过得分排名，选手可以看到实时的排名(Standing)，也可以选择查看好友的排名，还可以看到某题有多少人通过等信息。</li>
<li>在 cf，所有的用户根据在以往比赛中的表现被赋予一个 Rating 并冠以不同的头衔，名字也会以不同的颜色显示,比如 Expert 是蓝色，Master 是黄色。</li>
<li>题目兼容并蓄，什么难度等级的题目都可以找到。<ul>
<li>并且题目很有意思，往往思维陷阱比较多，也就是思维题比较多。</li>
<li>对于数据结构以及算法的考察相对弱一些，更多的时候往往是告诉你用什么算法你也不知道怎么做。</li>
</ul>
</li>
</ul>
</li>
<li>topcoder<ul>
<li>TopCoder成立于2001年，它的客户包括Google、MS、YAHOO、Intel、 Motorola和SUN等世界上顶级的IT公司。每年TopCoder都会举办若干个编程竞赛和锦标赛，其总奖金金额高达几十万美元。她是你进入世界顶级的IT企业的捷径，TopCoder排名（程序设计，开发，算法）靠前的选手基本都成了知名公司追逐的对象。</li>
<li>积分：tc的每个用户(handle)都有自己的积分，从0-3000+不等。成绩越好，分数越高 。</li>
<li>积分与颜色的对应为：白色——未参赛（unrated）；灰色——0<del>899；绿色——900</del>1199；蓝色——1200<del>1499；黄色——1500</del>2199；红色——2200+。另外排名最高的几个人在TC客户端中会变成红色靶子图标。现在，全世界有300人达到红色等级，日本有26人。3000 分以上者被称为target，全世界有18人，日本有3人，分别是：iwi（秋叶拓哉）、wata （岩田阳一）和lvrically；</li>
</ul>
</li>
</ul>
<h3 id="topcoder-vs-codeforces"><a href="#topcoder-vs-codeforces" class="headerlink" title="topcoder vs codeforces"></a>topcoder vs codeforces</h3><p>Codeforces: Another good platform with nice contests where you will get to learn <strong>new things</strong> that will improve your understanding of <strong>concepts</strong>. It’s ratings don’t matter to recruiters but the things you’ll learn will help you during interviews and company’s coding tests.</p>
<p>TOPCODER: This caters to <strong>every aspect of software develpment</strong>. They have both designing and development contest. Major companies provide Topcoder community to experment with their nw products or APIs. But if you want to mention it in your CV, your ratings should be above 1400 to impress a recruiter.</p>
<p>for <strong>average</strong> is CODEFORCES, for <strong>expert</strong> TOPCODER</p>
<h2 id="竞赛说明"><a href="#竞赛说明" class="headerlink" title="竞赛说明"></a>竞赛说明</h2><h3 id="codeforces"><a href="#codeforces" class="headerlink" title="codeforces"></a>codeforces</h3><ul>
<li>比赛举办频率<ul>
<li>第一种是Codeforces Rounds（常规比赛） 大约一周一两次，时长2小时。常规赛分为三个赛区：Div3、Div2和Div1。题目难度Div3 &lt; Div2 &lt; Div1。</li>
<li>第二种是Educational Contests（教育性比赛） 大约每个月二到三次，时长2个小时。常规赛分为两个赛区：Div2和Div1。题目难度Div2 &lt; Div1。</li>
</ul>
</li>
<li>比赛一般是两个小时的赛程，一共六道题目。(20分钟一题)<ul>
<li>新手能做出3道，rating就不会跌。</li>
</ul>
</li>
<li>div 表示题目难度，数值越小难度越高，<ul>
<li>div 1 要求参赛者的 Rating 大于 1900 。div2 平均难度在 Rating 1500.</li>
</ul>
</li>
<li>Hack：当你通过某题目，可以查看同房间内其他通过该题的参赛者的代码。<ul>
<li>由于codeforces在比赛的时候只会测试一小部分数据，真正的测试集会放到赛后进行测试。所以在比赛中测试通过的代码，只是通过了小数据验证，很有可能有隐藏的问题没被发现。</li>
<li>如果发现了bug，可以构造一份数据hack掉他的提交。</li>
<li>hack 成功，你获得 100 分奖励，别人的提交会被打回；hack 失败，减 50 分作为惩罚。</li>
<li>一般后面题不会做的时候，又有时间的时候就去Hack</li>
</ul>
</li>
</ul>
<h3 id="topcoder"><a href="#topcoder" class="headerlink" title="topcoder"></a>topcoder</h3><ul>
<li>安装程序TopCoder Arena(竞技场，古罗马的斗兽场也是这个词)，<ul>
<li>TopCoder Arena是一个纯Java应用程序，它既是Applet也是应用程序，所以需要安装Java运行环境。</li>
<li>相关软件的网址ContestAppletProd.jnlp(Java Web Start 方式安装)</li>
</ul>
</li>
<li>规则<ul>
<li>75分钟做完3道难度递增的题。(25 mins per problem)</li>
<li>比赛分为两个division：Div I和Div II。<ul>
<li>积分<code>&lt;1200</code>或者<code>unrated</code>(即注册但还没参加过比赛的）参加Div II，<code>&gt;=1200</code>的参加Div I。</li>
<li>Div I的题要比Div II难许多。 一般DivII的最后一题和Div I的第一或第二题是一样的。</li>
<li>无论是Div I或Div II。三道题目的Score一般为250, 500和1000左右，视每次的难度略有浮动。</li>
</ul>
</li>
<li>个人积分 (rating)的增减是根据你和别人在比赛中的score以及你们原来的rating决定的。tc 的提交结合了ICPC和IOI的特点，即<strong>只能交一次</strong>，必须过所有数据并且得分与用时相关。tc每周有一次Single Round Match(SRM)，每年两次大的比赛TCOpen(有$)。<ul>
<li>评分是根据你完成的时间和所完成问题的难易决定的。</li>
</ul>
</li>
<li>比赛可分为三部分：Coding Phase, Challenge Phase和System Test Phase<ul>
<li>发送代码后，你就进入Challenge Phase了，Challenge Phase部分是让参赛者浏览分配在同一房间的其他参赛者的源代码,然后设法找出其中错误，并提出一个测试参数使其不能通过测试。如果某参赛者的程序不能通过别人或系统的测试，则该参赛者在此题目的得分将为0。</li>
<li>System Test Phase: 挑战结束后，TopCoder会测试每个参赛者的代码，如果你的代码产生了不正确的输出、异常终止和其它错误，你就不能得分。</li>
</ul>
</li>
<li>如果是多个回合比赛，每个小组中得分最高的三位参赛者将进入下一轮的比赛。他们将解决一些新的问题，最后总得分在前三名的选手将会得到现金奖励。</li>
</ul>
</li>
<li>参赛<a target="_blank" rel="noopener" href="https://blog.csdn.net/qiuzhenguang/article/details/5552122">具体操作</a>, <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/5089318b2e71">图文</a></li>
</ul>
<h2 id="other-platform"><a href="#other-platform" class="headerlink" title="other platform"></a>other platform</h2><p><a target="_blank" rel="noopener" href="https://www.reddit.com/r/cscareerquestions/comments/2myh04/topcoder_vs_codechef_vs_codeforces_vs_project/">codechef</a></p>
<h2 id="Actual-experience"><a href="#Actual-experience" class="headerlink" title="Actual experience"></a>Actual experience</h2><h3 id="codeforces-1"><a href="#codeforces-1" class="headerlink" title="codeforces"></a>codeforces</h3><ol>
<li>22:35PM - 01:05 AM</li>
</ol>
<h3 id="topcoder-1"><a href="#topcoder-1" class="headerlink" title="topcoder"></a>topcoder</h3><ol>
<li>Contest time infomation is <a target="_blank" rel="noopener" href="https://www.topcoder.com/community/arena">here.</a><ol>
<li>SRM 849 on September 28, 2023 at 11:00 AM - 1:00 PM EST(UTC-4). (00:00 AM - 2:00 AM UTC+8)</li>
</ol>
</li>
<li>hard to read due to the <a target="_blank" rel="noopener" href="https://codeforces.com/blog/entry/51206">tiny font</a>.<ol>
<li>maybe copy the problem to outside</li>
</ol>
</li>
</ol>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qiuzhenguang/article/details/5552122">https://blog.csdn.net/qiuzhenguang/article/details/5552122</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/540098105">https://zhuanlan.zhihu.com/p/540098105</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-04-16T16:00:00.000Z" title="4/16/2023, 4:00:00 PM">2023-04-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-05-08T15:39:47.417Z" title="5/8/2024, 3:39:47 PM">2024-05-08</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">7 minutes read (About 1026 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/16/Work/Programming/4-compile/construction%20tool/cmake/">cmake</a></p><div class="content"><!-- [<sup>2</sup>](#refer-anchor) -->

<h2 id="cmake简介"><a href="#cmake简介" class="headerlink" title="cmake简介"></a>cmake简介</h2><p>CMake是一个跨平台的安装(编译)工具,可以用简单的语句来描述所有平台的安装(编译过程)。他能够输出各种各样的makefile或者project文件,能测试编译器所支持的C++特性,类似UNIX下的automake。</p>
<h2 id="项目生成CMakeLists-txt"><a href="#项目生成CMakeLists-txt" class="headerlink" title="项目生成CMakeLists.txt"></a>项目生成CMakeLists.txt</h2><p><img src="https://pic.shaojiemike.top/img/20220401090136.png"></p>
<h2 id="查看cmake选项"><a href="#查看cmake选项" class="headerlink" title="查看cmake选项"></a>查看cmake选项</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/16851084/how-to-list-all-cmake-build-options-and-their-default-values">https://stackoverflow.com/questions/16851084/how-to-list-all-cmake-build-options-and-their-default-values</a></p>
<h3 id="打印详细编译信息"><a href="#打印详细编译信息" class="headerlink" title="打印详细编译信息"></a>打印详细编译信息</h3><ul>
<li>方法1:  执行命令cmake时追加：<code>-DCMAKE_VERBOSE_MAKEFILE=ON</code></li>
<li>方法2:  在CMakeLists.txt中添加：<code>set(CMAKE_VERBOSE_MAKEFILEON ON)</code></li>
<li>方法3:  make时追加： <code>VERBOSE=1</code></li>
</ul>
<h3 id="list-all-option-and-set-CACHE-cached-variables"><a href="#list-all-option-and-set-CACHE-cached-variables" class="headerlink" title="list all option( and set( CACHE (cached) variables"></a>list all option( and set( CACHE (cached) variables</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">cmake ..</span><br><span class="line">cmake -LA | awk &#x27;&#123;if(f)print&#125; /-- Cache values/&#123;f=1&#125;&#x27;</span><br><span class="line">cmake -LAH # adding -H to show more help information about each option</span><br></pre></td></tr></table></figure>

<h3 id="ccmake"><a href="#ccmake" class="headerlink" title="ccmake"></a>ccmake</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cmake-curses-gui</span><br><span class="line">ccmake ..</span><br></pre></td></tr></table></figure>

<h2 id="常用选项"><a href="#常用选项" class="headerlink" title="常用选项"></a>常用选项</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-S &lt;path-to-source&gt;          = Explicitly specify a source directory.CMakeLists.txt路径</span><br><span class="line">-B &lt;path-to-build&gt;           = Explicitly specify a build directory.</span><br><span class="line">-DCMAKE_BUILD_TYPE=Debug</span><br><span class="line">-DCMAKE_INSTALL_PREFIX=directory --- Specify for directory the full path name of where you want thetools and libraries to be installed (default /usr/local)</span><br></pre></td></tr></table></figure>

<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><h3 id="G"><a href="#G" class="headerlink" title="-G &lt;generator&gt;"></a>-G <code>&lt;generator&gt;</code></h3><p>基于不同平台的makefile生成方式</p>
<p>-G “Unix Makefiles”<br>-G “MinGW” 之类的</p>
<h2 id="CMakeList-txt基本语法"><a href="#CMakeList-txt基本语法" class="headerlink" title="CMakeList.txt基本语法"></a>CMakeList.txt基本语法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"># cmake required version</span><br><span class="line">cmake_minimum_required(VERSION 3.0.0)</span><br><span class="line"></span><br><span class="line"># more error message</span><br><span class="line">SET( CMAKE_VERBOSE_MAKEFILE on )</span><br><span class="line"></span><br><span class="line">#project name</span><br><span class="line">PROJECT(ipcc_test)</span><br><span class="line"></span><br><span class="line"># compile</span><br><span class="line">set(CMAKE_SYSTEM_NAME Linux)</span><br><span class="line">set(CMAKE_C_COMPILER gcc)</span><br><span class="line">set(CMAKE_CXX_COMPILER g++)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># flags</span><br><span class="line">set(CMAKE_C_FLAGS &quot;$&#123;CMAKE_C_FLAGS&#125; -g -O3  -pthread&quot;)</span><br><span class="line">set(CMAKE_CXX_FLAGS &quot;$&#123;CMAKE_CXX_FLAGS&#125; -g -O3  -pthread -fopenmp&quot;)</span><br><span class="line"></span><br><span class="line">#head file path</span><br><span class="line">INCLUDE_DIRECTORIES(include)</span><br><span class="line"></span><br><span class="line">#source directory</span><br><span class="line">AUX_SOURCE_DIRECTORY(src DIR_SRCS) # 搜集所有在指定路径下的源文件的文件名，将输出结果列表储存在指定的变量DIR_SRCS中</span><br><span class="line"></span><br><span class="line"># message</span><br><span class="line">message(STATUS &quot;PROJECT_SOURCE_DIR is $&#123;PROJECT_SOURCE_DIR&#125;&quot;)</span><br><span class="line">message(STATUS &quot;PROJECT_BINARY_DIR is $&#123;PROJECT_BINARY_DIR&#125;&quot;)</span><br><span class="line">message(STATUS &quot;CMAKE_CURRENT_SOURCE_DIR is $&#123;CMAKE_CURRENT_SOURCE_DIR&#125;&quot;)</span><br><span class="line"></span><br><span class="line">#output path</span><br><span class="line">set(EXECUTABLE_OUTPUT_PATH $&#123;PROJECT_BINARY_DIR&#125;/bin)</span><br><span class="line"></span><br><span class="line">#set environment variable</span><br><span class="line">SET(TEST $&#123;DIR_SRCS&#125;)  # 此处用于显示如何用环境变量对环境变量进行赋值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#add executable file</span><br><span class="line">ADD_EXECUTABLE(./bin/exe $&#123;TEST&#125;)</span><br></pre></td></tr></table></figure>

<p>add lib</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># add lib path</span><br><span class="line">link_directories($&#123;CMAKE_SOURCE_DIR&#125;/lib)</span><br><span class="line"></span><br><span class="line">add_executable(foo $&#123;FOO_SRCS&#125;)</span><br><span class="line">target_link_libraries(foo bar) # libbar.so is found in $&#123;CMAKE_SOURCE_DIR&#125;/lib</span><br><span class="line"></span><br><span class="line">#set extern libraries</span><br><span class="line">SET(LIBRARIES LIBRARIESlibm.so)</span><br><span class="line"></span><br><span class="line">#add link library</span><br><span class="line">TARGET_LINK_LIBRARIES(../bin/bin $&#123;LIBRARIES&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="目录下所有源文件编译成单独的可执行文件"><a href="#目录下所有源文件编译成单独的可执行文件" class="headerlink" title="目录下所有源文件编译成单独的可执行文件"></a>目录下所有源文件编译成单独的可执行文件</h2><p>实现头文件、执行文件、源代码都分开存储。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">file(GLOB files &quot;*/*.cpp&quot;)</span><br><span class="line">foreach (file $&#123;files&#125;)</span><br><span class="line">	message(STATUS &quot;file is $&#123;file&#125;&quot;)</span><br><span class="line">	string(REGEX REPLACE &quot;.+/(.+)\\..*&quot; &quot;\\1&quot; exe $&#123;file&#125;)</span><br><span class="line">	message(STATUS &quot;file name is $&#123;exe&#125;&quot;)</span><br><span class="line">	add_executable($&#123;exe&#125; $&#123;file&#125;)</span><br><span class="line">	TARGET_LINK_LIBRARIES($&#123;exe&#125; $&#123;CONAN_LIBS&#125;)</span><br><span class="line">endforeach ()</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string(REGEX REPLACE &lt;regular_expression&gt;</span><br><span class="line">       &lt;replacement_expression&gt; &lt;output_variable&gt;</span><br><span class="line">       &lt;input&gt; [&lt;input&gt;...])</span><br></pre></td></tr></table></figure>

<p>尽可能匹配 <code>&lt;regular_expression&gt;</code> 多次，并用 <code>&lt;replacement_expression&gt;</code> 替换输出中的匹配项。匹配之前将所有 <code>&lt;input&gt;</code> 参数连接在一起。</p>
<p>所述 <code>&lt;replacement_expression&gt;</code> 可以是指使用匹配的括号分隔子表达式 <code>\1 ， \2 ，...， \9</code> 。请注意，CMake代码中需要两个反斜杠（ <code>\\1</code> ）才能通过参数解析获得反斜杠。同理 <code>\\.</code>是匹配 <code>.</code>的意思。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Find all main*.cpp files and store in list mains</span><br><span class="line">file(GLOB_RECURSE mains RELATIVE &quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;&quot; &quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/main*.cpp&quot;)</span><br><span class="line"></span><br><span class="line">foreach(mainfile IN LISTS mains)</span><br><span class="line">    # Get file name without directory</span><br><span class="line">    get_filename_component(mainname $&#123;mainfile&#125; NAME_WE)</span><br><span class="line">    add_executable($&#123;mainname&#125; $&#123;mainfile&#125;)</span><br><span class="line">endforeach()</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">file( GLOB APP_SOURCES RELATIVE $&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/src/ *.c )</span><br><span class="line"> </span><br><span class="line">foreach( sourcefile IN LISTS APP_SOURCES )</span><br><span class="line">    string( REPLACE &quot;.c&quot; &quot;&quot; program $&#123;sourcefile&#125; )</span><br><span class="line">    add_executable( $&#123;program&#125; $&#123;sourcefile&#125; )</span><br><span class="line">    #target_link_libraries( $&#123;program&#125; zmq )</span><br><span class="line">endforeach( sourcefile )</span><br></pre></td></tr></table></figure>

<h2 id="将指定的文件编译成单独的可执行文件"><a href="#将指定的文件编译成单独的可执行文件" class="headerlink" title="将指定的文件编译成单独的可执行文件"></a>将指定的文件编译成单独的可执行文件</h2><p><a target="_blank" rel="noopener" href="https://github.com/Kirrito-k423/QuickStartLinux/blob/main/project/CMakeLists.txt">example code</a></p>
<h2 id="运行n次并求平均时间"><a href="#运行n次并求平均时间" class="headerlink" title="运行n次并求平均时间"></a>运行n次并求平均时间</h2><p><a target="_blank" rel="noopener" href="https://github.com/Kirrito-k423/QuickStartLinux/blob/main/project/avgTime.sh">example code</a></p>
<h2 id="比较时间的Cmake优化小项目"><a href="#比较时间的Cmake优化小项目" class="headerlink" title="比较时间的Cmake优化小项目"></a>比较时间的Cmake优化小项目</h2><p><a target="_blank" rel="noopener" href="https://github.com/Kirrito-k423/StencilAcc">https://github.com/Kirrito-k423/StencilAcc</a></p>
<h2 id="学习Quest-cmake-添加openmp的编译选项核compile-option"><a href="#学习Quest-cmake-添加openmp的编译选项核compile-option" class="headerlink" title="学习Quest cmake 添加openmp的编译选项核compile option"></a>学习Quest cmake 添加openmp的编译选项核compile option</h2><h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><p>ipcc初赛的项目代码有些混乱，只是简单分类。想好好学习一下cmake和make。规范项目结构，优化编译运行流程，提高效率。</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
https://www.cnblogs.com/lyq105/archive/2010/12/03/1895067.html

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ET_Endeavoring/article/details/98989066">https://blog.csdn.net/ET_Endeavoring/article/details/98989066</a></p>
<p>————————————————<br>版权声明：本文为CSDN博主「商汤科技」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq295109601/article/details/118867192">https://blog.csdn.net/qq295109601/article/details/118867192</a></p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/categories/Tutorials/page/4/">Previous</a></div><div class="pagination-next"><a href="/categories/Tutorials/page/6/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/categories/Tutorials/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/categories/Tutorials/page/4/">4</a></li><li><a class="pagination-link is-current" href="/categories/Tutorials/page/5/">5</a></li><li><a class="pagination-link" href="/categories/Tutorials/page/6/">6</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/categories/Tutorials/page/12/">12</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">𝘊𝘰𝘮𝘱𝘶𝘵𝘦𝘳 𝘈𝘳𝘤𝘩𝘪𝘵𝘦𝘤𝘵𝘶𝘳𝘦 &amp; 𝘏𝘗𝘊</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">401</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">33</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">500</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">41</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/Camp/"><span class="level-start"><span class="level-item">Camp</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math/"><span class="level-start"><span class="level-item">Math</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">25</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">25</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Thinking/"><span class="level-start"><span class="level-item">Thinking</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">117</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/love/"><span class="level-start"><span class="level-item">love</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">52</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-26T22:38:35.000Z">2024-04-26</time></p><p class="title"><a href="/2024/04/26/Thinking/2-courage2move/PersonalImageManagement/">Personal Image Management</a></p><p class="categories"><a href="/categories/Thinking/">Thinking</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-22T11:18:58.000Z">2024-04-22</time></p><p class="title"><a href="/2024/04/22/Work/Architecture/microHardware/cacheCoherence/">Memory Consistency and Cache Coherence </a></p><p class="categories"><a href="/categories/Architecture/">Architecture</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-20T06:54:32.000Z">2024-04-20</time></p><p class="title"><a href="/2024/04/20/Work/software/windows/WinUsefulTools/">Windows Useful Tools</a></p><p class="categories"><a href="/categories/software/">software</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-19T07:40:25.000Z">2024-04-19</time></p><p class="title"><a href="/2024/04/19/Work/Programming/2-languageGrammar/c/CplusDebugPrint/">C &amp; C++: Debug Print like icecream in Python</a></p><p class="categories"><a href="/categories/Programming/">Programming</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-18T01:54:32.000Z">2024-04-18</time></p><p class="title"><a href="/2024/04/18/Work/software/manager/podman/">Podman</a></p><p class="categories"><a href="/categories/software/">software</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">April 2024</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">March 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">February 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/01/"><span class="level-start"><span class="level-item">January 2024</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">December 2023</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">November 2023</span></span><span class="level-end"><span class="level-item tag">33</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">October 2023</span></span><span class="level-end"><span class="level-item tag">56</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/09/"><span class="level-start"><span class="level-item">September 2023</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">August 2023</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">July 2023</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">June 2023</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">May 2023</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">April 2023</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">March 2023</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">February 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">January 2023</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">December 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/11/"><span class="level-start"><span class="level-item">November 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">October 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">September 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">August 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">July 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">May 2022</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">April 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">March 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">February 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">January 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">December 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">November 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">September 2021</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2024 Shaojie Tan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>