<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>Category: Tutorials - SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="SHAOJIE&#039;S BOOK"><meta property="og:url" content="http://icarus.shaojiemike.top/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://icarus.shaojiemike.top/img/og_image.png"><meta property="article:author" content="Shaojie Tan"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://icarus.shaojiemike.top/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top"},"headline":"SHAOJIE'S BOOK","image":["http://icarus.shaojiemike.top/img/og_image.png"],"author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.0.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">Categories</a></li><li class="is-active"><a href="#" aria-current="page">Tutorials</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-04-16T16:00:00.000Z" title="4/16/2023, 4:00:00 PM">2023-04-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-20T07:26:00.155Z" title="11/20/2023, 7:26:00 AM">2023-11-20</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">7 minutes read (About 1026 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/16/Work/Programming/4-compile/construction%20tool/cmake/">cmake</a></p><div class="content"><!-- [<sup>2</sup>](#refer-anchor) -->

<h2 id="cmake简介"><a href="#cmake简介" class="headerlink" title="cmake简介"></a>cmake简介</h2><p>CMake是一个跨平台的安装(编译)工具,可以用简单的语句来描述所有平台的安装(编译过程)。他能够输出各种各样的makefile或者project文件,能测试编译器所支持的C++特性,类似UNIX下的automake。</p>
<h2 id="项目生成CMakeLists-txt"><a href="#项目生成CMakeLists-txt" class="headerlink" title="项目生成CMakeLists.txt"></a>项目生成CMakeLists.txt</h2><p><img src="https://pic.shaojiemike.top/img/20220401090136.png"></p>
<h2 id="查看cmake选项"><a href="#查看cmake选项" class="headerlink" title="查看cmake选项"></a>查看cmake选项</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/16851084/how-to-list-all-cmake-build-options-and-their-default-values">https://stackoverflow.com/questions/16851084/how-to-list-all-cmake-build-options-and-their-default-values</a></p>
<h3 id="打印详细编译信息"><a href="#打印详细编译信息" class="headerlink" title="打印详细编译信息"></a>打印详细编译信息</h3><ul>
<li>方法1:  执行命令cmake时追加：<code>-DCMAKE_VERBOSE_MAKEFILE=ON</code></li>
<li>方法2:  在CMakeLists.txt中添加：<code>set(CMAKE_VERBOSE_MAKEFILEON ON)</code></li>
<li>方法3:  make时追加： <code>VERBOSE=1</code></li>
</ul>
<h3 id="list-all-option-and-set-CACHE-cached-variables"><a href="#list-all-option-and-set-CACHE-cached-variables" class="headerlink" title="list all option( and set( CACHE (cached) variables"></a>list all option( and set( CACHE (cached) variables</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">cmake ..</span><br><span class="line">cmake -LA | awk &#x27;&#123;if(f)print&#125; /-- Cache values/&#123;f=1&#125;&#x27;</span><br><span class="line">cmake -LAH # adding -H to show more help information about each option</span><br></pre></td></tr></table></figure>

<h3 id="ccmake"><a href="#ccmake" class="headerlink" title="ccmake"></a>ccmake</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cmake-curses-gui</span><br><span class="line">ccmake ..</span><br></pre></td></tr></table></figure>

<h2 id="常用选项"><a href="#常用选项" class="headerlink" title="常用选项"></a>常用选项</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-S &lt;path-to-source&gt;          = Explicitly specify a source directory.CMakeLists.txt路径</span><br><span class="line">-B &lt;path-to-build&gt;           = Explicitly specify a build directory.</span><br><span class="line">-DCMAKE_BUILD_TYPE=Debug</span><br><span class="line">-DCMAKE_INSTALL_PREFIX=directory --- Specify for directory the full path name of where you want thetools and libraries to be installed (default /usr/local)</span><br></pre></td></tr></table></figure>

<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><h3 id="G"><a href="#G" class="headerlink" title="-G &lt;generator&gt;"></a>-G <code>&lt;generator&gt;</code></h3><p>基于不同平台的makefile生成方式</p>
<p>-G “Unix Makefiles”<br>-G “MinGW” 之类的</p>
<h2 id="CMakeList-txt基本语法"><a href="#CMakeList-txt基本语法" class="headerlink" title="CMakeList.txt基本语法"></a>CMakeList.txt基本语法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"># cmake required version</span><br><span class="line">cmake_minimum_required(VERSION 3.0.0)</span><br><span class="line"></span><br><span class="line"># more error message</span><br><span class="line">SET( CMAKE_VERBOSE_MAKEFILE on )</span><br><span class="line"></span><br><span class="line">#project name</span><br><span class="line">PROJECT(ipcc_test)</span><br><span class="line"></span><br><span class="line"># compile</span><br><span class="line">set(CMAKE_SYSTEM_NAME Linux)</span><br><span class="line">set(CMAKE_C_COMPILER gcc)</span><br><span class="line">set(CMAKE_CXX_COMPILER g++)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># flags</span><br><span class="line">set(CMAKE_C_FLAGS &quot;$&#123;CMAKE_C_FLAGS&#125; -g -O3  -pthread&quot;)</span><br><span class="line">set(CMAKE_CXX_FLAGS &quot;$&#123;CMAKE_CXX_FLAGS&#125; -g -O3  -pthread -fopenmp&quot;)</span><br><span class="line"></span><br><span class="line">#head file path</span><br><span class="line">INCLUDE_DIRECTORIES(include)</span><br><span class="line"></span><br><span class="line">#source directory</span><br><span class="line">AUX_SOURCE_DIRECTORY(src DIR_SRCS) # 搜集所有在指定路径下的源文件的文件名，将输出结果列表储存在指定的变量DIR_SRCS中</span><br><span class="line"></span><br><span class="line"># message</span><br><span class="line">message(STATUS &quot;PROJECT_SOURCE_DIR is $&#123;PROJECT_SOURCE_DIR&#125;&quot;)</span><br><span class="line">message(STATUS &quot;PROJECT_BINARY_DIR is $&#123;PROJECT_BINARY_DIR&#125;&quot;)</span><br><span class="line">message(STATUS &quot;CMAKE_CURRENT_SOURCE_DIR is $&#123;CMAKE_CURRENT_SOURCE_DIR&#125;&quot;)</span><br><span class="line"></span><br><span class="line">#output path</span><br><span class="line">set(EXECUTABLE_OUTPUT_PATH $&#123;PROJECT_BINARY_DIR&#125;/bin)</span><br><span class="line"></span><br><span class="line">#set environment variable</span><br><span class="line">SET(TEST $&#123;DIR_SRCS&#125;)  # 此处用于显示如何用环境变量对环境变量进行赋值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#add executable file</span><br><span class="line">ADD_EXECUTABLE(./bin/exe $&#123;TEST&#125;)</span><br></pre></td></tr></table></figure>

<p>add lib</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># add lib path</span><br><span class="line">link_directories($&#123;CMAKE_SOURCE_DIR&#125;/lib)</span><br><span class="line"></span><br><span class="line">add_executable(foo $&#123;FOO_SRCS&#125;)</span><br><span class="line">target_link_libraries(foo bar) # libbar.so is found in $&#123;CMAKE_SOURCE_DIR&#125;/lib</span><br><span class="line"></span><br><span class="line">#set extern libraries</span><br><span class="line">SET(LIBRARIES LIBRARIESlibm.so)</span><br><span class="line"></span><br><span class="line">#add link library</span><br><span class="line">TARGET_LINK_LIBRARIES(../bin/bin $&#123;LIBRARIES&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="目录下所有源文件编译成单独的可执行文件"><a href="#目录下所有源文件编译成单独的可执行文件" class="headerlink" title="目录下所有源文件编译成单独的可执行文件"></a>目录下所有源文件编译成单独的可执行文件</h2><p>实现头文件、执行文件、源代码都分开存储。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">file(GLOB files &quot;*/*.cpp&quot;)</span><br><span class="line">foreach (file $&#123;files&#125;)</span><br><span class="line">	message(STATUS &quot;file is $&#123;file&#125;&quot;)</span><br><span class="line">	string(REGEX REPLACE &quot;.+/(.+)\\..*&quot; &quot;\\1&quot; exe $&#123;file&#125;)</span><br><span class="line">	message(STATUS &quot;file name is $&#123;exe&#125;&quot;)</span><br><span class="line">	add_executable($&#123;exe&#125; $&#123;file&#125;)</span><br><span class="line">	TARGET_LINK_LIBRARIES($&#123;exe&#125; $&#123;CONAN_LIBS&#125;)</span><br><span class="line">endforeach ()</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string(REGEX REPLACE &lt;regular_expression&gt;</span><br><span class="line">       &lt;replacement_expression&gt; &lt;output_variable&gt;</span><br><span class="line">       &lt;input&gt; [&lt;input&gt;...])</span><br></pre></td></tr></table></figure>

<p>尽可能匹配 <code>&lt;regular_expression&gt;</code> 多次，并用 <code>&lt;replacement_expression&gt;</code> 替换输出中的匹配项。匹配之前将所有 <code>&lt;input&gt;</code> 参数连接在一起。</p>
<p>所述 <code>&lt;replacement_expression&gt;</code> 可以是指使用匹配的括号分隔子表达式 <code>\1 ， \2 ，...， \9</code> 。请注意，CMake代码中需要两个反斜杠（ <code>\\1</code> ）才能通过参数解析获得反斜杠。同理 <code>\\.</code>是匹配 <code>.</code>的意思。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Find all main*.cpp files and store in list mains</span><br><span class="line">file(GLOB_RECURSE mains RELATIVE &quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;&quot; &quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/main*.cpp&quot;)</span><br><span class="line"></span><br><span class="line">foreach(mainfile IN LISTS mains)</span><br><span class="line">    # Get file name without directory</span><br><span class="line">    get_filename_component(mainname $&#123;mainfile&#125; NAME_WE)</span><br><span class="line">    add_executable($&#123;mainname&#125; $&#123;mainfile&#125;)</span><br><span class="line">endforeach()</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">file( GLOB APP_SOURCES RELATIVE $&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/src/ *.c )</span><br><span class="line"> </span><br><span class="line">foreach( sourcefile IN LISTS APP_SOURCES )</span><br><span class="line">    string( REPLACE &quot;.c&quot; &quot;&quot; program $&#123;sourcefile&#125; )</span><br><span class="line">    add_executable( $&#123;program&#125; $&#123;sourcefile&#125; )</span><br><span class="line">    #target_link_libraries( $&#123;program&#125; zmq )</span><br><span class="line">endforeach( sourcefile )</span><br></pre></td></tr></table></figure>

<h2 id="将指定的文件编译成单独的可执行文件"><a href="#将指定的文件编译成单独的可执行文件" class="headerlink" title="将指定的文件编译成单独的可执行文件"></a>将指定的文件编译成单独的可执行文件</h2><p><a target="_blank" rel="noopener" href="https://github.com/Kirrito-k423/QuickStartLinux/blob/main/project/CMakeLists.txt">example code</a></p>
<h2 id="运行n次并求平均时间"><a href="#运行n次并求平均时间" class="headerlink" title="运行n次并求平均时间"></a>运行n次并求平均时间</h2><p><a target="_blank" rel="noopener" href="https://github.com/Kirrito-k423/QuickStartLinux/blob/main/project/avgTime.sh">example code</a></p>
<h2 id="比较时间的Cmake优化小项目"><a href="#比较时间的Cmake优化小项目" class="headerlink" title="比较时间的Cmake优化小项目"></a>比较时间的Cmake优化小项目</h2><p><a target="_blank" rel="noopener" href="https://github.com/Kirrito-k423/StencilAcc">https://github.com/Kirrito-k423/StencilAcc</a></p>
<h2 id="学习Quest-cmake-添加openmp的编译选项核compile-option"><a href="#学习Quest-cmake-添加openmp的编译选项核compile-option" class="headerlink" title="学习Quest cmake 添加openmp的编译选项核compile option"></a>学习Quest cmake 添加openmp的编译选项核compile option</h2><h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><p>ipcc初赛的项目代码有些混乱，只是简单分类。想好好学习一下cmake和make。规范项目结构，优化编译运行流程，提高效率。</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
https://www.cnblogs.com/lyq105/archive/2010/12/03/1895067.html

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ET_Endeavoring/article/details/98989066">https://blog.csdn.net/ET_Endeavoring/article/details/98989066</a></p>
<p>————————————————<br>版权声明：本文为CSDN博主「商汤科技」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq295109601/article/details/118867192">https://blog.csdn.net/qq295109601/article/details/118867192</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-04-14T11:32:44.000Z" title="4/14/2023, 11:32:44 AM">2023-04-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-20T07:26:00.163Z" title="11/20/2023, 7:26:00 AM">2023-11-20</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">3 minutes read (About 485 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/14/Work/software/manager/dockerOnWin10/">Docker On Win10</a></p><div class="content"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>WSL 2 是对WSL基础体系结构的一次重大改造，它使用虚拟化技术和 Linux 内核来实现其新功能。</li>
<li>docker是基于linux内核运行</li>
<li>WSL 2 加入了linux内核为docker在windows上运行铺平了道路</li>
</ul>
<h2 id="系统要求"><a href="#系统要求" class="headerlink" title="系统要求"></a>系统要求</h2><h3 id="开启虚拟化-Hyper-V"><a href="#开启虚拟化-Hyper-V" class="headerlink" title="开启虚拟化 + Hyper-V"></a>开启虚拟化 + Hyper-V</h3><ul>
<li>BIOS开启虚拟化<ul>
<li>查看是否开启：任务管理器 -&gt; 性能 -&gt; CPU 虚拟化：开启</li>
</ul>
</li>
<li>Control Panel（控制面板） -&gt; Programs and Features（程序和功能） -&gt; Turn Windows Features on or off（启用或关闭Widnows功能）勾选三项<ul>
<li>Windows Hypervisor Platform（Windows虚拟机监控程序平台)</li>
<li>Hyper-V</li>
<li>虚拟机平台</li>
</ul>
</li>
<li>管理员Powershell运行 <code>bcdedit /set hypervisorlaunchtype auto</code></li>
<li>重启</li>
</ul>
<h3 id="WSL-2"><a href="#WSL-2" class="headerlink" title="WSL 2"></a>WSL 2</h3><p>参考教程<a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/windows/wsl/install">安装 WSL</a>和<a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/windows/wsl/install-manual#step-3---enable-virtual-machine-feature">旧版 WSL 的手动安装步骤</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前版本</span></span><br><span class="line">❯ wsl -l -v</span><br><span class="line">  NAME            STATE           VERSION</span><br><span class="line">* Ubuntu-20.04    Stopped         1</span><br><span class="line"></span><br><span class="line">❯ wsl --set-version Ubuntu-20.04 2</span><br><span class="line">正在进行转换，这可能需要几分钟时间。</span><br><span class="line">操作成功完成。</span><br><span class="line"></span><br><span class="line">E:/PowerShell via  v14.17.3 via 🐍 v3.9.7 took 59s</span><br><span class="line">❯ wsl -l -v</span><br><span class="line">  NAME            STATE           VERSION</span><br><span class="line">* Ubuntu-20.04    Stopped         2</span><br></pre></td></tr></table></figure>

<h2 id="docker-on-Windows"><a href="#docker-on-Windows" class="headerlink" title="docker on Windows"></a>docker on Windows</h2><p>注意：用命令行运行来修改默认安装路径(重命名install.exe)，参考<a target="_blank" rel="noopener" href="https://docs.docker.com/desktop/install/windows-install/">教程</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\<span class="title class_">Docker</span>.<span class="property">exe</span> install --installation-dir=<span class="string">&quot;E:\commonSoftware\Docker&quot;</span></span><br></pre></td></tr></table></figure>
<p>安装完之后运行设置</p>
<ul>
<li>开启开机启动</li>
<li>在Resources里修改image保存路径</li>
</ul>
<h2 id="使用问题"><a href="#使用问题" class="headerlink" title="使用问题"></a>使用问题</h2><h3 id="1-read-only-file-system"><a href="#1-read-only-file-system" class="headerlink" title="1: read-only file system"></a>1: read-only file system</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error response from daemon: container df6ee73697883e8e09edd65404e1fcc19a2b4bfb49212c754a8b3ef9741d7bda: driver <span class="string">&quot;overlay2&quot;</span> failed to remove root filesystem: unlinkat /var/lib/docker/overlay2/475c350b02589ce2cb5ef30f0619ed3aeaba409c56d87191b8cbbd00ef618fe3: read-only file system</span><br></pre></td></tr></table></figure>
<p>需要管理员运行docker</p>
<h3 id="C盘没空间"><a href="#C盘没空间" class="headerlink" title="C盘没空间"></a>C盘没空间</h3><p>WSL还是超级占用C盘</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Antarctic_Bear/article/details/123489609">https://blog.csdn.net/Antarctic_Bear/article/details/123489609</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-04-11T16:00:00.000Z" title="4/11/2023, 4:00:00 PM">2023-04-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-20T07:26:00.163Z" title="11/20/2023, 7:26:00 AM">2023-11-20</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">9 minutes read (About 1386 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/11/Work/software/linux/LinuxAutoRun/">Linux Auto Run : crontab</a></p><div class="content"><h2 id="crontab的使用"><a href="#crontab的使用" class="headerlink" title="crontab的使用"></a>crontab的使用</h2><h3 id="任务调度"><a href="#任务调度" class="headerlink" title="任务调度"></a>任务调度</h3><p>Linux下的任务调度分为两类：系统任务调度和用户任务调度。</p>
<p>Linux系统任务是由 cron (crond) 这个系统服务来控制的，这个系统服务是默认启动的。用户自己设置的计划任务则使用crontab 命令。</p>
<h3 id="crontab-命令"><a href="#crontab-命令" class="headerlink" title="crontab 命令"></a>crontab 命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab [-u user] file</span><br><span class="line">crontab [ -u user ] [ -i ] &#123; -e | -l | -r &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-u user</code>：用于设定某个用户的crontab服务；</li>
<li><code>file</code>: file为命令文件名，表示将file作为crontab的任务列表文件并载入crontab；</li>
<li><code>-e</code>：编辑某个用户的crontab文件内容，如不指定用户则表示当前用户；</li>
<li><code>-l</code>：显示某个用户的crontab文件内容，如不指定用户则表示当前用户；</li>
<li><code>-r</code>：从&#x2F;var&#x2F;spool&#x2F;cron目录中删除某个用户的crontab文件。</li>
<li><code>-i</code>：在删除用户的crontab文件时给确认提示。</li>
</ul>
<h3 id="crontab文件"><a href="#crontab文件" class="headerlink" title="crontab文件"></a>crontab文件</h3><ul>
<li>crontab有2种编辑方式：<ul>
<li>直接编辑<code>/etc/crontab</code>文件，其中<code>/etc/crontab</code>里的计划任务是系统中的计划任务，</li>
<li>通过<code>crontab –e</code>来编辑用户的计划任务；<ul>
<li>每次编辑完某个用户的cron设置后，cron自动在&#x2F;var&#x2F;spool&#x2F;cron下生成一个与此用户同名的文件，此用户的cron信息都记录在这个文件中，这个文件是不可以直接编辑的，只可以用crontab -e 来编辑。</li>
<li>所有用户定义的crontab 文件都被保存在 <code>/var/spool/cron</code>目录中。其文件名与用户名一致。</li>
</ul>
</li>
</ul>
</li>
<li>crontab中的command尽量使用绝对路径，否则会经常因为路径错误导致任务无法执行。</li>
<li>新创建的cron job不会马上执行，至少要等2分钟才能执行，可从起cron来立即执行。</li>
<li><code>%</code>在crontab文件中表示“换行”，因此假如脚本或命令含有%,需要使用<code>\%</code>来进行转义。</li>
</ul>
<p>配置文件实例:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SHELL=/bin/bash</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">HOME=/</span><br><span class="line">MAILTO=root <span class="comment"># MAILTO变量指定了crond的任务执行信息将通过电子邮件发送给root用户，如果MAILTO变量的值为空，则表示不发送任务执行信息给用户</span></span><br><span class="line"><span class="comment"># * * * * * user-name command to be executed</span></span><br><span class="line">@reboot /home/user/test.sh <span class="comment">#可以实现开机自动运行</span></span><br><span class="line">@reboot <span class="built_in">sleep</span> 300 &amp;&amp; /home/start.sh <span class="comment"># 延时启动</span></span><br></pre></td></tr></table></figure>

<p><code>@reboot</code> 表示重启开机的时候运行一次。还有很多类似参数如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">string             meaning</span><br><span class="line">------          -----------</span><br><span class="line">@reboot      Run once, at startup.</span><br><span class="line">@yearly       Run once a year, &quot;0 0 1 1 *&quot;.</span><br><span class="line">@annually    (same as @yearly)</span><br><span class="line">@monthly    Run once a month, &quot;0 0 1 * *&quot;.</span><br><span class="line">@weekly     Run once a week, &quot;0 0 * * 0&quot;.</span><br><span class="line">@daily        Run once a day, &quot;0 0 * * *&quot;.</span><br><span class="line">@midnight   (same as @daily)</span><br><span class="line">@hourly      Run once an hour, &quot;0 * * * *&quot;.</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># For details see man 4 crontabs</span><br><span class="line"># Example of job definition:</span><br><span class="line"># .---------------- minute (0 - 59)</span><br><span class="line"># | .------------- hour (0 - 23)</span><br><span class="line"># | | .---------- day of month (1 - 31)</span><br><span class="line"># | | | .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="line"># | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="line"># | | | | |</span><br><span class="line"></span><br><span class="line">*  */1  *  *  *  /etc/init.d/smb restart  # 每一小时重启smb</span><br></pre></td></tr></table></figure>
<p>在以上各个字段中，还可以使用以下特殊字符：</p>
<ul>
<li><code>*</code>代表所有的取值范围内的数字，如月份字段为<code>*</code>，则表示1到12个月；</li>
<li><code>/</code>代表每一定时间间隔的意思，如分钟字段为<code>*/10</code>，表示每10分钟执行1次。</li>
<li><code>-</code>代表从某个区间范围，是闭区间。如<code>2-5</code>表示<code>2,3,4,5</code>，<ul>
<li>组合：小时字段中<code>0-23/2</code>表示在0~23点范围内每2个小时执行一次。</li>
</ul>
</li>
<li><code>,</code>分散的数字（不一定连续），如<code>1,2,3,4,7,9</code>。</li>
</ul>
<h3 id="查看crontab的日志记录和状态"><a href="#查看crontab的日志记录和状态" class="headerlink" title="查看crontab的日志记录和状态"></a>查看crontab的日志记录和状态</h3><p><code>tail -f /var/log/cron</code>观察查看cron运行日志（&#x2F;var&#x2F;log&#x2F;cron.log），但是并未找到相关文件，原因是ubuntu默认没有开cron日志，执行命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/rsyslog.d/50-default.conf</span><br></pre></td></tr></table></figure>
<p>找到cron.log相关行，将前面注释符#去掉，保存退出，重启rsyslog：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo  service rsyslog  restart</span><br></pre></td></tr></table></figure>
<p>执行<code>less -10 /var/log/cron.log</code>再次查看cron运行日志，log出来了，提示如下信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">No MTA installed, discarding output</span><br></pre></td></tr></table></figure>
<p>原因是cron把屏幕输出都发送到email了，而当前环境并未安装email server，于是系统报错，解决方面就是不要直接向屏幕输出内容，而是重定向到一个文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /var/spool/mail/</span><br><span class="line">less shaojiemike</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service cron status # ubuntu</span><br></pre></td></tr></table></figure>



<h2 id="crontab-on-OpenWRT"><a href="#crontab-on-OpenWRT" class="headerlink" title="crontab on OpenWRT"></a>crontab on OpenWRT</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.编辑好脚本加入cron</span></span><br><span class="line"></span><br><span class="line">crontab -e</span><br><span class="line">* * * * * sh /root/tst.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.创建cron初始化脚本 vi /etc/init.d/S60cron，添加下面内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!/bin/sh</span></span><br><span class="line"><span class="comment">#start crond</span></span><br><span class="line">/usr/sbin/crond -c /etc/crontabs</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改权限</span></span><br><span class="line"><span class="built_in">chmod</span> 755 /etc/init.d/S60cron</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.手动启动crond</span></span><br><span class="line">/etc/init.d/S60cron</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.查看crond任务</span></span><br><span class="line">logread -e cron</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.重启crond</span></span><br><span class="line">killall crond; /etc/init.d/S60cron</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.禁用crond日志 修改/etc/init.d/S60cron</span></span><br><span class="line">/usr/sbin/crond -c /etc/crontabs -L /dev/null</span><br></pre></td></tr></table></figure>
<h2 id="crontab运行push-IP脚本"><a href="#crontab运行push-IP脚本" class="headerlink" title="crontab运行push-IP脚本"></a>crontab运行push-IP脚本</h2><h3 id="git-push脚本"><a href="#git-push脚本" class="headerlink" title="git-push脚本"></a>git-push脚本</h3><p><a target="_blank" rel="noopener" href="https://git.ustc.edu.cn/supertan/autoupdateipconfig">https://git.ustc.edu.cn/supertan/autoupdateipconfig</a></p>
<h2 id="Linux-开机自动运行脚本的其他方法"><a href="#Linux-开机自动运行脚本的其他方法" class="headerlink" title="Linux 开机自动运行脚本的其他方法"></a>Linux 开机自动运行脚本的其他方法</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/35402730">https://zhuanlan.zhihu.com/p/35402730</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35440678/article/details/80489102">https://blog.csdn.net/qq_35440678/article/details/80489102</a></p>
<p><a target="_blank" rel="noopener" href="https://neucrack.com/p/91">https://neucrack.com/p/91</a></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><h3 id="登录终端自动运行"><a href="#登录终端自动运行" class="headerlink" title="登录终端自动运行"></a>登录终端自动运行</h3><p>可以用户登录的时候显示信息，记录信息，静止某些IP登录<br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1416251">https://cloud.tencent.com/developer/article/1416251</a></p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p><img src="https://pic.shaojiemike.top/img/20211126190126.png"><br><img src="https://pic.shaojiemike.top/img/20211126190703.png"></p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><p>最近遇到了一堆机器，想白嫖，但是如果不是自己的机器，因为某些原因重启，IP变动就再也连接不上了。所以需要一个自启动push-IP的脚本，特此学习一下。</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.linuxprobe.com/how-to-crontab.html">https://www.linuxprobe.com/how-to-crontab.html</a></p>
<p><a target="_blank" rel="noopener" href="https://martybugs.net/wireless/openwrt/cron.cgi">https://martybugs.net/wireless/openwrt/cron.cgi</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-02-11T22:08:24.000Z" title="2/11/2023, 10:08:24 PM">2023-02-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-20T07:26:00.143Z" title="11/20/2023, 7:26:00 AM">2023-11-20</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">7 minutes read (About 1010 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/02/11/OutOfWork/4-devices/4-keepass/">Keepass</a></p><div class="content"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>KeePass是一个轻量级、易用且安全性极高的密码管理器，其源码完全开源（OSI certified），获得了世界多国的安全认证和评级。</p>
<p>只需要<strong>一个主密码+一个数据库文件</strong>即可安全的保存所有的密码。</p>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ol>
<li>密码数据库自己掌握，与1Password和LastPass相比不存在平台泄露的可能。</li>
<li>所以在云存储、多终端同步上不如商业产品1Password和LastPass便捷，需要自己配置。<ol>
<li>跨平台（有大量开源的第三方的客户端）。</li>
<li>支持WebDAV，配合网盘可实现跨平台、多终端同步。</li>
<li>Windows下可配置浏览器自动输入（Mac据说也可以）。</li>
</ol>
</li>
</ol>
<h3 id="密码安全"><a href="#密码安全" class="headerlink" title="密码安全"></a>密码安全</h3><p>普通用户面临的问题：</p>
<ul>
<li>重要的密码会泄露在非重要的地方：每个人心中都有一个常用的密码，这个密码在注册各类账户时都会拿出来用，甚至银行卡的6位数密码也包含其中<ul>
<li>小网站的“脱裤”会导致你的常用密码被泄露</li>
</ul>
</li>
<li>不同的网站对密码的复杂度要求不同，我们也会临时“演变”导致“找回密码”成了登录前的基本操作</li>
</ul>
<h2 id="美观兼容版"><a href="#美观兼容版" class="headerlink" title="美观兼容版"></a>美观兼容版</h2><ul>
<li>KeePassXC：KeePassX的分支，功能齐全，<ul>
<li>跨平台（Windows、macOS和Linux），</li>
<li>界面更加美观、扁平化，</li>
<li>但不支持WebDAV。</li>
<li>支持KDBX 3.1和4.0。</li>
</ul>
</li>
<li>KeeWeb：后起之秀，与KeePass兼容，功能齐全，<ul>
<li>跨平台（Windows、macOS和Linux），</li>
<li>另有自动备份等功能，</li>
<li>界面美观；</li>
<li>支持在线安装插件；支持离线Web应用；</li>
<li>笔者认为是Mac OS的首选；使用坚果云webdav时报错：“No Last-Modified header”。</li>
</ul>
</li>
</ul>
<h2 id="Windows-KeeWeb使用"><a href="#Windows-KeeWeb使用" class="headerlink" title="Windows KeeWeb使用"></a>Windows KeeWeb使用</h2><ol>
<li>中文插件 <a target="_blank" rel="noopener" href="https://plugins.keeweb.info/translations/zh-CN">https://plugins.keeweb.info/translations/zh-CN</a></li>
<li>设置里方便激活浏览器拓展</li>
</ol>
<h2 id="多平台"><a href="#多平台" class="headerlink" title="多平台"></a>多平台</h2><ul>
<li>Windows：KeePass、KeeWeb</li>
<li>Android：KeePass2Android<ul>
<li>读取群晖Drive下的文件即可</li>
<li>支持自动填充功能，和生物识别</li>
</ul>
</li>
<li>Mac OS：KeeWeb</li>
<li>IOS、 ipad OS:<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/keeweb/keeweb/wiki/iOS">https://github.com/keeweb/keeweb/wiki/iOS</a></li>
<li>Strongbox 就还行</li>
</ul>
</li>
<li>iPhone：keepass touch</li>
</ul>
<h2 id="同步实现"><a href="#同步实现" class="headerlink" title="同步实现"></a>同步实现</h2><h3 id="坚果云"><a href="#坚果云" class="headerlink" title="坚果云"></a>坚果云</h3><p>坚果云更像Dropbox，</p>
<ul>
<li>支持WebDAV、</li>
<li>增量同步和历史版本等功能。</li>
</ul>
<p>坚果云免费版虽不如Dropbox，但也还算厚道：</p>
<ul>
<li>上传流量1G&#x2F;月，下载流量3G&#x2F;月，</li>
<li>支持1个月的历史版本，用来使用KeePass、云笔记等足矣。</li>
</ul>
<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><ol>
<li>添加“应用密钥”<ol>
<li>在《账户信息》-《安全选项》</li>
</ol>
</li>
<li>keeweb 添加 即可<ol>
<li>注意坚果云用户是 邮箱， 不是昵称</li>
</ol>
</li>
</ol>
<p>参考<a target="_blank" rel="noopener" href="https://blog.uliian.com/2018/01/22/how-to-keepass/">教程</a></p>
<p>但是keeweb无法同步，会报错</p>
<h2 id="其他第三方密码管理器"><a href="#其他第三方密码管理器" class="headerlink" title="其他第三方密码管理器"></a>其他第三方密码管理器</h2><p>LastPass、1Password、 秘迹 app</p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><p>原本我是懒得用的，edge自带的密码管理器不好吗？</p>
<ol>
<li>一方面，<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/32657812">自动填写带来的安全性问题</a>。<ol>
<li>目前大多数第三方密码管理器，如LastPass和1Password都不容易受到这种攻击的影响，因为它们避免了自动填入不可见的登录表单，并且需要进行用户交互。</li>
<li>可以直接导出所有信息的<a target="_blank" rel="noopener" href="https://github.com/moonD4rk/HackBrowserData">黑客程序HackBrowserdata</a></li>
<li>还有<a target="_blank" rel="noopener" href="https://github.com/gentilkiwi/mimikatz/">windows管理员密码获取</a>程序。（如果要玩，记得先把火绒等杀毒软件关了</li>
</ol>
</li>
<li>另一方面，假如你电脑被攻击了，浏览器根本无法保护你的密码</li>
</ol>
<h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><ol>
<li>多端同步的（Windows，macbook，ipad，Android）</li>
<li>浏览器有保存插件的（Safari，edge，chrome）</li>
</ol>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.rmnof.com/article/keepass-password-manager/">https://www.rmnof.com/article/keepass-password-manager/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-12-24T16:00:00.000Z" title="12/24/2022, 4:00:00 PM">2022-12-24</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-20T07:26:00.143Z" title="11/20/2023, 7:26:00 AM">2023-11-20</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">3 minutes read (About 384 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/24/OutOfWork/5-VideoEntertainment/5-uTorrent/">uTorrent</a></p><div class="content"><h2 id="缓存设置"><a href="#缓存设置" class="headerlink" title="缓存设置"></a>缓存设置</h2><p>tjupt的默认设置就不错。红框是建议勾选的。<br><img src="https://pic.shaojiemike.top/img/20221225172727.png"></p>
<p>??? note “错误：内存不足，无法完成请求”</p>
<pre><code>This is because the cache size is too big, lower to `512MB` or `1GB` to fix this.[^1]
But the size bigger the faster, `1.4GB` is the biggest available value which ut can support.
</code></pre>
<p>突然没速度了，可能是缓存卡住了。一般也没什么解决办法。但是稳定下载的时候会均衡。</p>
<p><img src="https://pic.shaojiemike.top/img/20221225173002.png"></p>
<h2 id="下载如何修改文件名和位置"><a href="#下载如何修改文件名和位置" class="headerlink" title="下载如何修改文件名和位置"></a>下载如何修改文件名和位置</h2><p>首先<strong>不要</strong>勾选”立即下载”，通过如下更改位置即可再开始下载即可。还可以<strong>多选来批量移动</strong>文件到文件夹。（对于PT需要下载100%文件才能做种的，但是不需要的文件会影响刮削。可以通过批量移动到其他位置来解决）<br><img src="https://pic.shaojiemike.top/img/20221225173340.png"></p>
<h2 id="北洋园tjupt红种问题"><a href="#北洋园tjupt红种问题" class="headerlink" title="北洋园tjupt红种问题"></a>北洋园tjupt红种问题</h2><p>!!! note “Essential Reason: tjupt.org’s network traffic is brokered”</p>
<pre><code>configure the router policy to DIRECT to fix this.
</code></pre>
<p>??? example “其余方法:实际测试重置网络解决”</p>
<pre><code>1. [无法与服务器建立连接](https://blog.csdn.net/qq_45721725/article/details/122781489). utorrent种子暂停然后开始/更新tracker即可
2. 键盘按“Win + R”组合快捷键，输入“inetcpl.cpl”，点击“确定”进入“Internet选项”，在“高级”选项卡中选择“重置 IE 设置”
</code></pre>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="http://pgpchs.blogspot.com/2011/03/utorrent-antigfwalloutwallbloggercom.html">http://pgpchs.blogspot.com/2011/03/utorrent-antigfwalloutwallbloggercom.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Gerald_Jones/article/details/78848426">https://blog.csdn.net/Gerald_Jones/article/details/78848426</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-11-26T07:10:32.000Z" title="11/26/2022, 7:10:32 AM">2022-11-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-20T07:26:00.143Z" title="11/20/2023, 7:26:00 AM">2023-11-20</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">15 minutes read (About 2259 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/11/26/OutOfWork/5-VideoEntertainment/5-Jellyfin/">Jellyfin</a></p><div class="content"><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="docker-compose-in-Portainer"><a href="#docker-compose-in-Portainer" class="headerlink" title="docker-compose in Portainer"></a>docker-compose in Portainer</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&quot;3&quot;</span></span><br><span class="line">services:</span><br><span class="line">  jellyfin:</span><br><span class="line">    image: jellyfin/jellyfin</span><br><span class="line">    container_name: jellyfin</span><br><span class="line">    stdin_open: <span class="literal">true</span></span><br><span class="line">    <span class="built_in">tty</span>: <span class="literal">true</span></span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - 9004:8096</span><br><span class="line">    volumes:</span><br><span class="line">      - /addDisk/DiskNo4/jellyfinConfig:/config</span><br><span class="line">      - /addDisk/DiskNo4/bt:/nas</span><br><span class="line">    privileged: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>WebUI <code>http://222.195.72.218:9004</code>访问</p>
<h3 id="Windows-server"><a href="#Windows-server" class="headerlink" title="Windows server"></a>Windows server</h3><p>尝试 安装官网<a target="_blank" rel="noopener" href="https://repo.jellyfin.org/releases/server/windows/stable/installer/jellyfin_10.8.7_windows-x64.exe">windows版本</a>。</p>
<p>用了管理员权限也会报错<code>Could not start the jellyfin server service</code>。取消勾选<code>server</code>来暂时避免这个问题。</p>
<h2 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h2><p>启动程序后，会在<code>http://SERVER_IP:8096</code>进行一些<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/586191658">初始配置</a>，</p>
<ul>
<li>设置电影的文件夹，</li>
<li>类别选择电影，</li>
<li>路径为<code>/data/电影</code>，建议一开始选小一点的</li>
<li>首选语言为Chinese,</li>
<li>国家和地区选择People’s Republic of China,</li>
<li>其他全部默认即可</li>
</ul>
<h2 id="开启硬解："><a href="#开启硬解：" class="headerlink" title="开启硬解："></a>开启硬解：</h2><p>Jellyfin硬解转码主要依赖于ffmpeg，在windows平台下，Intel核显可以使用intel quick sync（qsv），N卡用NVENC和A卡用AMF进行硬解转码</p>
<p>在【控制台】—【播放】—【硬件加速】栏选择<code>Nvidia</code></p>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><h3 id="jellyfin-plugin-anidb"><a href="#jellyfin-plugin-anidb" class="headerlink" title="jellyfin-plugin-anidb"></a>jellyfin-plugin-anidb</h3><p>为了支持<del>里番</del></p>
<p>Place the dll-file in the <code>plugins/anidb</code> folder (you might need to create the folders) of your JF install</p>
<p>或者直接设置里安装(AniSearch 也同理)</p>
<p>但是收获的信息也太少了吧。可以手动下载图片(<a target="_blank" rel="noopener" href="http://www.getchu.com/all/month_title.html?aurl=http://www.getchu.com/all/month_title.html?genre=anime_dvd&gage=adult&year=2022&month=03&genre=anime_dvd&gc=gc">2022年03月発売タイトル - Getchu.com</a>)，改文件名显示。基本满足需求。</p>
<p>后续可以考虑EverAver和Movie_Data_Capture</p>
<h3 id="里番下载"><a href="#里番下载" class="headerlink" title="里番下载"></a>里番下载</h3><p>首选去<a target="_blank" rel="noopener" href="https://www.hacg.mom/wp/94317.html">琉璃神社 ★ HACG.me</a>搜索日语和月份合集找文中的BT识别码。或者去这个网站找<a target="_blank" rel="noopener" href="https://sukebei.nyaa.si/?f=0&c=0_0&q=Hajimete+no+Hitozuma">桜都字幕组的合集</a></p>
<h2 id="配套刮削软件"><a href="#配套刮削软件" class="headerlink" title="配套刮削软件"></a>配套刮削软件</h2><h3 id="综合刮削"><a href="#综合刮削" class="headerlink" title="综合刮削"></a>综合刮削</h3><p>本地电影元数据 抓取工具 | 刮削器：<a target="_blank" rel="noopener" href="https://github.com/yoshiko2/Movie_Data_Capture/wiki">Movie_Data_Capture</a> 需要把程序放置到和电影的同一目录下</p>
<h3 id="里番刮削"><a href="#里番刮削" class="headerlink" title="里番刮削"></a>里番刮削</h3><ul>
<li>里番只能用EverAver一部一部手动刮。</li>
<li>里番或者可以jellyfin默认的anidb 识别，但是是英文</li>
</ul>
<h3 id="AV刮削"><a href="#AV刮削" class="headerlink" title="AV刮削"></a>AV刮削</h3><ul>
<li>EverAver</li>
<li>javsdt</li>
<li>av data capture</li>
<li><a target="_blank" rel="noopener" href="https://github.com/moyy996/AVDC">AVDC</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/JavScraper/Emby.Plugins.JavScraper">javscraper Emby插件</a><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/JavScraper/Emby.Plugins.JavScraper/issues/307">jellyfin额外项目兼容</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/metatube-community/jellyfin-plugin-metatube">jellyfin-plugin-metatube jellyfin插件</a><ul>
<li>插件是需要有前端设置和<a target="_blank" rel="noopener" href="https://github.com/metatube-community/metatube-sdk-go">后端</a>设置的</li>
<li>自己搭建后端<a target="_blank" rel="noopener" href="https://api.javtube.internal/">https://api.javtube.internal</a></li>
</ul>
</li>
</ul>
<p>AV偶像头像单独<a target="_blank" rel="noopener" href="https://github.com/xinxin8816/gfriends">下载</a></p>
<h3 id="Renamer"><a href="#Renamer" class="headerlink" title="Renamer"></a>Renamer</h3><ul>
<li>字幕改名：<a target="_blank" rel="noopener" href="https://github.com/qwqcode/SubRenamer">https://github.com/qwqcode/SubRenamer</a></li>
<li>批量视频重命名：<a target="_blank" rel="noopener" href="http://www.den4b.com/download/renamer/installer">http://www.den4b.com/download/renamer/installer</a></li>
</ul>
<h2 id="风格与标签"><a href="#风格与标签" class="headerlink" title="风格与标签"></a>风格与标签</h2><p>虽然标签更适合给同类视频标注，但是jellyfin 的风格才能实际实现分类查找的这个功能。</p>
<h2 id="视频分级"><a href="#视频分级" class="headerlink" title="视频分级"></a>视频分级</h2><p><img src="https://pic.shaojiemike.top/img/20221127164057.png"></p>
<p><img src="https://pic.shaojiemike.top/img/20221127164743.png"></p>
<h3 id="电视分级"><a href="#电视分级" class="headerlink" title="电视分级"></a>电视分级</h3><table>
<thead>
<tr>
<th>符号简写</th>
<th>一般年龄(内容说明)</th>
<th>具体说明</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>TV-Y</td>
<td>2至6岁</td>
<td>适合所有年龄的儿童观看。此分级节目中表现的主题性元素是特别为了低年龄观众而设计</td>
<td></td>
</tr>
<tr>
<td>TV-Y7</td>
<td>为了7岁以上的儿童设计</td>
<td>“可能更适合已有能分辨虚构和现实发展性技巧的儿童。”[10]此分级节目中表现的主题性元素可能包含“喜剧性的暴力”，或不适合低于7岁儿童的内容。</td>
<td></td>
</tr>
<tr>
<td>TV-Y7-FV</td>
<td>包含了较多的“虚构暴力”</td>
<td>比起TV-Y7分级的其他节目有更多刺激性或打斗性的内容。</td>
<td></td>
</tr>
<tr>
<td>TV-G</td>
<td>普遍的适合所有年龄观众收看</td>
<td>此分级不表示该节目是特别为了儿童设计，大多数的家长可让较年幼的儿童独自观看该节目。</td>
<td></td>
</tr>
<tr>
<td>TV-PG</td>
<td>不适合8岁以下儿童观看</td>
<td>有轻度惊吓，轻度暴力，或轻度性暗示，但大部分内容适合儿童观看</td>
<td></td>
</tr>
<tr>
<td>TV-14</td>
<td>不适合年龄低于14岁儿童</td>
<td></td>
<td></td>
</tr>
<tr>
<td>TV-MA</td>
<td>为了成年观众而制作</td>
<td>强烈和频繁的性色情内容、激烈暴力，或两者皆有。</td>
<td></td>
</tr>
</tbody></table>
<h3 id="电影分级"><a href="#电影分级" class="headerlink" title="电影分级"></a>电影分级</h3><table>
<thead>
<tr>
<th>符号简写</th>
<th>一般年龄(内容说明)</th>
<th>具体说明</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>G（General Audiences，大众级）</td>
<td>大众级电影</td>
<td>电影中不含有任何的裸露、性场面，也极少存在暴力以及吸食不健康的“东西”的场面，G级电影就算是孩子也可以自己独自观看，无需家长陪同。</td>
<td>《疯狂原始人》</td>
</tr>
<tr>
<td>PG（Parental Guidance Suggested，建议家长指导）</td>
<td>普通级别的电影</td>
<td>电影中基本不存在裸露、性场面，在暴力和吸食不健康的东西方面也不会超过尺度，如果孩子观看的话，需要家长陪同最佳。</td>
<td>《少年派的奇幻漂流》</td>
</tr>
<tr>
<td>PG-13（Parents Strongly Cautioned，家长特别留意）</td>
<td>对13岁以下的孩子进行限制观看，对于13-17岁的孩子需要在家长的陪同下观看</td>
<td>有少量暴力镜头，粗鲁的暴力镜头则几乎没有，电影内容中可能出现部分裸露和脏话。</td>
<td>《泰塔尼克号》、《哈利波特》系列。</td>
</tr>
<tr>
<td>R（Restricted，限制级）</td>
<td>对于17岁以下的孩子必须由家长陪同</td>
<td>较多性场合、暴力以及吸食不健康东西并且还会混杂大量的脏话，对于17岁以下的孩子会造成误导，因此需要家长陪同观看。</td>
<td>《肖申克的救赎》、《逃离拉斯维加斯》</td>
</tr>
<tr>
<td>NC-17（Adults Only，只准成人观看）</td>
<td>17岁以下的孩子禁止观看</td>
<td>NC-17级电影中会有大量性场合镜头，也会有吸食不健康东西的镜头，以及出现大量暴力镜头和大量的脏话镜头，对于17岁以下的儿童应避免其观看。</td>
<td>《色戒》、《羞耻》</td>
</tr>
</tbody></table>
<p>特殊说明</p>
<ul>
<li>AO级（AdultsOnly，仅限成人）</li>
<li>RP,尚未评级,“可能含有不适合儿童的内容”。</li>
<li>NR是属于未经定级的电影(不是一个美国电影协会的官方评级。它通常用于限制发行和没有提交到美国电影协会做评级的独立电影或国外电影。)</li>
<li>UR, 属于未经定级,U是针对1968年以前的电影定的级。</li>
</ul>
<h2 id="远程访问"><a href="#远程访问" class="headerlink" title="远程访问"></a>远程访问</h2><p>映射到外网端口？？？现在只能开wireguard访问本地IP</p>
<p>To do</p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p><img src="https://pic.shaojiemike.top/img/20221126154621.png"></p>
<h3 id="该客户端与媒体不兼容，服务器未发送兼容的媒体格式。"><a href="#该客户端与媒体不兼容，服务器未发送兼容的媒体格式。" class="headerlink" title="该客户端与媒体不兼容，服务器未发送兼容的媒体格式。"></a>该客户端与媒体不兼容，服务器未发送兼容的媒体格式。</h3><p>Jellyfin mp4格式的文件。 启用硬件加速导致。</p>
<h3 id="mkv的ass字幕卡顿问题"><a href="#mkv的ass字幕卡顿问题" class="headerlink" title="mkv的ass字幕卡顿问题"></a>mkv的ass字幕卡顿问题</h3><p>每次服务器端转码烧录ASS字幕，都会疯狂读取视频文件，好像是全部读取才能获取ASS文件一样，有的长达几十秒客户端才开始播放（想想一部4K高码电影可有几十个G），我一度以为jellyfin挂了。我测试了好多视频文件，都是如此。</p>
<ul>
<li>建议将字幕封装成PGS格式</li>
<li>不用web，使用jerryfin客户端来解码？</li>
<li>或者是MP4格式，直接有字幕</li>
<li>或者手动挂载字幕文件，注意格式<img src="https://pic.shaojiemike.top/img/20221127222345.png"></li>
</ul>
<h3 id="字幕乱码问题"><a href="#字幕乱码问题" class="headerlink" title="字幕乱码问题"></a>字幕乱码问题</h3><ul>
<li>下载字体文件<a target="_blank" rel="noopener" href="https://echo.solo90.com/usr/uploads/msyh.woff2">微软雅黑</a><br><a target="_blank" rel="noopener" href="https://post.smzdm.com/p/a859320l/">https://post.smzdm.com/p/a859320l/</a></li>
<li>填写字体文件夹<img src="https://pic.shaojiemike.top/img/20221127225813.png"></li>
</ul>
<h3 id="视频和字幕改名"><a href="#视频和字幕改名" class="headerlink" title="视频和字幕改名"></a>视频和字幕改名</h3><p><a target="_blank" rel="noopener" href="https://github.com/qwqcode/SubRenamer">https://github.com/qwqcode/SubRenamer</a> 超级好用</p>
<h3 id="多集电影"><a href="#多集电影" class="headerlink" title="多集电影"></a>多集电影</h3><p>“可以把多集电影按照集数后缀命名为类似ssni-xxx-cd1.mp4m,ssni-xxx-cd2.mp4，abp-xxx-CD1.mp4的规则，只要含有-CDn.&#x2F;-cdn.类似命名规则，即可使用分集功能”</p>
<p>但是现在貌似更新完了需要“-cd1”格式了。</p>
<h2 id="常见影视库管理工具对比"><a href="#常见影视库管理工具对比" class="headerlink" title="常见影视库管理工具对比"></a>常见影视库管理工具对比</h2><p><a target="_blank" rel="noopener" href="https://post.smzdm.com/p/awk8zn62/">EMBY PLEX JELLYFIN</a></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><ul>
<li>自动识别、扫描、分类我的影视资源（有的最新剧集，是一周一周更新的，需要自动归档合并功能）</li>
<li>对我们的影视资源的封面进行刮削，生成海报强（有点小小的强迫症，完整的海报墙，就觉得很酷）</li>
<li>可以对我下载的影视的生成简介，方便看最新的简介</li>
<li>播放器的播放能力要强，可以支持硬解码，播放h.265的片源和杜比音效</li>
</ul>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://post.smzdm.com/p/awk8zn62/">https://post.smzdm.com/p/awk8zn62/</a></p>
<p>链接：<a target="_blank" rel="noopener" href="https://blog.scio.icu/index.php/archives/15/">https://blog.scio.icu/index.php/archives/15/</a></p>
<p><a target="_blank" rel="noopener" href="https://pockies.github.io/2020/01/09/av-data-capture-jellyfin-kodi/">https://pockies.github.io/2020/01/09/av-data-capture-jellyfin-kodi/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-11-04T02:06:18.000Z" title="11/4/2022, 2:06:18 AM">2022-11-04</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-20T07:26:00.163Z" title="11/20/2023, 7:26:00 AM">2023-11-20</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">7 minutes read (About 1023 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/11/04/Work/software/linux-apps/clashforlinux/">Clash for linux</a></p><div class="content"><h2 id="Clash的模式"><a href="#Clash的模式" class="headerlink" title="Clash的模式"></a>Clash的模式</h2><ul>
<li>系统代理模式：只代理<code>127.0.0.1:7890</code>上的数据</li>
<li>TUN代理模式：虚拟网卡，并接管所有的网络层的数据</li>
<li>舍弃的redir-host模式由于必须返回一个真实ip，因此必需发起dns请求，存在dns泄露</li>
<li>默认的fake-ip会对域名的DNS请求返回fake-ip，从而避免DNS泄露。然后根据域名分流将信包发送到对应的上游代理机器，把域名DNS解析工作留给上游机器。<ul>
<li>fake-ip模式，将fake-ip-filter设置为<code>+.*</code>便等价于redir-host模式</li>
</ul>
</li>
</ul>
<h2 id="配置文件解析"><a href="#配置文件解析" class="headerlink" title="配置文件解析"></a>配置文件解析</h2><p>参考<a target="_blank" rel="noopener" href="https://lancellc.gitbook.io/clash/clash-config-file/an-example-configuration-file">官方文档</a></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># RESTful web API listening address</span></span><br><span class="line"><span class="attr">external-controller:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:9090</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># DNS server settings</span></span><br><span class="line"><span class="comment"># This section is optional. When not present, the DNS server will be disabled.</span></span><br><span class="line"><span class="attr">dns:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">listen:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">:53</span></span><br><span class="line">  <span class="attr">ipv6:</span> <span class="literal">false</span> <span class="comment"># when the false, response to AAAA questions will be empty</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># These nameservers are used to resolve the DNS nameserver hostnames below.</span></span><br><span class="line">  <span class="comment"># 默认只支持ip</span></span><br><span class="line">  <span class="attr">default-nameserver:</span></span><br><span class="line">	<span class="bullet">-</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 对于下面的域名，fake-ip模式会返回真实ip</span></span><br><span class="line">  <span class="attr">fake-ip-filter:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;*.lan&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">localhost.ptlogin2.qq.com</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 支持 UDP, TCP, DoT, DoH. 和指定端口</span></span><br><span class="line">  <span class="comment"># 所有DNS请求都会不经过代理被转发到这些服务器，Clash会选择一个最快的返回结果</span></span><br><span class="line">  <span class="attr">nameserver:</span></span><br><span class="line">	<span class="bullet">-</span> <span class="string">https://223.5.5.5/dns-query</span> <span class="comment"># 阿里云</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://doh.pub/dns-query</span> <span class="comment">#腾讯云</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tls://dns.rubyfish.cn:853</span> <span class="comment"># DNS over TLS</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://1.1.1.1/dns-query</span> <span class="comment"># DNS over HTTPS</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">dhcp://en0</span> <span class="comment"># dns from dhcp</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 对于所有DNS请求，fallback和nameserver内的服务器都会同时查找</span></span><br><span class="line">  <span class="comment"># 如果DNS结果为非国内IP(GEOIP country is not `CN`)，会使用fallback内的服务器的结果</span></span><br><span class="line">  <span class="comment"># 因为nameserver内为国内服务器，对国外域名可能有DNS污染。fallback内是国外服务器，能防止国外域名被DNS污染</span></span><br><span class="line">  <span class="attr">fallback:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://162.159.36.1/dns-query</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://dns.google/dns-query</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tls://8.8.8.8:853</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># DNS污染攻击的对策</span></span><br><span class="line">  <span class="attr">fallback-filter:</span></span><br><span class="line">    <span class="attr">geoip:</span> <span class="literal">false</span> <span class="comment"># If geoip is true, when geoip matches geoip-code, clash will use nameserver results. Otherwise, Clash will only use fallback results.</span></span><br><span class="line">	<span class="comment"># geoip-code: CN    </span></span><br><span class="line">    <span class="attr">ipcidr:</span> <span class="comment"># IPs in these subnets will be considered polluted, when nameserver results match these ip, clash will use fallback results.</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">/8</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">10.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">/8</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">100.64</span><span class="number">.0</span><span class="number">.0</span><span class="string">/10</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">/8</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">169.254</span><span class="number">.0</span><span class="number">.0</span><span class="string">/16</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">172.16</span><span class="number">.0</span><span class="number">.0</span><span class="string">/12</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">192.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">/24</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">192.0</span><span class="number">.2</span><span class="number">.0</span><span class="string">/24</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">192.88</span><span class="number">.99</span><span class="number">.0</span><span class="string">/24</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">192.168</span><span class="number">.0</span><span class="number">.0</span><span class="string">/16</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">198.18</span><span class="number">.0</span><span class="number">.0</span><span class="string">/15</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">198.51</span><span class="number">.100</span><span class="number">.0</span><span class="string">/24</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">203.0</span><span class="number">.113</span><span class="number">.0</span><span class="string">/24</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">224.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">/4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">240.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">/4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">255.255</span><span class="number">.255</span><span class="number">.255</span><span class="string">/32</span></span><br><span class="line">    <span class="attr">domain:</span> <span class="comment">#Domains in these list will be considered polluted, when lookup these domains, clash will use fallback results.</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">+.google.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">+.facebook.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">+.youtube.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">+.githubusercontent.com</span></span><br></pre></td></tr></table></figure>
<p>代理机器Proxy，根据域名IP的分流说明Rules，请参考<a target="_blank" rel="noopener" href="https://lancellc.gitbook.io/clash/clash-config-file/rules/domain-based-rule">官方文档</a></p>
<h2 id="下载可执行文件"><a href="#下载可执行文件" class="headerlink" title="下载可执行文件"></a>下载可执行文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/Dreamacro/clash/releases/download/v1.11.8/clash-linux-amd64-v1.11.8.gz</span><br><span class="line">scp</span><br><span class="line">gunzip clash-linux-amd64-v1.11.8.gz</span><br><span class="line">chmod u+x clash-linux-amd64-v1.11.8</span><br></pre></td></tr></table></figure>

<p>Clash 运行时需要 <code>Country.mmdb</code> 文件，当第一次启动 Clash 时（使用 <code>./clash</code> 命令） 会自动下载（会下载至 <code>/home/XXX/.config/clash</code> 文件夹下）。自动下载可能会因网络原因较慢，可以访问该链接手动下载。</p>
<p><code>Country.mmdb</code> 文件利用 <code>GeoIP2</code> 服务能识别互联网用户的地点位置，以供规则分流时使用。</p>
<h2 id="根据订阅链接配置文件"><a href="#根据订阅链接配置文件" class="headerlink" title="根据订阅链接配置文件"></a>根据订阅链接配置文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.config/clash</span><br><span class="line">curl -o config.yaml &#x27;longURL&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="成功结果"><a href="#成功结果" class="headerlink" title="成功结果"></a>成功结果</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># shaojiemike @ node6 in ~/Download [10:22:54] C:130       </span><br><span class="line">$set_proxy                                            </span><br><span class="line"></span><br><span class="line"># shaojiemike @ node6 in ~/Download [10:22:57]       </span><br><span class="line">$ curl -v www.google.com </span><br><span class="line"></span><br><span class="line"># shaojiemike @ node6 in ~/Download [10:21:46]</span><br><span class="line">$ ./clash-linux-amd64-v1.11.8</span><br><span class="line">INFO[0000] Start initial compatible provider 🍃 Proxies</span><br><span class="line">INFO[0000] Start initial compatible provider ☁️ Others</span><br><span class="line">INFO[0000] Start initial compatible provider 🍂 Domestic</span><br><span class="line">INFO[0000] Start initial compatible provider ⭐️ Auto</span><br><span class="line">INFO[0000] Mixed(http+socks) proxy listening at: [::]:7890</span><br><span class="line">INFO[0000] RESTful API listening at: [::]:9090</span><br><span class="line">INFO[0000] DNS server listening at: [::]:5323</span><br><span class="line">INFO[0070] [TCP] 127.0.0.1:52664 --&gt; www.google.com:80 match DomainKeyword(google) using 🍃 Proxies[专线 日本 03]</span><br></pre></td></tr></table></figure>

<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="address-already-in-use"><a href="#address-already-in-use" class="headerlink" title="address already in use"></a>address already in use</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># shaojiemike @ node6 in ~/Download [10:14:25]</span><br><span class="line">$ ./clash-linux-amd64-v1.11.8</span><br><span class="line">INFO[0000] Start initial compatible provider ⭐️ Auto</span><br><span class="line">INFO[0000] Start initial compatible provider 🍃 Proxies</span><br><span class="line">INFO[0000] Start initial compatible provider ☁️ Others</span><br><span class="line">INFO[0000] Start initial compatible provider 🍂 Domestic</span><br><span class="line">INFO[0000] RESTful API listening at: [::]:9090</span><br><span class="line">INFO[0000] Mixed(http+socks) proxy listening at: [::]:7890</span><br><span class="line">ERRO[0000] Start DNS server error: listen udp 0.0.0.0:5353: bind: address already in use</span><br></pre></td></tr></table></figure>
<p>修改配置文件里的端口即可</p>
<h2 id="配置-systemd-服务"><a href="#配置-systemd-服务" class="headerlink" title="配置 systemd 服务"></a>配置 systemd 服务</h2><p>见参考文献</p>
<h2 id="图形化界面管理"><a href="#图形化界面管理" class="headerlink" title="图形化界面管理"></a>图形化界面管理</h2><h3 id="自带管理页面"><a href="#自带管理页面" class="headerlink" title="自带管理页面"></a>自带管理页面</h3><p> <a target="_blank" rel="noopener" href="http://clash.razord.top/#/proxies">http://clash.razord.top/#/proxies</a></p>
<p> 输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Host: node6.swangeese.fun</span><br><span class="line">Port: 9090</span><br><span class="line">Secret: 配置文件配置的 secret</span><br></pre></td></tr></table></figure>

<p>查看<code>config.yaml</code>,发现是空</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mixed-port: 7890                                      </span><br><span class="line">allow-lan: true                                           </span><br><span class="line">mode: rule                                                    </span><br><span class="line">log-level: info                                                     </span><br><span class="line">external-controller: &#x27;0.0.0.0:9090&#x27;                               </span><br><span class="line">secret: &#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://blog.iswiftai.com/posts/clash-linux/">https://blog.iswiftai.com/posts/clash-linux/</a></p>
<p><a target="_blank" rel="noopener" href="https://einverne.github.io/post/2021/03/linux-use-clash.html">https://einverne.github.io/post/2021/03/linux-use-clash.html</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-10-05T16:00:00.000Z" title="10/5/2022, 4:00:00 PM">2022-10-05</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-20T07:26:00.143Z" title="11/20/2023, 7:26:00 AM">2023-11-20</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">10 minutes read (About 1480 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/10/05/OutOfWork/3-homepage/background/PersonalWebsiteDomain/">PersonalWebsiteDomain</a></p><div class="content"><h2 id="Ubuntu-下Apache-域名绑定设置"><a href="#Ubuntu-下Apache-域名绑定设置" class="headerlink" title="Ubuntu 下Apache 域名绑定设置"></a>Ubuntu 下Apache 域名绑定设置</h2><h3 id="在-HuaWei-Cloud-购买域名"><a href="#在-HuaWei-Cloud-购买域名" class="headerlink" title="在 HuaWei Cloud 购买域名"></a>在 HuaWei Cloud 购买域名</h3><ol>
<li><p>购买 shaojiemike.top</p>
</li>
<li><p>自动在华为DNS服务器上进行DNS解析（ip与域名对应）</p>
</li>
<li><p>实名认证</p>
</li>
<li><p>网站报备</p>
</li>
<li><p>网站解析<br> 当您想在Internet上通过域名访问您的网站时，可以通过华为云的云解析服务为域名添加解析记录。</p>
<p> 例如，搭建一个网站服务器，采用IPv4格式的弹性IP地址。如果想要实现通过域名“example.com”及其子域名“<a href="http://www.example.com”访问该网站，需要配置如下解析记录：">www.example.com”访问该网站，需要配置如下解析记录：</a></p>
<pre><code> A：添加域名“example.com”到弹性IP地址的解析记录。
 A：添加子域名“www.example.com”到弹性IP地址的解析记录。
</code></pre>
</li>
<li><p>修改DNS服务器为华为<br><img src="https://pic.shaojiemike.top/img/20221105212832.png"><br>不要修改成域名解析的<br><img src="https://pic.shaojiemike.top/img/20221105212921.png"></p>
</li>
</ol>
<h2 id="DNS域名解析查看"><a href="#DNS域名解析查看" class="headerlink" title="DNS域名解析查看"></a>DNS域名解析查看</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># shaojiemike @ node6 in ~ [21:24:21]</span></span><br><span class="line">$ dig +trace shaojiemike.us.to</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.16.1-Ubuntu &lt;&lt;&gt;&gt; +trace shaojiemike.us.to</span><br><span class="line">;; global options: +cmd</span><br><span class="line">.                       184     IN      NS      f.root-servers.net.</span><br><span class="line">.                       184     IN      NS      h.root-servers.net.</span><br><span class="line">.                       184     IN      NS      c.root-servers.net.</span><br><span class="line">.                       184     IN      NS      m.root-servers.net.</span><br><span class="line">.                       184     IN      NS      g.root-servers.net.</span><br><span class="line">.                       184     IN      NS      j.root-servers.net.</span><br><span class="line">.                       184     IN      NS      a.root-servers.net.</span><br><span class="line">.                       184     IN      NS      i.root-servers.net.</span><br><span class="line">.                       184     IN      NS      l.root-servers.net.</span><br><span class="line">.                       184     IN      NS      k.root-servers.net.</span><br><span class="line">.                       184     IN      NS      d.root-servers.net.</span><br><span class="line">.                       184     IN      NS      e.root-servers.net.</span><br><span class="line">.                       184     IN      NS      b.root-servers.net.</span><br><span class="line">;; Received 262 bytes from 127.0.0.53<span class="comment">#53(127.0.0.53) in 0 ms</span></span><br><span class="line"></span><br><span class="line">to.                     172800  IN      NS      frankfurt.tonic.to.</span><br><span class="line">to.                     172800  IN      NS      singapore.tonic.to.</span><br><span class="line">to.                     172800  IN      NS      tonic.to.</span><br><span class="line">to.                     172800  IN      NS      newyork.tonic.to.</span><br><span class="line">to.                     172800  IN      NS      colo.tonic.to.</span><br><span class="line">to.                     172800  IN      NS      sydney.tonic.to.</span><br><span class="line">to.                     172800  IN      NS      helsinki.tonic.to.</span><br><span class="line">to.                     86400   IN      NSEC    today. NS RRSIG NSEC</span><br><span class="line">to.                     86400   IN      RRSIG   NSEC 8 1 86400 20221118050000 20221105040000 18733 . zYyPgXiUoIoPzZsXi8WD0aT0Ps7ajmQYA/blzyfNG6Pl1NdONShc/3T1 3p2rAfr2a7NI6SI+yeEyiRYeeI86RuNv1u4aAJD2QXZapKlogP+hveb/ SYztzsr70Ha6/7RQAqQqY+ctHOZXIzUMhpNxFneTXcJ2CVhQmGIYG0sa 0BmaDKH0kxFHtbJZvENMpo4WrE0KTNzFsYlHZQGZV0OQeU/MpcSkPt5I DefxNVBMqMS8lF0Wzg8ESwEDddE7WvMlCNlnBLE7LHk0ZdQGU5Qg/8Ot CpNKEjCoROXA7sA/CkrGEdhW3CZnJYOdQ6UcH2pDwYYVIOsE7L8QJV/r RC9/tA==</span><br><span class="line">;; Received 653 bytes from 199.7.83.42<span class="comment">#53(l.root-servers.net) in 60 ms</span></span><br><span class="line"></span><br><span class="line">us.to.                  86400   IN      NS      NS4.AFRAID.ORG.</span><br><span class="line">us.to.                  86400   IN      NS      NS3.AFRAID.ORG.</span><br><span class="line">us.to.                  86400   IN      NS      NS1.AFRAID.ORG.</span><br><span class="line">us.to.                  86400   IN      NS      NS2.AFRAID.ORG.</span><br><span class="line">;; Received 156 bytes from 95.216.159.42<span class="comment">#53(helsinki.tonic.to) in 272 ms</span></span><br><span class="line"></span><br><span class="line">us.to.                  3600    IN      SOA     ns1.afraid.org. dnsadmin.afraid.org. 2211050595 86400 7200 2419200 3600</span><br><span class="line">;; Received 133 bytes from 2001:1850:1:5:800::6b<span class="comment">#53(NS2.AFRAID.ORG) in 260 ms</span></span><br></pre></td></tr></table></figure>

<p>可以看到13个根DNS服务器到<code>to</code>子服务器再到<code>us.to</code>的解析过程。</p>
<h3 id="在-HuaWei-Cloud-配置域名解析"><a href="#在-HuaWei-Cloud-配置域名解析" class="headerlink" title="在 HuaWei Cloud 配置域名解析"></a>在 HuaWei Cloud 配置域名解析</h3><h4 id="为域名添加A记录集"><a href="#为域名添加A记录集" class="headerlink" title="为域名添加A记录集"></a>为域名添加A记录集</h4><p>在“公网域名”页面的域名列表的“域名”列，单击域名的名称“example.com”。<br>进入“解析记录”页面。</p>
<p>在页面右上角，单击“添加记录集”。<br>在“添加记录集”页面，根据界面提示为域名“example.com”设置A记录集参数。</p>
<p><img src="https://support.huaweicloud.com/qs-dns/zh-cn_image_0262937392.png" alt="解析"></p>
<h4 id="为子域名添加A记录集"><a href="#为子域名添加A记录集" class="headerlink" title="为子域名添加A记录集"></a>为子域名添加A记录集</h4><p>主机记录：设置为“www”，表示解析的域名为子域名“<a target="_blank" rel="noopener" href="http://www.example.com”./">www.example.com”。</a></p>
<p>测试域名解析是否生效</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">D:\OneDrive - mail.ustc.edu.cn\homepage&gt; nslookup shaojiemike.top ns1.huaweicloud-dns.org</span><br><span class="line">Server:  ecs-159-138-77-159.compute.hwclouds-dns.com</span><br><span class="line">Address:  159.138.77.159</span><br><span class="line"></span><br><span class="line">Name:    shaojiemike.top</span><br><span class="line">Address:  202.38.73.26</span><br></pre></td></tr></table></figure>

<p><img src="https://support.huaweicloud.com/qs-dns/zh-cn_image_0262938117.png" alt="解析2"></p>
<h3 id="ECS"><a href="#ECS" class="headerlink" title="ECS"></a>ECS</h3><p>云服务器Elastic Compute Service（ECS）是阿里云提供的一种基础云计算服务。它能帮助您快速的构建更稳定、安全的应用，提高运维效率，降低IT成本</p>
<h3 id="如何判断自己IP是内网IP还是外网IP"><a href="#如何判断自己IP是内网IP还是外网IP" class="headerlink" title="如何判断自己IP是内网IP还是外网IP"></a>如何判断自己IP是内网IP还是外网IP</h3><h4 id="局域网，内网IP"><a href="#局域网，内网IP" class="headerlink" title="局域网，内网IP"></a>局域网，内网IP</h4><ol>
<li>tcp&#x2F;ip协议中，专门保留了三个IP地址区域作为私有地址，其地址范围如下： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10.0.0.0/8：10.0.0.0～10.255.255.255</span><br><span class="line">172.16.0.0/12：172.16.0.0～172.31.255.255</span><br><span class="line">192.168.0.0/16：192.168.0.0～192.168.255.255</span><br></pre></td></tr></table></figure></li>
<li>一些宽带运营商尽管也使用了非私有地址分配给用户使用，但是由于路由设置的原因，Internet上的其他用户并不能访问到这些ip。</li>
</ol>
<p>有这么一种情况：拉的联通的带宽，分配的IP只能在联通内部访问，移动网络不能访问。这个IP最多只能算是“联通内的公网IP”，不是真的公网IP。</p>
<p>上面几部分IP都可称为内网IP</p>
<h4 id="动态公网IP"><a href="#动态公网IP" class="headerlink" title="动态公网IP"></a>动态公网IP</h4><p>貌似node5 与 node6 挂了网络通，是动态公网IP(chivier说的)</p>
<p>node5 ip: 202.38.73.26</p>
<p>IPv4封了许多端口(至少ssh的22端口是不行的)</p>
<p>IPv6是直接可以ssh访问的</p>
<h3 id="公网IP是IPv4-IPv6"><a href="#公网IP是IPv4-IPv6" class="headerlink" title="公网IP是IPv4&#x2F;IPv6"></a>公网IP是IPv4&#x2F;IPv6</h3><p>ipv4是32位地址，分成4段，每段之间都有”.”分开，而每段之间有8位，从0-255<br>最普遍看到的就是ipv4</p>
<p>ipv6是128位地址，每个数目等于4位（0-f）16位进制，4个一组，每段之间由“：”隔开，共有8段，其中如果有连续性的”0”<br>如fe80:0000:0000:0000:0000:0000:0000:de4f</p>
<h3 id="修改机器的DNS服务器"><a href="#修改机器的DNS服务器" class="headerlink" title="修改机器的DNS服务器"></a>修改机器的DNS服务器</h3><p>IPv4DNS服务器能根据IP修改，但是我不知道华为DNS服务器的IP。</p>
<p>ns1.huaweicloud-dns.com：中国大陆各区域DNS地址<br>ns1.huaweicloud-dns.cn：中国大陆各区域DNS地址<br>ns1.huaweicloud-dns.net：除中国大陆之外国家或地区DNS地址<br>ns1.huaweicloud-dns.org：除中国大陆之外国家或地区DNS地址</p>
<h2 id="Further-Study"><a href="#Further-Study" class="headerlink" title="Further Study"></a>Further Study</h2><p>动态公网IP，可以使用nat123动态域名解析解决公网IP不固定的问题</p>
<p>node6配置没用80端口，不能直接IP访问</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>还是不能直接访问shaojiemike.top(TTL为300,需要时间？)<br>第二天可以了。</p>
<h2 id="chivier-建议"><a href="#chivier-建议" class="headerlink" title="chivier 建议"></a>chivier 建议</h2><p><a target="_blank" rel="noopener" href="https://ngx.hk/2019/01/27/%E4%BD%BF%E7%94%A8acme-sh%E4%B8%8E%E9%98%BF%E9%87%8C%E4%BA%91dns%E7%AD%BE%E5%8F%91lets-encrypt%E7%9A%84%E5%85%8D%E8%B4%B9%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6.html">https://ngx.hk/2019/01/27/%E4%BD%BF%E7%94%A8acme-sh%E4%B8%8E%E9%98%BF%E9%87%8C%E4%BA%91dns%E7%AD%BE%E5%8F%91lets-encrypt%E7%9A%84%E5%85%8D%E8%B4%B9%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6.html</a></p>
<p>我用阿里的域名，用这个教程，把我的IP挂到阿里DNS上面去了</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://support.huaweicloud.com/qs-dns/dns_qs_0002.html">https://support.huaweicloud.com/qs-dns/dns_qs_0002.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/meitesiluyuan/article/details/58588216">https://blog.csdn.net/meitesiluyuan/article/details/58588216</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/bennny/article/details/86319768?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.baidujs&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.baidujs">https://blog.csdn.net/bennny/article/details/86319768?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.baidujs&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.baidujs</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/bennny/article/details/82988260">https://blog.csdn.net/bennny/article/details/82988260</a></p>
<p><a target="_blank" rel="noopener" href="https://www.nazhumi.com/">域名价格对比</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-09-08T12:01:51.000Z" title="9/8/2022, 12:01:51 PM">2022-09-08</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-20T07:26:00.159Z" title="11/20/2023, 7:26:00 AM">2023-11-20</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">3 minutes read (About 506 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/09/08/Work/network/0-basic/DNS/">DNS</a></p><div class="content"><h2 id="DNS污染"><a href="#DNS污染" class="headerlink" title="DNS污染"></a>DNS污染</h2><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p><img src="https://pic.shaojiemike.top/img/20220908200452.png"></p>
<h3 id="查看DNS地址"><a href="#查看DNS地址" class="headerlink" title="查看DNS地址"></a>查看DNS地址</h3><p>在<a target="_blank" rel="noopener" href="https://dnschecker.org/#A/api.themoviedb.org">DNS索引网站</a>查看域名的中国服务器IP地址</p>
<p>实际ping速度，修改win10的hosts文件在<code>C:\WINDOWS\system32\drivers\etc</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">ipconfig /all</span><br><span class="line"></span><br><span class="line">Ethernet adapter 以太网:</span><br><span class="line"></span><br><span class="line">   Connection-specific DNS Suffix  . : ustc.edu.cn</span><br><span class="line">   Description . . . . . . . . . . . : Realtek PCIe GbE Family Controller</span><br><span class="line">   Physical Address. . . . . . . . . : 00-2B-67-7D-A7-93</span><br><span class="line">   DHCP Enabled. . . . . . . . . . . : Yes</span><br><span class="line">   Autoconfiguration Enabled . . . . : Yes</span><br><span class="line">   IPv6 Address. . . . . . . . . . . : 2001:da8:d800:336:c9a6:8e7f:7035:cd(Preferred)</span><br><span class="line">   Link-local IPv6 Address . . . . . : fe80::c9a6:8e7f:7035:cd%5(Preferred)</span><br><span class="line">   IPv4 Address. . . . . . . . . . . : 202.38.78.133(Preferred)</span><br><span class="line">   Subnet Mask . . . . . . . . . . . : 255.255.255.0</span><br><span class="line">   Lease Obtained. . . . . . . . . . : 2022年9月3日 15:03:56</span><br><span class="line">   Lease Expires . . . . . . . . . . : 2022年9月11日 19:58:06</span><br><span class="line">   Default Gateway . . . . . . . . . : fe80::e683:26ff:fea3:e107%5</span><br><span class="line">                                       202.38.78.254</span><br><span class="line">   DHCP Server . . . . . . . . . . . : 202.38.64.7</span><br><span class="line">   DHCPv6 IAID . . . . . . . . . . . : 100674407</span><br><span class="line">   DHCPv6 Client DUID. . . . . . . . : 00-01-00-01-26-96-E5-7D-00-2B-67-7D-A7-93</span><br><span class="line">   DNS Servers . . . . . . . . . . . : 8.8.8.8</span><br><span class="line">   NetBIOS over Tcpip. . . . . . . . : Enabled</span><br></pre></td></tr></table></figure>
<p>ping 百度 B站没有问题</p>
<h3 id="浏览器F12"><a href="#浏览器F12" class="headerlink" title="浏览器F12"></a>浏览器F12</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Unchecked runtime.lastError: The message port closed before a response was received.</span><br><span class="line">Failed to load resource: net::ERR_PROXY_CONNECTION_FAILED</span><br><span class="line">Failed to load resource: net::ERR_CONNECTION_CLOSED</span><br><span class="line">Failed to load resource: net::ERR_CONNECTION_RESET</span><br></pre></td></tr></table></figure>
<h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><p>网络重置<img src="https://pic.shaojiemike.top/img/20220908204210.png"></p>
<h2 id="github-com无法访问"><a href="#github-com无法访问" class="headerlink" title="github.com无法访问"></a>github.com无法访问</h2><p>ping失败,原因是某些github关闭了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//Windows</span><br><span class="line">D:\PowerShell&gt; nslookup github.com 223.5.5.5</span><br><span class="line">Server:  public1.alidns.com</span><br><span class="line">Address:  223.5.5.5</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">Name:    github.com</span><br><span class="line">Address:  20.205.243.166</span><br></pre></td></tr></table></figure>
<p>最不济修改host文件，<a target="_blank" rel="noopener" href="https://ipaddress.com/website/github.com">https://ipaddress.com/website/github.com</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">\\Ubuntu</span><br><span class="line"># shaojiemike @ node5 in ~ [19:30:39]</span><br><span class="line">$ cat /run/systemd/resolve/resolv.conf</span><br><span class="line">nameserver 8.8.8.8</span><br><span class="line">nameserver 8.8.4.4</span><br><span class="line">nameserver 202.38.64.1</span><br><span class="line"></span><br><span class="line"># shaojiemike @ node5 in ~ [19:30:12]      </span><br><span class="line">$ cat /etc/resolv.conf     </span><br><span class="line">nameserver 127.0.0.53</span><br><span class="line">options edns0 trust-ad</span><br><span class="line"></span><br><span class="line"># shaojiemike @ node5 in ~ [19:30:16]</span><br><span class="line">$ nmcli device show eno0</span><br><span class="line">GENERAL.DEVICE:                         eno0</span><br><span class="line">GENERAL.TYPE:                           ethernet</span><br><span class="line">GENERAL.HWADDR:                         AC:1F:6B:8A:E4:BA</span><br><span class="line">GENERAL.MTU:                            1500</span><br><span class="line">GENERAL.STATE:                          10 (unmanaged)</span><br><span class="line">GENERAL.CONNECTION:                     --</span><br><span class="line">GENERAL.CON-PATH:                       --</span><br><span class="line">WIRED-PROPERTIES.CARRIER:               on</span><br><span class="line">IP4.ADDRESS[1]:                         202.38.73.217/24</span><br><span class="line">IP4.GATEWAY:                            --</span><br><span class="line">IP4.ROUTE[1]:                           dst = 0.0.0.0/0, nh = 202.38.73.254, mt = 0, table=1</span><br><span class="line">IP4.ROUTE[2]:                           dst = 202.38.73.0/24, nh = 0.0.0.0, mt = 0</span><br><span class="line">IP6.ADDRESS[1]:                         2001:da8:d800:730::217/64</span><br><span class="line">IP6.ADDRESS[2]:                         fe80::ae1f:6bff:fe8a:e4ba/64</span><br><span class="line">IP6.GATEWAY:                            2001:da8:d800:730::1</span><br><span class="line">IP6.ROUTE[1]:                           dst = 2001:da8:d800:112::23/128, nh = 2001:da8:d800:730::1, mt = 1024</span><br><span class="line">IP6.ROUTE[2]:                           dst = 2001:da8:d800:730::/64, nh = ::, mt = 256</span><br><span class="line">IP6.ROUTE[3]:                           dst = fe80::/64, nh = ::, mt = 256</span><br><span class="line">IP6.ROUTE[4]:                           dst = ::/0, nh = 2001:da8:d800:730::1, mt = 1024</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># shaojiemike @ node5 in ~ [19:41:53]</span><br><span class="line">$ dig www.baidu.com</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.16.1-Ubuntu &lt;&lt;&gt;&gt; www.baidu.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 47773</span><br><span class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 1</span><br><span class="line"></span><br><span class="line">;; OPT PSEUDOSECTION:</span><br><span class="line">; EDNS: version: 0, flags:; udp: 65494</span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;www.baidu.com.                 IN      A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">www.baidu.com.          604     IN      CNAME   www.a.shifen.com.</span><br><span class="line">www.a.shifen.com.       159     IN      A       14.215.177.39</span><br><span class="line">www.a.shifen.com.       159     IN      A       14.215.177.38</span><br><span class="line"></span><br><span class="line">;; Query time: 91 msec</span><br><span class="line">;; SERVER: 127.0.0.53#53(127.0.0.53)</span><br><span class="line">;; WHEN: Mon Oct 10 19:43:01 CST 2022</span><br><span class="line">;; MSG SIZE  rcvd: 101</span><br></pre></td></tr></table></figure>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><div id='refer-anchor'></div>
无

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-09-02T09:07:34.000Z" title="9/2/2022, 9:07:34 AM">2022-09-02</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-20T07:26:00.163Z" title="11/20/2023, 7:26:00 AM">2023-11-20</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">6 minutes read (About 825 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/09/02/Work/software/linux/ubuntu/">Ubuntu server reInstall</a></p><div class="content"><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ol>
<li>写U盘（见<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/dbe64ce09b74">网上教程</a>，注意备份U盘文件）</li>
<li>插U盘，开机前根据机器型号使用命令(F2，F4, F12或者Del)进入boit manager，选择从U盘boot<ol>
<li>改引导启动顺序，把U盘启动改到最前面<img src="https://pic.shaojiemike.top/img/20220902174441.png"></li>
</ol>
</li>
<li>根据提示安装ubuntu(服务器不用分区，默认就行，如果自己电脑双系统则需要根据内存设置分区)</li>
<li>设置root密码并进入root <code>sudo passwd root</code></li>
<li>配置实验室网络</li>
</ol>
<h3 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a>下载安装包</h3><p><a target="_blank" rel="noopener" href="https://ubuntu.com/download/server">官网下载</a></p>
<h2 id="重装系统怎么保留原本的磁盘文件"><a href="#重装系统怎么保留原本的磁盘文件" class="headerlink" title="重装系统怎么保留原本的磁盘文件"></a>重装系统怎么保留原本的磁盘文件</h2><p>只要在安装系统时分出一个&#x2F;home分区。你可以把Ubuntu的“&#x2F;”分区看为Windows的C盘，重装Ubuntu时只格式化“&#x2F;”分区，不格式化“&#x2F;home”，这样就可以保留“&#x2F;home”中的数据了。使用的时候就挂载就行</p>
<p>但是假如一开始没分区:</p>
<ol>
<li>可以插块新盘当作系统盘，系统安装好之后，把旧的文件系统挂载到新系统的某个目录下</li>
<li>从旧的文件系统里划出一块区域，安装新系统。<ol>
<li>在你要安装的目标磁盘中，通过删除卷和删除分区操作腾出一块未分配的磁盘空间作为安装区</li>
</ol>
</li>
</ol>
<h2 id="从已有分区中提取空间"><a href="#从已有分区中提取空间" class="headerlink" title="从已有分区中提取空间"></a>从已有分区中提取空间</h2><p>xfs类型不可以直接缩减，只扩不减。如果是ext2，ext3，ext4可以在线缩减，如果xfs盘要缩小就要删除后重新添加</p>
<p><a target="_blank" rel="noopener" href="https://www.ywbj.cc/?p=712">https://www.ywbj.cc/?p=712</a></p>
<h3 id="非系统根分区LVM缩容"><a href="#非系统根分区LVM缩容" class="headerlink" title="非系统根分区LVM缩容"></a>非系统根分区LVM缩容</h3><ol>
<li>取消挂载<br>系统根分区无法在线取消挂载，所以这时请勿对系统根分区执行任何缩容操作   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount /lv/ #取消挂载目录</span><br></pre></td></tr></table></figure></li>
<li>e2fsck检查修复磁盘完整性   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e2fsck -f /dev/vg0/lv0</span><br></pre></td></tr></table></figure></li>
<li>缩小系统文件空间，即<code>df -h</code>查看的空间<br>不取消挂载，这步会报错，注：一定先减文件系统，再减逻辑卷   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resize2fs /dev/vg0/lv0 10G</span><br></pre></td></tr></table></figure></li>
<li>缩小磁盘空间，即lsblk查看的空间<br>不执行上面的操作，直接执行这步，虽然成功，但是会操作数据丢失，系统无法启动。   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lvreduce -L 10G /dev/vg0/lv0</span><br></pre></td></tr></table></figure></li>
<li>重新挂载   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -a</span><br></pre></td></tr></table></figure>
最后查看lvs空间</li>
</ol>
<h3 id="系统根分区LVM缩容（救援模式）"><a href="#系统根分区LVM缩容（救援模式）" class="headerlink" title="系统根分区LVM缩容（救援模式）"></a>系统根分区LVM缩容（救援模式）</h3><p>正常启动系统进入救援模式 ：启动按shift键，出现选择系统界面，按e。找到以单词 linux 开头的行，并在该行的末尾添加以下内容（要到达末尾，只需按下 CTRL+e 或使用 END 键或左右箭头键）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemd.unit=rescue.target</span><br></pre></td></tr></table></figure>
<p>添加完成后，只需按下 <code>CTRL+x</code> 或 <code>F10</code> 即可继续启动救援模式。几秒钟后，你将以 root 用户身份进入救援模式（单用户模式）<br><img src="https://pic.shaojiemike.top/img/20220902182623.png"></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>暂无</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40018873/article/details/109537532">https://blog.csdn.net/weixin_40018873/article/details/109537532</a></p>
<p><a target="_blank" rel="noopener" href="https://www.ywbj.cc/?p=712">https://www.ywbj.cc/?p=712</a></p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/categories/Tutorials/page/5/">Previous</a></div><div class="pagination-next"><a href="/categories/Tutorials/page/7/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/categories/Tutorials/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/categories/Tutorials/page/5/">5</a></li><li><a class="pagination-link is-current" href="/categories/Tutorials/page/6/">6</a></li><li><a class="pagination-link" href="/categories/Tutorials/page/7/">7</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/categories/Tutorials/page/12/">12</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">𝘊𝘰𝘮𝘱𝘶𝘵𝘦𝘳 𝘈𝘳𝘤𝘩𝘪𝘵𝘦𝘤𝘵𝘶𝘳𝘦 &amp; 𝘏𝘗𝘊</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">347</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">27</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">472</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">118</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-19T10:15:31.000Z">2023-11-19</time></p><p class="title"><a href="/2023/11/19/Work/network/example/wireguardServer2Server/">Wireguard Server 2 Server in OpenWRT</a></p><p class="categories"><a href="/categories/network/">network</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-18T02:42:03.000Z">2023-11-18</time></p><p class="title"><a href="/2023/11/18/OutOfWork/4-devices/nas/DockerOnNas/">Docker On Nas</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-18T02:05:50.000Z">2023-11-18</time></p><p class="title"><a href="/2023/11/18/OutOfWork/4-devices/nas/migrateFromSynology2UgreenDX4600/">Migrate From Synology DS220J to UGREEN DX4600</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-17T08:03:41.000Z">2023-11-17</time></p><p class="title"><a href="/2023/11/17/OutOfWork/5-Music/PianoPiecePlayingPractice/">Piano Piece Playing Practice</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-16T10:49:12.000Z">2023-11-16</time></p><p class="title"><a href="/2023/11/16/Work/software/perf/IntelAdvisor/">Intel Advisor</a></p><p class="categories"><a href="/categories/Software/">Software</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">208</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">67</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">72</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2023 Shaojie Tan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>