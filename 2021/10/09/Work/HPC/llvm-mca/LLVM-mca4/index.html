<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>LLVM Mca ：with BHive (2019) - SHAOJIE&#039;S BOOK</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SHAOJIE&#039;S BOOK"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SHAOJIE&#039;S BOOK"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="BHive一种新的profiler，可以profile没有用户干预的内存访问的基本块。 基于这种profiler创建了BHive,来验证llvm-mca等模型。 BHive是用来评价llvm-mca这些模型的，实验基于各种收集来的一个基本块各种评价 I. INTRODUCTIONAutomatically Profiling Basic Blocks困难在于现有的 没有考虑 memory cras"><meta property="og:type" content="blog"><meta property="og:title" content="LLVM Mca ：with BHive (2019)"><meta property="og:url" content="http://icarus.shaojiemike.top/2021/10/09/Work/HPC/llvm-mca/LLVM-mca4/"><meta property="og:site_name" content="SHAOJIE&#039;S BOOK"><meta property="og:description" content="BHive一种新的profiler，可以profile没有用户干预的内存访问的基本块。 基于这种profiler创建了BHive,来验证llvm-mca等模型。 BHive是用来评价llvm-mca这些模型的，实验基于各种收集来的一个基本块各种评价 I. INTRODUCTIONAutomatically Profiling Basic Blocks困难在于现有的 没有考虑 memory cras"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211007210352.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210920154432.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210921190750.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211009165208.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211009165630.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211009173926.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211010154102.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211010155758.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211010162409.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211010163913.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211010164039.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211010164455.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211010164745.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211010165301.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20211010170051.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210920151028.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210920154432.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210920151258.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210920153113.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210921143255.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922150852.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922151143.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922185030.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922190632.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922191039.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922191252.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922191507.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922193149.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922192559.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922191801.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922191931.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922194738.png"><meta property="og:image" content="https://pic.shaojiemike.top/img/20210922195030.png"><meta property="article:published_time" content="2021-10-09T16:00:00.000Z"><meta property="article:modified_time" content="2023-12-12T04:30:47.275Z"><meta property="article:author" content="Shaojie Tan"><meta property="article:tag" content="paper"><meta property="article:tag" content="llvm"><meta property="article:tag" content="mca"><meta property="article:tag" content="fork"><meta property="article:tag" content="benchmark"><meta property="article:tag" content="nasm"><meta property="article:tag" content="div"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://pic.shaojiemike.top/img/20211007210352.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://icarus.shaojiemike.top/2021/10/09/Work/HPC/llvm-mca/LLVM-mca4/"},"headline":"LLVM Mca ：with BHive (2019)","image":["https://pic.shaojiemike.top/img/20211007210352.png","https://pic.shaojiemike.top/img/20210920154432.png","https://pic.shaojiemike.top/img/20210921190750.png","https://pic.shaojiemike.top/img/20211009165208.png","https://pic.shaojiemike.top/img/20211009165630.png","https://pic.shaojiemike.top/img/20211009173926.png","https://pic.shaojiemike.top/img/20211010154102.png","https://pic.shaojiemike.top/img/20211010155758.png","https://pic.shaojiemike.top/img/20211010162409.png","https://pic.shaojiemike.top/img/20211010163913.png","https://pic.shaojiemike.top/img/20211010164039.png","https://pic.shaojiemike.top/img/20211010164455.png","https://pic.shaojiemike.top/img/20211010164745.png","https://pic.shaojiemike.top/img/20211010165301.png","https://pic.shaojiemike.top/img/20211010170051.png","https://pic.shaojiemike.top/img/20210920151028.png","https://pic.shaojiemike.top/img/20210920154432.png","https://pic.shaojiemike.top/img/20210920151258.png","https://pic.shaojiemike.top/img/20210920153113.png","https://pic.shaojiemike.top/img/20210921143255.png","https://pic.shaojiemike.top/img/20210922150852.png","https://pic.shaojiemike.top/img/20210922151143.png","https://pic.shaojiemike.top/img/20210922185030.png","https://pic.shaojiemike.top/img/20210922190632.png","https://pic.shaojiemike.top/img/20210922191039.png","https://pic.shaojiemike.top/img/20210922191252.png","https://pic.shaojiemike.top/img/20210922191507.png","https://pic.shaojiemike.top/img/20210922193149.png","https://pic.shaojiemike.top/img/20210922192559.png","https://pic.shaojiemike.top/img/20210922191801.png","https://pic.shaojiemike.top/img/20210922191931.png","https://pic.shaojiemike.top/img/20210922194738.png","https://pic.shaojiemike.top/img/20210922195030.png"],"datePublished":"2021-10-09T16:00:00.000Z","dateModified":"2023-12-12T04:30:47.275Z","author":{"@type":"Person","name":"Shaojie Tan"},"publisher":{"@type":"Organization","name":"SHAOJIE'S BOOK","logo":{"@type":"ImageObject","url":"http://icarus.shaojiemike.top/img/logo.svg"}},"description":"BHive一种新的profiler，可以profile没有用户干预的内存访问的基本块。 基于这种profiler创建了BHive,来验证llvm-mca等模型。 BHive是用来评价llvm-mca这些模型的，实验基于各种收集来的一个基本块各种评价 I. INTRODUCTIONAutomatically Profiling Basic Blocks困难在于现有的 没有考虑 memory cras"}</script><link rel="canonical" href="http://icarus.shaojiemike.top/2021/10/09/Work/HPC/llvm-mca/LLVM-mca4/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.0.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-09T16:00:00.000Z" title="10/9/2021, 4:00:00 PM">2021-10-09</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-12-12T04:30:47.275Z" title="12/12/2023, 4:30:47 AM">2023-12-12</time></span><span class="level-item"><a class="link-muted" href="/categories/Tutorials/">Tutorials</a></span><span class="level-item">28 minutes read (About 4164 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">LLVM Mca ：with BHive (2019)</h1><div class="content"><h2 id="BHive"><a href="#BHive" class="headerlink" title="BHive"></a>BHive</h2><p>一种新的profiler，可以profile没有用户干预的内存访问的基本块。</p>
<p>基于这种profiler创建了BHive,来验证llvm-mca等模型。</p>
<p>BHive是用来评价llvm-mca这些模型的，实验基于各种收集来的<strong>一个基本块</strong>各种评价</p>
<h2 id="I-INTRODUCTION"><a href="#I-INTRODUCTION" class="headerlink" title="I. INTRODUCTION"></a>I. INTRODUCTION</h2><h3 id="Automatically-Profiling-Basic-Blocks"><a href="#Automatically-Profiling-Basic-Blocks" class="headerlink" title="Automatically Profiling Basic Blocks"></a>Automatically Profiling Basic Blocks</h3><p>困难在于现有的 没有考虑 memory crash ??? .默认命中L1 cache</p>
<p>A <strong>key technical challenge</strong> with collecting a large basic block dataset is that there is no existing approach to profile an arbitrary basic block that has been removed from its program<br>context.</p>
<p>(没懂？那为什么要removed from its program<br>context) 因为要把常用的应用拆成小例子来评判，这些模型的准确性。</p>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>运用隐含狄利克雷分布LDA,基于cpu资源的利用率，来cluster benchmark suite里的基本块</p>
<p>通过对各种类型最基本的代码块来进行profile，从而形成针对各种performance model的数据库。</p>
<p>现在已经有超过30万的基本块分析，来源于各种方向的应用，包括数值计算OpenBLAS,数据库SQLite,机器学习TensorFlow，密码学OpenSSL。</p>
<p>这么多的数据产生了一个用于评估performance model的新benchmark。</p>
<p>作者说<strong>performance modeling 研究的未来在于与其他先进技术的大规模定量比较</strong></p>
<h3 id="内存访问的处理"><a href="#内存访问的处理" class="headerlink" title="内存访问的处理"></a>内存访问的处理</h3><p>通过把虚拟页面映射到<strong>单个</strong>物理页面，来合法内存访问同时避免cache miss</p>
<h2 id="II-背景"><a href="#II-背景" class="headerlink" title="II. 背景"></a>II. 背景</h2><h3 id="Existing-Performance-Models"><a href="#Existing-Performance-Models" class="headerlink" title="Existing Performance Models"></a>Existing Performance Models</h3><p>有两种model</p>
<ol>
<li>产生可以详细描述指令何时发射和退休的可解释执行路径的微架构模拟器，附带吞吐量预测。</li>
<li>每条指令都有延迟、吞吐量查找表，相当于一个被寄存器分配器使用的额外开销估计器</li>
</ol>
<p>各种model, 写到另一篇里了</p>
<ol>
<li>IACA</li>
<li>llvm-mca</li>
<li>OSACA</li>
<li>Ithemal</li>
</ol>
<h3 id="Machine-Code-Profilers"><a href="#Machine-Code-Profilers" class="headerlink" title="Machine Code Profilers"></a>Machine Code Profilers</h3><ol>
<li>通过 Agner Fog’s script 测量真实的，有周期，cache miss 等等。<a target="_blank" rel="noopener" href="https://www.agner.org/optimize/testp.zip">https://www.agner.org/optimize/testp.zip</a></li>
<li>nanoBench也是。<a target="_blank" rel="noopener" href="https://github.com/andreas-abel/nanoBench">https://github.com/andreas-abel/nanoBench</a> 可以指定processor?和 kernel模式。</li>
<li><strong>Unrolling</strong><ol>
<li>测量吞吐量的基本方法就是展开一个基本块的代码多次，然后测重复多次的代码。把展开的基本块latency除以<code>unroll factor</code>(典型值是100)</li>
<li>目的：<ol>
<li>边缘化前几次warm up的latency值的影响。</li>
<li>减少收起数据的开销影响</li>
</ol>
</li>
<li><code>unroll factor</code>就是循环展开次数。</li>
</ol>
</li>
<li><strong>局限性</strong>是，必须人工给代码块，不能自动profile一堆任意的基本块来系统性验证。???</li>
</ol>
<h2 id="III-PROFILING-ARBITRARY-BASIC-BLOCKS"><a href="#III-PROFILING-ARBITRARY-BASIC-BLOCKS" class="headerlink" title="III.  PROFILING ARBITRARY BASIC BLOCKS"></a>III.  PROFILING ARBITRARY BASIC BLOCKS</h2><p>目标是在<strong>不需要手动干预</strong>的情况下分析任意基本块，以便测量的<strong>吞吐量</strong>与性能模型通常假定的<strong>定义和不变量</strong>相对应。关键的挑战是使这些基本块能够在不崩溃的情况下<strong>访问任意内存地址</strong>。</p>
<p>由于基本块只是正常程序的一部分，导致根本不能单独正常运行。BHive做的事情就是，让他正常运行。</p>
<h3 id="Handling-Arbitrary-Memory-Accesses"><a href="#Handling-Arbitrary-Memory-Accesses" class="headerlink" title="Handling Arbitrary Memory Accesses"></a>Handling Arbitrary Memory Accesses</h3><p><img src="https://pic.shaojiemike.top/img/20211007210352.png"><br>这个代码块只有执行代码分配在<code>0x4110a</code>时，才能正常运行</p>
<ol>
<li>Remapping Virtual Pages.<ol>
<li>一个基本块的所有虚拟内存页重新映射到一个物理页上，所以全部数据访问都命中L1。这样就可以执行97%的基本块。</li>
<li>步骤<ol>
<li>把原本虚拟页全部unmap<ol>
<li>这会导致除了包含基本块指令的页之外的全部的连续的内存访问出问题？？？</li>
<li>在子进程里运行展开的基本块指令。<ol>
<li>这时对每个unmap的虚拟页的访问都会出错，但是主进程一种监视着。一旦中断就重新映射出错地址，然后重新开始跑。</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>Memory Initialization<ol>
<li>初始化一个中等大小0x12345600的物理页，允许都虚拟页都映射</li>
</ol>
</li>
<li>Virtual page aliasing<ol>
<li>因为不同的虚拟页映射在同一个物理页的同一项导致memory dependences，要等待</li>
<li><strong>剔除</strong>6.28%的基本块</li>
<li>可以通过增大物理页，来减小发生的概率。</li>
</ol>
</li>
</ol>
<h3 id="Overall-Profiling-Workflow"><a href="#Overall-Profiling-Workflow" class="headerlink" title="Overall Profiling Workflow"></a>Overall Profiling Workflow</h3><p>通过重复运行基本块来计算吞吐量</p>
<ol>
<li>Raw Measurement<ol>
<li>先从基本块里，产生不会memory crash的可执行部分。</li>
<li>unroll factor的选取。It uses 100 and 200 as the unroll factors for basic blocks <strong>smaller than 100 bytes</strong>; 50 and 100 for basic blocks <strong>between 100 bytes and 200 bytes</strong>; and finally 16 and 32 for basic blocks <strong>larger than 200 bytes</strong></li>
</ol>
</li>
<li>Filtering<ol>
<li>筛选执行代码满足理想化模型的执行结果，比如命中L1cache</li>
<li>L1 Cache Misses<ol>
<li>工具可以用硬件计数器监控指令和数据cache misses。拒绝所有cache miss的情况。</li>
</ol>
</li>
<li>Unaligned Loads<ol>
<li>不连续的访存会很慢，解决方法就是去除所有有不连续的访存的。大约删除了0.18%的基本块</li>
</ol>
</li>
<li>Subnormal Floating Point<ol>
<li>一些特殊的浮点数计算会比正常的浮点数计算慢20倍，去除了与MXCSR寄存器有关的0.1%的基本块。</li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/8341395/what-is-a-subnormal-floating-point-number">https://stackoverflow.com/questions/8341395/what-is-a-subnormal-floating-point-number</a></li>
</ol>
</li>
<li>Context Switches<ol>
<li>上下文切换(英语：context switch)，又称环境切换，电脑术语，是一个存储和重建CPU的状态 (内文)，因此令多个进程(process)可以分享单一CPU资源的计算过程。要切换CPU上的进程时，必需先行存储目前进程的状态，再将欲运行的进程之状态读回CPU中。</li>
</ol>
</li>
<li>可接受的评估公式 10%的误差？？？</li>
</ol>
</li>
<li>Throughput Calculation<ol>
<li>如果通过了基本块的筛选，用有记录的最小延迟计算吞吐量<img src="https://pic.shaojiemike.top/img/20210920154432.png"></li>
</ol>
</li>
<li>Environment Variance<ol>
<li>由于环境的影响，导致结果有个稳定的偏移。至少执行5次，展开16次的基本块。取最小的5次作为结果。</li>
</ol>
</li>
</ol>
<h3 id="Portability-to-Other-Architectures"><a href="#Portability-to-Other-Architectures" class="headerlink" title="Portability to Other Architectures"></a>Portability to Other Architectures</h3><p>只要架构满足以下几点要求</p>
<ol>
<li>有将多个虚拟页面映射到几个物理页面的API。map<br>multiple virtual pages to a few physical pages <ol>
<li><strong>without</strong> incurring a performance <strong>penalty</strong> due to unnecessary cache invalidation. We therefore require that the target processor has a **physically tagged data cache(VIPT)**？？？</li>
<li>we additionally require that the page size is small enough so the indexing bits are<br>not affected by address translation.</li>
</ol>
</li>
<li>detecting cache misses, </li>
<li>and detecting or disabling floating-point underflow.</li>
</ol>
<h2 id="IV-BASIC-BLOCK-DATASET"><a href="#IV-BASIC-BLOCK-DATASET" class="headerlink" title="IV. BASIC BLOCK DATASET"></a>IV. BASIC BLOCK DATASET</h2><p><img src="https://pic.shaojiemike.top/img/20210921190750.png"></p>
<p>应用的选择</p>
<ol>
<li>尽可能还原现实生活的各个方面，</li>
<li>而且是用户的典型用法。</li>
<li>Clang&#x2F;LLVM (compiler), Redis (inmemory database), SQLite (database), and Gzip 是用高级语言C或者C++编写的，算法和数据结构有复杂的设计。</li>
<li>OpenSSL (cryptography), OpenBLAS , Eigen (scientific computing),TensorFlow (machine learning) 代表的是核心循环是手动汇编优化过的高性能库。<ol>
<li>其中Embree是 用Intel ispc (a data-parallel language)编写的。</li>
</ol>
</li>
</ol>
<p>We compiled all applications with the <strong>highest optimization</strong> settings defined by their build systems. 如果可以用上了AVX2。</p>
<p>使用DynamoRIO动态分析来提炼基本块。可以实现在运行时记录每个运行的基本块。我们采用动态分析，而不是静态反汇编。因为静态反汇编无法区别padding bytes from instructions。???</p>
<p>应用的例子除了FFmpeg and Gzip都是选择的官方的benchmark。<br>Eigen 采用的是 two sparse linear algebra workloads: sparse matrix-matrix multiplication (SpMM) and sparse matrix-vector multiplication (SpMV).</p>
<h2 id="V-BASIC-BLOCK-CLUSTERING"><a href="#V-BASIC-BLOCK-CLUSTERING" class="headerlink" title="V. BASIC BLOCK CLUSTERING"></a>V. BASIC BLOCK CLUSTERING</h2><p>一些基本块比其他的更难建模，???(建什么模，VI-B说明了什么)有内存依赖的基本块预测错误率更高。</p>
<p>采用了一种技术???(是应用在提取上) 基于处理器的使用聚类基本块。<br>这个技术有助于性能模型的设计和使用者<strong>更细粒度了解</strong>performance model,让他们能集中以后新添加的资源在有困难的那一类基本块。</p>
<ol>
<li>Methodology<ol>
<li>具体方法<ol>
<li>找到每个基本块的硬件使用率的表示 port-mapping representation</li>
<li>根据其聚类</li>
</ol>
</li>
<li>对每条指令结合port使用<ol>
<li>运用 Abel and Reineke A. Abel and J. Reineke, “uops.info: Characterizing latency, throughput, and port usage of instructions on intel microarchitectures,” in ASPLOS, 2019的结果 ???</li>
<li>例如???<ol>
<li><code>xor %rax, %rbx</code> in Haswell is <code>&#123;p0156 → 1&#125;</code></li>
</ol>
</li>
</ol>
</li>
<li>使用<strong>Latent Dirichlet Allocation</strong> (LDA)来构建topic model 模型(python 训练模型)<ol>
<li>在语言处理上的应用是基于统计词频</li>
<li>在实际运用的时候，微指令操作会根据使用的port而有小不同。<ol>
<li>topics是分类的类别,6类</li>
<li>documents是基本块</li>
<li>α &#x3D; 1&#x2F;6 and β &#x3D; 1&#x2F;13.</li>
</ol>
</li>
<li>为了推断每个微指令操作所属的类别，我们使用了SciKit Learn transform对于LDA的随机变化推断的默认实现</li>
<li>计算每个基本块的最有可能的类别作为其分类结果</li>
</ol>
</li>
</ol>
</li>
<li>Results<ol>
<li>LDA将结果聚类后，根据基本块的内容，手动进行注名以及说明<img src="https://pic.shaojiemike.top/img/20211009165208.png"></li>
<li>example<img src="https://pic.shaojiemike.top/img/20211009165630.png"></li>
<li>根据运行时频率确定其权重， 基于sample-based profiler??? (A portable sampling-based profiler for java virtual machines,)确定。</li>
<li>高性能的库如预期一样，向量化的基本块占比较多。</li>
<li>其余的无向量化的较多。OpenSSL and Gzip有许多位操作的。</li>
</ol>
</li>
<li>Case Study on Data-Center Applications<ol>
<li>目的：作为测试例子，看这个聚类方法能不能找得到隐藏的热点、工作负载</li>
<li>Methodology<ol>
<li>第一步：首先将其基本块分成之前的几类，还是使用LDA</li>
<li>第二步：分类结果标注</li>
<li>第三步：比较聚类结果的perplexity值???</li>
<li>？？？有没有结合google的应用<img src="https://pic.shaojiemike.top/img/20211009173926.png"></li>
</ol>
</li>
<li>Results<ol>
<li>添加新应用后，该值只是略微增长。说明模型的代表性好。???</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="VI-PERFORMANCE-MODEL-EVALUATION"><a href="#VI-PERFORMANCE-MODEL-EVALUATION" class="headerlink" title="VI. PERFORMANCE MODEL EVALUATION"></a>VI. PERFORMANCE MODEL EVALUATION</h2><p>在3种Intel架构上验证4种已有的性能模型</p>
<ol>
<li>Methodology<ol>
<li>说明各个测试软件的版本。</li>
<li>Dataset<ol>
<li>basic block dataset discussed in Section IV</li>
</ol>
</li>
<li>Platform<ol>
<li>balabala 3种架构的 Intel cpus</li>
</ol>
</li>
<li>Evaluation Metrics<ol>
<li>测量吞吐量t和预测吞吐量t’$$err(t,t’)&#x3D;|\frac{t-t’}{t}|$$</li>
<li>不以预测精度，而是以预测结果的相对关系为评分标准。</li>
</ol>
</li>
<li>额外能评估每个模型如何保持基本块吞吐量的顺序。使用Kendall’s tau系数(越大效果越好)，而不是相对误差。测量的原因是使用者可能关心的不是绝对的数值精度，而是相对关系的准确率。比如优化软件的时候关心的不是具体耗时，而是哪个优化策略耗时更短。</li>
</ol>
</li>
<li>Results<ol>
<li><img src="https://pic.shaojiemike.top/img/20211010154102.png"></li>
<li><strong>IACA</strong> 第二好的，在向量化类模拟的最好</li>
<li><strong>llvm-mca</strong> 最差的，尤其是和loads有关时。</li>
<li><strong>Ithemal</strong>  除了向量基本块都是最好的。在memory dependence (Ld&#x2F;St)尤其好，但是向量基本块不好，可能与训练集没有向量基本块有关。</li>
<li><strong>OSACA</strong> 第三。由于还在开发中，使用还遇到5个bug。在遇到一些不认识的指令的时候，会直接按照nops空指令处理。</li>
</ol>
</li>
<li>Examples of Modeling Bugs<img src="https://pic.shaojiemike.top/img/20211010155758.png"><ol>
<li>最后一个例子是由于模型<strong>错误调度微指令</strong>导致的</li>
<li>Modeling bug due to unsigned division<ol>
<li>例子是 a 64-bit by 32-bit unsigned division.<img src="https://pic.shaojiemike.top/img/20211010162409.png"><img src="https://pic.shaojiemike.top/img/20211010163913.png"><img src="https://pic.shaojiemike.top/img/20211010164039.png"><img src="https://pic.shaojiemike.top/img/20211010164455.png"></li>
<li>???<img src="https://pic.shaojiemike.top/img/20211010164745.png"></li>
</ol>
</li>
<li>Modeling bug due to zero-idioms<ol>
<li><img src="https://pic.shaojiemike.top/img/20211010165301.png"></li>
<li>对这种结果固定的特殊指令的快速处理。</li>
</ol>
</li>
<li>Modeling bug due to mis-scheduling<ol>
<li>对于数据依赖，上下指令的寄存器有写后读。</li>
<li>Ithemal’s and OSACA忽略了该依赖</li>
<li><img src="https://pic.shaojiemike.top/img/20211010170051.png"></li>
<li>llvm-mca 没有注意到(%rcx)是memory，没有依赖可以提前发射。</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="CONCLUSION"><a href="#CONCLUSION" class="headerlink" title="CONCLUSION"></a>CONCLUSION</h2><p>现有的静态分析器对<strong>内存依赖</strong>和<strong>向量化块</strong>的建模还有困难。</p>
<h2 id="github代码说明"><a href="#github代码说明" class="headerlink" title="github代码说明"></a>github代码说明</h2><ol>
<li><code>benchmark/sources</code>下是各种软件的各个部分的16进制基本代码块和其出现概率，用csv格式(逗号分隔值 (Comma-separated values))存储</li>
<li><code>benchmark/throughput</code>是在各种架构下的各基本块的测量吞吐量，单位cycles per hundred-iterations.<br><img src="https://pic.shaojiemike.top/img/20210920151028.png"><img src="https://pic.shaojiemike.top/img/20210920154432.png"></li>
<li><code>benchmark/disasm</code>可以把16进制代码通过<code>nasm</code>变成汇编，<img src="https://pic.shaojiemike.top/img/20210920151258.png"></li>
<li><code>timing-harness</code><img src="https://pic.shaojiemike.top/img/20210920153113.png"><br><img src="https://pic.shaojiemike.top/img/20210921143255.png"><br>吞吐量的计算(猜的)Skylake microarchitecture$$\frac{6632-1030}{2333-100}*100&#x3D;250.8 (cyc&#x2F;hundred\ iters)$$</li>
</ol>
<h2 id="BHive-被质疑的局限性"><a href="#BHive-被质疑的局限性" class="headerlink" title="BHive 被质疑的局限性"></a>BHive 被质疑的局限性</h2><p>uops 的文章， Accurate Throughput Prediction of Basic Blocks on Recent Intel Microarchitectures</p>
<p>4.2 Extending BHive</p>
<h2 id="BHive-运行逻辑"><a href="#BHive-运行逻辑" class="headerlink" title="BHive 运行逻辑"></a>BHive 运行逻辑</h2><ol>
<li>读入16进制代码和循环次数</li>
<li><code>hhex2bin</code>转换为二进制</li>
<li><code>create_shm_fd</code><img src="https://pic.shaojiemike.top/img/20210922150852.png"><img src="https://pic.shaojiemike.top/img/20210922151143.png"><ol>
<li><p><code>shm_open, shm_unlink</code>creates and opens a new, or opens or unlink an existing, POSIX shared memory object. <code>O_RDWR</code> Open the object for read-write access.<code>O_CREAT</code>  the shared memory object if it does not exist. <code>777</code>是类似文件读写执行组权限的东西 On success, shm_open() <code>returns</code> a file descriptor (a nonnegative integer)</p>
</li>
<li><p><code>POSIX</code>可移植操作系统接口The Portable Operating System Interface 是IEEE为要在各种UNIX操作系统上运行软件，而定义API的一系列互相关联的标准的总称。</p>
</li>
<li><p><code>ftruncate</code> — truncate截短 a file to a specified length</p>
</li>
<li><p>#define SIZE_OF_HARNESS_MEM (4096 * 3)</p>
</li>
</ol>
</li>
<li><code>measure</code>开始测量<ol>
<li>int fds[2] ???</li>
<li><code>pipe</code>用于创建pipe,用来<strong>进程间</strong>通信的<strong>单向</strong>数据通路，传入变量用来返回引用自pipe末端的文件描述符file descriptors。<strong>第一个</strong>指向the read end of the pipe，<strong>第二个</strong>指向the write end of the pipe</li>
<li><code>mmap(void *addr, size_t length, int prot, int flags,int fd, off_t offset); munmap(void *addr, size_t length);</code>- map or unmap files or devices into memory 在调用进程的虚拟地址空间里create a new mapping.</li>
<li>fork()产生子进程<ol>
<li>fork()原理详解<ol>
<li>复制之前的一模一样。</li>
<li>fork() returns a zero to the newly created child process.</li>
<li>fork() returns a positive value, the process ID of the child process, to the parent.</li>
</ol>
</li>
<li>父进程<ol>
<li>#define OFFSET_TO_COUNTERS 32</li>
<li>为什么声明一个偏移地址指针???<ol>
<li>struct pmc_counters 由5个uint64_t组成。 uint64 will always take 8 bytes。一个结构体40bytes</li>
</ol>
</li>
<li><code>attach_to_child(pid, fds[1]);</code> pid是子进程pid<ol>
<li><code>ptrace(enum __ptrace_request request, pid_t pid,void *addr, void *data)</code> - process trace 提供一种进程tracer跟踪控制另一个进程tracee的方法，可以修改被控制者的memory and registers.<ol>
<li><code>PTRACE_SEIZE</code> Attach to the process specified in pid, making it a tracee of the calling process.  Unlike PTRACE_ATTACH, PTRACE_SEIZE does <strong>not</strong> stop the process</li>
</ol>
</li>
<li>子进程从fds[0]里读到x里，父进程把x的值写入 fds[1] ???</li>
</ol>
</li>
<li>check Performance Monitoring Counters (PMCs) supports<ol>
<li><code>rdpmc_open_attr</code> initialize a raw ring 3 ReaDable PerforMance Counter</li>
</ol>
</li>
<li>last_failing_inst 和 mapping_done</li>
<li>To kill child<ol>
<li>#define MAX_FAULTS 1024 # 子进程产生的错误需要解决？</li>
<li><code>wait</code>挂起当前线程，直到有一个children结束，返回其PID</li>
<li><code>WIFEXITED</code>Wait_IF_EXITED 判断是否正常结束<img src="https://pic.shaojiemike.top/img/20210922185030.png"></li>
<li>如果错误打印出错信号(eg.11)指令指针寄存器RIP,指针寄存器RSP<img src="https://pic.shaojiemike.top/img/20210922190632.png"><img src="https://pic.shaojiemike.top/img/20210922191039.png"><img src="https://pic.shaojiemike.top/img/20210922191252.png"></li>
<li>函数是用汇编写的就离谱<img src="https://pic.shaojiemike.top/img/20210922191507.png"><img src="https://pic.shaojiemike.top/img/20210922193149.png"><img src="https://pic.shaojiemike.top/img/20210922192559.png"><img src="https://pic.shaojiemike.top/img/20210922191801.png"><img src="https://pic.shaojiemike.top/img/20210922191931.png">what is aux mem?</li>
<li>修改出错地方的寄存器，重新运行<code>PTRACE_CONT</code> Restart the stopped tracee process</li>
<li>最多执行MAX_FAULTS次</li>
</ol>
</li>
<li>最后父进程杀死子进程</li>
</ol>
</li>
<li>子进程<ol>
<li>父进程测试是否支持PMCs,子进程使用<img src="https://pic.shaojiemike.top/img/20210922194738.png"><img src="https://pic.shaojiemike.top/img/20210922195030.png"></li>
<li>harness.c ：277</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/from-zero/p/13750852.html">https://www.cnblogs.com/from-zero/p/13750852.html</a></p>
<h2 id="需要进一步的研究学习"><a href="#需要进一步的研究学习" class="headerlink" title="需要进一步的研究学习"></a>需要进一步的研究学习</h2><p>暂无</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li>time 怎么算的the latency of the basic block？为什么打印15个呢？</li>
<li>还有中间的错误是怎么回事?</li>
<li>论文里的误差怎么算的？<ol>
<li>BHive整合了几个软件（整合了什么呢），应该是真实测量了得出真实吞吐量？还是也是模拟的？</li>
<li>和uops比怎么样</li>
</ol>
</li>
<li>哪个数据是准确的，是BHive模拟的，还是真实测量的。<ol>
<li>通过 Agner Fog’s script 测量真实的，有周期，cache miss 等等。<a target="_blank" rel="noopener" href="https://www.agner.org/optimize/testp.zip">https://www.agner.org/optimize/testp.zip</a></li>
<li>nanoBench也是。<a target="_blank" rel="noopener" href="https://github.com/andreas-abel/nanoBench">https://github.com/andreas-abel/nanoBench</a> 可以指定processor?和 kernel模式。</li>
<li>局限性是，必须人工给代码块，不能自动profile一堆任意的基本块来系统性验证。???</li>
</ol>
</li>
<li>BHvie的代码实现，移植到鲲鹏，然后根据PMU调准。</li>
</ol>
<p>问题是x86的二进制或者汇编不能变成aarm64的二进制或者汇编。</p>
<h2 id="开题缘由、总结、反思、吐槽"><a href="#开题缘由、总结、反思、吐槽" class="headerlink" title="开题缘由、总结、反思、吐槽~~"></a>开题缘由、总结、反思、吐槽~~</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://github.com/ithemal/bhive">https://github.com/ithemal/bhive</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>LLVM Mca ：with BHive (2019)</p><p><a href="http://icarus.shaojiemike.top/2021/10/09/Work/HPC/llvm-mca/LLVM-mca4/">http://icarus.shaojiemike.top/2021/10/09/Work/HPC/llvm-mca/LLVM-mca4/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Shaojie Tan</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2021-10-09</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2023-12-12</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/paper/">paper</a><a class="link-muted mr-2" rel="tag" href="/tags/llvm/">llvm</a><a class="link-muted mr-2" rel="tag" href="/tags/mca/">mca</a><a class="link-muted mr-2" rel="tag" href="/tags/fork/">fork</a><a class="link-muted mr-2" rel="tag" href="/tags/benchmark/">benchmark</a><a class="link-muted mr-2" rel="tag" href="/tags/nasm/">nasm</a><a class="link-muted mr-2" rel="tag" href="/tags/div/">div</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>Afdian.net</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/" alt="Alipay"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/10/10/Work/HPC/llvm-mca/LLVM-mca6/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">uops.info: Characterizing Latency, Throughput, and Port Usage of Instructions on Intel Microarchitectures (2019)</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/10/06/Work/hardware/HDMI_DP/"><span class="level-item">HDMI</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="Shaojie Tan"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shaojie Tan</p><p class="is-size-6 is-block">𝘊𝘰𝘮𝘱𝘶𝘵𝘦𝘳 𝘈𝘳𝘤𝘩𝘪𝘵𝘦𝘤𝘵𝘶𝘳𝘦 &amp; 𝘏𝘗𝘊</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Anhui, Hefei, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">361</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">29</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">481</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kirrito-k423" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kirrito-k423"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithms/"><span class="level-start"><span class="level-item">Algorithms</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile" href="/categories/Artificial-Intelligence/"><span class="level-start"><span class="level-item">Artificial Intelligence</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Databases/"><span class="level-start"><span class="level-item">Databases</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/HPC/"><span class="level-start"><span class="level-item">HPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/Operating-system/"><span class="level-start"><span class="level-item">Operating system</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/Software/"><span class="level-start"><span class="level-item">Software</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tips/"><span class="level-start"><span class="level-item">Tips</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Treasure/"><span class="level-start"><span class="level-item">Treasure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tutorials/"><span class="level-start"><span class="level-item">Tutorials</span></span><span class="level-end"><span class="level-item tag">118</span></span></a></li><li><a class="level is-mobile" href="/categories/Values/"><span class="level-start"><span class="level-item">Values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/architecture/"><span class="level-start"><span class="level-item">architecture</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/diary/"><span class="level-start"><span class="level-item">diary</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/english/"><span class="level-start"><span class="level-item">english</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/hardware/"><span class="level-start"><span class="level-item">hardware</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/operating-system/"><span class="level-start"><span class="level-item">operating system</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/security/"><span class="level-start"><span class="level-item">security</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/software/"><span class="level-start"><span class="level-item">software</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/thinking/"><span class="level-start"><span class="level-item">thinking</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/thinking/OOW/"><span class="level-start"><span class="level-item">OOW</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tips/"><span class="level-start"><span class="level-item">tips</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/toLearn/"><span class="level-start"><span class="level-item">toLearn</span></span><span class="level-end"><span class="level-item tag">51</span></span></a></li><li><a class="level is-mobile" href="/categories/values/"><span class="level-start"><span class="level-item">values</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://ibug.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ibugs</span></span><span class="level-right"><span class="level-item tag">ibug.io</span></span></a></li><li><a class="level is-mobile" href="https://jia.je/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">jiegec</span></span><span class="level-right"><span class="level-item tag">jia.je</span></span></a></li><li><a class="level is-mobile" href="https://leimao.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">leimao</span></span><span class="level-right"><span class="level-item tag">leimao.github.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-08T13:13:26.000Z">2023-12-08</time></p><p class="title"><a href="/2023/12/08/OutOfWork/5-VideoEntertainment/CalibreAndItsPuginsForEhentaiBooks/">Calibre and its Pugins for e-hentai Books</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-07T12:34:56.000Z">2023-12-07</time></p><p class="title"><a href="/2023/12/07/OutOfWork/3-homepage/blogWebsiteBuilderOrSSG/dokuwiki/">Dokuwiki: </a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-06T08:10:02.000Z">2023-12-06</time></p><p class="title"><a href="/2023/12/06/OutOfWork/4-devices/nas/UgreenNas/">Ugreen Nas</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-03T09:31:21.000Z">2023-12-03</time></p><p class="title"><a href="/2023/12/03/OutOfWork/3-homepage/deployment/webDesign4customizeMarkdownGrammarInSSG/">Web Design 4 : Customize Markdown Grammar In SSG</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-30T21:48:21.000Z">2023-11-30</time></p><p class="title"><a href="/2023/11/30/OutOfWork/3-homepage/deployment/webDesign3FutureFeatures/">Web Design 3 : Future Features</a></p><p class="categories"><a href="/categories/OOW/">OOW</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">222</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">67</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">72</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/5G/"><span class="tag">5G</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/64bits-vs-32bits/"><span class="tag">64bits vs 32bits</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMAT/"><span class="tag">AMAT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AMD/"><span class="tag">AMD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ASPLOS/"><span class="tag">ASPLOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ATI/"><span class="tag">ATI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AVX/"><span class="tag">AVX</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Alpha/"><span class="tag">Alpha</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Analysis/"><span class="tag">Analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apt/"><span class="tag">Apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BHive/"><span class="tag">BHive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BT/"><span class="tag">BT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BTL/"><span class="tag">BTL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Baka-Mitai/"><span class="tag">Baka Mitai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Big-Endian/"><span class="tag">Big-Endian</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SHAOJIE&#039;S BOOK" height="28"></a><p class="is-size-7"><span>&copy; 2023 Shaojie Tan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Kirrito-k423/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>